"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const cdk = require("../../core");
const appmesh = require("../lib");
describe('gateway route', () => {
    describe('When creating a GatewayRoute', () => {
        test('should have expected defaults', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                listeners: [appmesh.VirtualGatewayListener.http()],
                mesh: mesh,
            });
            const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                virtualServiceName: 'target.local',
            });
            // Add an HTTP Route
            virtualGateway.addGatewayRoute('gateway-http-route', {
                routeSpec: appmesh.GatewayRouteSpec.http({
                    routeTarget: virtualService,
                }),
                gatewayRouteName: 'gateway-http-route',
            });
            virtualGateway.addGatewayRoute('gateway-http2-route', {
                routeSpec: appmesh.GatewayRouteSpec.http2({
                    routeTarget: virtualService,
                }),
                gatewayRouteName: 'gateway-http2-route',
            });
            virtualGateway.addGatewayRoute('gateway-grpc-route', {
                routeSpec: appmesh.GatewayRouteSpec.grpc({
                    routeTarget: virtualService,
                    match: {
                        serviceName: virtualService.virtualServiceName,
                    },
                }),
                gatewayRouteName: 'gateway-grpc-route',
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                GatewayRouteName: 'gateway-http-route',
                MeshOwner: assertions_1.Match.absent(),
                Spec: {
                    HttpRoute: {
                        Action: {
                            Target: {
                                VirtualService: {
                                    VirtualServiceName: {
                                        'Fn::GetAtt': ['vs1732C2645', 'VirtualServiceName'],
                                    },
                                },
                            },
                        },
                        Match: {
                            Prefix: '/',
                        },
                    },
                },
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                GatewayRouteName: 'gateway-http2-route',
                Spec: {
                    Http2Route: {
                        Action: {
                            Target: {
                                VirtualService: {
                                    VirtualServiceName: {
                                        'Fn::GetAtt': ['vs1732C2645', 'VirtualServiceName'],
                                    },
                                },
                            },
                        },
                        Match: {
                            Prefix: '/',
                        },
                    },
                },
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                GatewayRouteName: 'gateway-grpc-route',
                Spec: {
                    GrpcRoute: {
                        Action: {
                            Target: {
                                VirtualService: {
                                    VirtualServiceName: {
                                        'Fn::GetAtt': ['vs1732C2645', 'VirtualServiceName'],
                                    },
                                },
                            },
                        },
                        Match: {
                            ServiceName: {
                                'Fn::GetAtt': ['vs1732C2645', 'VirtualServiceName'],
                            },
                        },
                    },
                },
            });
        });
        test('should throw an exception if you start an http prefix match not with a /', () => {
            // GIVEN
            const stack = new cdk.Stack();
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const virtualService = new appmesh.VirtualService(stack, 'testVirtualService', {
                virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
            });
            expect(() => appmesh.GatewayRouteSpec.http({
                routeTarget: virtualService,
                match: {
                    path: appmesh.HttpRoutePathMatch.startsWith('wrong'),
                },
            }).bind(stack)).toThrow(/Prefix Path for the match must start with \'\/\', got: wrong/);
        });
        describe('with shared service mesh', () => {
            test('Mesh Owner is the AWS account ID of the account that shared the mesh with your account', () => {
                // GIVEN
                const app = new cdk.App();
                const meshEnv = { account: '1234567899', region: 'us-west-2' };
                const gatewayRouteEnv = { account: '9987654321', region: 'us-west-2' };
                // Creating stack in Account 9987654321
                const stack = new cdk.Stack(app, 'mySharedStack', { env: gatewayRouteEnv });
                // Mesh is in Account 1234567899
                const sharedMesh = appmesh.Mesh.fromMeshArn(stack, 'shared-mesh', `arn:aws:appmesh:${meshEnv.region}:${meshEnv.account}:mesh/shared-mesh`);
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: sharedMesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(sharedMesh),
                    virtualServiceName: 'target.local',
                });
                // WHEN
                new appmesh.GatewayRoute(stack, 'test-node', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                    }),
                    virtualGateway: virtualGateway,
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    MeshOwner: meshEnv.account,
                });
            });
        });
        describe('with host name rewrite', () => {
            test('should set default target host name', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP Route
                virtualGateway.addGatewayRoute('gateway-http-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                        match: {
                            rewriteRequestHostname: true,
                        },
                    }),
                    gatewayRouteName: 'gateway-http-route',
                });
                virtualGateway.addGatewayRoute('gateway-grpc-route', {
                    routeSpec: appmesh.GatewayRouteSpec.grpc({
                        routeTarget: virtualService,
                        match: {
                            serviceName: virtualService.virtualServiceName,
                            rewriteRequestHostname: false,
                        },
                    }),
                    gatewayRouteName: 'gateway-grpc-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http-route',
                    Spec: {
                        HttpRoute: {
                            Action: {
                                Rewrite: {
                                    Hostname: {
                                        DefaultTargetHostname: 'ENABLED',
                                    },
                                },
                            },
                        },
                    },
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-grpc-route',
                    Spec: {
                        GrpcRoute: {
                            Action: {
                                Rewrite: {
                                    Hostname: {
                                        DefaultTargetHostname: 'DISABLED',
                                    },
                                },
                            },
                        },
                    },
                });
            });
        });
        describe('with wholePath rewrite', () => {
            test('should set exact path', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP2 Route
                virtualGateway.addGatewayRoute('gateway-http2-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http2({
                        routeTarget: virtualService,
                        match: {
                            method: appmesh.HttpRouteMethod.GET,
                            path: appmesh.HttpGatewayRoutePathMatch.exactly('/test', '/rewrittenPath'),
                        },
                    }),
                    gatewayRouteName: 'gateway-http2-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http2-route',
                    Spec: {
                        Http2Route: {
                            Action: {
                                Rewrite: {
                                    Path: {
                                        Exact: '/rewrittenPath',
                                    },
                                },
                            },
                        },
                    },
                });
            });
        });
        describe('with prefix rewrite', () => {
            test('should set default prefix or value', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP Route
                virtualGateway.addGatewayRoute('gateway-http-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                        match: {
                            path: appmesh.HttpGatewayRoutePathMatch.startsWith('/test/', ''),
                        },
                    }),
                    gatewayRouteName: 'gateway-http-route',
                });
                // Add an HTTP2 Route
                virtualGateway.addGatewayRoute('gateway-http2-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http2({
                        routeTarget: virtualService,
                        match: {
                            path: appmesh.HttpGatewayRoutePathMatch.startsWith('/test/', '/rewrittenUri/'),
                        },
                    }),
                    gatewayRouteName: 'gateway-http2-route',
                });
                // Add an HTTP2 Route
                virtualGateway.addGatewayRoute('gateway-http2-route-1', {
                    routeSpec: appmesh.GatewayRouteSpec.http2({
                        routeTarget: virtualService,
                        match: {
                            path: appmesh.HttpGatewayRoutePathMatch.startsWith('/test/'),
                        },
                    }),
                    gatewayRouteName: 'gateway-http2-route-1',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http-route',
                    Spec: {
                        HttpRoute: {
                            Action: {
                                Rewrite: {
                                    Prefix: {
                                        DefaultPrefix: 'DISABLED',
                                    },
                                },
                            },
                        },
                    },
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http2-route',
                    Spec: {
                        Http2Route: {
                            Action: {
                                Rewrite: {
                                    Prefix: {
                                        Value: '/rewrittenUri/',
                                    },
                                },
                            },
                        },
                    },
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http2-route-1',
                    Spec: {
                        Http2Route: {
                            Action: {
                                Rewrite: assertions_1.Match.absent(),
                            },
                        },
                    },
                });
            });
            test("should throw an error if the prefix match does not start and end with '/'", () => {
                // GIVEN
                const stack = new cdk.Stack();
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // WHEN + THEN
                expect(() => {
                    virtualGateway.addGatewayRoute('gateway-http-route', {
                        routeSpec: appmesh.GatewayRouteSpec.http({
                            routeTarget: virtualService,
                            match: {
                                path: appmesh.HttpGatewayRoutePathMatch.startsWith('test/', '/rewrittenUri/'),
                            },
                        }),
                        gatewayRouteName: 'gateway-http-route',
                    });
                }).toThrow(/Prefix path for the match must start with \'\/\', got: test\//);
                expect(() => {
                    virtualGateway.addGatewayRoute('gateway-http2-route', {
                        routeSpec: appmesh.GatewayRouteSpec.http2({
                            routeTarget: virtualService,
                            match: {
                                path: appmesh.HttpGatewayRoutePathMatch.startsWith('/test', '/rewrittenUri/'),
                            },
                        }),
                        gatewayRouteName: 'gateway-http2-route',
                    });
                }).toThrow(/When prefix path for the rewrite is specified, prefix path for the match must end with \'\/\', got: \/test/);
            });
            test("should throw an error if the custom prefix does not start and end with '/'", () => {
                // GIVEN
                const stack = new cdk.Stack();
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // WHEN + THEN
                expect(() => {
                    virtualGateway.addGatewayRoute('gateway-http2-route', {
                        routeSpec: appmesh.GatewayRouteSpec.http2({
                            routeTarget: virtualService,
                            match: {
                                path: appmesh.HttpGatewayRoutePathMatch.startsWith('/', 'rewrittenUri/'),
                            },
                        }),
                        gatewayRouteName: 'gateway-http2-route',
                    });
                }).toThrow(/Prefix path for the rewrite must start and end with \'\/\', got: rewrittenUri\//);
                expect(() => {
                    virtualGateway.addGatewayRoute('gateway-http2-route-1', {
                        routeSpec: appmesh.GatewayRouteSpec.http2({
                            routeTarget: virtualService,
                            match: {
                                path: appmesh.HttpGatewayRoutePathMatch.startsWith('/', '/rewrittenUri'),
                            },
                        }),
                        gatewayRouteName: 'gateway-http2-route',
                    });
                }).toThrow(/Prefix path for the rewrite must start and end with \'\/\', got: \/rewrittenUri/);
            });
        });
        describe('with host name match', () => {
            test('should match based on host name', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP Route
                virtualGateway.addGatewayRoute('gateway-http-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                        match: {
                            hostname: appmesh.GatewayRouteHostnameMatch.exactly('example.com'),
                        },
                    }),
                    gatewayRouteName: 'gateway-http-route',
                });
                virtualGateway.addGatewayRoute('gateway-grpc-route', {
                    routeSpec: appmesh.GatewayRouteSpec.grpc({
                        routeTarget: virtualService,
                        match: {
                            hostname: appmesh.GatewayRouteHostnameMatch.endsWith('.example.com'),
                        },
                    }),
                    gatewayRouteName: 'gateway-grpc-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http-route',
                    Spec: {
                        HttpRoute: {
                            Match: {
                                Hostname: {
                                    Exact: 'example.com',
                                },
                            },
                            Action: {
                                Rewrite: assertions_1.Match.absent(),
                            },
                        },
                    },
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-grpc-route',
                    Spec: {
                        GrpcRoute: {
                            Match: {
                                Hostname: {
                                    Suffix: '.example.com',
                                },
                            },
                        },
                    },
                });
            });
        });
        describe('with metadata match', () => {
            test('should match based on metadata', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                virtualGateway.addGatewayRoute('gateway-grpc-route', {
                    routeSpec: appmesh.GatewayRouteSpec.grpc({
                        routeTarget: virtualService,
                        match: {
                            metadata: [
                                appmesh.HeaderMatch.valueIs('Content-Type', 'application/json'),
                                appmesh.HeaderMatch.valueIsNot('Content-Type', 'text/html'),
                                appmesh.HeaderMatch.valueStartsWith('Content-Type', 'application/'),
                                appmesh.HeaderMatch.valueDoesNotStartWith('Content-Type', 'text/'),
                                appmesh.HeaderMatch.valueEndsWith('Content-Type', '/json'),
                                appmesh.HeaderMatch.valueDoesNotEndWith('Content-Type', '/json+foobar'),
                                appmesh.HeaderMatch.valueMatchesRegex('Content-Type', 'application/.*'),
                                appmesh.HeaderMatch.valueDoesNotMatchRegex('Content-Type', 'text/.*'),
                                appmesh.HeaderMatch.valuesIsInRange('Max-Forward', 1, 5),
                                appmesh.HeaderMatch.valuesIsNotInRange('Max-Forward', 1, 5),
                            ],
                        },
                    }),
                    gatewayRouteName: 'gateway-grpc-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-grpc-route',
                    Spec: {
                        GrpcRoute: {
                            Match: {
                                Metadata: [
                                    {
                                        Invert: false,
                                        Match: { Exact: 'application/json' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Exact: 'text/html' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: { Prefix: 'application/' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Prefix: 'text/' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: { Suffix: '/json' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Suffix: '/json+foobar' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: { Regex: 'application/.*' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Regex: 'text/.*' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: {
                                            Range: {
                                                End: 5,
                                                Start: 1,
                                            },
                                        },
                                        Name: 'Max-Forward',
                                    },
                                    {
                                        Invert: true,
                                        Match: {
                                            Range: {
                                                End: 5,
                                                Start: 1,
                                            },
                                        },
                                        Name: 'Max-Forward',
                                    },
                                ],
                            },
                        },
                    },
                });
            });
            test('should throw an error if the array length is invalid', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                expect(() => {
                    virtualGateway.addGatewayRoute('gateway-grpc-route', {
                        routeSpec: appmesh.GatewayRouteSpec.grpc({
                            routeTarget: virtualService,
                            match: {
                                // size 0 array
                                metadata: [],
                            },
                        }),
                        gatewayRouteName: 'gateway-grpc-route',
                    });
                }).toThrow(/Number of metadata provided for matching must be between 1 and 10/);
                expect(() => {
                    virtualGateway.addGatewayRoute('gateway-grpc-route-1', {
                        routeSpec: appmesh.GatewayRouteSpec.grpc({
                            routeTarget: virtualService,
                            match: {
                                // size 11 array
                                metadata: [
                                    appmesh.HeaderMatch.valueIs('Content-Type', 'application/json'),
                                    appmesh.HeaderMatch.valueIs('Content-Type', 'application/json'),
                                    appmesh.HeaderMatch.valueIsNot('Content-Type', 'text/html'),
                                    appmesh.HeaderMatch.valueStartsWith('Content-Type', 'application/'),
                                    appmesh.HeaderMatch.valueDoesNotStartWith('Content-Type', 'text/'),
                                    appmesh.HeaderMatch.valueEndsWith('Content-Type', '/json'),
                                    appmesh.HeaderMatch.valueDoesNotEndWith('Content-Type', '/json+foobar'),
                                    appmesh.HeaderMatch.valueMatchesRegex('Content-Type', 'application/.*'),
                                    appmesh.HeaderMatch.valueDoesNotMatchRegex('Content-Type', 'text/.*'),
                                    appmesh.HeaderMatch.valuesIsInRange('Max-Forward', 1, 5),
                                    appmesh.HeaderMatch.valuesIsNotInRange('Max-Forward', 1, 5),
                                ],
                            },
                        }),
                        gatewayRouteName: 'gateway-grpc-route',
                    });
                }).toThrow(/Number of metadata provided for matching must be between 1 and 10/);
            });
        });
        describe('with header match', () => {
            test('should match based on header', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP Route
                virtualGateway.addGatewayRoute('gateway-http-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                        match: {
                            headers: [
                                appmesh.HeaderMatch.valueIs('Content-Type', 'application/json'),
                                appmesh.HeaderMatch.valueIsNot('Content-Type', 'text/html'),
                                appmesh.HeaderMatch.valueStartsWith('Content-Type', 'application/'),
                                appmesh.HeaderMatch.valueDoesNotStartWith('Content-Type', 'text/'),
                                appmesh.HeaderMatch.valueEndsWith('Content-Type', '/json'),
                                appmesh.HeaderMatch.valueDoesNotEndWith('Content-Type', '/json+foobar'),
                                appmesh.HeaderMatch.valueMatchesRegex('Content-Type', 'application/.*'),
                                appmesh.HeaderMatch.valueDoesNotMatchRegex('Content-Type', 'text/.*'),
                                appmesh.HeaderMatch.valuesIsInRange('Max-Forward', 1, 5),
                                appmesh.HeaderMatch.valuesIsNotInRange('Max-Forward', 1, 5),
                            ],
                        },
                    }),
                    gatewayRouteName: 'gateway-http-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http-route',
                    Spec: {
                        HttpRoute: {
                            Match: {
                                Headers: [
                                    {
                                        Invert: false,
                                        Match: { Exact: 'application/json' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Exact: 'text/html' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: { Prefix: 'application/' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Prefix: 'text/' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: { Suffix: '/json' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Suffix: '/json+foobar' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: { Regex: 'application/.*' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: true,
                                        Match: { Regex: 'text/.*' },
                                        Name: 'Content-Type',
                                    },
                                    {
                                        Invert: false,
                                        Match: {
                                            Range: {
                                                End: 5,
                                                Start: 1,
                                            },
                                        },
                                        Name: 'Max-Forward',
                                    },
                                    {
                                        Invert: true,
                                        Match: {
                                            Range: {
                                                End: 5,
                                                Start: 1,
                                            },
                                        },
                                        Name: 'Max-Forward',
                                    },
                                ],
                            },
                        },
                    },
                });
            });
        });
        describe('with method match', () => {
            test('should match based on method', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP Route
                virtualGateway.addGatewayRoute('gateway-http-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                        match: {
                            method: appmesh.HttpRouteMethod.DELETE,
                        },
                    }),
                    gatewayRouteName: 'gateway-http-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http-route',
                    Spec: {
                        HttpRoute: {
                            Match: {
                                Method: 'DELETE',
                            },
                        },
                    },
                });
            });
        });
        describe('with path match', () => {
            test('should match based on path', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP Route
                virtualGateway.addGatewayRoute('gateway-http-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                        match: {
                            path: appmesh.HttpGatewayRoutePathMatch.exactly('/exact', undefined),
                        },
                    }),
                    gatewayRouteName: 'gateway-http-route',
                });
                // Add an HTTP2 Route
                virtualGateway.addGatewayRoute('gateway-http2-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http2({
                        routeTarget: virtualService,
                        match: {
                            path: appmesh.HttpGatewayRoutePathMatch.regex('regex'),
                        },
                    }),
                    gatewayRouteName: 'gateway-http2-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http-route',
                    Spec: {
                        HttpRoute: {
                            Match: {
                                Path: {
                                    Exact: '/exact',
                                },
                            },
                            Action: {
                                Rewrite: assertions_1.Match.absent(),
                            },
                        },
                    },
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http2-route',
                    Spec: {
                        Http2Route: {
                            Match: {
                                Path: {
                                    Regex: 'regex',
                                },
                            },
                        },
                    },
                });
            });
            test('should throw an error if empty string is passed', () => {
                // GIVEN
                const stack = new cdk.Stack();
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // WHEN + THEN
                expect(() => {
                    virtualGateway.addGatewayRoute('gateway-http-route', {
                        routeSpec: appmesh.GatewayRouteSpec.http({
                            routeTarget: virtualService,
                            match: {
                                path: appmesh.HttpGatewayRoutePathMatch.exactly('/exact', ''),
                            },
                        }),
                        gatewayRouteName: 'gateway-http-route',
                    });
                }).toThrow(/Exact Path for the rewrite cannot be empty. Unlike startsWith\(\) method, no automatic rewrite on whole path match/);
            });
        });
        describe('with query paramater match', () => {
            test('should match based on query parameter', () => {
                // GIVEN
                const stack = new cdk.Stack();
                // WHEN
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                    listeners: [appmesh.VirtualGatewayListener.http()],
                    mesh: mesh,
                });
                const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                    virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                    virtualServiceName: 'target.local',
                });
                // Add an HTTP Route
                virtualGateway.addGatewayRoute('gateway-http-route', {
                    routeSpec: appmesh.GatewayRouteSpec.http({
                        routeTarget: virtualService,
                        match: {
                            queryParameters: [
                                appmesh.QueryParameterMatch.valueIs('query-field', 'value'),
                            ],
                        },
                    }),
                    gatewayRouteName: 'gateway-http-route',
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                    GatewayRouteName: 'gateway-http-route',
                    Spec: {
                        HttpRoute: {
                            Match: {
                                QueryParameters: [
                                    {
                                        Name: 'query-field',
                                        Match: {
                                            Exact: 'value',
                                        },
                                    },
                                ],
                            },
                        },
                    },
                });
            });
        });
    });
    describe('with empty HTTP/HTTP2match', () => {
        test('should match based on prefix', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                listeners: [appmesh.VirtualGatewayListener.http()],
                mesh: mesh,
            });
            const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                virtualServiceName: 'target.local',
            });
            // Add an HTTP Route
            virtualGateway.addGatewayRoute('gateway-http-route', {
                routeSpec: appmesh.GatewayRouteSpec.http({
                    routeTarget: virtualService,
                    match: {},
                }),
                gatewayRouteName: 'gateway-http-route',
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                GatewayRouteName: 'gateway-http-route',
                Spec: {
                    HttpRoute: {
                        Match: {
                            Prefix: '/',
                        },
                    },
                },
            });
        });
    });
    describe('with priority', () => {
        test('should set the priority for http gateway route', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                listeners: [appmesh.VirtualGatewayListener.http()],
                mesh: mesh,
            });
            const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                virtualServiceName: 'target.local',
            });
            // Add an HTTP Route
            virtualGateway.addGatewayRoute('gateway-http-route', {
                routeSpec: appmesh.GatewayRouteSpec.http({
                    routeTarget: virtualService,
                    match: {},
                    priority: 100,
                }),
                gatewayRouteName: 'gateway-http-route',
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                Spec: {
                    Priority: 100,
                },
            });
        });
        test('should set the priority for grpc gateway route', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const virtualGateway = new appmesh.VirtualGateway(stack, 'gateway-1', {
                listeners: [appmesh.VirtualGatewayListener.grpc()],
                mesh: mesh,
            });
            const virtualService = new appmesh.VirtualService(stack, 'vs-1', {
                virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
                virtualServiceName: 'target.local',
            });
            // Add an Grpc Route
            new appmesh.GatewayRoute(stack, 'test-node', {
                routeSpec: appmesh.GatewayRouteSpec.grpc({
                    match: {
                        serviceName: virtualService.virtualServiceName,
                    },
                    routeTarget: virtualService,
                    priority: 500,
                }),
                virtualGateway: virtualGateway,
                gatewayRouteName: 'routeWithPriority',
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                Spec: {
                    Priority: 500,
                },
            });
        });
    });
    test('Can import Gateway Routes using an ARN', () => {
        const app = new cdk.App();
        // GIVEN
        const stack = new cdk.Stack(app, 'Imports', {
            env: { account: '123456789012', region: 'us-east-1' },
        });
        const meshName = 'test-mesh';
        const virtualGatewayName = 'test-gateway';
        const gatewayRouteName = 'test-gateway-route';
        const arn = `arn:aws:appmesh:us-east-1:123456789012:mesh/${meshName}/virtualGateway/${virtualGatewayName}/gatewayRoute/${gatewayRouteName}`;
        // WHEN
        const gatewayRoute = appmesh.GatewayRoute.fromGatewayRouteArn(stack, 'importedGatewayRoute', arn);
        // THEN
        expect(gatewayRoute.gatewayRouteName).toEqual(gatewayRouteName);
        expect(gatewayRoute.virtualGateway.virtualGatewayName).toEqual(virtualGatewayName);
        expect(gatewayRoute.virtualGateway.mesh.meshName).toEqual(meshName);
    });
    test('Can import Gateway Routes using attributes', () => {
        const app = new cdk.App();
        // GIVEN
        const stack = new cdk.Stack(app, 'Imports', {
            env: { account: '123456789012', region: 'us-east-1' },
        });
        const meshName = 'test-mesh';
        const virtualGatewayName = 'test-gateway';
        const gatewayRouteName = 'test-gateway-route';
        // WHEN
        const mesh = appmesh.Mesh.fromMeshName(stack, 'Mesh', meshName);
        const gateway = mesh.addVirtualGateway('VirtualGateway', {
            virtualGatewayName: virtualGatewayName,
        });
        const gatewayRoute = appmesh.GatewayRoute.fromGatewayRouteAttributes(stack, 'importedGatewayRoute', {
            gatewayRouteName: gatewayRouteName,
            virtualGateway: gateway,
        });
        // THEN
        expect(gatewayRoute.gatewayRouteName).toEqual(gatewayRouteName);
        expect(gatewayRoute.virtualGateway.mesh.meshName).toEqual(meshName);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2F0ZXdheS1yb3V0ZS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZ2F0ZXdheS1yb3V0ZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQW1EO0FBQ25ELGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7SUFDN0IsUUFBUSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtRQUM1QyxJQUFJLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLFFBQVE7WUFDUixNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUU5QixPQUFPO1lBQ1AsTUFBTSxJQUFJLEdBQUcsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7Z0JBQzNDLFFBQVEsRUFBRSxXQUFXO2FBQ3RCLENBQUMsQ0FBQztZQUVILE1BQU0sY0FBYyxHQUFHLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFO2dCQUNwRSxTQUFTLEVBQUUsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ2xELElBQUksRUFBRSxJQUFJO2FBQ1gsQ0FBQyxDQUFDO1lBRUgsTUFBTSxjQUFjLEdBQUcsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7Z0JBQy9ELHNCQUFzQixFQUFFLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO2dCQUNqRSxrQkFBa0IsRUFBRSxjQUFjO2FBQ25DLENBQUMsQ0FBQztZQUVILG9CQUFvQjtZQUNwQixjQUFjLENBQUMsZUFBZSxDQUFDLG9CQUFvQixFQUFFO2dCQUNuRCxTQUFTLEVBQUUsT0FBTyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQztvQkFDdkMsV0FBVyxFQUFFLGNBQWM7aUJBQzVC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QUFnQixFQUFFLGdCQUFnQjtZQUNsQyxjQUFjLEVBQUUsT0FBTztTQUN4QixDQUFDLENBQUM7UUFDSCxPQUFPO1FBQ1AsTUFBTSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFdEUsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdGNoLCBUZW1wbGF0ZSB9IGZyb20gJy4uLy4uL2Fzc2VydGlvbnMnO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJy4uLy4uL2NvcmUnO1xuaW1wb3J0ICogYXMgYXBwbWVzaCBmcm9tICcuLi9saWInO1xuXG5kZXNjcmliZSgnZ2F0ZXdheSByb3V0ZScsICgpID0+IHtcbiAgZGVzY3JpYmUoJ1doZW4gY3JlYXRpbmcgYSBHYXRld2F5Um91dGUnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgZXhwZWN0ZWQgZGVmYXVsdHMnLCAoKSA9PiB7XG4gICAgICAvLyBHSVZFTlxuICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgIC8vIFdIRU5cbiAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICB2aXJ0dWFsU2VydmljZVByb3ZpZGVyOiBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlUHJvdmlkZXIubm9uZShtZXNoKSxcbiAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBZGQgYW4gSFRUUCBSb3V0ZVxuICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAtcm91dGUnLCB7XG4gICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgfSksXG4gICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgfSk7XG5cbiAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwMi1yb3V0ZScsIHtcbiAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cDIoe1xuICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgfSksXG4gICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAyLXJvdXRlJyxcbiAgICAgIH0pO1xuXG4gICAgICB2aXJ0dWFsR2F0ZXdheS5hZGRHYXRld2F5Um91dGUoJ2dhdGV3YXktZ3JwYy1yb3V0ZScsIHtcbiAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuZ3JwYyh7XG4gICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICBzZXJ2aWNlTmFtZTogdmlydHVhbFNlcnZpY2UudmlydHVhbFNlcnZpY2VOYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1ncnBjLXJvdXRlJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUSEVOXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICBNZXNoT3duZXI6IE1hdGNoLmFic2VudCgpLFxuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgSHR0cFJvdXRlOiB7XG4gICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgVGFyZ2V0OiB7XG4gICAgICAgICAgICAgICAgVmlydHVhbFNlcnZpY2U6IHtcbiAgICAgICAgICAgICAgICAgIFZpcnR1YWxTZXJ2aWNlTmFtZToge1xuICAgICAgICAgICAgICAgICAgICAnRm46OkdldEF0dCc6IFsndnMxNzMyQzI2NDUnLCAnVmlydHVhbFNlcnZpY2VOYW1lJ10sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgUHJlZml4OiAnLycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OkdhdGV3YXlSb3V0ZScsIHtcbiAgICAgICAgR2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktaHR0cDItcm91dGUnLFxuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgSHR0cDJSb3V0ZToge1xuICAgICAgICAgICAgQWN0aW9uOiB7XG4gICAgICAgICAgICAgIFRhcmdldDoge1xuICAgICAgICAgICAgICAgIFZpcnR1YWxTZXJ2aWNlOiB7XG4gICAgICAgICAgICAgICAgICBWaXJ0dWFsU2VydmljZU5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbJ3ZzMTczMkMyNjQ1JywgJ1ZpcnR1YWxTZXJ2aWNlTmFtZSddLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIE1hdGNoOiB7XG4gICAgICAgICAgICAgIFByZWZpeDogJy8nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWdycGMtcm91dGUnLFxuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgR3JwY1JvdXRlOiB7XG4gICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgVGFyZ2V0OiB7XG4gICAgICAgICAgICAgICAgVmlydHVhbFNlcnZpY2U6IHtcbiAgICAgICAgICAgICAgICAgIFZpcnR1YWxTZXJ2aWNlTmFtZToge1xuICAgICAgICAgICAgICAgICAgICAnRm46OkdldEF0dCc6IFsndnMxNzMyQzI2NDUnLCAnVmlydHVhbFNlcnZpY2VOYW1lJ10sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgU2VydmljZU5hbWU6IHtcbiAgICAgICAgICAgICAgICAnRm46OkdldEF0dCc6IFsndnMxNzMyQzI2NDUnLCAnVmlydHVhbFNlcnZpY2VOYW1lJ10sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRocm93IGFuIGV4Y2VwdGlvbiBpZiB5b3Ugc3RhcnQgYW4gaHR0cCBwcmVmaXggbWF0Y2ggbm90IHdpdGggYSAvJywgKCkgPT4ge1xuICAgICAgLy8gR0lWRU5cbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aXJ0dWFsU2VydmljZSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlKHN0YWNrLCAndGVzdFZpcnR1YWxTZXJ2aWNlJywge1xuICAgICAgICB2aXJ0dWFsU2VydmljZVByb3ZpZGVyOiBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlUHJvdmlkZXIubm9uZShtZXNoKSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KCgpID0+IGFwcG1lc2guR2F0ZXdheVJvdXRlU3BlYy5odHRwKHtcbiAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICBtYXRjaDoge1xuICAgICAgICAgIHBhdGg6IGFwcG1lc2guSHR0cFJvdXRlUGF0aE1hdGNoLnN0YXJ0c1dpdGgoJ3dyb25nJyksXG4gICAgICAgIH0sXG4gICAgICB9KS5iaW5kKHN0YWNrKSkudG9UaHJvdygvUHJlZml4IFBhdGggZm9yIHRoZSBtYXRjaCBtdXN0IHN0YXJ0IHdpdGggXFwnXFwvXFwnLCBnb3Q6IHdyb25nLyk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd3aXRoIHNoYXJlZCBzZXJ2aWNlIG1lc2gnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdNZXNoIE93bmVyIGlzIHRoZSBBV1MgYWNjb3VudCBJRCBvZiB0aGUgYWNjb3VudCB0aGF0IHNoYXJlZCB0aGUgbWVzaCB3aXRoIHlvdXIgYWNjb3VudCcsICgpID0+IHtcbiAgICAgICAgLy8gR0lWRU5cbiAgICAgICAgY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcbiAgICAgICAgY29uc3QgbWVzaEVudiA9IHsgYWNjb3VudDogJzEyMzQ1Njc4OTknLCByZWdpb246ICd1cy13ZXN0LTInIH07XG4gICAgICAgIGNvbnN0IGdhdGV3YXlSb3V0ZUVudiA9IHsgYWNjb3VudDogJzk5ODc2NTQzMjEnLCByZWdpb246ICd1cy13ZXN0LTInIH07XG5cbiAgICAgICAgLy8gQ3JlYXRpbmcgc3RhY2sgaW4gQWNjb3VudCA5OTg3NjU0MzIxXG4gICAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjayhhcHAsICdteVNoYXJlZFN0YWNrJywgeyBlbnY6IGdhdGV3YXlSb3V0ZUVudiB9KTtcbiAgICAgICAgLy8gTWVzaCBpcyBpbiBBY2NvdW50IDEyMzQ1Njc4OTlcbiAgICAgICAgY29uc3Qgc2hhcmVkTWVzaCA9IGFwcG1lc2guTWVzaC5mcm9tTWVzaEFybihzdGFjaywgJ3NoYXJlZC1tZXNoJyxcbiAgICAgICAgICBgYXJuOmF3czphcHBtZXNoOiR7bWVzaEVudi5yZWdpb259OiR7bWVzaEVudi5hY2NvdW50fTptZXNoL3NoYXJlZC1tZXNoYCk7XG4gICAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoKV0sXG4gICAgICAgICAgbWVzaDogc2hhcmVkTWVzaCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlUHJvdmlkZXI6IGFwcG1lc2guVmlydHVhbFNlcnZpY2VQcm92aWRlci5ub25lKHNoYXJlZE1lc2gpLFxuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFdIRU5cbiAgICAgICAgbmV3IGFwcG1lc2guR2F0ZXdheVJvdXRlKHN0YWNrLCAndGVzdC1ub2RlJywge1xuICAgICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHZpcnR1YWxHYXRld2F5OiB2aXJ0dWFsR2F0ZXdheSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVEhFTlxuICAgICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgICAgTWVzaE93bmVyOiBtZXNoRW52LmFjY291bnQsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnd2l0aCBob3N0IG5hbWUgcmV3cml0ZScsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgZGVmYXVsdCB0YXJnZXQgaG9zdCBuYW1lJywgKCkgPT4ge1xuICAgICAgICAvLyBHSVZFTlxuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoKV0sXG4gICAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlydHVhbFNlcnZpY2UgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsU2VydmljZShzdGFjaywgJ3ZzLTEnLCB7XG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFuIEhUVFAgUm91dGVcbiAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAtcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cCh7XG4gICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICByZXdyaXRlUmVxdWVzdEhvc3RuYW1lOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwLXJvdXRlJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWdycGMtcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuZ3JwYyh7XG4gICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBzZXJ2aWNlTmFtZTogdmlydHVhbFNlcnZpY2UudmlydHVhbFNlcnZpY2VOYW1lLFxuICAgICAgICAgICAgICByZXdyaXRlUmVxdWVzdEhvc3RuYW1lOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktZ3JwYy1yb3V0ZScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRIRU5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIEh0dHBSb3V0ZToge1xuICAgICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgICBSZXdyaXRlOiB7XG4gICAgICAgICAgICAgICAgICBIb3N0bmFtZToge1xuICAgICAgICAgICAgICAgICAgICBEZWZhdWx0VGFyZ2V0SG9zdG5hbWU6ICdFTkFCTEVEJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWdycGMtcm91dGUnLFxuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIEdycGNSb3V0ZToge1xuICAgICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgICBSZXdyaXRlOiB7XG4gICAgICAgICAgICAgICAgICBIb3N0bmFtZToge1xuICAgICAgICAgICAgICAgICAgICBEZWZhdWx0VGFyZ2V0SG9zdG5hbWU6ICdESVNBQkxFRCcsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnd2l0aCB3aG9sZVBhdGggcmV3cml0ZScsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgZXhhY3QgcGF0aCcsICgpID0+IHtcbiAgICAgICAgLy8gR0lWRU5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgICAgLy8gV0hFTlxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlUHJvdmlkZXI6IGFwcG1lc2guVmlydHVhbFNlcnZpY2VQcm92aWRlci5ub25lKG1lc2gpLFxuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBhbiBIVFRQMiBSb3V0ZVxuICAgICAgICB2aXJ0dWFsR2F0ZXdheS5hZGRHYXRld2F5Um91dGUoJ2dhdGV3YXktaHR0cDItcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cDIoe1xuICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBhcHBtZXNoLkh0dHBSb3V0ZU1ldGhvZC5HRVQsXG4gICAgICAgICAgICAgIHBhdGg6IGFwcG1lc2guSHR0cEdhdGV3YXlSb3V0ZVBhdGhNYXRjaC5leGFjdGx5KCcvdGVzdCcsICcvcmV3cml0dGVuUGF0aCcpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwMi1yb3V0ZScsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUSEVOXG4gICAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OkdhdGV3YXlSb3V0ZScsIHtcbiAgICAgICAgICBHYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwMi1yb3V0ZScsXG4gICAgICAgICAgU3BlYzoge1xuICAgICAgICAgICAgSHR0cDJSb3V0ZToge1xuICAgICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgICBSZXdyaXRlOiB7XG4gICAgICAgICAgICAgICAgICBQYXRoOiB7XG4gICAgICAgICAgICAgICAgICAgIEV4YWN0OiAnL3Jld3JpdHRlblBhdGgnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3dpdGggcHJlZml4IHJld3JpdGUnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc2V0IGRlZmF1bHQgcHJlZml4IG9yIHZhbHVlJywgKCkgPT4ge1xuICAgICAgICAvLyBHSVZFTlxuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoKV0sXG4gICAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlydHVhbFNlcnZpY2UgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsU2VydmljZShzdGFjaywgJ3ZzLTEnLCB7XG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFuIEhUVFAgUm91dGVcbiAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAtcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cCh7XG4gICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBwYXRoOiBhcHBtZXNoLkh0dHBHYXRld2F5Um91dGVQYXRoTWF0Y2guc3RhcnRzV2l0aCgnL3Rlc3QvJywgJycpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwLXJvdXRlJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFuIEhUVFAyIFJvdXRlXG4gICAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwMi1yb3V0ZScsIHtcbiAgICAgICAgICByb3V0ZVNwZWM6IGFwcG1lc2guR2F0ZXdheVJvdXRlU3BlYy5odHRwMih7XG4gICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBwYXRoOiBhcHBtZXNoLkh0dHBHYXRld2F5Um91dGVQYXRoTWF0Y2guc3RhcnRzV2l0aCgnL3Rlc3QvJywgJy9yZXdyaXR0ZW5VcmkvJyksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAyLXJvdXRlJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFuIEhUVFAyIFJvdXRlXG4gICAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwMi1yb3V0ZS0xJywge1xuICAgICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAyKHtcbiAgICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICAgIHBhdGg6IGFwcG1lc2guSHR0cEdhdGV3YXlSb3V0ZVBhdGhNYXRjaC5zdGFydHNXaXRoKCcvdGVzdC8nKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktaHR0cDItcm91dGUtMScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRIRU5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIEh0dHBSb3V0ZToge1xuICAgICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgICBSZXdyaXRlOiB7XG4gICAgICAgICAgICAgICAgICBQcmVmaXg6IHtcbiAgICAgICAgICAgICAgICAgICAgRGVmYXVsdFByZWZpeDogJ0RJU0FCTEVEJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAyLXJvdXRlJyxcbiAgICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgICBIdHRwMlJvdXRlOiB7XG4gICAgICAgICAgICAgIEFjdGlvbjoge1xuICAgICAgICAgICAgICAgIFJld3JpdGU6IHtcbiAgICAgICAgICAgICAgICAgIFByZWZpeDoge1xuICAgICAgICAgICAgICAgICAgICBWYWx1ZTogJy9yZXdyaXR0ZW5VcmkvJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAyLXJvdXRlLTEnLFxuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIEh0dHAyUm91dGU6IHtcbiAgICAgICAgICAgICAgQWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgUmV3cml0ZTogTWF0Y2guYWJzZW50KCksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoXCJzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIHByZWZpeCBtYXRjaCBkb2VzIG5vdCBzdGFydCBhbmQgZW5kIHdpdGggJy8nXCIsICgpID0+IHtcbiAgICAgICAgLy8gR0lWRU5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgICAgY29uc3QgbWVzaCA9IG5ldyBhcHBtZXNoLk1lc2goc3RhY2ssICdtZXNoJywge1xuICAgICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlydHVhbEdhdGV3YXkgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ2dhdGV3YXktMScsIHtcbiAgICAgICAgICBsaXN0ZW5lcnM6IFthcHBtZXNoLlZpcnR1YWxHYXRld2F5TGlzdGVuZXIuaHR0cCgpXSxcbiAgICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2aXJ0dWFsU2VydmljZSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlKHN0YWNrLCAndnMtMScsIHtcbiAgICAgICAgICB2aXJ0dWFsU2VydmljZVByb3ZpZGVyOiBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlUHJvdmlkZXIubm9uZShtZXNoKSxcbiAgICAgICAgICB2aXJ0dWFsU2VydmljZU5hbWU6ICd0YXJnZXQubG9jYWwnLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXSEVOICsgVEhFTlxuICAgICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwLXJvdXRlJywge1xuICAgICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cCh7XG4gICAgICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBhcHBtZXNoLkh0dHBHYXRld2F5Um91dGVQYXRoTWF0Y2guc3RhcnRzV2l0aCgndGVzdC8nLCAnL3Jld3JpdHRlblVyaS8nKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktaHR0cC1yb3V0ZScsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLnRvVGhyb3coL1ByZWZpeCBwYXRoIGZvciB0aGUgbWF0Y2ggbXVzdCBzdGFydCB3aXRoIFxcJ1xcL1xcJywgZ290OiB0ZXN0XFwvLyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAyLXJvdXRlJywge1xuICAgICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cDIoe1xuICAgICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICAgICAgcGF0aDogYXBwbWVzaC5IdHRwR2F0ZXdheVJvdXRlUGF0aE1hdGNoLnN0YXJ0c1dpdGgoJy90ZXN0JywgJy9yZXdyaXR0ZW5VcmkvJyksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAyLXJvdXRlJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkudG9UaHJvdygvV2hlbiBwcmVmaXggcGF0aCBmb3IgdGhlIHJld3JpdGUgaXMgc3BlY2lmaWVkLCBwcmVmaXggcGF0aCBmb3IgdGhlIG1hdGNoIG11c3QgZW5kIHdpdGggXFwnXFwvXFwnLCBnb3Q6IFxcL3Rlc3QvKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KFwic2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZSBjdXN0b20gcHJlZml4IGRvZXMgbm90IHN0YXJ0IGFuZCBlbmQgd2l0aCAnLydcIiwgKCkgPT4ge1xuICAgICAgICAvLyBHSVZFTlxuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlUHJvdmlkZXI6IGFwcG1lc2guVmlydHVhbFNlcnZpY2VQcm92aWRlci5ub25lKG1lc2gpLFxuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFdIRU4gKyBUSEVOXG4gICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAyLXJvdXRlJywge1xuICAgICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cDIoe1xuICAgICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICAgICAgcGF0aDogYXBwbWVzaC5IdHRwR2F0ZXdheVJvdXRlUGF0aE1hdGNoLnN0YXJ0c1dpdGgoJy8nLCAncmV3cml0dGVuVXJpLycpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwMi1yb3V0ZScsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLnRvVGhyb3coL1ByZWZpeCBwYXRoIGZvciB0aGUgcmV3cml0ZSBtdXN0IHN0YXJ0IGFuZCBlbmQgd2l0aCBcXCdcXC9cXCcsIGdvdDogcmV3cml0dGVuVXJpXFwvLyk7XG5cbiAgICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgICB2aXJ0dWFsR2F0ZXdheS5hZGRHYXRld2F5Um91dGUoJ2dhdGV3YXktaHR0cDItcm91dGUtMScsIHtcbiAgICAgICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAyKHtcbiAgICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICAgIHBhdGg6IGFwcG1lc2guSHR0cEdhdGV3YXlSb3V0ZVBhdGhNYXRjaC5zdGFydHNXaXRoKCcvJywgJy9yZXdyaXR0ZW5VcmknKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktaHR0cDItcm91dGUnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KS50b1Rocm93KC9QcmVmaXggcGF0aCBmb3IgdGhlIHJld3JpdGUgbXVzdCBzdGFydCBhbmQgZW5kIHdpdGggXFwnXFwvXFwnLCBnb3Q6IFxcL3Jld3JpdHRlblVyaS8pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnd2l0aCBob3N0IG5hbWUgbWF0Y2gnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgbWF0Y2ggYmFzZWQgb24gaG9zdCBuYW1lJywgKCkgPT4ge1xuICAgICAgICAvLyBHSVZFTlxuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoKV0sXG4gICAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlydHVhbFNlcnZpY2UgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsU2VydmljZShzdGFjaywgJ3ZzLTEnLCB7XG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFuIEhUVFAgUm91dGVcbiAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAtcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cCh7XG4gICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBob3N0bmFtZTogYXBwbWVzaC5HYXRld2F5Um91dGVIb3N0bmFtZU1hdGNoLmV4YWN0bHkoJ2V4YW1wbGUuY29tJyksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICB9KTtcblxuICAgICAgICB2aXJ0dWFsR2F0ZXdheS5hZGRHYXRld2F5Um91dGUoJ2dhdGV3YXktZ3JwYy1yb3V0ZScsIHtcbiAgICAgICAgICByb3V0ZVNwZWM6IGFwcG1lc2guR2F0ZXdheVJvdXRlU3BlYy5ncnBjKHtcbiAgICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICAgIGhvc3RuYW1lOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZUhvc3RuYW1lTWF0Y2guZW5kc1dpdGgoJy5leGFtcGxlLmNvbScpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1ncnBjLXJvdXRlJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVEhFTlxuICAgICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgICAgR2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktaHR0cC1yb3V0ZScsXG4gICAgICAgICAgU3BlYzoge1xuICAgICAgICAgICAgSHR0cFJvdXRlOiB7XG4gICAgICAgICAgICAgIE1hdGNoOiB7XG4gICAgICAgICAgICAgICAgSG9zdG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgIEV4YWN0OiAnZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIEFjdGlvbjoge1xuICAgICAgICAgICAgICAgIFJld3JpdGU6IE1hdGNoLmFic2VudCgpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgICAgR2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktZ3JwYy1yb3V0ZScsXG4gICAgICAgICAgU3BlYzoge1xuICAgICAgICAgICAgR3JwY1JvdXRlOiB7XG4gICAgICAgICAgICAgIE1hdGNoOiB7XG4gICAgICAgICAgICAgICAgSG9zdG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgIFN1ZmZpeDogJy5leGFtcGxlLmNvbScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd3aXRoIG1ldGFkYXRhIG1hdGNoJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIG1hdGNoIGJhc2VkIG9uIG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICAvLyBHSVZFTlxuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoKV0sXG4gICAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlydHVhbFNlcnZpY2UgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsU2VydmljZShzdGFjaywgJ3ZzLTEnLCB7XG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWdycGMtcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuZ3JwYyh7XG4gICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBtZXRhZGF0YTogW1xuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVJcygnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlSXNOb3QoJ0NvbnRlbnQtVHlwZScsICd0ZXh0L2h0bWwnKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlU3RhcnRzV2l0aCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uLycpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVEb2VzTm90U3RhcnRXaXRoKCdDb250ZW50LVR5cGUnLCAndGV4dC8nKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlRW5kc1dpdGgoJ0NvbnRlbnQtVHlwZScsICcvanNvbicpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVEb2VzTm90RW5kV2l0aCgnQ29udGVudC1UeXBlJywgJy9qc29uK2Zvb2JhcicpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVNYXRjaGVzUmVnZXgoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi8uKicpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVEb2VzTm90TWF0Y2hSZWdleCgnQ29udGVudC1UeXBlJywgJ3RleHQvLionKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlc0lzSW5SYW5nZSgnTWF4LUZvcndhcmQnLCAxLCA1KSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlc0lzTm90SW5SYW5nZSgnTWF4LUZvcndhcmQnLCAxLCA1KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktZ3JwYy1yb3V0ZScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRIRU5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWdycGMtcm91dGUnLFxuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIEdycGNSb3V0ZToge1xuICAgICAgICAgICAgICBNYXRjaDoge1xuICAgICAgICAgICAgICAgIE1ldGFkYXRhOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7IEV4YWN0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogJ0NvbnRlbnQtVHlwZScsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBJbnZlcnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7IEV4YWN0OiAndGV4dC9odG1sJyB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7IFByZWZpeDogJ2FwcGxpY2F0aW9uLycgfSxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogJ0NvbnRlbnQtVHlwZScsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBJbnZlcnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7IFByZWZpeDogJ3RleHQvJyB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7IFN1ZmZpeDogJy9qc29uJyB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHsgU3VmZml4OiAnL2pzb24rZm9vYmFyJyB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7IFJlZ2V4OiAnYXBwbGljYXRpb24vLionIH0sXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6ICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBNYXRjaDogeyBSZWdleDogJ3RleHQvLionIH0sXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6ICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICBSYW5nZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgRW5kOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogJ01heC1Gb3J3YXJkJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICBSYW5nZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgRW5kOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogJ01heC1Gb3J3YXJkJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZSBhcnJheSBsZW5ndGggaXMgaW52YWxpZCcsICgpID0+IHtcbiAgICAgICAgLy8gR0lWRU5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgICAgLy8gV0hFTlxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlUHJvdmlkZXI6IGFwcG1lc2guVmlydHVhbFNlcnZpY2VQcm92aWRlci5ub25lKG1lc2gpLFxuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWdycGMtcm91dGUnLCB7XG4gICAgICAgICAgICByb3V0ZVNwZWM6IGFwcG1lc2guR2F0ZXdheVJvdXRlU3BlYy5ncnBjKHtcbiAgICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICAgIC8vIHNpemUgMCBhcnJheVxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBbXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktZ3JwYy1yb3V0ZScsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLnRvVGhyb3coL051bWJlciBvZiBtZXRhZGF0YSBwcm92aWRlZCBmb3IgbWF0Y2hpbmcgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLyk7XG5cbiAgICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgICB2aXJ0dWFsR2F0ZXdheS5hZGRHYXRld2F5Um91dGUoJ2dhdGV3YXktZ3JwYy1yb3V0ZS0xJywge1xuICAgICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuZ3JwYyh7XG4gICAgICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgICAvLyBzaXplIDExIGFycmF5XG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IFtcbiAgICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVJcygnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKSxcbiAgICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVJcygnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKSxcbiAgICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVJc05vdCgnQ29udGVudC1UeXBlJywgJ3RleHQvaHRtbCcpLFxuICAgICAgICAgICAgICAgICAgYXBwbWVzaC5IZWFkZXJNYXRjaC52YWx1ZVN0YXJ0c1dpdGgoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi8nKSxcbiAgICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVEb2VzTm90U3RhcnRXaXRoKCdDb250ZW50LVR5cGUnLCAndGV4dC8nKSxcbiAgICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVFbmRzV2l0aCgnQ29udGVudC1UeXBlJywgJy9qc29uJyksXG4gICAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlRG9lc05vdEVuZFdpdGgoJ0NvbnRlbnQtVHlwZScsICcvanNvbitmb29iYXInKSxcbiAgICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVNYXRjaGVzUmVnZXgoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi8uKicpLFxuICAgICAgICAgICAgICAgICAgYXBwbWVzaC5IZWFkZXJNYXRjaC52YWx1ZURvZXNOb3RNYXRjaFJlZ2V4KCdDb250ZW50LVR5cGUnLCAndGV4dC8uKicpLFxuICAgICAgICAgICAgICAgICAgYXBwbWVzaC5IZWFkZXJNYXRjaC52YWx1ZXNJc0luUmFuZ2UoJ01heC1Gb3J3YXJkJywgMSwgNSksXG4gICAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlc0lzTm90SW5SYW5nZSgnTWF4LUZvcndhcmQnLCAxLCA1KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1ncnBjLXJvdXRlJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkudG9UaHJvdygvTnVtYmVyIG9mIG1ldGFkYXRhIHByb3ZpZGVkIGZvciBtYXRjaGluZyBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAvKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3dpdGggaGVhZGVyIG1hdGNoJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIG1hdGNoIGJhc2VkIG9uIGhlYWRlcicsICgpID0+IHtcbiAgICAgICAgLy8gR0lWRU5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgICAgLy8gV0hFTlxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlUHJvdmlkZXI6IGFwcG1lc2guVmlydHVhbFNlcnZpY2VQcm92aWRlci5ub25lKG1lc2gpLFxuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBhbiBIVFRQIFJvdXRlXG4gICAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwLXJvdXRlJywge1xuICAgICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgaGVhZGVyczogW1xuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVJcygnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlSXNOb3QoJ0NvbnRlbnQtVHlwZScsICd0ZXh0L2h0bWwnKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlU3RhcnRzV2l0aCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uLycpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVEb2VzTm90U3RhcnRXaXRoKCdDb250ZW50LVR5cGUnLCAndGV4dC8nKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlRW5kc1dpdGgoJ0NvbnRlbnQtVHlwZScsICcvanNvbicpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVEb2VzTm90RW5kV2l0aCgnQ29udGVudC1UeXBlJywgJy9qc29uK2Zvb2JhcicpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVNYXRjaGVzUmVnZXgoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi8uKicpLFxuICAgICAgICAgICAgICAgIGFwcG1lc2guSGVhZGVyTWF0Y2gudmFsdWVEb2VzTm90TWF0Y2hSZWdleCgnQ29udGVudC1UeXBlJywgJ3RleHQvLionKSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlc0lzSW5SYW5nZSgnTWF4LUZvcndhcmQnLCAxLCA1KSxcbiAgICAgICAgICAgICAgICBhcHBtZXNoLkhlYWRlck1hdGNoLnZhbHVlc0lzTm90SW5SYW5nZSgnTWF4LUZvcndhcmQnLCAxLCA1KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktaHR0cC1yb3V0ZScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRIRU5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIEh0dHBSb3V0ZToge1xuICAgICAgICAgICAgICBNYXRjaDoge1xuICAgICAgICAgICAgICAgIEhlYWRlcnM6IFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHsgRXhhY3Q6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHsgRXhhY3Q6ICd0ZXh0L2h0bWwnIH0sXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6ICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHsgUHJlZml4OiAnYXBwbGljYXRpb24vJyB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEludmVydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHsgUHJlZml4OiAndGV4dC8nIH0sXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6ICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHsgU3VmZml4OiAnL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6ICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBNYXRjaDogeyBTdWZmaXg6ICcvanNvbitmb29iYXInIH0sXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6ICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHsgUmVnZXg6ICdhcHBsaWNhdGlvbi8uKicgfSxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogJ0NvbnRlbnQtVHlwZScsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBJbnZlcnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7IFJlZ2V4OiAndGV4dC8uKicgfSxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogJ0NvbnRlbnQtVHlwZScsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBJbnZlcnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBNYXRjaDoge1xuICAgICAgICAgICAgICAgICAgICAgIFJhbmdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFbmQ6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBTdGFydDogMSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnTWF4LUZvcndhcmQnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZXJ0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBNYXRjaDoge1xuICAgICAgICAgICAgICAgICAgICAgIFJhbmdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFbmQ6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBTdGFydDogMSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiAnTWF4LUZvcndhcmQnLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3dpdGggbWV0aG9kIG1hdGNoJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIG1hdGNoIGJhc2VkIG9uIG1ldGhvZCcsICgpID0+IHtcbiAgICAgICAgLy8gR0lWRU5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgICAgLy8gV0hFTlxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlUHJvdmlkZXI6IGFwcG1lc2guVmlydHVhbFNlcnZpY2VQcm92aWRlci5ub25lKG1lc2gpLFxuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBhbiBIVFRQIFJvdXRlXG4gICAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwLXJvdXRlJywge1xuICAgICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBhcHBtZXNoLkh0dHBSb3V0ZU1ldGhvZC5ERUxFVEUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUSEVOXG4gICAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OkdhdGV3YXlSb3V0ZScsIHtcbiAgICAgICAgICBHYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwLXJvdXRlJyxcbiAgICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgICBIdHRwUm91dGU6IHtcbiAgICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgICBNZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3dpdGggcGF0aCBtYXRjaCcsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBtYXRjaCBiYXNlZCBvbiBwYXRoJywgKCkgPT4ge1xuICAgICAgICAvLyBHSVZFTlxuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoKV0sXG4gICAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlydHVhbFNlcnZpY2UgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsU2VydmljZShzdGFjaywgJ3ZzLTEnLCB7XG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFuIEhUVFAgUm91dGVcbiAgICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAtcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cCh7XG4gICAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBwYXRoOiBhcHBtZXNoLkh0dHBHYXRld2F5Um91dGVQYXRoTWF0Y2guZXhhY3RseSgnL2V4YWN0JywgdW5kZWZpbmVkKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ2dhdGV3YXktaHR0cC1yb3V0ZScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBhbiBIVFRQMiBSb3V0ZVxuICAgICAgICB2aXJ0dWFsR2F0ZXdheS5hZGRHYXRld2F5Um91dGUoJ2dhdGV3YXktaHR0cDItcm91dGUnLCB7XG4gICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cDIoe1xuICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgcGF0aDogYXBwbWVzaC5IdHRwR2F0ZXdheVJvdXRlUGF0aE1hdGNoLnJlZ2V4KCdyZWdleCcpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwMi1yb3V0ZScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRIRU5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIEh0dHBSb3V0ZToge1xuICAgICAgICAgICAgICBNYXRjaDoge1xuICAgICAgICAgICAgICAgIFBhdGg6IHtcbiAgICAgICAgICAgICAgICAgIEV4YWN0OiAnL2V4YWN0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgICBSZXdyaXRlOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6R2F0ZXdheVJvdXRlJywge1xuICAgICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAyLXJvdXRlJyxcbiAgICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgICBIdHRwMlJvdXRlOiB7XG4gICAgICAgICAgICAgIE1hdGNoOiB7XG4gICAgICAgICAgICAgICAgUGF0aDoge1xuICAgICAgICAgICAgICAgICAgUmVnZXg6ICdyZWdleCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGVtcHR5IHN0cmluZyBpcyBwYXNzZWQnLCAoKSA9PiB7XG4gICAgICAgIC8vIEdJVkVOXG4gICAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoKV0sXG4gICAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlydHVhbFNlcnZpY2UgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsU2VydmljZShzdGFjaywgJ3ZzLTEnLCB7XG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gV0hFTiArIFRIRU5cblxuICAgICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwLXJvdXRlJywge1xuICAgICAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cCh7XG4gICAgICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBhcHBtZXNoLkh0dHBHYXRld2F5Um91dGVQYXRoTWF0Y2guZXhhY3RseSgnL2V4YWN0JywgJycpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwLXJvdXRlJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkudG9UaHJvdygvRXhhY3QgUGF0aCBmb3IgdGhlIHJld3JpdGUgY2Fubm90IGJlIGVtcHR5LiBVbmxpa2Ugc3RhcnRzV2l0aFxcKFxcKSBtZXRob2QsIG5vIGF1dG9tYXRpYyByZXdyaXRlIG9uIHdob2xlIHBhdGggbWF0Y2gvKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3dpdGggcXVlcnkgcGFyYW1hdGVyIG1hdGNoJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIG1hdGNoIGJhc2VkIG9uIHF1ZXJ5IHBhcmFtZXRlcicsICgpID0+IHtcbiAgICAgICAgLy8gR0lWRU5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgICAgLy8gV0hFTlxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlUHJvdmlkZXI6IGFwcG1lc2guVmlydHVhbFNlcnZpY2VQcm92aWRlci5ub25lKG1lc2gpLFxuICAgICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBhbiBIVFRQIFJvdXRlXG4gICAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwLXJvdXRlJywge1xuICAgICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiBbXG4gICAgICAgICAgICAgICAgYXBwbWVzaC5RdWVyeVBhcmFtZXRlck1hdGNoLnZhbHVlSXMoJ3F1ZXJ5LWZpZWxkJywgJ3ZhbHVlJyksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUSEVOXG4gICAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OkdhdGV3YXlSb3V0ZScsIHtcbiAgICAgICAgICBHYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwLXJvdXRlJyxcbiAgICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgICBIdHRwUm91dGU6IHtcbiAgICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgICBRdWVyeVBhcmFtZXRlcnM6IFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogJ3F1ZXJ5LWZpZWxkJyxcbiAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICBFeGFjdDogJ3ZhbHVlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3dpdGggZW1wdHkgSFRUUC9IVFRQMm1hdGNoJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBtYXRjaCBiYXNlZCBvbiBwcmVmaXgnLCAoKSA9PiB7XG4gICAgICAvLyBHSVZFTlxuICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgIC8vIFdIRU5cbiAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdnYXRld2F5LTEnLCB7XG4gICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKCldLFxuICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2cy0xJywge1xuICAgICAgICB2aXJ0dWFsU2VydmljZVByb3ZpZGVyOiBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlUHJvdmlkZXIubm9uZShtZXNoKSxcbiAgICAgICAgdmlydHVhbFNlcnZpY2VOYW1lOiAndGFyZ2V0LmxvY2FsJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBZGQgYW4gSFRUUCBSb3V0ZVxuICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCdnYXRld2F5LWh0dHAtcm91dGUnLCB7XG4gICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwLXJvdXRlJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUSEVOXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICdnYXRld2F5LWh0dHAtcm91dGUnLFxuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgSHR0cFJvdXRlOiB7XG4gICAgICAgICAgICBNYXRjaDoge1xuICAgICAgICAgICAgICBQcmVmaXg6ICcvJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnd2l0aCBwcmlvcml0eScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc2V0IHRoZSBwcmlvcml0eSBmb3IgaHR0cCBnYXRld2F5IHJvdXRlJywgKCkgPT4ge1xuICAgICAgLy8gR0lWRU5cbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgICAvLyBXSEVOXG4gICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICBsaXN0ZW5lcnM6IFthcHBtZXNoLlZpcnR1YWxHYXRld2F5TGlzdGVuZXIuaHR0cCgpXSxcbiAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aXJ0dWFsU2VydmljZSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlKHN0YWNrLCAndnMtMScsIHtcbiAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGFuIEhUVFAgUm91dGVcbiAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgnZ2F0ZXdheS1odHRwLXJvdXRlJywge1xuICAgICAgICByb3V0ZVNwZWM6IGFwcG1lc2guR2F0ZXdheVJvdXRlU3BlYy5odHRwKHtcbiAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByaW9yaXR5OiAxMDAsXG4gICAgICAgIH0pLFxuICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAnZ2F0ZXdheS1odHRwLXJvdXRlJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUSEVOXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgIFNwZWM6IHtcbiAgICAgICAgICBQcmlvcml0eTogMTAwLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2V0IHRoZSBwcmlvcml0eSBmb3IgZ3JwYyBnYXRld2F5IHJvdXRlJywgKCkgPT4ge1xuICAgICAgLy8gR0lWRU5cbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgICAvLyBXSEVOXG4gICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAnZ2F0ZXdheS0xJywge1xuICAgICAgICBsaXN0ZW5lcnM6IFthcHBtZXNoLlZpcnR1YWxHYXRld2F5TGlzdGVuZXIuZ3JwYygpXSxcbiAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aXJ0dWFsU2VydmljZSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlKHN0YWNrLCAndnMtMScsIHtcbiAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICAgIHZpcnR1YWxTZXJ2aWNlTmFtZTogJ3RhcmdldC5sb2NhbCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGFuIEdycGMgUm91dGVcbiAgICAgIG5ldyBhcHBtZXNoLkdhdGV3YXlSb3V0ZShzdGFjaywgJ3Rlc3Qtbm9kZScsIHtcbiAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuZ3JwYyh7XG4gICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgIHNlcnZpY2VOYW1lOiB2aXJ0dWFsU2VydmljZS52aXJ0dWFsU2VydmljZU5hbWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICByb3V0ZVRhcmdldDogdmlydHVhbFNlcnZpY2UsXG4gICAgICAgICAgcHJpb3JpdHk6IDUwMCxcbiAgICAgICAgfSksXG4gICAgICAgIHZpcnR1YWxHYXRld2F5OiB2aXJ0dWFsR2F0ZXdheSxcbiAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ3JvdXRlV2l0aFByaW9yaXR5JyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUSEVOXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgIFNwZWM6IHtcbiAgICAgICAgICBQcmlvcml0eTogNTAwLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ0NhbiBpbXBvcnQgR2F0ZXdheSBSb3V0ZXMgdXNpbmcgYW4gQVJOJywgKCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soYXBwLCAnSW1wb3J0cycsIHtcbiAgICAgIGVudjogeyBhY2NvdW50OiAnMTIzNDU2Nzg5MDEyJywgcmVnaW9uOiAndXMtZWFzdC0xJyB9LFxuICAgIH0pO1xuICAgIGNvbnN0IG1lc2hOYW1lID0gJ3Rlc3QtbWVzaCc7XG4gICAgY29uc3QgdmlydHVhbEdhdGV3YXlOYW1lID0gJ3Rlc3QtZ2F0ZXdheSc7XG4gICAgY29uc3QgZ2F0ZXdheVJvdXRlTmFtZSA9ICd0ZXN0LWdhdGV3YXktcm91dGUnO1xuICAgIGNvbnN0IGFybiA9IGBhcm46YXdzOmFwcG1lc2g6dXMtZWFzdC0xOjEyMzQ1Njc4OTAxMjptZXNoLyR7bWVzaE5hbWV9L3ZpcnR1YWxHYXRld2F5LyR7dmlydHVhbEdhdGV3YXlOYW1lfS9nYXRld2F5Um91dGUvJHtnYXRld2F5Um91dGVOYW1lfWA7XG5cbiAgICAvLyBXSEVOXG4gICAgY29uc3QgZ2F0ZXdheVJvdXRlID0gYXBwbWVzaC5HYXRld2F5Um91dGUuZnJvbUdhdGV3YXlSb3V0ZUFybihzdGFjaywgJ2ltcG9ydGVkR2F0ZXdheVJvdXRlJywgYXJuKTtcbiAgICAvLyBUSEVOXG4gICAgZXhwZWN0KGdhdGV3YXlSb3V0ZS5nYXRld2F5Um91dGVOYW1lKS50b0VxdWFsKGdhdGV3YXlSb3V0ZU5hbWUpO1xuICAgIGV4cGVjdChnYXRld2F5Um91dGUudmlydHVhbEdhdGV3YXkudmlydHVhbEdhdGV3YXlOYW1lKS50b0VxdWFsKHZpcnR1YWxHYXRld2F5TmFtZSk7XG4gICAgZXhwZWN0KGdhdGV3YXlSb3V0ZS52aXJ0dWFsR2F0ZXdheS5tZXNoLm1lc2hOYW1lKS50b0VxdWFsKG1lc2hOYW1lKTtcblxuICB9KTtcbiAgdGVzdCgnQ2FuIGltcG9ydCBHYXRld2F5IFJvdXRlcyB1c2luZyBhdHRyaWJ1dGVzJywgKCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soYXBwLCAnSW1wb3J0cycsIHtcbiAgICAgIGVudjogeyBhY2NvdW50OiAnMTIzNDU2Nzg5MDEyJywgcmVnaW9uOiAndXMtZWFzdC0xJyB9LFxuICAgIH0pO1xuICAgIGNvbnN0IG1lc2hOYW1lID0gJ3Rlc3QtbWVzaCc7XG4gICAgY29uc3QgdmlydHVhbEdhdGV3YXlOYW1lID0gJ3Rlc3QtZ2F0ZXdheSc7XG4gICAgY29uc3QgZ2F0ZXdheVJvdXRlTmFtZSA9ICd0ZXN0LWdhdGV3YXktcm91dGUnO1xuXG4gICAgLy8gV0hFTlxuICAgIGNvbnN0IG1lc2ggPSBhcHBtZXNoLk1lc2guZnJvbU1lc2hOYW1lKHN0YWNrLCAnTWVzaCcsIG1lc2hOYW1lKTtcbiAgICBjb25zdCBnYXRld2F5ID0gbWVzaC5hZGRWaXJ0dWFsR2F0ZXdheSgnVmlydHVhbEdhdGV3YXknLCB7XG4gICAgICB2aXJ0dWFsR2F0ZXdheU5hbWU6IHZpcnR1YWxHYXRld2F5TmFtZSxcbiAgICB9KTtcbiAgICBjb25zdCBnYXRld2F5Um91dGUgPSBhcHBtZXNoLkdhdGV3YXlSb3V0ZS5mcm9tR2F0ZXdheVJvdXRlQXR0cmlidXRlcyhzdGFjaywgJ2ltcG9ydGVkR2F0ZXdheVJvdXRlJywge1xuICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogZ2F0ZXdheVJvdXRlTmFtZSxcbiAgICAgIHZpcnR1YWxHYXRld2F5OiBnYXRld2F5LFxuICAgIH0pO1xuICAgIC8vIFRIRU5cbiAgICBleHBlY3QoZ2F0ZXdheVJvdXRlLmdhdGV3YXlSb3V0ZU5hbWUpLnRvRXF1YWwoZ2F0ZXdheVJvdXRlTmFtZSk7XG4gICAgZXhwZWN0KGdhdGV3YXlSb3V0ZS52aXJ0dWFsR2F0ZXdheS5tZXNoLm1lc2hOYW1lKS50b0VxdWFsKG1lc2hOYW1lKTtcblxuICB9KTtcbn0pO1xuIl19