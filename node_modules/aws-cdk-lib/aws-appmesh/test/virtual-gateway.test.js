"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const acm = require("../../aws-certificatemanager");
const iam = require("../../aws-iam");
const cdk = require("../../core");
const appmesh = require("../lib");
describe('virtual gateway', () => {
    describe('When creating a VirtualGateway', () => {
        test('should have expected defaults', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            new appmesh.VirtualGateway(stack, 'testGateway', {
                mesh: mesh,
            });
            new appmesh.VirtualGateway(stack, 'httpGateway', {
                mesh: mesh,
                listeners: [appmesh.VirtualGatewayListener.http({
                        port: 443,
                        healthCheck: appmesh.HealthCheck.http({
                            interval: cdk.Duration.seconds(10),
                        }),
                    })],
            });
            new appmesh.VirtualGateway(stack, 'http2Gateway', {
                mesh: mesh,
                listeners: [appmesh.VirtualGatewayListener.http2({
                        port: 443,
                        healthCheck: appmesh.HealthCheck.http2({ interval: cdk.Duration.seconds(10) }),
                    })],
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        {
                            PortMapping: {
                                Port: 8080,
                                Protocol: appmesh.Protocol.HTTP,
                            },
                        },
                    ],
                },
                VirtualGatewayName: 'testGateway',
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        {
                            HealthCheck: {
                                HealthyThreshold: 2,
                                IntervalMillis: 10000,
                                Port: 443,
                                Protocol: appmesh.Protocol.HTTP,
                                TimeoutMillis: 2000,
                                UnhealthyThreshold: 2,
                                Path: '/',
                            },
                            PortMapping: {
                                Port: 443,
                                Protocol: appmesh.Protocol.HTTP,
                            },
                        },
                    ],
                },
                VirtualGatewayName: 'httpGateway',
                MeshOwner: assertions_1.Match.absent(),
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        {
                            HealthCheck: {
                                HealthyThreshold: 2,
                                IntervalMillis: 10000,
                                Port: 443,
                                Protocol: appmesh.Protocol.HTTP2,
                                TimeoutMillis: 2000,
                                UnhealthyThreshold: 2,
                                Path: '/',
                            },
                            PortMapping: {
                                Port: 443,
                                Protocol: appmesh.Protocol.HTTP2,
                            },
                        },
                    ],
                },
                VirtualGatewayName: 'http2Gateway',
            });
        });
        test('should have expected features', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            new appmesh.VirtualGateway(stack, 'testGateway', {
                virtualGatewayName: 'test-gateway',
                listeners: [appmesh.VirtualGatewayListener.grpc({
                        port: 80,
                        healthCheck: appmesh.HealthCheck.grpc(),
                    })],
                mesh: mesh,
                accessLog: appmesh.AccessLog.fromFilePath('/dev/stdout'),
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        {
                            HealthCheck: {
                                HealthyThreshold: 2,
                                IntervalMillis: 5000,
                                Port: 80,
                                Protocol: appmesh.Protocol.GRPC,
                                TimeoutMillis: 2000,
                                UnhealthyThreshold: 2,
                            },
                            PortMapping: {
                                Port: 80,
                                Protocol: appmesh.Protocol.GRPC,
                            },
                        },
                    ],
                    Logging: {
                        AccessLog: {
                            File: {
                                Path: '/dev/stdout',
                            },
                        },
                    },
                },
                VirtualGatewayName: 'test-gateway',
            });
        });
        test('with an http listener with a TLS certificate from ACM', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const cert = new acm.Certificate(stack, 'cert', {
                domainName: '',
            });
            new appmesh.VirtualGateway(stack, 'testGateway', {
                virtualGatewayName: 'test-gateway',
                mesh: mesh,
                listeners: [appmesh.VirtualGatewayListener.http({
                        port: 8080,
                        tls: {
                            mode: appmesh.TlsMode.STRICT,
                            certificate: appmesh.TlsCertificate.acm(cert),
                        },
                    })],
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        assertions_1.Match.objectLike({
                            TLS: {
                                Mode: appmesh.TlsMode.STRICT,
                                Certificate: {
                                    ACM: {
                                        CertificateArn: {
                                            Ref: 'cert56CA94EB',
                                        },
                                    },
                                },
                            },
                        }),
                    ],
                },
            });
        });
        test('with an grpc listener with a TLS certificate from file', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            new appmesh.VirtualGateway(stack, 'testGateway', {
                virtualGatewayName: 'test-gateway',
                mesh: mesh,
                listeners: [appmesh.VirtualGatewayListener.grpc({
                        port: 8080,
                        tls: {
                            mode: appmesh.TlsMode.STRICT,
                            certificate: appmesh.TlsCertificate.file('path/to/certChain', 'path/to/privateKey'),
                        },
                    })],
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        assertions_1.Match.objectLike({
                            TLS: {
                                Mode: appmesh.TlsMode.STRICT,
                                Certificate: {
                                    File: {
                                        CertificateChain: 'path/to/certChain',
                                        PrivateKey: 'path/to/privateKey',
                                    },
                                },
                            },
                        }),
                    ],
                },
            });
        });
        test('with an http2 listener with a TLS certificate from SDS', () => {
            // GIVEN
            const stack = new cdk.Stack();
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            // WHEN
            new appmesh.VirtualGateway(stack, 'testGateway', {
                virtualGatewayName: 'test-gateway',
                mesh: mesh,
                listeners: [appmesh.VirtualGatewayListener.http2({
                        port: 8080,
                        tls: {
                            mode: appmesh.TlsMode.STRICT,
                            certificate: appmesh.TlsCertificate.sds('secret_certificate'),
                        },
                    })],
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        assertions_1.Match.objectLike({
                            TLS: {
                                Mode: appmesh.TlsMode.STRICT,
                                Certificate: {
                                    SDS: {
                                        SecretName: 'secret_certificate',
                                    },
                                },
                            },
                        }),
                    ],
                },
            });
        });
        describe('with an grpc listener with a TLS validation from file', () => {
            test('the listener should include the TLS configuration', () => {
                // GIVEN
                const stack = new cdk.Stack();
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                // WHEN
                new appmesh.VirtualGateway(stack, 'testGateway', {
                    virtualGatewayName: 'test-gateway',
                    mesh: mesh,
                    listeners: [appmesh.VirtualGatewayListener.grpc({
                            port: 8080,
                            tls: {
                                mode: appmesh.TlsMode.STRICT,
                                certificate: appmesh.TlsCertificate.file('path/to/certChain', 'path/to/privateKey'),
                                mutualTlsValidation: {
                                    trust: appmesh.TlsValidationTrust.file('path/to/certChain'),
                                },
                            },
                        })],
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                    Spec: {
                        Listeners: [
                            assertions_1.Match.objectLike({
                                TLS: {
                                    Mode: appmesh.TlsMode.STRICT,
                                    Certificate: {
                                        File: {
                                            CertificateChain: 'path/to/certChain',
                                            PrivateKey: 'path/to/privateKey',
                                        },
                                    },
                                    Validation: {
                                        Trust: {
                                            File: {
                                                CertificateChain: 'path/to/certChain',
                                            },
                                        },
                                    },
                                },
                            }),
                        ],
                    },
                });
            });
        });
        describe('with an http2 listener with a TLS validation from SDS', () => {
            test('the listener should include the TLS configuration', () => {
                // GIVEN
                const stack = new cdk.Stack();
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                // WHEN
                new appmesh.VirtualGateway(stack, 'testGateway', {
                    virtualGatewayName: 'test-gateway',
                    mesh: mesh,
                    listeners: [appmesh.VirtualGatewayListener.http2({
                            port: 8080,
                            tls: {
                                mode: appmesh.TlsMode.STRICT,
                                certificate: appmesh.TlsCertificate.sds('secret_certificate'),
                                mutualTlsValidation: {
                                    subjectAlternativeNames: appmesh.SubjectAlternativeNames.matchingExactly('mesh-endpoint.apps.local'),
                                    trust: appmesh.TlsValidationTrust.sds('secret_validation'),
                                },
                            },
                        })],
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                    Spec: {
                        Listeners: [
                            assertions_1.Match.objectLike({
                                TLS: {
                                    Mode: appmesh.TlsMode.STRICT,
                                    Certificate: {
                                        SDS: {
                                            SecretName: 'secret_certificate',
                                        },
                                    },
                                    Validation: {
                                        SubjectAlternativeNames: {
                                            Match: {
                                                Exact: ['mesh-endpoint.apps.local'],
                                            },
                                        },
                                    },
                                },
                            }),
                        ],
                    },
                });
            });
        });
        test('with an grpc listener with the TLS mode permissive', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            new appmesh.VirtualGateway(stack, 'testGateway', {
                virtualGatewayName: 'test-gateway',
                mesh: mesh,
                listeners: [appmesh.VirtualGatewayListener.grpc({
                        port: 8080,
                        tls: {
                            mode: appmesh.TlsMode.PERMISSIVE,
                            certificate: appmesh.TlsCertificate.file('path/to/certChain', 'path/to/privateKey'),
                        },
                    })],
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                Spec: {
                    Listeners: [
                        assertions_1.Match.objectLike({
                            TLS: {
                                Mode: appmesh.TlsMode.PERMISSIVE,
                                Certificate: {
                                    File: {
                                        CertificateChain: 'path/to/certChain',
                                        PrivateKey: 'path/to/privateKey',
                                    },
                                },
                            },
                        }),
                    ],
                },
            });
        });
        describe('with shared service mesh', () => {
            test('Mesh Owner is the AWS account ID of the account that shared the mesh with your account', () => {
                // GIVEN
                const app = new cdk.App();
                const meshEnv = { account: '1234567899', region: 'us-west-2' };
                const virtualGatewayEnv = { account: '9987654321', region: 'us-west-2' };
                // Creating stack in Account 9987654321
                const stack = new cdk.Stack(app, 'mySharedStack', { env: virtualGatewayEnv });
                // Mesh is in Account 1234567899
                const sharedMesh = appmesh.Mesh.fromMeshArn(stack, 'shared-mesh', `arn:aws:appmesh:${meshEnv.region}:${meshEnv.account}:mesh/shared-mesh`);
                // WHEN
                new appmesh.VirtualGateway(stack, 'test-node', {
                    mesh: sharedMesh,
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                    MeshOwner: meshEnv.account,
                });
            });
        });
    });
    describe('When adding a gateway route to existing VirtualGateway ', () => {
        test('should create gateway route resource', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const virtualGateway = new appmesh.VirtualGateway(stack, 'testGateway', {
                virtualGatewayName: 'test-gateway',
                mesh: mesh,
            });
            const virtualService = new appmesh.VirtualService(stack, 'virtualService', {
                virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
            });
            virtualGateway.addGatewayRoute('testGatewayRoute', {
                gatewayRouteName: 'test-gateway-route',
                routeSpec: appmesh.GatewayRouteSpec.http({
                    routeTarget: virtualService,
                }),
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                GatewayRouteName: 'test-gateway-route',
                Spec: {
                    HttpRoute: {
                        Action: {
                            Target: {
                                VirtualService: {
                                    VirtualServiceName: {
                                        'Fn::GetAtt': ['virtualService03A04B87', 'VirtualServiceName'],
                                    },
                                },
                            },
                        },
                        Match: {
                            Prefix: '/',
                        },
                    },
                },
            });
        });
    });
    describe('When adding gateway routes to a VirtualGateway with existing gateway routes', () => {
        test('should add gateway routes and not overwite', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            const virtualService = new appmesh.VirtualService(stack, 'virtualService', {
                virtualServiceProvider: appmesh.VirtualServiceProvider.none(mesh),
            });
            const virtualGateway = mesh.addVirtualGateway('gateway');
            virtualGateway.addGatewayRoute('testGatewayRoute', {
                gatewayRouteName: 'test-gateway-route',
                routeSpec: appmesh.GatewayRouteSpec.http({
                    routeTarget: virtualService,
                }),
            });
            virtualGateway.addGatewayRoute('testGatewayRoute2', {
                gatewayRouteName: 'test-gateway-route-2',
                routeSpec: appmesh.GatewayRouteSpec.http({
                    routeTarget: virtualService,
                }),
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                GatewayRouteName: 'test-gateway-route',
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::GatewayRoute', {
                GatewayRouteName: 'test-gateway-route-2',
            });
        });
    });
    describe('When creating a VirtualGateway with backend defaults', () => {
        test('should add backend defaults to the VirtualGateway', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            const mesh = new appmesh.Mesh(stack, 'mesh', {
                meshName: 'test-mesh',
            });
            new appmesh.VirtualGateway(stack, 'virtual-gateway', {
                virtualGatewayName: 'virtual-gateway',
                mesh: mesh,
                backendDefaults: {
                    tlsClientPolicy: {
                        validation: {
                            trust: appmesh.TlsValidationTrust.file('path-to-certificate'),
                        },
                    },
                },
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                VirtualGatewayName: 'virtual-gateway',
                Spec: {
                    BackendDefaults: {
                        ClientPolicy: {
                            TLS: {
                                Validation: {
                                    Trust: {
                                        File: {
                                            CertificateChain: 'path-to-certificate',
                                        },
                                    },
                                },
                            },
                        },
                    },
                },
            });
        });
        describe("with client's TLS certificate from SDS", () => {
            test('should add a backend default to the resource with TLS certificate', () => {
                // GIVEN
                const stack = new cdk.Stack();
                const mesh = new appmesh.Mesh(stack, 'mesh', {
                    meshName: 'test-mesh',
                });
                // WHEN
                new appmesh.VirtualGateway(stack, 'virtual-gateway', {
                    virtualGatewayName: 'virtual-gateway',
                    mesh: mesh,
                    backendDefaults: {
                        tlsClientPolicy: {
                            mutualTlsCertificate: appmesh.TlsCertificate.sds('secret_certificate'),
                            validation: {
                                subjectAlternativeNames: appmesh.SubjectAlternativeNames.matchingExactly('mesh-endpoint.apps.local'),
                                trust: appmesh.TlsValidationTrust.sds('secret_validation'),
                            },
                        },
                    },
                });
                // THEN
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
                    VirtualGatewayName: 'virtual-gateway',
                    Spec: {
                        BackendDefaults: {
                            ClientPolicy: {
                                TLS: {
                                    Certificate: {
                                        SDS: {
                                            SecretName: 'secret_certificate',
                                        },
                                    },
                                    Validation: {
                                        SubjectAlternativeNames: {
                                            Match: {
                                                Exact: ['mesh-endpoint.apps.local'],
                                            },
                                        },
                                        Trust: {
                                            SDS: {
                                                SecretName: 'secret_validation',
                                            },
                                        },
                                    },
                                },
                            },
                        },
                    },
                });
            });
        });
    });
    test('Can add an http connection pool to listener', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        const mesh = new appmesh.Mesh(stack, 'mesh', {
            meshName: 'test-mesh',
        });
        new appmesh.VirtualGateway(stack, 'virtual-gateway', {
            virtualGatewayName: 'virtual-gateway',
            mesh: mesh,
            listeners: [
                appmesh.VirtualGatewayListener.http({
                    port: 80,
                    connectionPool: {
                        maxConnections: 100,
                        maxPendingRequests: 10,
                    },
                }),
            ],
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
            VirtualGatewayName: 'virtual-gateway',
            Spec: {
                Listeners: [
                    assertions_1.Match.objectLike({
                        ConnectionPool: {
                            HTTP: {
                                MaxConnections: 100,
                                MaxPendingRequests: 10,
                            },
                        },
                    }),
                ],
            },
        });
    });
    test('Can add an grpc connection pool to listener', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        const mesh = new appmesh.Mesh(stack, 'mesh', {
            meshName: 'test-mesh',
        });
        new appmesh.VirtualGateway(stack, 'virtual-gateway', {
            virtualGatewayName: 'virtual-gateway',
            mesh: mesh,
            listeners: [
                appmesh.VirtualGatewayListener.grpc({
                    port: 80,
                    connectionPool: {
                        maxRequests: 10,
                    },
                }),
            ],
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
            VirtualGatewayName: 'virtual-gateway',
            Spec: {
                Listeners: [
                    assertions_1.Match.objectLike({
                        ConnectionPool: {
                            GRPC: {
                                MaxRequests: 10,
                            },
                        },
                    }),
                ],
            },
        });
    });
    test('Can add an http2 connection pool to listener', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        const mesh = new appmesh.Mesh(stack, 'mesh', {
            meshName: 'test-mesh',
        });
        new appmesh.VirtualGateway(stack, 'virtual-gateway', {
            virtualGatewayName: 'virtual-gateway',
            mesh: mesh,
            listeners: [
                appmesh.VirtualGatewayListener.http2({
                    port: 80,
                    connectionPool: {
                        maxRequests: 10,
                    },
                }),
            ],
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::AppMesh::VirtualGateway', {
            VirtualGatewayName: 'virtual-gateway',
            Spec: {
                Listeners: [
                    assertions_1.Match.objectLike({
                        ConnectionPool: {
                            HTTP2: {
                                MaxRequests: 10,
                            },
                        },
                    }),
                ],
            },
        });
    });
    test('Can import VirtualGateways using an ARN', () => {
        const app = new cdk.App();
        // GIVEN
        const stack = new cdk.Stack(app, 'Imports', {
            env: { account: '123456789012', region: 'us-east-1' },
        });
        const meshName = 'testMesh';
        const virtualGatewayName = 'test-gateway';
        const arn = `arn:aws:appmesh:us-east-1:123456789012:mesh/${meshName}/virtualGateway/${virtualGatewayName}`;
        // WHEN
        const virtualGateway = appmesh.VirtualGateway.fromVirtualGatewayArn(stack, 'importedGateway', arn);
        // THEN
        expect(virtualGateway.mesh.meshName).toEqual(meshName);
        expect(virtualGateway.virtualGatewayName).toEqual(virtualGatewayName);
    });
    test('Can import VirtualGateways using attributes', () => {
        const app = new cdk.App();
        // GIVEN
        const stack = new cdk.Stack(app, 'Imports', {
            env: { account: '123456789012', region: 'us-east-1' },
        });
        const meshName = 'testMesh';
        const virtualGatewayName = 'test-gateway';
        // WHEN
        const virtualGateway = appmesh.VirtualGateway.fromVirtualGatewayAttributes(stack, 'importedGateway', {
            mesh: appmesh.Mesh.fromMeshName(stack, 'Mesh', meshName),
            virtualGatewayName: virtualGatewayName,
        });
        // THEN
        expect(virtualGateway.mesh.meshName).toEqual(meshName);
        expect(virtualGateway.virtualGatewayName).toEqual(virtualGatewayName);
    });
    test('Can grant an identity StreamAggregatedResources for a given VirtualGateway', () => {
        // GIVEN
        const stack = new cdk.Stack();
        const mesh = new appmesh.Mesh(stack, 'mesh', {
            meshName: 'test-mesh',
        });
        const gateway = new appmesh.VirtualGateway(stack, 'testGateway', {
            mesh: mesh,
        });
        // WHEN
        const user = new iam.User(stack, 'test');
        gateway.grantStreamAggregatedResources(user);
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Statement: [
                    {
                        Action: 'appmesh:StreamAggregatedResources',
                        Effect: 'Allow',
                        Resource: {
                            Ref: 'testGatewayF09EC349',
                        },
                    },
                ],
            },
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlydHVhbC1nYXRld2F5LnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ2aXJ0dWFsLWdhdGV3YXkudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUFtRDtBQUNuRCxvREFBb0Q7QUFDcEQscUNBQXFDO0FBQ3JDLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixRQUFRLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1FBQzlDLElBQUksQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUU7WUFDekMsUUFBUTtZQUNSLE1BQU0sS0FBSyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBRTlCLE9BQU87WUFDUCxNQUFNLElBQUksR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRTtnQkFDM0MsUUFBUSxFQUFFLFdBQVc7YUFDdEIsQ0FBQyxDQUFDO1lBRUgsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxhQUFhLEVBQUU7Z0JBQy9DLElBQUksRUFBRSxJQUFJO2FBQ1gsQ0FBQyxDQUFDO1lBRUgsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxhQUFhLEVBQUU7Z0JBQy9DLElBQUksRUFBRSxJQUFJO2dCQUNWLFNBQVMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUM7d0JBQzlDLElBQUksRUFBRSxHQUFHO3dCQUNULFdBQVcsRUFBRSxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQzs0QkFDcEMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQzt5QkFDbkMsQ0FBQztxQkFDSCxDQUFDLENBQUM7YUFDSixDQUFDLENBQUM7WUFFSCxJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLGNB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RSxNQUFNLEVBQUU7WUFDM0MsUUFBUSxFQUFFLFdBQVc7U0FDdEIsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxhQUFhLEVBQUU7WUFDL0QsSUFBSSxFQUFFLElBQUk7U0FDWCxDQUFDLENBQUM7UUFFSCxPQUFPO1FBQ1AsTUFBTSxJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN6QyxPQUFPLENBQUMsOEJBQThCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0MsT0FBTztRQUNQLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixDQUFDLGtCQUFrQixFQUFFO1lBQ2xFLGNBQWMsRUFBRTtnQkFDZCxTQUFTLEVBQUU7b0JBQ1Q7d0JBQ0UsTUFBTSxFQUFFLG1DQUFtQzt3QkFDM0MsTUFBTSxFQUFFLE9BQU87d0JBQ2YsUUFBUSxFQUFFOzRCQUNSLEdBQUcsRUFBRSxxQkFBcUI7eUJBQzNCO3FCQUNGO2lCQUNGO2FBQ0Y7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0Y2gsIFRlbXBsYXRlIH0gZnJvbSAnLi4vLi4vYXNzZXJ0aW9ucyc7XG5pbXBvcnQgKiBhcyBhY20gZnJvbSAnLi4vLi4vYXdzLWNlcnRpZmljYXRlbWFuYWdlcic7XG5pbXBvcnQgKiBhcyBpYW0gZnJvbSAnLi4vLi4vYXdzLWlhbSc7XG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnLi4vLi4vY29yZSc7XG5pbXBvcnQgKiBhcyBhcHBtZXNoIGZyb20gJy4uL2xpYic7XG5cbmRlc2NyaWJlKCd2aXJ0dWFsIGdhdGV3YXknLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdXaGVuIGNyZWF0aW5nIGEgVmlydHVhbEdhdGV3YXknLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgZXhwZWN0ZWQgZGVmYXVsdHMnLCAoKSA9PiB7XG4gICAgICAvLyBHSVZFTlxuICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgIC8vIFdIRU5cbiAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgfSk7XG5cbiAgICAgIG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAndGVzdEdhdGV3YXknLCB7XG4gICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICB9KTtcblxuICAgICAgbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICdodHRwR2F0ZXdheScsIHtcbiAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAoe1xuICAgICAgICAgIHBvcnQ6IDQ0MyxcbiAgICAgICAgICBoZWFsdGhDaGVjazogYXBwbWVzaC5IZWFsdGhDaGVjay5odHRwKHtcbiAgICAgICAgICAgIGludGVydmFsOiBjZGsuRHVyYXRpb24uc2Vjb25kcygxMCksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXSxcbiAgICAgIH0pO1xuXG4gICAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ2h0dHAyR2F0ZXdheScsIHtcbiAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAyKHtcbiAgICAgICAgICBwb3J0OiA0NDMsXG4gICAgICAgICAgaGVhbHRoQ2hlY2s6IGFwcG1lc2guSGVhbHRoQ2hlY2suaHR0cDIoeyBpbnRlcnZhbDogY2RrLkR1cmF0aW9uLnNlY29uZHMoMTApIH0pLFxuICAgICAgICB9KV0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVEhFTlxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6VmlydHVhbEdhdGV3YXknLCB7XG4gICAgICAgIFNwZWM6IHtcbiAgICAgICAgICBMaXN0ZW5lcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgUG9ydE1hcHBpbmc6IHtcbiAgICAgICAgICAgICAgICBQb3J0OiA4MDgwLFxuICAgICAgICAgICAgICAgIFByb3RvY29sOiBhcHBtZXNoLlByb3RvY29sLkhUVFAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIFZpcnR1YWxHYXRld2F5TmFtZTogJ3Rlc3RHYXRld2F5JyxcbiAgICAgIH0pO1xuXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpWaXJ0dWFsR2F0ZXdheScsIHtcbiAgICAgICAgU3BlYzoge1xuICAgICAgICAgIExpc3RlbmVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBIZWFsdGhDaGVjazoge1xuICAgICAgICAgICAgICAgIEhlYWx0aHlUaHJlc2hvbGQ6IDIsXG4gICAgICAgICAgICAgICAgSW50ZXJ2YWxNaWxsaXM6IDEwMDAwLFxuICAgICAgICAgICAgICAgIFBvcnQ6IDQ0MyxcbiAgICAgICAgICAgICAgICBQcm90b2NvbDogYXBwbWVzaC5Qcm90b2NvbC5IVFRQLFxuICAgICAgICAgICAgICAgIFRpbWVvdXRNaWxsaXM6IDIwMDAsXG4gICAgICAgICAgICAgICAgVW5oZWFsdGh5VGhyZXNob2xkOiAyLFxuICAgICAgICAgICAgICAgIFBhdGg6ICcvJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgUG9ydE1hcHBpbmc6IHtcbiAgICAgICAgICAgICAgICBQb3J0OiA0NDMsXG4gICAgICAgICAgICAgICAgUHJvdG9jb2w6IGFwcG1lc2guUHJvdG9jb2wuSFRUUCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgVmlydHVhbEdhdGV3YXlOYW1lOiAnaHR0cEdhdGV3YXknLFxuICAgICAgICBNZXNoT3duZXI6IE1hdGNoLmFic2VudCgpLFxuICAgICAgfSk7XG5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OlZpcnR1YWxHYXRld2F5Jywge1xuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgTGlzdGVuZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIEhlYWx0aENoZWNrOiB7XG4gICAgICAgICAgICAgICAgSGVhbHRoeVRocmVzaG9sZDogMixcbiAgICAgICAgICAgICAgICBJbnRlcnZhbE1pbGxpczogMTAwMDAsXG4gICAgICAgICAgICAgICAgUG9ydDogNDQzLFxuICAgICAgICAgICAgICAgIFByb3RvY29sOiBhcHBtZXNoLlByb3RvY29sLkhUVFAyLFxuICAgICAgICAgICAgICAgIFRpbWVvdXRNaWxsaXM6IDIwMDAsXG4gICAgICAgICAgICAgICAgVW5oZWFsdGh5VGhyZXNob2xkOiAyLFxuICAgICAgICAgICAgICAgIFBhdGg6ICcvJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgUG9ydE1hcHBpbmc6IHtcbiAgICAgICAgICAgICAgICBQb3J0OiA0NDMsXG4gICAgICAgICAgICAgICAgUHJvdG9jb2w6IGFwcG1lc2guUHJvdG9jb2wuSFRUUDIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIFZpcnR1YWxHYXRld2F5TmFtZTogJ2h0dHAyR2F0ZXdheScsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGV4cGVjdGVkIGZlYXR1cmVzJywgKCkgPT4ge1xuICAgICAgLy8gR0lWRU5cbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgICAvLyBXSEVOXG4gICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgIH0pO1xuXG4gICAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3Rlc3RHYXRld2F5Jywge1xuICAgICAgICB2aXJ0dWFsR2F0ZXdheU5hbWU6ICd0ZXN0LWdhdGV3YXknLFxuICAgICAgICBsaXN0ZW5lcnM6IFthcHBtZXNoLlZpcnR1YWxHYXRld2F5TGlzdGVuZXIuZ3JwYyh7XG4gICAgICAgICAgcG9ydDogODAsXG4gICAgICAgICAgaGVhbHRoQ2hlY2s6IGFwcG1lc2guSGVhbHRoQ2hlY2suZ3JwYygpLFxuICAgICAgICB9KV0sXG4gICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIGFjY2Vzc0xvZzogYXBwbWVzaC5BY2Nlc3NMb2cuZnJvbUZpbGVQYXRoKCcvZGV2L3N0ZG91dCcpLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRIRU5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OlZpcnR1YWxHYXRld2F5Jywge1xuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgTGlzdGVuZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIEhlYWx0aENoZWNrOiB7XG4gICAgICAgICAgICAgICAgSGVhbHRoeVRocmVzaG9sZDogMixcbiAgICAgICAgICAgICAgICBJbnRlcnZhbE1pbGxpczogNTAwMCxcbiAgICAgICAgICAgICAgICBQb3J0OiA4MCxcbiAgICAgICAgICAgICAgICBQcm90b2NvbDogYXBwbWVzaC5Qcm90b2NvbC5HUlBDLFxuICAgICAgICAgICAgICAgIFRpbWVvdXRNaWxsaXM6IDIwMDAsXG4gICAgICAgICAgICAgICAgVW5oZWFsdGh5VGhyZXNob2xkOiAyLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBQb3J0TWFwcGluZzoge1xuICAgICAgICAgICAgICAgIFBvcnQ6IDgwLFxuICAgICAgICAgICAgICAgIFByb3RvY29sOiBhcHBtZXNoLlByb3RvY29sLkdSUEMsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgTG9nZ2luZzoge1xuICAgICAgICAgICAgQWNjZXNzTG9nOiB7XG4gICAgICAgICAgICAgIEZpbGU6IHtcbiAgICAgICAgICAgICAgICBQYXRoOiAnL2Rldi9zdGRvdXQnLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBWaXJ0dWFsR2F0ZXdheU5hbWU6ICd0ZXN0LWdhdGV3YXknLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCd3aXRoIGFuIGh0dHAgbGlzdGVuZXIgd2l0aCBhIFRMUyBjZXJ0aWZpY2F0ZSBmcm9tIEFDTScsICgpID0+IHtcbiAgICAgIC8vIEdJVkVOXG4gICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgLy8gV0hFTlxuICAgICAgY29uc3QgbWVzaCA9IG5ldyBhcHBtZXNoLk1lc2goc3RhY2ssICdtZXNoJywge1xuICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY2VydCA9IG5ldyBhY20uQ2VydGlmaWNhdGUoc3RhY2ssICdjZXJ0Jywge1xuICAgICAgICBkb21haW5OYW1lOiAnJyxcbiAgICAgIH0pO1xuXG4gICAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3Rlc3RHYXRld2F5Jywge1xuICAgICAgICB2aXJ0dWFsR2F0ZXdheU5hbWU6ICd0ZXN0LWdhdGV3YXknLFxuICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgICBsaXN0ZW5lcnM6IFthcHBtZXNoLlZpcnR1YWxHYXRld2F5TGlzdGVuZXIuaHR0cCh7XG4gICAgICAgICAgcG9ydDogODA4MCxcbiAgICAgICAgICB0bHM6IHtcbiAgICAgICAgICAgIG1vZGU6IGFwcG1lc2guVGxzTW9kZS5TVFJJQ1QsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0ZTogYXBwbWVzaC5UbHNDZXJ0aWZpY2F0ZS5hY20oY2VydCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSldLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRIRU5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OlZpcnR1YWxHYXRld2F5Jywge1xuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgTGlzdGVuZXJzOiBbXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgVExTOiB7XG4gICAgICAgICAgICAgICAgTW9kZTogYXBwbWVzaC5UbHNNb2RlLlNUUklDVCxcbiAgICAgICAgICAgICAgICBDZXJ0aWZpY2F0ZToge1xuICAgICAgICAgICAgICAgICAgQUNNOiB7XG4gICAgICAgICAgICAgICAgICAgIENlcnRpZmljYXRlQXJuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgUmVmOiAnY2VydDU2Q0E5NEVCJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3dpdGggYW4gZ3JwYyBsaXN0ZW5lciB3aXRoIGEgVExTIGNlcnRpZmljYXRlIGZyb20gZmlsZScsICgpID0+IHtcbiAgICAgIC8vIEdJVkVOXG4gICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgLy8gV0hFTlxuICAgICAgY29uc3QgbWVzaCA9IG5ldyBhcHBtZXNoLk1lc2goc3RhY2ssICdtZXNoJywge1xuICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICB9KTtcblxuICAgICAgbmV3IGFwcG1lc2guVmlydHVhbEdhdGV3YXkoc3RhY2ssICd0ZXN0R2F0ZXdheScsIHtcbiAgICAgICAgdmlydHVhbEdhdGV3YXlOYW1lOiAndGVzdC1nYXRld2F5JyxcbiAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgbGlzdGVuZXJzOiBbYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmdycGMoe1xuICAgICAgICAgIHBvcnQ6IDgwODAsXG4gICAgICAgICAgdGxzOiB7XG4gICAgICAgICAgICBtb2RlOiBhcHBtZXNoLlRsc01vZGUuU1RSSUNULFxuICAgICAgICAgICAgY2VydGlmaWNhdGU6IGFwcG1lc2guVGxzQ2VydGlmaWNhdGUuZmlsZSgncGF0aC90by9jZXJ0Q2hhaW4nLCAncGF0aC90by9wcml2YXRlS2V5JyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSldLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRIRU5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OlZpcnR1YWxHYXRld2F5Jywge1xuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgTGlzdGVuZXJzOiBbXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgVExTOiB7XG4gICAgICAgICAgICAgICAgTW9kZTogYXBwbWVzaC5UbHNNb2RlLlNUUklDVCxcbiAgICAgICAgICAgICAgICBDZXJ0aWZpY2F0ZToge1xuICAgICAgICAgICAgICAgICAgRmlsZToge1xuICAgICAgICAgICAgICAgICAgICBDZXJ0aWZpY2F0ZUNoYWluOiAncGF0aC90by9jZXJ0Q2hhaW4nLFxuICAgICAgICAgICAgICAgICAgICBQcml2YXRlS2V5OiAncGF0aC90by9wcml2YXRlS2V5JyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3dpdGggYW4gaHR0cDIgbGlzdGVuZXIgd2l0aCBhIFRMUyBjZXJ0aWZpY2F0ZSBmcm9tIFNEUycsICgpID0+IHtcbiAgICAgIC8vIEdJVkVOXG4gICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFdIRU5cbiAgICAgIG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAndGVzdEdhdGV3YXknLCB7XG4gICAgICAgIHZpcnR1YWxHYXRld2F5TmFtZTogJ3Rlc3QtZ2F0ZXdheScsXG4gICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwMih7XG4gICAgICAgICAgcG9ydDogODA4MCxcbiAgICAgICAgICB0bHM6IHtcbiAgICAgICAgICAgIG1vZGU6IGFwcG1lc2guVGxzTW9kZS5TVFJJQ1QsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0ZTogYXBwbWVzaC5UbHNDZXJ0aWZpY2F0ZS5zZHMoJ3NlY3JldF9jZXJ0aWZpY2F0ZScpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUSEVOXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpWaXJ0dWFsR2F0ZXdheScsIHtcbiAgICAgICAgU3BlYzoge1xuICAgICAgICAgIExpc3RlbmVyczogW1xuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgICAgIFRMUzoge1xuICAgICAgICAgICAgICAgIE1vZGU6IGFwcG1lc2guVGxzTW9kZS5TVFJJQ1QsXG4gICAgICAgICAgICAgICAgQ2VydGlmaWNhdGU6IHtcbiAgICAgICAgICAgICAgICAgIFNEUzoge1xuICAgICAgICAgICAgICAgICAgICBTZWNyZXROYW1lOiAnc2VjcmV0X2NlcnRpZmljYXRlJyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd3aXRoIGFuIGdycGMgbGlzdGVuZXIgd2l0aCBhIFRMUyB2YWxpZGF0aW9uIGZyb20gZmlsZScsICgpID0+IHtcbiAgICAgIHRlc3QoJ3RoZSBsaXN0ZW5lciBzaG91bGQgaW5jbHVkZSB0aGUgVExTIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICAgIC8vIEdJVkVOXG4gICAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAndGVzdEdhdGV3YXknLCB7XG4gICAgICAgICAgdmlydHVhbEdhdGV3YXlOYW1lOiAndGVzdC1nYXRld2F5JyxcbiAgICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5ncnBjKHtcbiAgICAgICAgICAgIHBvcnQ6IDgwODAsXG4gICAgICAgICAgICB0bHM6IHtcbiAgICAgICAgICAgICAgbW9kZTogYXBwbWVzaC5UbHNNb2RlLlNUUklDVCxcbiAgICAgICAgICAgICAgY2VydGlmaWNhdGU6IGFwcG1lc2guVGxzQ2VydGlmaWNhdGUuZmlsZSgncGF0aC90by9jZXJ0Q2hhaW4nLCAncGF0aC90by9wcml2YXRlS2V5JyksXG4gICAgICAgICAgICAgIG11dHVhbFRsc1ZhbGlkYXRpb246IHtcbiAgICAgICAgICAgICAgICB0cnVzdDogYXBwbWVzaC5UbHNWYWxpZGF0aW9uVHJ1c3QuZmlsZSgncGF0aC90by9jZXJ0Q2hhaW4nKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSldLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUSEVOXG4gICAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OlZpcnR1YWxHYXRld2F5Jywge1xuICAgICAgICAgIFNwZWM6IHtcbiAgICAgICAgICAgIExpc3RlbmVyczogW1xuICAgICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgICBUTFM6IHtcbiAgICAgICAgICAgICAgICAgIE1vZGU6IGFwcG1lc2guVGxzTW9kZS5TVFJJQ1QsXG4gICAgICAgICAgICAgICAgICBDZXJ0aWZpY2F0ZToge1xuICAgICAgICAgICAgICAgICAgICBGaWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgQ2VydGlmaWNhdGVDaGFpbjogJ3BhdGgvdG8vY2VydENoYWluJyxcbiAgICAgICAgICAgICAgICAgICAgICBQcml2YXRlS2V5OiAncGF0aC90by9wcml2YXRlS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBWYWxpZGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIFRydXN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgRmlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ2VydGlmaWNhdGVDaGFpbjogJ3BhdGgvdG8vY2VydENoYWluJyxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd3aXRoIGFuIGh0dHAyIGxpc3RlbmVyIHdpdGggYSBUTFMgdmFsaWRhdGlvbiBmcm9tIFNEUycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3RoZSBsaXN0ZW5lciBzaG91bGQgaW5jbHVkZSB0aGUgVExTIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICAgIC8vIEdJVkVOXG4gICAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuICAgICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgICAgbWVzaE5hbWU6ICd0ZXN0LW1lc2gnLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAndGVzdEdhdGV3YXknLCB7XG4gICAgICAgICAgdmlydHVhbEdhdGV3YXlOYW1lOiAndGVzdC1nYXRld2F5JyxcbiAgICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgICAgIGxpc3RlbmVyczogW2FwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwMih7XG4gICAgICAgICAgICBwb3J0OiA4MDgwLFxuICAgICAgICAgICAgdGxzOiB7XG4gICAgICAgICAgICAgIG1vZGU6IGFwcG1lc2guVGxzTW9kZS5TVFJJQ1QsXG4gICAgICAgICAgICAgIGNlcnRpZmljYXRlOiBhcHBtZXNoLlRsc0NlcnRpZmljYXRlLnNkcygnc2VjcmV0X2NlcnRpZmljYXRlJyksXG4gICAgICAgICAgICAgIG11dHVhbFRsc1ZhbGlkYXRpb246IHtcbiAgICAgICAgICAgICAgICBzdWJqZWN0QWx0ZXJuYXRpdmVOYW1lczogYXBwbWVzaC5TdWJqZWN0QWx0ZXJuYXRpdmVOYW1lcy5tYXRjaGluZ0V4YWN0bHkoJ21lc2gtZW5kcG9pbnQuYXBwcy5sb2NhbCcpLFxuICAgICAgICAgICAgICAgIHRydXN0OiBhcHBtZXNoLlRsc1ZhbGlkYXRpb25UcnVzdC5zZHMoJ3NlY3JldF92YWxpZGF0aW9uJyksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVEhFTlxuICAgICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpWaXJ0dWFsR2F0ZXdheScsIHtcbiAgICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgICBMaXN0ZW5lcnM6IFtcbiAgICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgICAgICAgVExTOiB7XG4gICAgICAgICAgICAgICAgICBNb2RlOiBhcHBtZXNoLlRsc01vZGUuU1RSSUNULFxuICAgICAgICAgICAgICAgICAgQ2VydGlmaWNhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgU0RTOiB7XG4gICAgICAgICAgICAgICAgICAgICAgU2VjcmV0TmFtZTogJ3NlY3JldF9jZXJ0aWZpY2F0ZScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBTdWJqZWN0QWx0ZXJuYXRpdmVOYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgIE1hdGNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFeGFjdDogWydtZXNoLWVuZHBvaW50LmFwcHMubG9jYWwnXSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3dpdGggYW4gZ3JwYyBsaXN0ZW5lciB3aXRoIHRoZSBUTFMgbW9kZSBwZXJtaXNzaXZlJywgKCkgPT4ge1xuICAgICAgLy8gR0lWRU5cbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgICAvLyBXSEVOXG4gICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgIH0pO1xuXG4gICAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3Rlc3RHYXRld2F5Jywge1xuICAgICAgICB2aXJ0dWFsR2F0ZXdheU5hbWU6ICd0ZXN0LWdhdGV3YXknLFxuICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgICBsaXN0ZW5lcnM6IFthcHBtZXNoLlZpcnR1YWxHYXRld2F5TGlzdGVuZXIuZ3JwYyh7XG4gICAgICAgICAgcG9ydDogODA4MCxcbiAgICAgICAgICB0bHM6IHtcbiAgICAgICAgICAgIG1vZGU6IGFwcG1lc2guVGxzTW9kZS5QRVJNSVNTSVZFLFxuICAgICAgICAgICAgY2VydGlmaWNhdGU6IGFwcG1lc2guVGxzQ2VydGlmaWNhdGUuZmlsZSgncGF0aC90by9jZXJ0Q2hhaW4nLCAncGF0aC90by9wcml2YXRlS2V5JyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSldLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRIRU5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OlZpcnR1YWxHYXRld2F5Jywge1xuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgTGlzdGVuZXJzOiBbXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgVExTOiB7XG4gICAgICAgICAgICAgICAgTW9kZTogYXBwbWVzaC5UbHNNb2RlLlBFUk1JU1NJVkUsXG4gICAgICAgICAgICAgICAgQ2VydGlmaWNhdGU6IHtcbiAgICAgICAgICAgICAgICAgIEZpbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgQ2VydGlmaWNhdGVDaGFpbjogJ3BhdGgvdG8vY2VydENoYWluJyxcbiAgICAgICAgICAgICAgICAgICAgUHJpdmF0ZUtleTogJ3BhdGgvdG8vcHJpdmF0ZUtleScsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnd2l0aCBzaGFyZWQgc2VydmljZSBtZXNoJywgKCkgPT4ge1xuICAgICAgdGVzdCgnTWVzaCBPd25lciBpcyB0aGUgQVdTIGFjY291bnQgSUQgb2YgdGhlIGFjY291bnQgdGhhdCBzaGFyZWQgdGhlIG1lc2ggd2l0aCB5b3VyIGFjY291bnQnLCAoKSA9PiB7XG4gICAgICAgIC8vIEdJVkVOXG4gICAgICAgIGNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG4gICAgICAgIGNvbnN0IG1lc2hFbnYgPSB7IGFjY291bnQ6ICcxMjM0NTY3ODk5JywgcmVnaW9uOiAndXMtd2VzdC0yJyB9O1xuICAgICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheUVudiA9IHsgYWNjb3VudDogJzk5ODc2NTQzMjEnLCByZWdpb246ICd1cy13ZXN0LTInIH07XG5cbiAgICAgICAgLy8gQ3JlYXRpbmcgc3RhY2sgaW4gQWNjb3VudCA5OTg3NjU0MzIxXG4gICAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjayhhcHAsICdteVNoYXJlZFN0YWNrJywgeyBlbnY6IHZpcnR1YWxHYXRld2F5RW52IH0pO1xuICAgICAgICAvLyBNZXNoIGlzIGluIEFjY291bnQgMTIzNDU2Nzg5OVxuICAgICAgICBjb25zdCBzaGFyZWRNZXNoID0gYXBwbWVzaC5NZXNoLmZyb21NZXNoQXJuKHN0YWNrLCAnc2hhcmVkLW1lc2gnLFxuICAgICAgICAgIGBhcm46YXdzOmFwcG1lc2g6JHttZXNoRW52LnJlZ2lvbn06JHttZXNoRW52LmFjY291bnR9Om1lc2gvc2hhcmVkLW1lc2hgKTtcblxuICAgICAgICAvLyBXSEVOXG4gICAgICAgIG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAndGVzdC1ub2RlJywge1xuICAgICAgICAgIG1lc2g6IHNoYXJlZE1lc2gsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRIRU5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6VmlydHVhbEdhdGV3YXknLCB7XG4gICAgICAgICAgTWVzaE93bmVyOiBtZXNoRW52LmFjY291bnQsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdXaGVuIGFkZGluZyBhIGdhdGV3YXkgcm91dGUgdG8gZXhpc3RpbmcgVmlydHVhbEdhdGV3YXkgJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgZ2F0ZXdheSByb3V0ZSByZXNvdXJjZScsICgpID0+IHtcbiAgICAgIC8vIEdJVkVOXG4gICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgLy8gV0hFTlxuICAgICAgY29uc3QgbWVzaCA9IG5ldyBhcHBtZXNoLk1lc2goc3RhY2ssICdtZXNoJywge1xuICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdmlydHVhbEdhdGV3YXkgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3Rlc3RHYXRld2F5Jywge1xuICAgICAgICB2aXJ0dWFsR2F0ZXdheU5hbWU6ICd0ZXN0LWdhdGV3YXknLFxuICAgICAgICBtZXNoOiBtZXNoLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpcnR1YWxTZXJ2aWNlID0gbmV3IGFwcG1lc2guVmlydHVhbFNlcnZpY2Uoc3RhY2ssICd2aXJ0dWFsU2VydmljZScsIHtcbiAgICAgICAgdmlydHVhbFNlcnZpY2VQcm92aWRlcjogYXBwbWVzaC5WaXJ0dWFsU2VydmljZVByb3ZpZGVyLm5vbmUobWVzaCksXG4gICAgICB9KTtcblxuICAgICAgdmlydHVhbEdhdGV3YXkuYWRkR2F0ZXdheVJvdXRlKCd0ZXN0R2F0ZXdheVJvdXRlJywge1xuICAgICAgICBnYXRld2F5Um91dGVOYW1lOiAndGVzdC1nYXRld2F5LXJvdXRlJyxcbiAgICAgICAgcm91dGVTcGVjOiBhcHBtZXNoLkdhdGV3YXlSb3V0ZVNwZWMuaHR0cCh7XG4gICAgICAgICAgcm91dGVUYXJnZXQ6IHZpcnR1YWxTZXJ2aWNlLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUSEVOXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpHYXRld2F5Um91dGUnLCB7XG4gICAgICAgIEdhdGV3YXlSb3V0ZU5hbWU6ICd0ZXN0LWdhdGV3YXktcm91dGUnLFxuICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgSHR0cFJvdXRlOiB7XG4gICAgICAgICAgICBBY3Rpb246IHtcbiAgICAgICAgICAgICAgVGFyZ2V0OiB7XG4gICAgICAgICAgICAgICAgVmlydHVhbFNlcnZpY2U6IHtcbiAgICAgICAgICAgICAgICAgIFZpcnR1YWxTZXJ2aWNlTmFtZToge1xuICAgICAgICAgICAgICAgICAgICAnRm46OkdldEF0dCc6IFsndmlydHVhbFNlcnZpY2UwM0EwNEI4NycsICdWaXJ0dWFsU2VydmljZU5hbWUnXSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBNYXRjaDoge1xuICAgICAgICAgICAgICBQcmVmaXg6ICcvJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnV2hlbiBhZGRpbmcgZ2F0ZXdheSByb3V0ZXMgdG8gYSBWaXJ0dWFsR2F0ZXdheSB3aXRoIGV4aXN0aW5nIGdhdGV3YXkgcm91dGVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBhZGQgZ2F0ZXdheSByb3V0ZXMgYW5kIG5vdCBvdmVyd2l0ZScsICgpID0+IHtcbiAgICAgIC8vIEdJVkVOXG4gICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgICAgLy8gV0hFTlxuICAgICAgY29uc3QgbWVzaCA9IG5ldyBhcHBtZXNoLk1lc2goc3RhY2ssICdtZXNoJywge1xuICAgICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdmlydHVhbFNlcnZpY2UgPSBuZXcgYXBwbWVzaC5WaXJ0dWFsU2VydmljZShzdGFjaywgJ3ZpcnR1YWxTZXJ2aWNlJywge1xuICAgICAgICB2aXJ0dWFsU2VydmljZVByb3ZpZGVyOiBhcHBtZXNoLlZpcnR1YWxTZXJ2aWNlUHJvdmlkZXIubm9uZShtZXNoKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheSA9IG1lc2guYWRkVmlydHVhbEdhdGV3YXkoJ2dhdGV3YXknKTtcbiAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgndGVzdEdhdGV3YXlSb3V0ZScsIHtcbiAgICAgICAgZ2F0ZXdheVJvdXRlTmFtZTogJ3Rlc3QtZ2F0ZXdheS1yb3V0ZScsXG4gICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIHZpcnR1YWxHYXRld2F5LmFkZEdhdGV3YXlSb3V0ZSgndGVzdEdhdGV3YXlSb3V0ZTInLCB7XG4gICAgICAgIGdhdGV3YXlSb3V0ZU5hbWU6ICd0ZXN0LWdhdGV3YXktcm91dGUtMicsXG4gICAgICAgIHJvdXRlU3BlYzogYXBwbWVzaC5HYXRld2F5Um91dGVTcGVjLmh0dHAoe1xuICAgICAgICAgIHJvdXRlVGFyZ2V0OiB2aXJ0dWFsU2VydmljZSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIC8vIFRIRU5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OkdhdGV3YXlSb3V0ZScsIHtcbiAgICAgICAgR2F0ZXdheVJvdXRlTmFtZTogJ3Rlc3QtZ2F0ZXdheS1yb3V0ZScsXG4gICAgICB9KTtcbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OkdhdGV3YXlSb3V0ZScsIHtcbiAgICAgICAgR2F0ZXdheVJvdXRlTmFtZTogJ3Rlc3QtZ2F0ZXdheS1yb3V0ZS0yJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnV2hlbiBjcmVhdGluZyBhIFZpcnR1YWxHYXRld2F5IHdpdGggYmFja2VuZCBkZWZhdWx0cycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgYWRkIGJhY2tlbmQgZGVmYXVsdHMgdG8gdGhlIFZpcnR1YWxHYXRld2F5JywgKCkgPT4ge1xuICAgICAgLy8gR0lWRU5cbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgICAvLyBXSEVOXG4gICAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgIH0pO1xuXG4gICAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3ZpcnR1YWwtZ2F0ZXdheScsIHtcbiAgICAgICAgdmlydHVhbEdhdGV3YXlOYW1lOiAndmlydHVhbC1nYXRld2F5JyxcbiAgICAgICAgbWVzaDogbWVzaCxcbiAgICAgICAgYmFja2VuZERlZmF1bHRzOiB7XG4gICAgICAgICAgdGxzQ2xpZW50UG9saWN5OiB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uOiB7XG4gICAgICAgICAgICAgIHRydXN0OiBhcHBtZXNoLlRsc1ZhbGlkYXRpb25UcnVzdC5maWxlKCdwYXRoLXRvLWNlcnRpZmljYXRlJyksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVEhFTlxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6VmlydHVhbEdhdGV3YXknLCB7XG4gICAgICAgIFZpcnR1YWxHYXRld2F5TmFtZTogJ3ZpcnR1YWwtZ2F0ZXdheScsXG4gICAgICAgIFNwZWM6IHtcbiAgICAgICAgICBCYWNrZW5kRGVmYXVsdHM6IHtcbiAgICAgICAgICAgIENsaWVudFBvbGljeToge1xuICAgICAgICAgICAgICBUTFM6IHtcbiAgICAgICAgICAgICAgICBWYWxpZGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICBUcnVzdDoge1xuICAgICAgICAgICAgICAgICAgICBGaWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgQ2VydGlmaWNhdGVDaGFpbjogJ3BhdGgtdG8tY2VydGlmaWNhdGUnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIndpdGggY2xpZW50J3MgVExTIGNlcnRpZmljYXRlIGZyb20gU0RTXCIsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBhZGQgYSBiYWNrZW5kIGRlZmF1bHQgdG8gdGhlIHJlc291cmNlIHdpdGggVExTIGNlcnRpZmljYXRlJywgKCkgPT4ge1xuICAgICAgICAvLyBHSVZFTlxuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICAgICAgY29uc3QgbWVzaCA9IG5ldyBhcHBtZXNoLk1lc2goc3RhY2ssICdtZXNoJywge1xuICAgICAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gV0hFTlxuICAgICAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3ZpcnR1YWwtZ2F0ZXdheScsIHtcbiAgICAgICAgICB2aXJ0dWFsR2F0ZXdheU5hbWU6ICd2aXJ0dWFsLWdhdGV3YXknLFxuICAgICAgICAgIG1lc2g6IG1lc2gsXG4gICAgICAgICAgYmFja2VuZERlZmF1bHRzOiB7XG4gICAgICAgICAgICB0bHNDbGllbnRQb2xpY3k6IHtcbiAgICAgICAgICAgICAgbXV0dWFsVGxzQ2VydGlmaWNhdGU6IGFwcG1lc2guVGxzQ2VydGlmaWNhdGUuc2RzKCAnc2VjcmV0X2NlcnRpZmljYXRlJyksXG4gICAgICAgICAgICAgIHZhbGlkYXRpb246IHtcbiAgICAgICAgICAgICAgICBzdWJqZWN0QWx0ZXJuYXRpdmVOYW1lczogYXBwbWVzaC5TdWJqZWN0QWx0ZXJuYXRpdmVOYW1lcy5tYXRjaGluZ0V4YWN0bHkoJ21lc2gtZW5kcG9pbnQuYXBwcy5sb2NhbCcpLFxuICAgICAgICAgICAgICAgIHRydXN0OiBhcHBtZXNoLlRsc1ZhbGlkYXRpb25UcnVzdC5zZHMoJ3NlY3JldF92YWxpZGF0aW9uJyksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRIRU5cbiAgICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBwTWVzaDo6VmlydHVhbEdhdGV3YXknLCB7XG4gICAgICAgICAgVmlydHVhbEdhdGV3YXlOYW1lOiAndmlydHVhbC1nYXRld2F5JyxcbiAgICAgICAgICBTcGVjOiB7XG4gICAgICAgICAgICBCYWNrZW5kRGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgQ2xpZW50UG9saWN5OiB7XG4gICAgICAgICAgICAgICAgVExTOiB7XG4gICAgICAgICAgICAgICAgICBDZXJ0aWZpY2F0ZToge1xuICAgICAgICAgICAgICAgICAgICBTRFM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBTZWNyZXROYW1lOiAnc2VjcmV0X2NlcnRpZmljYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBWYWxpZGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIFN1YmplY3RBbHRlcm5hdGl2ZU5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgTWF0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEV4YWN0OiBbJ21lc2gtZW5kcG9pbnQuYXBwcy5sb2NhbCddLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFRydXN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgU0RTOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTZWNyZXROYW1lOiAnc2VjcmV0X3ZhbGlkYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ0NhbiBhZGQgYW4gaHR0cCBjb25uZWN0aW9uIHBvb2wgdG8gbGlzdGVuZXInLCAoKSA9PiB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgIC8vIFdIRU5cbiAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgfSk7XG5cbiAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3ZpcnR1YWwtZ2F0ZXdheScsIHtcbiAgICAgIHZpcnR1YWxHYXRld2F5TmFtZTogJ3ZpcnR1YWwtZ2F0ZXdheScsXG4gICAgICBtZXNoOiBtZXNoLFxuICAgICAgbGlzdGVuZXJzOiBbXG4gICAgICAgIGFwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5odHRwKHtcbiAgICAgICAgICBwb3J0OiA4MCxcbiAgICAgICAgICBjb25uZWN0aW9uUG9vbDoge1xuICAgICAgICAgICAgbWF4Q29ubmVjdGlvbnM6IDEwMCxcbiAgICAgICAgICAgIG1heFBlbmRpbmdSZXF1ZXN0czogMTAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwcE1lc2g6OlZpcnR1YWxHYXRld2F5Jywge1xuICAgICAgVmlydHVhbEdhdGV3YXlOYW1lOiAndmlydHVhbC1nYXRld2F5JyxcbiAgICAgIFNwZWM6IHtcbiAgICAgICAgTGlzdGVuZXJzOiBbXG4gICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgICBDb25uZWN0aW9uUG9vbDoge1xuICAgICAgICAgICAgICBIVFRQOiB7XG4gICAgICAgICAgICAgICAgTWF4Q29ubmVjdGlvbnM6IDEwMCxcbiAgICAgICAgICAgICAgICBNYXhQZW5kaW5nUmVxdWVzdHM6IDEwLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ0NhbiBhZGQgYW4gZ3JwYyBjb25uZWN0aW9uIHBvb2wgdG8gbGlzdGVuZXInLCAoKSA9PiB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgIC8vIFdIRU5cbiAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgfSk7XG5cbiAgICBuZXcgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheShzdGFjaywgJ3ZpcnR1YWwtZ2F0ZXdheScsIHtcbiAgICAgIHZpcnR1YWxHYXRld2F5TmFtZTogJ3ZpcnR1YWwtZ2F0ZXdheScsXG4gICAgICBtZXNoOiBtZXNoLFxuICAgICAgbGlzdGVuZXJzOiBbXG4gICAgICAgIGFwcG1lc2guVmlydHVhbEdhdGV3YXlMaXN0ZW5lci5ncnBjKHtcbiAgICAgICAgICBwb3J0OiA4MCxcbiAgICAgICAgICBjb25uZWN0aW9uUG9vbDoge1xuICAgICAgICAgICAgbWF4UmVxdWVzdHM6IDEwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpWaXJ0dWFsR2F0ZXdheScsIHtcbiAgICAgIFZpcnR1YWxHYXRld2F5TmFtZTogJ3ZpcnR1YWwtZ2F0ZXdheScsXG4gICAgICBTcGVjOiB7XG4gICAgICAgIExpc3RlbmVyczogW1xuICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgICAgQ29ubmVjdGlvblBvb2w6IHtcbiAgICAgICAgICAgICAgR1JQQzoge1xuICAgICAgICAgICAgICAgIE1heFJlcXVlc3RzOiAxMCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdDYW4gYWRkIGFuIGh0dHAyIGNvbm5lY3Rpb24gcG9vbCB0byBsaXN0ZW5lcicsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgLy8gV0hFTlxuICAgIGNvbnN0IG1lc2ggPSBuZXcgYXBwbWVzaC5NZXNoKHN0YWNrLCAnbWVzaCcsIHtcbiAgICAgIG1lc2hOYW1lOiAndGVzdC1tZXNoJyxcbiAgICB9KTtcblxuICAgIG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAndmlydHVhbC1nYXRld2F5Jywge1xuICAgICAgdmlydHVhbEdhdGV3YXlOYW1lOiAndmlydHVhbC1nYXRld2F5JyxcbiAgICAgIG1lc2g6IG1lc2gsXG4gICAgICBsaXN0ZW5lcnM6IFtcbiAgICAgICAgYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheUxpc3RlbmVyLmh0dHAyKHtcbiAgICAgICAgICBwb3J0OiA4MCxcbiAgICAgICAgICBjb25uZWN0aW9uUG9vbDoge1xuICAgICAgICAgICAgbWF4UmVxdWVzdHM6IDEwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcHBNZXNoOjpWaXJ0dWFsR2F0ZXdheScsIHtcbiAgICAgIFZpcnR1YWxHYXRld2F5TmFtZTogJ3ZpcnR1YWwtZ2F0ZXdheScsXG4gICAgICBTcGVjOiB7XG4gICAgICAgIExpc3RlbmVyczogW1xuICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgICAgQ29ubmVjdGlvblBvb2w6IHtcbiAgICAgICAgICAgICAgSFRUUDI6IHtcbiAgICAgICAgICAgICAgICBNYXhSZXF1ZXN0czogMTAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnQ2FuIGltcG9ydCBWaXJ0dWFsR2F0ZXdheXMgdXNpbmcgYW4gQVJOJywgKCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soYXBwLCAnSW1wb3J0cycsIHtcbiAgICAgIGVudjogeyBhY2NvdW50OiAnMTIzNDU2Nzg5MDEyJywgcmVnaW9uOiAndXMtZWFzdC0xJyB9LFxuICAgIH0pO1xuICAgIGNvbnN0IG1lc2hOYW1lID0gJ3Rlc3RNZXNoJztcbiAgICBjb25zdCB2aXJ0dWFsR2F0ZXdheU5hbWUgPSAndGVzdC1nYXRld2F5JztcbiAgICBjb25zdCBhcm4gPSBgYXJuOmF3czphcHBtZXNoOnVzLWVhc3QtMToxMjM0NTY3ODkwMTI6bWVzaC8ke21lc2hOYW1lfS92aXJ0dWFsR2F0ZXdheS8ke3ZpcnR1YWxHYXRld2F5TmFtZX1gO1xuXG4gICAgLy8gV0hFTlxuICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheS5mcm9tVmlydHVhbEdhdGV3YXlBcm4oXG4gICAgICBzdGFjaywgJ2ltcG9ydGVkR2F0ZXdheScsIGFybik7XG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdCh2aXJ0dWFsR2F0ZXdheS5tZXNoLm1lc2hOYW1lKS50b0VxdWFsKG1lc2hOYW1lKTtcbiAgICBleHBlY3QodmlydHVhbEdhdGV3YXkudmlydHVhbEdhdGV3YXlOYW1lKS50b0VxdWFsKHZpcnR1YWxHYXRld2F5TmFtZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ0NhbiBpbXBvcnQgVmlydHVhbEdhdGV3YXlzIHVzaW5nIGF0dHJpYnV0ZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjayhhcHAsICdJbXBvcnRzJywge1xuICAgICAgZW52OiB7IGFjY291bnQ6ICcxMjM0NTY3ODkwMTInLCByZWdpb246ICd1cy1lYXN0LTEnIH0sXG4gICAgfSk7XG4gICAgY29uc3QgbWVzaE5hbWUgPSAndGVzdE1lc2gnO1xuICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5TmFtZSA9ICd0ZXN0LWdhdGV3YXknO1xuXG4gICAgLy8gV0hFTlxuICAgIGNvbnN0IHZpcnR1YWxHYXRld2F5ID0gYXBwbWVzaC5WaXJ0dWFsR2F0ZXdheS5mcm9tVmlydHVhbEdhdGV3YXlBdHRyaWJ1dGVzKHN0YWNrLCAnaW1wb3J0ZWRHYXRld2F5Jywge1xuICAgICAgbWVzaDogYXBwbWVzaC5NZXNoLmZyb21NZXNoTmFtZShzdGFjaywgJ01lc2gnLCBtZXNoTmFtZSksXG4gICAgICB2aXJ0dWFsR2F0ZXdheU5hbWU6IHZpcnR1YWxHYXRld2F5TmFtZSxcbiAgICB9KTtcbiAgICAvLyBUSEVOXG4gICAgZXhwZWN0KHZpcnR1YWxHYXRld2F5Lm1lc2gubWVzaE5hbWUpLnRvRXF1YWwobWVzaE5hbWUpO1xuICAgIGV4cGVjdCh2aXJ0dWFsR2F0ZXdheS52aXJ0dWFsR2F0ZXdheU5hbWUpLnRvRXF1YWwodmlydHVhbEdhdGV3YXlOYW1lKTtcbiAgfSk7XG5cbiAgdGVzdCgnQ2FuIGdyYW50IGFuIGlkZW50aXR5IFN0cmVhbUFnZ3JlZ2F0ZWRSZXNvdXJjZXMgZm9yIGEgZ2l2ZW4gVmlydHVhbEdhdGV3YXknLCAoKSA9PiB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICBjb25zdCBtZXNoID0gbmV3IGFwcG1lc2guTWVzaChzdGFjaywgJ21lc2gnLCB7XG4gICAgICBtZXNoTmFtZTogJ3Rlc3QtbWVzaCcsXG4gICAgfSk7XG4gICAgY29uc3QgZ2F0ZXdheSA9IG5ldyBhcHBtZXNoLlZpcnR1YWxHYXRld2F5KHN0YWNrLCAndGVzdEdhdGV3YXknLCB7XG4gICAgICBtZXNoOiBtZXNoLFxuICAgIH0pO1xuXG4gICAgLy8gV0hFTlxuICAgIGNvbnN0IHVzZXIgPSBuZXcgaWFtLlVzZXIoc3RhY2ssICd0ZXN0Jyk7XG4gICAgZ2F0ZXdheS5ncmFudFN0cmVhbUFnZ3JlZ2F0ZWRSZXNvdXJjZXModXNlcik7XG5cbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6SUFNOjpQb2xpY3knLCB7XG4gICAgICBQb2xpY3lEb2N1bWVudDoge1xuICAgICAgICBTdGF0ZW1lbnQ6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBBY3Rpb246ICdhcHBtZXNoOlN0cmVhbUFnZ3JlZ2F0ZWRSZXNvdXJjZXMnLFxuICAgICAgICAgICAgRWZmZWN0OiAnQWxsb3cnLFxuICAgICAgICAgICAgUmVzb3VyY2U6IHtcbiAgICAgICAgICAgICAgUmVmOiAndGVzdEdhdGV3YXlGMDlFQzM0OScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcbn0pOyJdfQ==