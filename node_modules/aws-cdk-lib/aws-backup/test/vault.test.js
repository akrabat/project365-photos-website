"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const iam = require("../../aws-iam");
const kms = require("../../aws-kms");
const sns = require("../../aws-sns");
const core_1 = require("../../core");
const lib_1 = require("../lib");
let stack;
beforeEach(() => {
    stack = new core_1.Stack();
});
test('create a vault', () => {
    // WHEN
    new lib_1.BackupVault(stack, 'Vault');
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        BackupVaultName: 'Vault',
    });
});
test('with access policy', () => {
    // GIVEN
    const accessPolicy = new iam.PolicyDocument({
        statements: [
            new iam.PolicyStatement({
                effect: iam.Effect.DENY,
                principals: [new iam.AnyPrincipal()],
                actions: ['backup:DeleteRecoveryPoint'],
                resources: ['*'],
                conditions: {
                    StringNotLike: {
                        'aws:userId': [
                            'user-arn',
                        ],
                    },
                },
            }),
        ],
    });
    // WHEN
    new lib_1.BackupVault(stack, 'Vault', {
        accessPolicy,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        AccessPolicy: {
            Version: '2012-10-17',
            Statement: [
                {
                    Effect: 'Deny',
                    Principal: { AWS: '*' },
                    Action: 'backup:DeleteRecoveryPoint',
                    Resource: '*',
                    Condition: {
                        StringNotLike: {
                            'aws:userId': [
                                'user-arn',
                            ],
                        },
                    },
                },
            ],
        },
    });
});
test('with blockRecoveryPointDeletion', () => {
    // WHEN
    new lib_1.BackupVault(stack, 'Vault', {
        blockRecoveryPointDeletion: true,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        AccessPolicy: {
            Version: '2012-10-17',
            Statement: [
                {
                    Effect: 'Deny',
                    Principal: {
                        AWS: '*',
                    },
                    Action: [
                        'backup:DeleteRecoveryPoint',
                        'backup:UpdateRecoveryPointLifecycle',
                    ],
                    Resource: '*',
                },
            ],
        },
    });
});
test('merges statements from accessPolicy and blockRecoveryPointDeletion', () => {
    // WHEN
    new lib_1.BackupVault(stack, 'Vault', {
        accessPolicy: new iam.PolicyDocument({
            statements: [
                new iam.PolicyStatement({
                    effect: iam.Effect.DENY,
                    principals: [new iam.ArnPrincipal('arn:aws:iam::123456789012:role/MyRole')],
                    actions: ['backup:StartRestoreJob'],
                }),
            ],
        }),
        blockRecoveryPointDeletion: true,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        AccessPolicy: {
            Version: '2012-10-17',
            Statement: [
                {
                    Action: 'backup:StartRestoreJob',
                    Effect: 'Deny',
                    Principal: {
                        AWS: 'arn:aws:iam::123456789012:role/MyRole',
                    },
                },
                {
                    Effect: 'Deny',
                    Principal: {
                        AWS: '*',
                    },
                    Action: [
                        'backup:DeleteRecoveryPoint',
                        'backup:UpdateRecoveryPointLifecycle',
                    ],
                    Resource: '*',
                },
            ],
        },
    });
});
test('addToAccessPolicy()', () => {
    // GIVEN
    const vault = new lib_1.BackupVault(stack, 'Vault');
    // WHEN
    vault.addToAccessPolicy(new iam.PolicyStatement({
        effect: iam.Effect.DENY,
        principals: [new iam.ArnPrincipal('arn:aws:iam::123456789012:role/MyRole')],
        actions: ['backup:StartRestoreJob'],
    }));
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        AccessPolicy: {
            Version: '2012-10-17',
            Statement: [
                {
                    Action: 'backup:StartRestoreJob',
                    Effect: 'Deny',
                    Principal: {
                        AWS: 'arn:aws:iam::123456789012:role/MyRole',
                    },
                },
            ],
        },
    });
});
test('blockRecoveryPointDeletion()', () => {
    // GIVEN
    const vault = new lib_1.BackupVault(stack, 'Vault');
    // WHEN
    vault.blockRecoveryPointDeletion();
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        AccessPolicy: {
            Version: '2012-10-17',
            Statement: [
                {
                    Effect: 'Deny',
                    Principal: {
                        AWS: '*',
                    },
                    Action: [
                        'backup:DeleteRecoveryPoint',
                        'backup:UpdateRecoveryPointLifecycle',
                    ],
                    Resource: '*',
                },
            ],
        },
    });
});
test('with encryption key', () => {
    // GIVEN
    const encryptionKey = new kms.Key(stack, 'Key');
    // WHEN
    new lib_1.BackupVault(stack, 'Vault', {
        encryptionKey,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        EncryptionKeyArn: {
            'Fn::GetAtt': [
                'Key961B73FD',
                'Arn',
            ],
        },
    });
});
test('with notifications', () => {
    // GIVEN
    const topic = new sns.Topic(stack, 'Topic');
    // WHEN
    new lib_1.BackupVault(stack, 'Vault', {
        notificationTopic: topic,
        notificationEvents: [
            lib_1.BackupVaultEvents.BACKUP_JOB_COMPLETED,
            lib_1.BackupVaultEvents.COPY_JOB_FAILED,
        ],
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        Notifications: {
            BackupVaultEvents: [
                'BACKUP_JOB_COMPLETED',
                'COPY_JOB_FAILED',
            ],
            SNSTopicArn: {
                Ref: 'TopicBFC7AF6E',
            },
        },
    });
});
test('defaults to all notifications', () => {
    // GIVEN
    const topic = new sns.Topic(stack, 'Topic');
    // WHEN
    new lib_1.BackupVault(stack, 'Vault', {
        notificationTopic: topic,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        Notifications: {
            BackupVaultEvents: Object.values(lib_1.BackupVaultEvents),
            SNSTopicArn: {
                Ref: 'TopicBFC7AF6E',
            },
        },
    });
});
test('import from arn', () => {
    // WHEN
    const vaultArn = stack.formatArn({
        service: 'backup',
        resource: 'backup-vault',
        resourceName: 'myVaultName',
        arnFormat: core_1.ArnFormat.COLON_RESOURCE_NAME,
    });
    const vault = lib_1.BackupVault.fromBackupVaultArn(stack, 'Vault', vaultArn);
    // THEN
    expect(vault.backupVaultName).toEqual('myVaultName');
    expect(vault.backupVaultArn).toEqual(vaultArn);
});
test('import from name', () => {
    // WHEN
    const vaultName = 'myVaultName';
    const vault = lib_1.BackupVault.fromBackupVaultName(stack, 'Vault', vaultName);
    // THEN
    expect(vault.backupVaultName).toEqual(vaultName);
    expect(vault.backupVaultArn).toEqual(stack.formatArn({
        service: 'backup',
        resource: 'backup-vault',
        resourceName: 'myVaultName',
        arnFormat: core_1.ArnFormat.COLON_RESOURCE_NAME,
    }));
});
test('grant action', () => {
    // GIVEN
    const vaultName = 'myVaultName';
    const vault = lib_1.BackupVault.fromBackupVaultName(stack, 'Vault', vaultName);
    const role = new iam.Role(stack, 'role', { assumedBy: new iam.ServicePrincipal('lambda') });
    // WHEN
    vault.grant(role, 'backup:StartBackupJob');
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Policy', {
        PolicyDocument: {
            Statement: [
                {
                    Action: 'backup:StartBackupJob',
                    Effect: 'Allow',
                    Resource: {
                        'Fn::Join': [
                            '',
                            [
                                'arn:',
                                {
                                    Ref: 'AWS::Partition',
                                },
                                ':backup:',
                                {
                                    Ref: 'AWS::Region',
                                },
                                ':',
                                {
                                    Ref: 'AWS::AccountId',
                                },
                                ':backup-vault:myVaultName',
                            ],
                        ],
                    },
                },
            ],
            Version: '2012-10-17',
        },
        PolicyName: 'roleDefaultPolicy7C980EBA',
        Roles: [
            {
                Ref: 'roleC7B7E775',
            },
        ],
    });
});
test('throw when grant action includes wildcard', () => {
    // GIVEN
    const vaultName = 'myVaultName';
    const vault = lib_1.BackupVault.fromBackupVaultName(stack, 'Vault', vaultName);
    const role = new iam.Role(stack, 'role', { assumedBy: new iam.ServicePrincipal('lambda') });
    // WHEN
    expect(() => vault.grant(role, 'backup:*')).toThrow(/AWS Backup access policies don't support a wildcard in the Action key\./);
});
test('throws with invalid name', () => {
    expect(() => new lib_1.BackupVault(stack, 'Vault', {
        backupVaultName: 'Hello!Inv@lid',
    })).toThrow(/Expected vault name to match pattern/);
});
test('throws with whitespace in name', () => {
    expect(() => new lib_1.BackupVault(stack, 'Vault', {
        backupVaultName: 'Hello Invalid',
    })).toThrow(/Expected vault name to match pattern/);
});
test('throws with too short name', () => {
    expect(() => new lib_1.BackupVault(stack, 'Vault', {
        backupVaultName: 'x',
    })).toThrow(/Expected vault name to match pattern/);
});
test('with lock configuration', () => {
    // WHEN
    new lib_1.BackupVault(stack, 'Vault', {
        lockConfiguration: {
            minRetention: core_1.Duration.days(30),
            maxRetention: core_1.Duration.days(365),
            changeableFor: core_1.Duration.days(7),
        },
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Backup::BackupVault', {
        LockConfiguration: {
            ChangeableForDays: 7,
            MaxRetentionDays: 365,
            MinRetentionDays: 30,
        },
    });
});
test('throws with incorrect lock configuration - min retention', () => {
    expect(() => new lib_1.BackupVault(stack, 'Vault', {
        lockConfiguration: {
            minRetention: core_1.Duration.hours(12),
        },
    })).toThrow(/The shortest minimum retention period you can specify is 1 day/);
});
test('throws with incorrect lock configuration - max retention', () => {
    expect(() => new lib_1.BackupVault(stack, 'Vault', {
        lockConfiguration: {
            minRetention: core_1.Duration.days(7),
            maxRetention: core_1.Duration.days(40000),
        },
    })).toThrow(/The longest maximum retention period you can specify is 36500 days/);
});
test('throws with incorrect lock configuration - max and min retention', () => {
    expect(() => new lib_1.BackupVault(stack, 'Vault', {
        lockConfiguration: {
            minRetention: core_1.Duration.days(7),
            maxRetention: core_1.Duration.days(4),
        },
    })).toThrow(/The maximum retention period \(4 days\) must be greater than the minimum retention period \(7 days\)/);
});
test('throws with incorrect lock configuration - changeable for', () => {
    expect(() => new lib_1.BackupVault(stack, 'Vault', {
        lockConfiguration: {
            minRetention: core_1.Duration.days(7),
            changeableFor: core_1.Duration.days(1),
        },
    })).toThrow(/AWS Backup enforces a 72-hour cooling-off period before Vault Lock takes effect and becomes immutable/);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmF1bHQudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInZhdWx0LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpREFBNEM7QUFDNUMscUNBQXFDO0FBQ3JDLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMscUNBQXdEO0FBQ3hELGdDQUF3RDtBQUV4RCxJQUFJLEtBQVksQ0FBQztBQUNqQixVQUFVLENBQUMsR0FBRyxFQUFFO0lBQ2QsS0FBSyxHQUFHLElBQUksWUFBSyxFQUFFLENBQUM7QUFDdEIsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzFCLE9BQU87SUFDUCxJQUFJLGlCQUFXLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRWhDLE9BQU87SUFDUCxxQkFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQywwQkFBMEIsRUFBRTtRQUMxRSxlQUFlLEVBQUUsT0FBTztLQUN6QixDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDOUIsUUFBUTtJQUNSLE1BQU0sWUFBWSxHQUFHLElBQUksR0FBRyxDQUFDLGNBQWMsQ0FBQztRQUMxQyxVQUFVLEVBQUU7WUFDVixJQUFJLEdBQUcsQ0FBQyxlQUFlLENBQUM7Z0JBQ3RCLE1BQU0sRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUk7Z0JBQ3ZCLFVBQVUsRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUNwQyxPQUFPLEVBQUUsQ0FBQyw0QkFBNEIsQ0FBQztnQkFDdkMsU0FBUyxFQUFFLENBQUMsR0FBRyxDQUFDO2dCQUNoQixVQUFVLEVBQUU7b0JBQ1YsYUFBYSxFQUFFO3dCQUNiLFlBQVksRUFBRTs0QkFDWixVQUFVO3lCQUNYO3FCQUNGO2lCQUNGO2FBQ0YsQ0FBQztT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LENBQUMsQ0FBQyxPQUFPLENBQUMsc0dBQXNHLENBQUMsQ0FBQztBQUN0SCxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQywyREFBMkQsRUFBRSxHQUFHLEVBQUU7SUFDckUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksaUJBQVcsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFO1FBQzNDLGlCQUFpQixFQUFFO1lBQ2pCLFlBQVksRUFBRSxlQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUM5QixhQUFhLEVBQUUsZUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDaEM7S0FDRixDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsdUdBQXVHLENBQUMsQ0FBQztBQUN2SCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlbXBsYXRlIH0gZnJvbSAnLi4vLi4vYXNzZXJ0aW9ucyc7XG5pbXBvcnQgKiBhcyBpYW0gZnJvbSAnLi4vLi4vYXdzLWlhbSc7XG5pbXBvcnQgKiBhcyBrbXMgZnJvbSAnLi4vLi4vYXdzLWttcyc7XG5pbXBvcnQgKiBhcyBzbnMgZnJvbSAnLi4vLi4vYXdzLXNucyc7XG5pbXBvcnQgeyBBcm5Gb3JtYXQsIER1cmF0aW9uLCBTdGFjayB9IGZyb20gJy4uLy4uL2NvcmUnO1xuaW1wb3J0IHsgQmFja3VwVmF1bHQsIEJhY2t1cFZhdWx0RXZlbnRzIH0gZnJvbSAnLi4vbGliJztcblxubGV0IHN0YWNrOiBTdGFjaztcbmJlZm9yZUVhY2goKCkgPT4ge1xuICBzdGFjayA9IG5ldyBTdGFjaygpO1xufSk7XG5cbnRlc3QoJ2NyZWF0ZSBhIHZhdWx0JywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIG5ldyBCYWNrdXBWYXVsdChzdGFjaywgJ1ZhdWx0Jyk7XG5cbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpCYWNrdXA6OkJhY2t1cFZhdWx0Jywge1xuICAgIEJhY2t1cFZhdWx0TmFtZTogJ1ZhdWx0JyxcbiAgfSk7XG59KTtcblxudGVzdCgnd2l0aCBhY2Nlc3MgcG9saWN5JywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCBhY2Nlc3NQb2xpY3kgPSBuZXcgaWFtLlBvbGljeURvY3VtZW50KHtcbiAgICBzdGF0ZW1lbnRzOiBbXG4gICAgICBuZXcgaWFtLlBvbGljeVN0YXRlbWVudCh7XG4gICAgICAgIGVmZmVjdDogaWFtLkVmZmVjdC5ERU5ZLFxuICAgICAgICBwcmluY2lwYWxzOiBbbmV3IGlhbS5BbnlQcmluY2lwYWwoKV0sXG4gICAgICAgIGFjdGlvbnM6IFsnYmFja3VwOkRlbGV0ZVJlY292ZXJ5UG9pbnQnXSxcbiAgICAgICAgcmVzb3VyY2VzOiBbJyonXSxcbiAgICAgICAgY29uZGl0aW9uczoge1xuICAgICAgICAgIFN0cmluZ05vdExpa2U6IHtcbiAgICAgICAgICAgICdhd3M6dXNlcklkJzogW1xuICAgICAgICAgICAgICAndXNlci1hcm4nLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgXSxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBuZXcgQmFja3VwVmF1bHQoc3RhY2ssICdWYXVsdCcsIHtcbiAgICBhY2Nlc3NQb2xpY3ksXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QmFja3VwOjpCYWNrdXBWYXVsdCcsIHtcbiAgICBBY2Nlc3NQb2xpY3k6IHtcbiAgICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgICAgIFN0YXRlbWVudDogW1xuICAgICAgICB7XG4gICAgICAgICAgRWZmZWN0OiAnRGVueScsXG4gICAgICAgICAgUHJpbmNpcGFsOiB7IEFXUzogJyonIH0sXG4gICAgICAgICAgQWN0aW9uOiAnYmFja3VwOkRlbGV0ZVJlY292ZXJ5UG9pbnQnLFxuICAgICAgICAgIFJlc291cmNlOiAnKicsXG4gICAgICAgICAgQ29uZGl0aW9uOiB7XG4gICAgICAgICAgICBTdHJpbmdOb3RMaWtlOiB7XG4gICAgICAgICAgICAgICdhd3M6dXNlcklkJzogW1xuICAgICAgICAgICAgICAgICd1c2VyLWFybicsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ3dpdGggYmxvY2tSZWNvdmVyeVBvaW50RGVsZXRpb24nLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgbmV3IEJhY2t1cFZhdWx0KHN0YWNrLCAnVmF1bHQnLCB7XG4gICAgYmxvY2tSZWNvdmVyeVBvaW50RGVsZXRpb246IHRydWUsXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QmFja3VwOjpCYWNrdXBWYXVsdCcsIHtcbiAgICBBY2Nlc3NQb2xpY3k6IHtcbiAgICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgICAgIFN0YXRlbWVudDogW1xuICAgICAgICB7XG4gICAgICAgICAgRWZmZWN0OiAnRGVueScsXG4gICAgICAgICAgUHJpbmNpcGFsOiB7XG4gICAgICAgICAgICBBV1M6ICcqJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIEFjdGlvbjogW1xuICAgICAgICAgICAgJ2JhY2t1cDpEZWxldGVSZWNvdmVyeVBvaW50JyxcbiAgICAgICAgICAgICdiYWNrdXA6VXBkYXRlUmVjb3ZlcnlQb2ludExpZmVjeWNsZScsXG4gICAgICAgICAgXSxcbiAgICAgICAgICBSZXNvdXJjZTogJyonLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG50ZXN0KCdtZXJnZXMgc3RhdGVtZW50cyBmcm9tIGFjY2Vzc1BvbGljeSBhbmQgYmxvY2tSZWNvdmVyeVBvaW50RGVsZXRpb24nLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgbmV3IEJhY2t1cFZhdWx0KHN0YWNrLCAnVmF1bHQnLCB7XG4gICAgYWNjZXNzUG9saWN5OiBuZXcgaWFtLlBvbGljeURvY3VtZW50KHtcbiAgICAgIHN0YXRlbWVudHM6IFtcbiAgICAgICAgbmV3IGlhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xuICAgICAgICAgIGVmZmVjdDogaWFtLkVmZmVjdC5ERU5ZLFxuICAgICAgICAgIHByaW5jaXBhbHM6IFtuZXcgaWFtLkFyblByaW5jaXBhbCgnYXJuOmF3czppYW06OjEyMzQ1Njc4OTAxMjpyb2xlL015Um9sZScpXSxcbiAgICAgICAgICBhY3Rpb25zOiBbJ2JhY2t1cDpTdGFydFJlc3RvcmVKb2InXSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgIH0pLFxuICAgIGJsb2NrUmVjb3ZlcnlQb2ludERlbGV0aW9uOiB0cnVlLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkJhY2t1cDo6QmFja3VwVmF1bHQnLCB7XG4gICAgQWNjZXNzUG9saWN5OiB7XG4gICAgICBWZXJzaW9uOiAnMjAxMi0xMC0xNycsXG4gICAgICBTdGF0ZW1lbnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIEFjdGlvbjogJ2JhY2t1cDpTdGFydFJlc3RvcmVKb2InLFxuICAgICAgICAgIEVmZmVjdDogJ0RlbnknLFxuICAgICAgICAgIFByaW5jaXBhbDoge1xuICAgICAgICAgICAgQVdTOiAnYXJuOmF3czppYW06OjEyMzQ1Njc4OTAxMjpyb2xlL015Um9sZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIEVmZmVjdDogJ0RlbnknLFxuICAgICAgICAgIFByaW5jaXBhbDoge1xuICAgICAgICAgICAgQVdTOiAnKicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBBY3Rpb246IFtcbiAgICAgICAgICAgICdiYWNrdXA6RGVsZXRlUmVjb3ZlcnlQb2ludCcsXG4gICAgICAgICAgICAnYmFja3VwOlVwZGF0ZVJlY292ZXJ5UG9pbnRMaWZlY3ljbGUnLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgUmVzb3VyY2U6ICcqJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgfSk7XG59KTtcblxudGVzdCgnYWRkVG9BY2Nlc3NQb2xpY3koKScsICgpID0+IHtcbiAgLy8gR0lWRU5cbiAgY29uc3QgdmF1bHQgPSBuZXcgQmFja3VwVmF1bHQoc3RhY2ssICdWYXVsdCcpO1xuXG4gIC8vIFdIRU5cbiAgdmF1bHQuYWRkVG9BY2Nlc3NQb2xpY3kobmV3IGlhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xuICAgIGVmZmVjdDogaWFtLkVmZmVjdC5ERU5ZLFxuICAgIHByaW5jaXBhbHM6IFtuZXcgaWFtLkFyblByaW5jaXBhbCgnYXJuOmF3czppYW06OjEyMzQ1Njc4OTAxMjpyb2xlL015Um9sZScpXSxcbiAgICBhY3Rpb25zOiBbJ2JhY2t1cDpTdGFydFJlc3RvcmVKb2InXSxcbiAgfSkpO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QmFja3VwOjpCYWNrdXBWYXVsdCcsIHtcbiAgICBBY2Nlc3NQb2xpY3k6IHtcbiAgICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgICAgIFN0YXRlbWVudDogW1xuICAgICAgICB7XG4gICAgICAgICAgQWN0aW9uOiAnYmFja3VwOlN0YXJ0UmVzdG9yZUpvYicsXG4gICAgICAgICAgRWZmZWN0OiAnRGVueScsXG4gICAgICAgICAgUHJpbmNpcGFsOiB7XG4gICAgICAgICAgICBBV1M6ICdhcm46YXdzOmlhbTo6MTIzNDU2Nzg5MDEyOnJvbGUvTXlSb2xlJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG50ZXN0KCdibG9ja1JlY292ZXJ5UG9pbnREZWxldGlvbigpJywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCB2YXVsdCA9IG5ldyBCYWNrdXBWYXVsdChzdGFjaywgJ1ZhdWx0Jyk7XG5cbiAgLy8gV0hFTlxuICB2YXVsdC5ibG9ja1JlY292ZXJ5UG9pbnREZWxldGlvbigpO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QmFja3VwOjpCYWNrdXBWYXVsdCcsIHtcbiAgICBBY2Nlc3NQb2xpY3k6IHtcbiAgICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgICAgIFN0YXRlbWVudDogW1xuICAgICAgICB7XG4gICAgICAgICAgRWZmZWN0OiAnRGVueScsXG4gICAgICAgICAgUHJpbmNpcGFsOiB7XG4gICAgICAgICAgICBBV1M6ICcqJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIEFjdGlvbjogW1xuICAgICAgICAgICAgJ2JhY2t1cDpEZWxldGVSZWNvdmVyeVBvaW50JyxcbiAgICAgICAgICAgICdiYWNrdXA6VXBkYXRlUmVjb3ZlcnlQb2ludExpZmVjeWNsZScsXG4gICAgICAgICAgXSxcbiAgICAgICAgICBSZXNvdXJjZTogJyonLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG50ZXN0KCd3aXRoIGVuY3J5cHRpb24ga2V5JywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCBlbmNyeXB0aW9uS2V5ID0gbmV3IGttcy5LZXkoc3RhY2ssICdLZXknKTtcblxuICAvLyBXSEVOXG4gIG5ldyBCYWNrdXBWYXVsdChzdGFjaywgJ1ZhdWx0Jywge1xuICAgIGVuY3J5cHRpb25LZXksXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QmFja3VwOjpCYWNrdXBWYXVsdCcsIHtcbiAgICBFbmNyeXB0aW9uS2V5QXJuOiB7XG4gICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgJ0tleTk2MUI3M0ZEJyxcbiAgICAgICAgJ0FybicsXG4gICAgICBdLFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ3dpdGggbm90aWZpY2F0aW9ucycsICgpID0+IHtcbiAgLy8gR0lWRU5cbiAgY29uc3QgdG9waWMgPSBuZXcgc25zLlRvcGljKHN0YWNrLCAnVG9waWMnKTtcblxuICAvLyBXSEVOXG4gIG5ldyBCYWNrdXBWYXVsdChzdGFjaywgJ1ZhdWx0Jywge1xuICAgIG5vdGlmaWNhdGlvblRvcGljOiB0b3BpYyxcbiAgICBub3RpZmljYXRpb25FdmVudHM6IFtcbiAgICAgIEJhY2t1cFZhdWx0RXZlbnRzLkJBQ0tVUF9KT0JfQ09NUExFVEVELFxuICAgICAgQmFja3VwVmF1bHRFdmVudHMuQ09QWV9KT0JfRkFJTEVELFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QmFja3VwOjpCYWNrdXBWYXVsdCcsIHtcbiAgICBOb3RpZmljYXRpb25zOiB7XG4gICAgICBCYWNrdXBWYXVsdEV2ZW50czogW1xuICAgICAgICAnQkFDS1VQX0pPQl9DT01QTEVURUQnLFxuICAgICAgICAnQ09QWV9KT0JfRkFJTEVEJyxcbiAgICAgIF0sXG4gICAgICBTTlNUb3BpY0Fybjoge1xuICAgICAgICBSZWY6ICdUb3BpY0JGQzdBRjZFJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG59KTtcblxudGVzdCgnZGVmYXVsdHMgdG8gYWxsIG5vdGlmaWNhdGlvbnMnLCAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIGNvbnN0IHRvcGljID0gbmV3IHNucy5Ub3BpYyhzdGFjaywgJ1RvcGljJyk7XG5cbiAgLy8gV0hFTlxuICBuZXcgQmFja3VwVmF1bHQoc3RhY2ssICdWYXVsdCcsIHtcbiAgICBub3RpZmljYXRpb25Ub3BpYzogdG9waWMsXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QmFja3VwOjpCYWNrdXBWYXVsdCcsIHtcbiAgICBOb3RpZmljYXRpb25zOiB7XG4gICAgICBCYWNrdXBWYXVsdEV2ZW50czogT2JqZWN0LnZhbHVlcyhCYWNrdXBWYXVsdEV2ZW50cyksXG4gICAgICBTTlNUb3BpY0Fybjoge1xuICAgICAgICBSZWY6ICdUb3BpY0JGQzdBRjZFJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG59KTtcblxudGVzdCgnaW1wb3J0IGZyb20gYXJuJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGNvbnN0IHZhdWx0QXJuID0gc3RhY2suZm9ybWF0QXJuKHtcbiAgICBzZXJ2aWNlOiAnYmFja3VwJyxcbiAgICByZXNvdXJjZTogJ2JhY2t1cC12YXVsdCcsXG4gICAgcmVzb3VyY2VOYW1lOiAnbXlWYXVsdE5hbWUnLFxuICAgIGFybkZvcm1hdDogQXJuRm9ybWF0LkNPTE9OX1JFU09VUkNFX05BTUUsXG4gIH0pO1xuICBjb25zdCB2YXVsdCA9IEJhY2t1cFZhdWx0LmZyb21CYWNrdXBWYXVsdEFybihzdGFjaywgJ1ZhdWx0JywgdmF1bHRBcm4pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KHZhdWx0LmJhY2t1cFZhdWx0TmFtZSkudG9FcXVhbCgnbXlWYXVsdE5hbWUnKTtcbiAgZXhwZWN0KHZhdWx0LmJhY2t1cFZhdWx0QXJuKS50b0VxdWFsKHZhdWx0QXJuKTtcbn0pO1xuXG50ZXN0KCdpbXBvcnQgZnJvbSBuYW1lJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGNvbnN0IHZhdWx0TmFtZSA9ICdteVZhdWx0TmFtZSc7XG4gIGNvbnN0IHZhdWx0ID0gQmFja3VwVmF1bHQuZnJvbUJhY2t1cFZhdWx0TmFtZShzdGFjaywgJ1ZhdWx0JywgdmF1bHROYW1lKTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdCh2YXVsdC5iYWNrdXBWYXVsdE5hbWUpLnRvRXF1YWwodmF1bHROYW1lKTtcbiAgZXhwZWN0KHZhdWx0LmJhY2t1cFZhdWx0QXJuKS50b0VxdWFsKHN0YWNrLmZvcm1hdEFybih7XG4gICAgc2VydmljZTogJ2JhY2t1cCcsXG4gICAgcmVzb3VyY2U6ICdiYWNrdXAtdmF1bHQnLFxuICAgIHJlc291cmNlTmFtZTogJ215VmF1bHROYW1lJyxcbiAgICBhcm5Gb3JtYXQ6IEFybkZvcm1hdC5DT0xPTl9SRVNPVVJDRV9OQU1FLFxuICB9KSk7XG59KTtcblxudGVzdCgnZ3JhbnQgYWN0aW9uJywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCB2YXVsdE5hbWUgPSAnbXlWYXVsdE5hbWUnO1xuICBjb25zdCB2YXVsdCA9IEJhY2t1cFZhdWx0LmZyb21CYWNrdXBWYXVsdE5hbWUoc3RhY2ssICdWYXVsdCcsIHZhdWx0TmFtZSk7XG4gIGNvbnN0IHJvbGUgPSBuZXcgaWFtLlJvbGUoc3RhY2ssICdyb2xlJywgeyBhc3N1bWVkQnk6IG5ldyBpYW0uU2VydmljZVByaW5jaXBhbCgnbGFtYmRhJykgfSk7XG5cbiAgLy8gV0hFTlxuICB2YXVsdC5ncmFudChyb2xlLCAnYmFja3VwOlN0YXJ0QmFja3VwSm9iJyk7XG5cbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlBvbGljeScsIHtcbiAgICBQb2xpY3lEb2N1bWVudDoge1xuICAgICAgU3RhdGVtZW50OiBbXG4gICAgICAgIHtcbiAgICAgICAgICBBY3Rpb246ICdiYWNrdXA6U3RhcnRCYWNrdXBKb2InLFxuICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICBSZXNvdXJjZToge1xuICAgICAgICAgICAgJ0ZuOjpKb2luJzogW1xuICAgICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICdhcm46JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBSZWY6ICdBV1M6OlBhcnRpdGlvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnOmJhY2t1cDonLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIFJlZjogJ0FXUzo6UmVnaW9uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICc6JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBSZWY6ICdBV1M6OkFjY291bnRJZCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnOmJhY2t1cC12YXVsdDpteVZhdWx0TmFtZScsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgVmVyc2lvbjogJzIwMTItMTAtMTcnLFxuICAgIH0sXG4gICAgUG9saWN5TmFtZTogJ3JvbGVEZWZhdWx0UG9saWN5N0M5ODBFQkEnLFxuICAgIFJvbGVzOiBbXG4gICAgICB7XG4gICAgICAgIFJlZjogJ3JvbGVDN0I3RTc3NScsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ3Rocm93IHdoZW4gZ3JhbnQgYWN0aW9uIGluY2x1ZGVzIHdpbGRjYXJkJywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCB2YXVsdE5hbWUgPSAnbXlWYXVsdE5hbWUnO1xuICBjb25zdCB2YXVsdCA9IEJhY2t1cFZhdWx0LmZyb21CYWNrdXBWYXVsdE5hbWUoc3RhY2ssICdWYXVsdCcsIHZhdWx0TmFtZSk7XG4gIGNvbnN0IHJvbGUgPSBuZXcgaWFtLlJvbGUoc3RhY2ssICdyb2xlJywgeyBhc3N1bWVkQnk6IG5ldyBpYW0uU2VydmljZVByaW5jaXBhbCgnbGFtYmRhJykgfSk7XG5cbiAgLy8gV0hFTlxuICBleHBlY3QoKCkgPT4gdmF1bHQuZ3JhbnQocm9sZSwgJ2JhY2t1cDoqJykpLnRvVGhyb3coL0FXUyBCYWNrdXAgYWNjZXNzIHBvbGljaWVzIGRvbid0IHN1cHBvcnQgYSB3aWxkY2FyZCBpbiB0aGUgQWN0aW9uIGtleVxcLi8pO1xufSk7XG5cbnRlc3QoJ3Rocm93cyB3aXRoIGludmFsaWQgbmFtZScsICgpID0+IHtcbiAgZXhwZWN0KCgpID0+IG5ldyBCYWNrdXBWYXVsdChzdGFjaywgJ1ZhdWx0Jywge1xuICAgIGJhY2t1cFZhdWx0TmFtZTogJ0hlbGxvIUludkBsaWQnLFxuICB9KSkudG9UaHJvdygvRXhwZWN0ZWQgdmF1bHQgbmFtZSB0byBtYXRjaCBwYXR0ZXJuLyk7XG59KTtcblxudGVzdCgndGhyb3dzIHdpdGggd2hpdGVzcGFjZSBpbiBuYW1lJywgKCkgPT4ge1xuICBleHBlY3QoKCkgPT4gbmV3IEJhY2t1cFZhdWx0KHN0YWNrLCAnVmF1bHQnLCB7XG4gICAgYmFja3VwVmF1bHROYW1lOiAnSGVsbG8gSW52YWxpZCcsXG4gIH0pKS50b1Rocm93KC9FeHBlY3RlZCB2YXVsdCBuYW1lIHRvIG1hdGNoIHBhdHRlcm4vKTtcbn0pO1xuXG50ZXN0KCd0aHJvd3Mgd2l0aCB0b28gc2hvcnQgbmFtZScsICgpID0+IHtcbiAgZXhwZWN0KCgpID0+IG5ldyBCYWNrdXBWYXVsdChzdGFjaywgJ1ZhdWx0Jywge1xuICAgIGJhY2t1cFZhdWx0TmFtZTogJ3gnLFxuICB9KSkudG9UaHJvdygvRXhwZWN0ZWQgdmF1bHQgbmFtZSB0byBtYXRjaCBwYXR0ZXJuLyk7XG59KTtcblxudGVzdCgnd2l0aCBsb2NrIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgbmV3IEJhY2t1cFZhdWx0KHN0YWNrLCAnVmF1bHQnLCB7XG4gICAgbG9ja0NvbmZpZ3VyYXRpb246IHtcbiAgICAgIG1pblJldGVudGlvbjogRHVyYXRpb24uZGF5cygzMCksXG4gICAgICBtYXhSZXRlbnRpb246IER1cmF0aW9uLmRheXMoMzY1KSxcbiAgICAgIGNoYW5nZWFibGVGb3I6IER1cmF0aW9uLmRheXMoNyksXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpCYWNrdXA6OkJhY2t1cFZhdWx0Jywge1xuICAgIExvY2tDb25maWd1cmF0aW9uOiB7XG4gICAgICBDaGFuZ2VhYmxlRm9yRGF5czogNyxcbiAgICAgIE1heFJldGVudGlvbkRheXM6IDM2NSxcbiAgICAgIE1pblJldGVudGlvbkRheXM6IDMwLFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ3Rocm93cyB3aXRoIGluY29ycmVjdCBsb2NrIGNvbmZpZ3VyYXRpb24gLSBtaW4gcmV0ZW50aW9uJywgKCkgPT4ge1xuICBleHBlY3QoKCkgPT4gbmV3IEJhY2t1cFZhdWx0KHN0YWNrLCAnVmF1bHQnLCB7XG4gICAgbG9ja0NvbmZpZ3VyYXRpb246IHtcbiAgICAgIG1pblJldGVudGlvbjogRHVyYXRpb24uaG91cnMoMTIpLFxuICAgIH0sXG4gIH0pKS50b1Rocm93KC9UaGUgc2hvcnRlc3QgbWluaW11bSByZXRlbnRpb24gcGVyaW9kIHlvdSBjYW4gc3BlY2lmeSBpcyAxIGRheS8pO1xufSk7XG5cbnRlc3QoJ3Rocm93cyB3aXRoIGluY29ycmVjdCBsb2NrIGNvbmZpZ3VyYXRpb24gLSBtYXggcmV0ZW50aW9uJywgKCkgPT4ge1xuICBleHBlY3QoKCkgPT4gbmV3IEJhY2t1cFZhdWx0KHN0YWNrLCAnVmF1bHQnLCB7XG4gICAgbG9ja0NvbmZpZ3VyYXRpb246IHtcbiAgICAgIG1pblJldGVudGlvbjogRHVyYXRpb24uZGF5cyg3KSxcbiAgICAgIG1heFJldGVudGlvbjogRHVyYXRpb24uZGF5cyg0MDAwMCksXG4gICAgfSxcbiAgfSkpLnRvVGhyb3coL1RoZSBsb25nZXN0IG1heGltdW0gcmV0ZW50aW9uIHBlcmlvZCB5b3UgY2FuIHNwZWNpZnkgaXMgMzY1MDAgZGF5cy8pO1xufSk7XG5cbnRlc3QoJ3Rocm93cyB3aXRoIGluY29ycmVjdCBsb2NrIGNvbmZpZ3VyYXRpb24gLSBtYXggYW5kIG1pbiByZXRlbnRpb24nLCAoKSA9PiB7XG4gIGV4cGVjdCgoKSA9PiBuZXcgQmFja3VwVmF1bHQoc3RhY2ssICdWYXVsdCcsIHtcbiAgICBsb2NrQ29uZmlndXJhdGlvbjoge1xuICAgICAgbWluUmV0ZW50aW9uOiBEdXJhdGlvbi5kYXlzKDcpLFxuICAgICAgbWF4UmV0ZW50aW9uOiBEdXJhdGlvbi5kYXlzKDQpLFxuICAgIH0sXG4gIH0pKS50b1Rocm93KC9UaGUgbWF4aW11bSByZXRlbnRpb24gcGVyaW9kIFxcKDQgZGF5c1xcKSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB0aGUgbWluaW11bSByZXRlbnRpb24gcGVyaW9kIFxcKDcgZGF5c1xcKS8pO1xufSk7XG5cbnRlc3QoJ3Rocm93cyB3aXRoIGluY29ycmVjdCBsb2NrIGNvbmZpZ3VyYXRpb24gLSBjaGFuZ2VhYmxlIGZvcicsICgpID0+IHtcbiAgZXhwZWN0KCgpID0+IG5ldyBCYWNrdXBWYXVsdChzdGFjaywgJ1ZhdWx0Jywge1xuICAgIGxvY2tDb25maWd1cmF0aW9uOiB7XG4gICAgICBtaW5SZXRlbnRpb246IER1cmF0aW9uLmRheXMoNyksXG4gICAgICBjaGFuZ2VhYmxlRm9yOiBEdXJhdGlvbi5kYXlzKDEpLFxuICAgIH0sXG4gIH0pKS50b1Rocm93KC9BV1MgQmFja3VwIGVuZm9yY2VzIGEgNzItaG91ciBjb29saW5nLW9mZiBwZXJpb2QgYmVmb3JlIFZhdWx0IExvY2sgdGFrZXMgZWZmZWN0IGFuZCBiZWNvbWVzIGltbXV0YWJsZS8pO1xufSk7XG4iXX0=