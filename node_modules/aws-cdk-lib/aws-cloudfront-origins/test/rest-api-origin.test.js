"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const apigateway = require("../../aws-apigateway");
const core_1 = require("../../core");
const lib_1 = require("../lib");
let stack;
beforeEach(() => {
    stack = new core_1.Stack();
});
test('Correctly renders the origin', () => {
    const api = new apigateway.RestApi(stack, 'RestApi');
    api.root.addMethod('GET');
    const origin = new lib_1.RestApiOrigin(api);
    const originBindConfig = origin.bind(stack, { originId: 'StackOrigin029E19582' });
    expect(stack.resolve(originBindConfig.originProperty)).toEqual({
        id: 'StackOrigin029E19582',
        domainName: {
            'Fn::Select': [2, {
                    'Fn::Split': ['/', {
                            'Fn::Join': ['', [
                                    'https://', { Ref: 'RestApi0C43BF4B' },
                                    '.execute-api.',
                                    { Ref: 'AWS::Region' },
                                    '.',
                                    { Ref: 'AWS::URLSuffix' },
                                    '/',
                                    { Ref: 'RestApiDeploymentStageprod3855DE66' },
                                    '/',
                                ]],
                        }],
                }],
        },
        originPath: {
            'Fn::Join': ['', ['/', {
                        'Fn::Select': [3, {
                                'Fn::Split': ['/', {
                                        'Fn::Join': ['', [
                                                'https://',
                                                { Ref: 'RestApi0C43BF4B' },
                                                '.execute-api.',
                                                { Ref: 'AWS::Region' },
                                                '.',
                                                { Ref: 'AWS::URLSuffix' },
                                                '/',
                                                { Ref: 'RestApiDeploymentStageprod3855DE66' },
                                                '/',
                                            ]],
                                    }],
                            }],
                    }]],
        },
        customOriginConfig: {
            originProtocolPolicy: 'https-only',
            originSslProtocols: [
                'TLSv1.2',
            ],
        },
    });
});
test('Correctly renders the origin, with custom originId', () => {
    const api = new apigateway.RestApi(stack, 'RestApi');
    api.root.addMethod('GET');
    const origin = new lib_1.RestApiOrigin(api, { originId: 'MyCustomOrigin' });
    const originBindConfig = origin.bind(stack, { originId: 'StackOrigin029E19582' });
    expect(stack.resolve(originBindConfig.originProperty)).toEqual({
        id: 'MyCustomOrigin',
        domainName: {
            'Fn::Select': [2, {
                    'Fn::Split': ['/', {
                            'Fn::Join': ['', [
                                    'https://', { Ref: 'RestApi0C43BF4B' },
                                    '.execute-api.',
                                    { Ref: 'AWS::Region' },
                                    '.',
                                    { Ref: 'AWS::URLSuffix' },
                                    '/',
                                    { Ref: 'RestApiDeploymentStageprod3855DE66' },
                                    '/',
                                ]],
                        }],
                }],
        },
        originPath: {
            'Fn::Join': ['', ['/', {
                        'Fn::Select': [3, {
                                'Fn::Split': ['/', {
                                        'Fn::Join': ['', [
                                                'https://',
                                                { Ref: 'RestApi0C43BF4B' },
                                                '.execute-api.',
                                                { Ref: 'AWS::Region' },
                                                '.',
                                                { Ref: 'AWS::URLSuffix' },
                                                '/',
                                                { Ref: 'RestApiDeploymentStageprod3855DE66' },
                                                '/',
                                            ]],
                                    }],
                            }],
                    }]],
        },
        customOriginConfig: {
            originProtocolPolicy: 'https-only',
            originSslProtocols: [
                'TLSv1.2',
            ],
        },
    });
});
test('Correctly renders the origin, with custom originPath', () => {
    const api = new apigateway.RestApi(stack, 'RestApi');
    api.root.addMethod('GET');
    const origin = new lib_1.RestApiOrigin(api, { originPath: '/my/custom/path' });
    const originBindConfig = origin.bind(stack, { originId: 'StackOrigin029E19582' });
    expect(stack.resolve(originBindConfig.originProperty)).toEqual({
        id: 'StackOrigin029E19582',
        domainName: {
            'Fn::Select': [2, {
                    'Fn::Split': ['/', {
                            'Fn::Join': ['', [
                                    'https://', { Ref: 'RestApi0C43BF4B' },
                                    '.execute-api.',
                                    { Ref: 'AWS::Region' },
                                    '.',
                                    { Ref: 'AWS::URLSuffix' },
                                    '/',
                                    { Ref: 'RestApiDeploymentStageprod3855DE66' },
                                    '/',
                                ]],
                        }],
                }],
        },
        originPath: '/my/custom/path',
        customOriginConfig: {
            originProtocolPolicy: 'https-only',
            originSslProtocols: [
                'TLSv1.2',
            ],
        },
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdC1hcGktb3JpZ2luLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZXN0LWFwaS1vcmlnaW4udGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1EQUFtRDtBQUNuRCxxQ0FBbUM7QUFDbkMsZ0NBQXVDO0FBRXZDLElBQUksS0FBWSxDQUFDO0FBRWpCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7SUFDZCxLQUFLLEdBQUcsSUFBSSxZQUFLLEVBQUUsQ0FBQztBQUN0QixDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7SUFDeEMsTUFBTSxHQUFHLEdBQUcsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNyRCxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUUxQixNQUFNLE1BQU0sR0FBRyxJQUFJLG1CQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdEMsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxDQUFDLENBQUM7SUFFbEYsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7UUFDN0QsRUFBRSxFQUFFLHNCQUFzQjtRQUMxQixVQUFVLEVBQUU7WUFDVixZQUFZLEVBQUUsQ0FBQyxDQUFDLEVBQUU7b0JBQ2hCLFdBQVcsRUFBRSxDQUFDLEdBQUcsRUFBRTs0QkFDakIsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO29DQUNmLFVBQVUsRUFBRSxFQUFFLEdBQUcsRUFBRSxpQkFBaUIsRUFBRTtvQ0FDdEMsZUFBZTtvQ0FDZixFQUFFLEdBQUcsRUFBRSxhQUFhLEVBQUU7b0NBQ3RCLEdBQUc7b0NBQ0gsRUFBRSxHQUFHLEVBQUUsZ0JB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a0JBQWtCLEVBQUU7WUFDbEIsb0JBQW9CLEVBQUUsWUFBWTtZQUNsQyxrQkFBa0IsRUFBRTtnQkFDbEIsU0FBUzthQUNWO1NBQ0Y7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFwaWdhdGV3YXkgZnJvbSAnLi4vLi4vYXdzLWFwaWdhdGV3YXknO1xuaW1wb3J0IHsgU3RhY2sgfSBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IFJlc3RBcGlPcmlnaW4gfSBmcm9tICcuLi9saWInO1xuXG5sZXQgc3RhY2s6IFN0YWNrO1xuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgc3RhY2sgPSBuZXcgU3RhY2soKTtcbn0pO1xuXG50ZXN0KCdDb3JyZWN0bHkgcmVuZGVycyB0aGUgb3JpZ2luJywgKCkgPT4ge1xuICBjb25zdCBhcGkgPSBuZXcgYXBpZ2F0ZXdheS5SZXN0QXBpKHN0YWNrLCAnUmVzdEFwaScpO1xuICBhcGkucm9vdC5hZGRNZXRob2QoJ0dFVCcpO1xuXG4gIGNvbnN0IG9yaWdpbiA9IG5ldyBSZXN0QXBpT3JpZ2luKGFwaSk7XG4gIGNvbnN0IG9yaWdpbkJpbmRDb25maWcgPSBvcmlnaW4uYmluZChzdGFjaywgeyBvcmlnaW5JZDogJ1N0YWNrT3JpZ2luMDI5RTE5NTgyJyB9KTtcblxuICBleHBlY3Qoc3RhY2sucmVzb2x2ZShvcmlnaW5CaW5kQ29uZmlnLm9yaWdpblByb3BlcnR5KSkudG9FcXVhbCh7XG4gICAgaWQ6ICdTdGFja09yaWdpbjAyOUUxOTU4MicsXG4gICAgZG9tYWluTmFtZToge1xuICAgICAgJ0ZuOjpTZWxlY3QnOiBbMiwge1xuICAgICAgICAnRm46OlNwbGl0JzogWycvJywge1xuICAgICAgICAgICdGbjo6Sm9pbic6IFsnJywgW1xuICAgICAgICAgICAgJ2h0dHBzOi8vJywgeyBSZWY6ICdSZXN0QXBpMEM0M0JGNEInIH0sXG4gICAgICAgICAgICAnLmV4ZWN1dGUtYXBpLicsXG4gICAgICAgICAgICB7IFJlZjogJ0FXUzo6UmVnaW9uJyB9LFxuICAgICAgICAgICAgJy4nLFxuICAgICAgICAgICAgeyBSZWY6ICdBV1M6OlVSTFN1ZmZpeCcgfSxcbiAgICAgICAgICAgICcvJyxcbiAgICAgICAgICAgIHsgUmVmOiAnUmVzdEFwaURlcGxveW1lbnRTdGFnZXByb2QzODU1REU2NicgfSxcbiAgICAgICAgICAgICcvJyxcbiAgICAgICAgICBdXSxcbiAgICAgICAgfV0sXG4gICAgICB9XSxcbiAgICB9LFxuICAgIG9yaWdpblBhdGg6IHtcbiAgICAgICdGbjo6Sm9pbic6IFsnJywgWycvJywge1xuICAgICAgICAnRm46OlNlbGVjdCc6IFszLCB7XG4gICAgICAgICAgJ0ZuOjpTcGxpdCc6IFsnLycsIHtcbiAgICAgICAgICAgICdGbjo6Sm9pbic6IFsnJywgW1xuICAgICAgICAgICAgICAnaHR0cHM6Ly8nLFxuICAgICAgICAgICAgICB7IFJlZjogJ1Jlc3RBcGkwQzQzQkY0QicgfSxcbiAgICAgICAgICAgICAgJy5leGVjdXRlLWFwaS4nLFxuICAgICAgICAgICAgICB7IFJlZjogJ0FXUzo6UmVnaW9uJyB9LFxuICAgICAgICAgICAgICAnLicsXG4gICAgICAgICAgICAgIHsgUmVmOiAnQVdTOjpVUkxTdWZmaXgnIH0sXG4gICAgICAgICAgICAgICcvJyxcbiAgICAgICAgICAgICAgeyBSZWY6ICdSZXN0QXBpRGVwbG95bWVudFN0YWdlcHJvZDM4NTVERTY2JyB9LFxuICAgICAgICAgICAgICAnLycsXG4gICAgICAgICAgICBdXSxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0sXG4gICAgICB9XV0sXG4gICAgfSxcbiAgICBjdXN0b21PcmlnaW5Db25maWc6IHtcbiAgICAgIG9yaWdpblByb3RvY29sUG9saWN5OiAnaHR0cHMtb25seScsXG4gICAgICBvcmlnaW5Tc2xQcm90b2NvbHM6IFtcbiAgICAgICAgJ1RMU3YxLjInLFxuICAgICAgXSxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG50ZXN0KCdDb3JyZWN0bHkgcmVuZGVycyB0aGUgb3JpZ2luLCB3aXRoIGN1c3RvbSBvcmlnaW5JZCcsICgpID0+IHtcbiAgY29uc3QgYXBpID0gbmV3IGFwaWdhdGV3YXkuUmVzdEFwaShzdGFjaywgJ1Jlc3RBcGknKTtcbiAgYXBpLnJvb3QuYWRkTWV0aG9kKCdHRVQnKTtcblxuICBjb25zdCBvcmlnaW4gPSBuZXcgUmVzdEFwaU9yaWdpbihhcGksIHsgb3JpZ2luSWQ6ICdNeUN1c3RvbU9yaWdpbicgfSk7XG4gIGNvbnN0IG9yaWdpbkJpbmRDb25maWcgPSBvcmlnaW4uYmluZChzdGFjaywgeyBvcmlnaW5JZDogJ1N0YWNrT3JpZ2luMDI5RTE5NTgyJyB9KTtcblxuICBleHBlY3Qoc3RhY2sucmVzb2x2ZShvcmlnaW5CaW5kQ29uZmlnLm9yaWdpblByb3BlcnR5KSkudG9FcXVhbCh7XG4gICAgaWQ6ICdNeUN1c3RvbU9yaWdpbicsXG4gICAgZG9tYWluTmFtZToge1xuICAgICAgJ0ZuOjpTZWxlY3QnOiBbMiwge1xuICAgICAgICAnRm46OlNwbGl0JzogWycvJywge1xuICAgICAgICAgICdGbjo6Sm9pbic6IFsnJywgW1xuICAgICAgICAgICAgJ2h0dHBzOi8vJywgeyBSZWY6ICdSZXN0QXBpMEM0M0JGNEInIH0sXG4gICAgICAgICAgICAnLmV4ZWN1dGUtYXBpLicsXG4gICAgICAgICAgICB7IFJlZjogJ0FXUzo6UmVnaW9uJyB9LFxuICAgICAgICAgICAgJy4nLFxuICAgICAgICAgICAgeyBSZWY6ICdBV1M6OlVSTFN1ZmZpeCcgfSxcbiAgICAgICAgICAgICcvJyxcbiAgICAgICAgICAgIHsgUmVmOiAnUmVzdEFwaURlcGxveW1lbnRTdGFnZXByb2QzODU1REU2NicgfSxcbiAgICAgICAgICAgICcvJyxcbiAgICAgICAgICBdXSxcbiAgICAgICAgfV0sXG4gICAgICB9XSxcbiAgICB9LFxuICAgIG9yaWdpblBhdGg6IHtcbiAgICAgICdGbjo6Sm9pbic6IFsnJywgWycvJywge1xuICAgICAgICAnRm46OlNlbGVjdCc6IFszLCB7XG4gICAgICAgICAgJ0ZuOjpTcGxpdCc6IFsnLycsIHtcbiAgICAgICAgICAgICdGbjo6Sm9pbic6IFsnJywgW1xuICAgICAgICAgICAgICAnaHR0cHM6Ly8nLFxuICAgICAgICAgICAgICB7IFJlZjogJ1Jlc3RBcGkwQzQzQkY0QicgfSxcbiAgICAgICAgICAgICAgJy5leGVjdXRlLWFwaS4nLFxuICAgICAgICAgICAgICB7IFJlZjogJ0FXUzo6UmVnaW9uJyB9LFxuICAgICAgICAgICAgICAnLicsXG4gICAgICAgICAgICAgIHsgUmVmOiAnQVdTOjpVUkxTdWZmaXgnIH0sXG4gICAgICAgICAgICAgICcvJyxcbiAgICAgICAgICAgICAgeyBSZWY6ICdSZXN0QXBpRGVwbG95bWVudFN0YWdlcHJvZDM4NTVERTY2JyB9LFxuICAgICAgICAgICAgICAnLycsXG4gICAgICAgICAgICBdXSxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0sXG4gICAgICB9XV0sXG4gICAgfSxcbiAgICBjdXN0b21PcmlnaW5Db25maWc6IHtcbiAgICAgIG9yaWdpblByb3RvY29sUG9saWN5OiAnaHR0cHMtb25seScsXG4gICAgICBvcmlnaW5Tc2xQcm90b2NvbHM6IFtcbiAgICAgICAgJ1RMU3YxLjInLFxuICAgICAgXSxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG50ZXN0KCdDb3JyZWN0bHkgcmVuZGVycyB0aGUgb3JpZ2luLCB3aXRoIGN1c3RvbSBvcmlnaW5QYXRoJywgKCkgPT4ge1xuICBjb25zdCBhcGkgPSBuZXcgYXBpZ2F0ZXdheS5SZXN0QXBpKHN0YWNrLCAnUmVzdEFwaScpO1xuICBhcGkucm9vdC5hZGRNZXRob2QoJ0dFVCcpO1xuXG4gIGNvbnN0IG9yaWdpbiA9IG5ldyBSZXN0QXBpT3JpZ2luKGFwaSwgeyBvcmlnaW5QYXRoOiAnL215L2N1c3RvbS9wYXRoJyB9KTtcbiAgY29uc3Qgb3JpZ2luQmluZENvbmZpZyA9IG9yaWdpbi5iaW5kKHN0YWNrLCB7IG9yaWdpbklkOiAnU3RhY2tPcmlnaW4wMjlFMTk1ODInIH0pO1xuXG4gIGV4cGVjdChzdGFjay5yZXNvbHZlKG9yaWdpbkJpbmRDb25maWcub3JpZ2luUHJvcGVydHkpKS50b0VxdWFsKHtcbiAgICBpZDogJ1N0YWNrT3JpZ2luMDI5RTE5NTgyJyxcbiAgICBkb21haW5OYW1lOiB7XG4gICAgICAnRm46OlNlbGVjdCc6IFsyLCB7XG4gICAgICAgICdGbjo6U3BsaXQnOiBbJy8nLCB7XG4gICAgICAgICAgJ0ZuOjpKb2luJzogWycnLCBbXG4gICAgICAgICAgICAnaHR0cHM6Ly8nLCB7IFJlZjogJ1Jlc3RBcGkwQzQzQkY0QicgfSxcbiAgICAgICAgICAgICcuZXhlY3V0ZS1hcGkuJyxcbiAgICAgICAgICAgIHsgUmVmOiAnQVdTOjpSZWdpb24nIH0sXG4gICAgICAgICAgICAnLicsXG4gICAgICAgICAgICB7IFJlZjogJ0FXUzo6VVJMU3VmZml4JyB9LFxuICAgICAgICAgICAgJy8nLFxuICAgICAgICAgICAgeyBSZWY6ICdSZXN0QXBpRGVwbG95bWVudFN0YWdlcHJvZDM4NTVERTY2JyB9LFxuICAgICAgICAgICAgJy8nLFxuICAgICAgICAgIF1dLFxuICAgICAgICB9XSxcbiAgICAgIH1dLFxuICAgIH0sXG4gICAgb3JpZ2luUGF0aDogJy9teS9jdXN0b20vcGF0aCcsXG4gICAgY3VzdG9tT3JpZ2luQ29uZmlnOiB7XG4gICAgICBvcmlnaW5Qcm90b2NvbFBvbGljeTogJ2h0dHBzLW9ubHknLFxuICAgICAgb3JpZ2luU3NsUHJvdG9jb2xzOiBbXG4gICAgICAgICdUTFN2MS4yJyxcbiAgICAgIF0sXG4gICAgfSxcbiAgfSk7XG59KTsiXX0=