"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const appscaling = require("../../aws-applicationautoscaling");
const cloudwatch = require("../../aws-cloudwatch");
const core_1 = require("../../core");
const actions = require("../lib");
test('can use topic as alarm action', () => {
    // GIVEN
    const stack = new core_1.Stack();
    const scalingTarget = new appscaling.ScalableTarget(stack, 'Target', {
        minCapacity: 1,
        maxCapacity: 100,
        resourceId: 'asdf',
        scalableDimension: 'height',
        serviceNamespace: appscaling.ServiceNamespace.CUSTOM_RESOURCE,
    });
    const action = new appscaling.StepScalingAction(stack, 'Action', {
        scalingTarget,
    });
    const alarm = new cloudwatch.Alarm(stack, 'Alarm', {
        metric: new cloudwatch.Metric({ namespace: 'AWS', metricName: 'Henk' }),
        evaluationPeriods: 3,
        threshold: 100,
    });
    // WHEN
    alarm.addAlarmAction(new actions.ApplicationScalingAction(action));
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::CloudWatch::Alarm', {
        AlarmActions: [
            { Ref: 'Action62AD07C0' },
        ],
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwc2NhbGluZy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwc2NhbGluZy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQTRDO0FBQzVDLCtEQUErRDtBQUMvRCxtREFBbUQ7QUFDbkQscUNBQW1DO0FBQ25DLGtDQUFrQztBQUVsQyxJQUFJLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO0lBQ3pDLFFBQVE7SUFDUixNQUFNLEtBQUssR0FBRyxJQUFJLFlBQUssRUFBRSxDQUFDO0lBQzFCLE1BQU0sYUFBYSxHQUFHLElBQUksVUFBVSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFO1FBQ25FLFdBQVcsRUFBRSxDQUFDO1FBQ2QsV0FBVyxFQUFFLEdBQUc7UUFDaEIsVUFBVSxFQUFFLE1BQU07UUFDbEIsaUJBQWlCLEVBQUUsUUFBUTtRQUMzQixnQkFBZ0IsRUFBRSxVQUFVLENBQUMsZ0JBQWdCLENBQUMsZUFBZTtLQUM5RCxDQUFDLENBQUM7SUFDSCxNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFO1FBQy9ELGFBQWE7S0FDZCxDQUFDLENBQUM7SUFDSCxNQUFNLEtBQUssR0FBRyxJQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRTtRQUNqRCxNQUFNLEVBQUUsSUFBSSxVQUFVLENBQUMsTUFBTSxDQUFDLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDdkUsaUJBQWlCLEVBQUUsQ0FBQztRQUNwQixTQUFTLEVBQUUsR0FBRztLQUNmLENBQUMsQ0FBQztJQUVILE9BQU87SUFDUCxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksT0FBTyxDQUFDLHdCQUF3QixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFFbkUsT0FBTztJQUNQLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixDQUFDLHdCQUF3QixFQUFFO1FBQ3hFLFlBQVksRUFBRTtZQUNaLEVBQUUsR0FBRyxFQUFFLGdCQUFnQixFQUFFO1NBQzFCO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uLy4uL2Fzc2VydGlvbnMnO1xuaW1wb3J0ICogYXMgYXBwc2NhbGluZyBmcm9tICcuLi8uLi9hd3MtYXBwbGljYXRpb25hdXRvc2NhbGluZyc7XG5pbXBvcnQgKiBhcyBjbG91ZHdhdGNoIGZyb20gJy4uLy4uL2F3cy1jbG91ZHdhdGNoJztcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnLi4vLi4vY29yZSc7XG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gJy4uL2xpYic7XG5cbnRlc3QoJ2NhbiB1c2UgdG9waWMgYXMgYWxhcm0gYWN0aW9uJywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCBzdGFjayA9IG5ldyBTdGFjaygpO1xuICBjb25zdCBzY2FsaW5nVGFyZ2V0ID0gbmV3IGFwcHNjYWxpbmcuU2NhbGFibGVUYXJnZXQoc3RhY2ssICdUYXJnZXQnLCB7XG4gICAgbWluQ2FwYWNpdHk6IDEsXG4gICAgbWF4Q2FwYWNpdHk6IDEwMCxcbiAgICByZXNvdXJjZUlkOiAnYXNkZicsXG4gICAgc2NhbGFibGVEaW1lbnNpb246ICdoZWlnaHQnLFxuICAgIHNlcnZpY2VOYW1lc3BhY2U6IGFwcHNjYWxpbmcuU2VydmljZU5hbWVzcGFjZS5DVVNUT01fUkVTT1VSQ0UsXG4gIH0pO1xuICBjb25zdCBhY3Rpb24gPSBuZXcgYXBwc2NhbGluZy5TdGVwU2NhbGluZ0FjdGlvbihzdGFjaywgJ0FjdGlvbicsIHtcbiAgICBzY2FsaW5nVGFyZ2V0LFxuICB9KTtcbiAgY29uc3QgYWxhcm0gPSBuZXcgY2xvdWR3YXRjaC5BbGFybShzdGFjaywgJ0FsYXJtJywge1xuICAgIG1ldHJpYzogbmV3IGNsb3Vkd2F0Y2guTWV0cmljKHsgbmFtZXNwYWNlOiAnQVdTJywgbWV0cmljTmFtZTogJ0hlbmsnIH0pLFxuICAgIGV2YWx1YXRpb25QZXJpb2RzOiAzLFxuICAgIHRocmVzaG9sZDogMTAwLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGFsYXJtLmFkZEFsYXJtQWN0aW9uKG5ldyBhY3Rpb25zLkFwcGxpY2F0aW9uU2NhbGluZ0FjdGlvbihhY3Rpb24pKTtcblxuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xuICAgIEFsYXJtQWN0aW9uczogW1xuICAgICAgeyBSZWY6ICdBY3Rpb242MkFEMDdDMCcgfSxcbiAgICBdLFxuICB9KTtcbn0pO1xuIl19