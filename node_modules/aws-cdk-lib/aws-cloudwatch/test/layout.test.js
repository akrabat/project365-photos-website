"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lib_1 = require("../lib");
describe('Layout', () => {
    test('row has the height of the tallest element', () => {
        // WHEN
        const row = new lib_1.Row(new lib_1.Spacer({ width: 10, height: 1 }), new lib_1.Spacer({ width: 10, height: 4 }));
        // THEN
        expect(4).toEqual(row.height);
        expect(20).toEqual(row.width);
    });
    test('spacer has default height and width', () => {
        // WHEN
        const spacer = new lib_1.Spacer();
        // THEN
        expect(1).toEqual(spacer.height);
        expect(1).toEqual(spacer.width);
    });
    test('column has the width of the tallest element', () => {
        // WHEN
        const col = new lib_1.Column(new lib_1.Spacer({ width: 1, height: 1 }), new lib_1.Spacer({ width: 4, height: 4 }));
        // THEN
        expect(4).toEqual(col.width);
        expect(5).toEqual(col.height);
    });
    test('row wraps to width of 24, taking tallest widget into account while wrapping', () => {
        // Try the tall box in all positions
        for (const heights of [[4, 1, 1], [1, 4, 1], [1, 1, 4]]) {
            // GIVEN
            const widgets = [
                new lib_1.TextWidget({ width: 7, height: heights[0], markdown: 'a' }),
                new lib_1.TextWidget({ width: 7, height: heights[1], markdown: 'b' }),
                new lib_1.TextWidget({ width: 7, height: heights[2], markdown: 'c' }),
                new lib_1.TextWidget({ width: 7, height: 1, markdown: 'd' }),
            ];
            // WHEN
            const row = new lib_1.Row(...widgets);
            row.position(1000, 1000); // Check that we correctly offset all inner widgets
            // THEN
            expect(21).toEqual(row.width);
            expect(5).toEqual(row.height);
            function assertWidgetPos(x, y, w) {
                const json = w.toJson()[0];
                expect(x).toEqual(json.x);
                expect(y).toEqual(json.y);
            }
            assertWidgetPos(1000, 1000, widgets[0]);
            assertWidgetPos(1007, 1000, widgets[1]);
            assertWidgetPos(1014, 1000, widgets[2]);
            assertWidgetPos(1000, 1004, widgets[3]);
        }
    });
    test('row can fit exactly 3 8-wide widgets without wrapping', () => {
        // Try the tall box in all positions
        for (const heights of [[4, 1, 1], [1, 4, 1], [1, 1, 4]]) {
            // WHEN
            const row = new lib_1.Row(new lib_1.TextWidget({ width: 8, height: heights[0], markdown: 'a' }), new lib_1.TextWidget({ width: 8, height: heights[1], markdown: 'b' }), new lib_1.TextWidget({ width: 8, height: heights[2], markdown: 'c' }));
            // THEN
            expect(24).toEqual(row.width);
            expect(4).toEqual(row.height);
        }
    });
    test('add a widget to the row', () => {
        const row = new lib_1.Row(new lib_1.Spacer());
        expect(row.width).toEqual(1);
        row.addWidget(new lib_1.Spacer({ width: 3 }));
        expect(row.width).toEqual(4);
    });
    test('add a widget to the column', () => {
        const column = new lib_1.Column(new lib_1.Spacer(), new lib_1.Spacer());
        expect(column.height).toEqual(2);
        column.addWidget(new lib_1.Spacer({ height: 2, width: 3 }));
        expect(column.height).toEqual(4);
        expect(column.width).toEqual(3);
    });
    test('row wraps when adding widgets', () => {
        const row = new lib_1.Row(new lib_1.Spacer({ width: 10 }), new lib_1.Spacer({ width: 10 }));
        expect(row.width).toEqual(20);
        expect(row.height).toEqual(1);
        row.addWidget(new lib_1.Spacer({ width: 5, height: 2 }));
        expect(row.width).toEqual(20);
        expect(row.height).toEqual(3);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF5b3V0LnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsYXlvdXQudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGdDQUFrRTtBQUVsRSxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtJQUN0QixJQUFJLENBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO1FBQ3JELE9BQU87UUFDUCxNQUFNLEdBQUcsR0FBRyxJQUFJLFNBQUcsQ0FDakIsSUFBSSxZQUFNLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNwQyxJQUFJLFlBQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQ3JDLENBQUM7UUFFRixPQUFPO1FBQ1AsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFHaEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1FBQy9DLE9BQU87UUFDUCxNQUFNLE1BQU0sR0FBRyxJQUFJLFlBQU0sRUFBRSxDQUFDO1FBRTVCLE9BQU87UUFDUCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUdsQyxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7UUFDdkQsT0FBTztRQUNQLE1BQU0sR0FBRyxHQUFHLElBQUksWUFBTSxDQUNwQixJQUFJLFlBQU0sQ0FBQyxF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OUIsR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLFlBQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRCxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUdoQyxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sdW1uLCBJV2lkZ2V0LCBSb3csIFNwYWNlciwgVGV4dFdpZGdldCB9IGZyb20gJy4uL2xpYic7XG5cbmRlc2NyaWJlKCdMYXlvdXQnLCAoKSA9PiB7XG4gIHRlc3QoJ3JvdyBoYXMgdGhlIGhlaWdodCBvZiB0aGUgdGFsbGVzdCBlbGVtZW50JywgKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBjb25zdCByb3cgPSBuZXcgUm93KFxuICAgICAgbmV3IFNwYWNlcih7IHdpZHRoOiAxMCwgaGVpZ2h0OiAxIH0pLFxuICAgICAgbmV3IFNwYWNlcih7IHdpZHRoOiAxMCwgaGVpZ2h0OiA0IH0pLFxuICAgICk7XG5cbiAgICAvLyBUSEVOXG4gICAgZXhwZWN0KDQpLnRvRXF1YWwocm93LmhlaWdodCk7XG4gICAgZXhwZWN0KDIwKS50b0VxdWFsKHJvdy53aWR0aCk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdzcGFjZXIgaGFzIGRlZmF1bHQgaGVpZ2h0IGFuZCB3aWR0aCcsICgpID0+IHtcbiAgICAvLyBXSEVOXG4gICAgY29uc3Qgc3BhY2VyID0gbmV3IFNwYWNlcigpO1xuXG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdCgxKS50b0VxdWFsKHNwYWNlci5oZWlnaHQpO1xuICAgIGV4cGVjdCgxKS50b0VxdWFsKHNwYWNlci53aWR0aCk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdjb2x1bW4gaGFzIHRoZSB3aWR0aCBvZiB0aGUgdGFsbGVzdCBlbGVtZW50JywgKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBjb25zdCBjb2wgPSBuZXcgQ29sdW1uKFxuICAgICAgbmV3IFNwYWNlcih7IHdpZHRoOiAxLCBoZWlnaHQ6IDEgfSksXG4gICAgICBuZXcgU3BhY2VyKHsgd2lkdGg6IDQsIGhlaWdodDogNCB9KSxcbiAgICApO1xuXG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdCg0KS50b0VxdWFsKGNvbC53aWR0aCk7XG4gICAgZXhwZWN0KDUpLnRvRXF1YWwoY29sLmhlaWdodCk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdyb3cgd3JhcHMgdG8gd2lkdGggb2YgMjQsIHRha2luZyB0YWxsZXN0IHdpZGdldCBpbnRvIGFjY291bnQgd2hpbGUgd3JhcHBpbmcnLCAoKSA9PiB7XG4gICAgLy8gVHJ5IHRoZSB0YWxsIGJveCBpbiBhbGwgcG9zaXRpb25zXG4gICAgZm9yIChjb25zdCBoZWlnaHRzIG9mIFtbNCwgMSwgMV0sIFsxLCA0LCAxXSwgWzEsIDEsIDRdXSkge1xuICAgICAgLy8gR0lWRU5cbiAgICAgIGNvbnN0IHdpZGdldHMgPSBbXG4gICAgICAgIG5ldyBUZXh0V2lkZ2V0KHsgd2lkdGg6IDcsIGhlaWdodDogaGVpZ2h0c1swXSwgbWFya2Rvd246ICdhJyB9KSxcbiAgICAgICAgbmV3IFRleHRXaWRnZXQoeyB3aWR0aDogNywgaGVpZ2h0OiBoZWlnaHRzWzFdLCBtYXJrZG93bjogJ2InIH0pLFxuICAgICAgICBuZXcgVGV4dFdpZGdldCh7IHdpZHRoOiA3LCBoZWlnaHQ6IGhlaWdodHNbMl0sIG1hcmtkb3duOiAnYycgfSksXG4gICAgICAgIG5ldyBUZXh0V2lkZ2V0KHsgd2lkdGg6IDcsIGhlaWdodDogMSwgbWFya2Rvd246ICdkJyB9KSxcbiAgICAgIF07XG5cbiAgICAgIC8vIFdIRU5cbiAgICAgIGNvbnN0IHJvdyA9IG5ldyBSb3coLi4ud2lkZ2V0cyk7XG4gICAgICByb3cucG9zaXRpb24oMTAwMCwgMTAwMCk7IC8vIENoZWNrIHRoYXQgd2UgY29ycmVjdGx5IG9mZnNldCBhbGwgaW5uZXIgd2lkZ2V0c1xuXG4gICAgICAvLyBUSEVOXG4gICAgICBleHBlY3QoMjEpLnRvRXF1YWwocm93LndpZHRoKTtcbiAgICAgIGV4cGVjdCg1KS50b0VxdWFsKHJvdy5oZWlnaHQpO1xuXG4gICAgICBmdW5jdGlvbiBhc3NlcnRXaWRnZXRQb3MoeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IElXaWRnZXQpIHtcbiAgICAgICAgY29uc3QganNvbiA9IHcudG9Kc29uKClbMF07XG4gICAgICAgIGV4cGVjdCh4KS50b0VxdWFsKGpzb24ueCk7XG4gICAgICAgIGV4cGVjdCh5KS50b0VxdWFsKGpzb24ueSk7XG4gICAgICB9XG5cbiAgICAgIGFzc2VydFdpZGdldFBvcygxMDAwLCAxMDAwLCB3aWRnZXRzWzBdKTtcbiAgICAgIGFzc2VydFdpZGdldFBvcygxMDA3LCAxMDAwLCB3aWRnZXRzWzFdKTtcbiAgICAgIGFzc2VydFdpZGdldFBvcygxMDE0LCAxMDAwLCB3aWRnZXRzWzJdKTtcbiAgICAgIGFzc2VydFdpZGdldFBvcygxMDAwLCAxMDA0LCB3aWRnZXRzWzNdKTtcbiAgICB9XG5cblxuICB9KTtcblxuICB0ZXN0KCdyb3cgY2FuIGZpdCBleGFjdGx5IDMgOC13aWRlIHdpZGdldHMgd2l0aG91dCB3cmFwcGluZycsICgpID0+IHtcbiAgICAvLyBUcnkgdGhlIHRhbGwgYm94IGluIGFsbCBwb3NpdGlvbnNcbiAgICBmb3IgKGNvbnN0IGhlaWdodHMgb2YgW1s0LCAxLCAxXSwgWzEsIDQsIDFdLCBbMSwgMSwgNF1dKSB7XG4gICAgICAvLyBXSEVOXG4gICAgICBjb25zdCByb3cgPSBuZXcgUm93KFxuICAgICAgICBuZXcgVGV4dFdpZGdldCh7IHdpZHRoOiA4LCBoZWlnaHQ6IGhlaWdodHNbMF0sIG1hcmtkb3duOiAnYScgfSksXG4gICAgICAgIG5ldyBUZXh0V2lkZ2V0KHsgd2lkdGg6IDgsIGhlaWdodDogaGVpZ2h0c1sxXSwgbWFya2Rvd246ICdiJyB9KSxcbiAgICAgICAgbmV3IFRleHRXaWRnZXQoeyB3aWR0aDogOCwgaGVpZ2h0OiBoZWlnaHRzWzJdLCBtYXJrZG93bjogJ2MnIH0pLFxuICAgICAgKTtcblxuICAgICAgLy8gVEhFTlxuICAgICAgZXhwZWN0KDI0KS50b0VxdWFsKHJvdy53aWR0aCk7XG4gICAgICBleHBlY3QoNCkudG9FcXVhbChyb3cuaGVpZ2h0KTtcbiAgICB9XG5cblxuICB9KTtcblxuICB0ZXN0KCdhZGQgYSB3aWRnZXQgdG8gdGhlIHJvdycsICgpID0+IHtcbiAgICBjb25zdCByb3cgPSBuZXcgUm93KG5ldyBTcGFjZXIoKSk7XG4gICAgZXhwZWN0KHJvdy53aWR0aCkudG9FcXVhbCgxKTtcblxuICAgIHJvdy5hZGRXaWRnZXQobmV3IFNwYWNlcih7IHdpZHRoOiAzIH0pKTtcbiAgICBleHBlY3Qocm93LndpZHRoKS50b0VxdWFsKDQpO1xuXG5cbiAgfSk7XG5cbiAgdGVzdCgnYWRkIGEgd2lkZ2V0IHRvIHRoZSBjb2x1bW4nLCAoKSA9PiB7XG4gICAgY29uc3QgY29sdW1uID0gbmV3IENvbHVtbihcbiAgICAgIG5ldyBTcGFjZXIoKSxcbiAgICAgIG5ldyBTcGFjZXIoKSxcbiAgICApO1xuICAgIGV4cGVjdChjb2x1bW4uaGVpZ2h0KS50b0VxdWFsKDIpO1xuXG4gICAgY29sdW1uLmFkZFdpZGdldChuZXcgU3BhY2VyKHsgaGVpZ2h0OiAyLCB3aWR0aDogMyB9KSk7XG4gICAgZXhwZWN0KGNvbHVtbi5oZWlnaHQpLnRvRXF1YWwoNCk7XG4gICAgZXhwZWN0KGNvbHVtbi53aWR0aCkudG9FcXVhbCgzKTtcblxuXG4gIH0pO1xuXG4gIHRlc3QoJ3JvdyB3cmFwcyB3aGVuIGFkZGluZyB3aWRnZXRzJywgKCkgPT4ge1xuICAgIGNvbnN0IHJvdyA9IG5ldyBSb3coXG4gICAgICBuZXcgU3BhY2VyKHsgd2lkdGg6IDEwIH0pLFxuICAgICAgbmV3IFNwYWNlcih7IHdpZHRoOiAxMCB9KSxcbiAgICApO1xuICAgIGV4cGVjdChyb3cud2lkdGgpLnRvRXF1YWwoMjApO1xuICAgIGV4cGVjdChyb3cuaGVpZ2h0KS50b0VxdWFsKDEpO1xuXG4gICAgcm93LmFkZFdpZGdldChuZXcgU3BhY2VyKHsgd2lkdGg6IDUsIGhlaWdodDogMiB9KSk7XG4gICAgZXhwZWN0KHJvdy53aWR0aCkudG9FcXVhbCgyMCk7XG4gICAgZXhwZWN0KHJvdy5oZWlnaHQpLnRvRXF1YWwoMyk7XG5cblxuICB9KTtcbn0pO1xuIl19