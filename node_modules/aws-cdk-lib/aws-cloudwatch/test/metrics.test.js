"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const iam = require("../../aws-iam");
const cdk_build_tools_1 = require("@aws-cdk/cdk-build-tools");
const cdk = require("../../core");
const lib_1 = require("../lib");
const statistic_1 = require("../lib/private/statistic");
describe('Metrics', () => {
    test('metric grant', () => {
        // GIVEN
        const stack = new cdk.Stack();
        const role = new iam.Role(stack, 'SomeRole', {
            assumedBy: new iam.AnyPrincipal(),
        });
        // WHEN
        lib_1.Metric.grantPutMetricData(role);
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Version: '2012-10-17',
                Statement: [
                    {
                        Action: 'cloudwatch:PutMetricData',
                        Effect: 'Allow',
                        Resource: '*',
                    },
                ],
            },
        });
    });
    test('can not use invalid period in Metric', () => {
        expect(() => {
            new lib_1.Metric({ namespace: 'Test', metricName: 'ACount', period: cdk.Duration.seconds(20) });
        }).toThrow(/'period' must be 1, 5, 10, 30, or a multiple of 60 seconds, received 20/);
    });
    test('Metric optimization: "with" with the same period returns the same object', () => {
        const m = new lib_1.Metric({ namespace: 'Test', metricName: 'Metric', period: cdk.Duration.minutes(10) });
        // Note: object equality, NOT deep equality on purpose
        expect(m.with({})).toEqual(m);
        expect(m.with({ period: cdk.Duration.minutes(10) })).toEqual(m);
        expect(m.with({ period: cdk.Duration.minutes(5) })).not.toEqual(m);
    });
    (0, cdk_build_tools_1.testDeprecated)('cannot use null dimension value', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    DimensionWithNull: null,
                },
            });
        }).toThrow(/Dimension value of 'null' is invalid/);
    });
    (0, cdk_build_tools_1.testDeprecated)('cannot use undefined dimension value', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    DimensionWithUndefined: undefined,
                },
            });
        }).toThrow(/Dimension value of 'undefined' is invalid/);
    });
    (0, cdk_build_tools_1.testDeprecated)('cannot use long dimension values', () => {
        const arr = new Array(256);
        const invalidDimensionValue = arr.fill('A', 0).join('');
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    DimensionWithLongValue: invalidDimensionValue,
                },
            });
        }).toThrow(`Dimension value must be at least 1 and no more than 255 characters; received ${invalidDimensionValue}`);
    });
    test('cannot use long dimension values in dimensionsMap', () => {
        const arr = new Array(256);
        const invalidDimensionValue = arr.fill('A', 0).join('');
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensionsMap: {
                    DimensionWithLongValue: invalidDimensionValue,
                },
            });
        }).toThrow(`Dimension value must be at least 1 and no more than 255 characters; received ${invalidDimensionValue}`);
    });
    (0, cdk_build_tools_1.testDeprecated)('throws error when there are more than 10 dimensions', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    dimensionA: 'value1',
                    dimensionB: 'value2',
                    dimensionC: 'value3',
                    dimensionD: 'value4',
                    dimensionE: 'value5',
                    dimensionF: 'value6',
                    dimensionG: 'value7',
                    dimensionH: 'value8',
                    dimensionI: 'value9',
                    dimensionJ: 'value10',
                    dimensionK: 'value11',
                },
            });
        }).toThrow(/The maximum number of dimensions is 10, received 11/);
    });
    test('throws error when there are more than 10 dimensions in dimensionsMap', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensionsMap: {
                    dimensionA: 'value1',
                    dimensionB: 'value2',
                    dimensionC: 'value3',
                    dimensionD: 'value4',
                    dimensionE: 'value5',
                    dimensionF: 'value6',
                    dimensionG: 'value7',
                    dimensionH: 'value8',
                    dimensionI: 'value9',
                    dimensionJ: 'value10',
                    dimensionK: 'value11',
                },
            });
        }).toThrow(/The maximum number of dimensions is 10, received 11/);
    });
    test('can create metric with dimensionsMap property', () => {
        const stack = new cdk.Stack();
        const metric = new lib_1.Metric({
            namespace: 'Test',
            metricName: 'Metric',
            dimensionsMap: {
                dimensionA: 'value1',
                dimensionB: 'value2',
            },
        });
        new lib_1.Alarm(stack, 'Alarm', {
            metric: metric,
            threshold: 10,
            evaluationPeriods: 1,
        });
        expect(metric.dimensions).toEqual({
            dimensionA: 'value1',
            dimensionB: 'value2',
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::CloudWatch::Alarm', {
            Namespace: 'Test',
            MetricName: 'Metric',
            Dimensions: [
                {
                    Name: 'dimensionA',
                    Value: 'value1',
                },
                {
                    Name: 'dimensionB',
                    Value: 'value2',
                },
            ],
            Threshold: 10,
            EvaluationPeriods: 1,
        });
    });
    test('"with" with a different dimensions property', () => {
        const dims = {
            dimensionA: 'value1',
        };
        const metric = new lib_1.Metric({
            namespace: 'Test',
            metricName: 'Metric',
            period: cdk.Duration.minutes(10),
            dimensionsMap: dims,
        });
        const newDims = {
            dimensionB: 'value2',
        };
        expect(metric.with({
            dimensionsMap: newDims,
        }).dimensions).toEqual(newDims);
    });
    test('metric accepts a variety of statistics', () => {
        const customStat = 'myCustomStatistic';
        const metric = new lib_1.Metric({
            namespace: 'Test',
            metricName: 'Metric',
            statistic: customStat,
        });
        expect(metric.statistic).toEqual(customStat);
    });
    test('statistic is properly parsed', () => {
        const checkParsingSingle = (statistic, statPrefix, statName, value) => {
            const parsed = (0, statistic_1.parseStatistic)(statistic);
            expect(parsed.type).toEqual('single');
            expect(parsed.value).toEqual(value);
            expect(parsed.statPrefix).toEqual(statPrefix);
            expect(parsed.statName).toEqual(statName);
        };
        const checkParsingPair = (statistic, statPrefix, statName, isPercent, canBeSingleStat, asSingleStatStr, lower, upper) => {
            const parsed = (0, statistic_1.parseStatistic)(statistic);
            expect(parsed.type).toEqual('pair');
            expect(parsed.isPercent).toEqual(isPercent);
            expect(parsed.lower).toEqual(lower);
            expect(parsed.upper).toEqual(upper);
            expect(parsed.canBeSingleStat).toEqual(canBeSingleStat);
            expect(parsed.asSingleStatStr).toEqual(asSingleStatStr);
            expect(parsed.statPrefix).toEqual(statPrefix);
            expect(parsed.statName).toEqual(statName);
        };
        expect((0, statistic_1.parseStatistic)(lib_1.Stats.SAMPLE_COUNT).type).toEqual('simple');
        expect((0, statistic_1.parseStatistic)(lib_1.Stats.AVERAGE).type).toEqual('simple');
        expect((0, statistic_1.parseStatistic)(lib_1.Stats.SUM).type).toEqual('simple');
        expect((0, statistic_1.parseStatistic)(lib_1.Stats.MINIMUM).type).toEqual('simple');
        expect((0, statistic_1.parseStatistic)(lib_1.Stats.MAXIMUM).type).toEqual('simple');
        expect((0, statistic_1.parseStatistic)(lib_1.Stats.IQM).type).toEqual('simple');
        /* eslint-disable no-multi-spaces */
        // Check single statistics
        checkParsingSingle('p9', 'p', 'percentile', 9);
        checkParsingSingle('p99', 'p', 'percentile', 99);
        checkParsingSingle('P99', 'p', 'percentile', 99);
        checkParsingSingle('p99.99', 'p', 'percentile', 99.99);
        checkParsingSingle('tm99', 'tm', 'trimmedMean', 99);
        checkParsingSingle('wm99', 'wm', 'winsorizedMean', 99);
        checkParsingSingle('tc99', 'tc', 'trimmedCount', 99);
        checkParsingSingle('ts99', 'ts', 'trimmedSum', 99);
        // Check all pair statistics
        checkParsingPair('TM(10%:90%)', 'TM', 'trimmedMean', true, false, undefined, 10, 90);
        checkParsingPair('TM(10.99%:90.99%)', 'TM', 'trimmedMean', true, false, undefined, 10.99, 90.99);
        checkParsingPair('WM(10%:90%)', 'WM', 'winsorizedMean', true, false, undefined, 10, 90);
        checkParsingPair('TC(10%:90%)', 'TC', 'trimmedCount', true, false, undefined, 10, 90);
        checkParsingPair('TS(10%:90%)', 'TS', 'trimmedSum', true, false, undefined, 10, 90);
        // Check can be represented as a single statistic
        checkParsingPair('TM(:90%)', 'TM', 'trimmedMean', true, true, 'tm90', undefined, 90);
        // Check every case
        checkParsingPair('tm(10%:90%)', 'TM', 'trimmedMean', true, false, undefined, 10, 90);
        checkParsingPair('TM(10%:90%)', 'TM', 'trimmedMean', true, false, undefined, 10, 90);
        checkParsingPair('TM(:90%)', 'TM', 'trimmedMean', true, true, 'tm90', undefined, 90);
        checkParsingPair('TM(10%:)', 'TM', 'trimmedMean', true, false, undefined, 10, undefined);
        checkParsingPair('TM(10:1500)', 'TM', 'trimmedMean', false, false, undefined, 10, 1500);
        checkParsingPair('TM(10:)', 'TM', 'trimmedMean', false, false, undefined, 10, undefined);
        checkParsingPair('TM(:5000)', 'TM', 'trimmedMean', false, false, undefined, undefined, 5000);
        checkParsingPair('TM(0.123456789:)', 'TM', 'trimmedMean', false, false, undefined, 0.123456789, undefined);
        checkParsingPair('TM(0.123456789:)', 'TM', 'trimmedMean', false, false, undefined, 0.123456789, undefined);
        checkParsingPair('TM(:0.123456789)', 'TM', 'trimmedMean', false, false, undefined, undefined, 0.123456789);
        checkParsingPair('TM(0.123456789%:)', 'TM', 'trimmedMean', true, false, undefined, 0.123456789, undefined);
        checkParsingPair('TM(:0.123456789%)', 'TM', 'trimmedMean', true, true, 'tm0.123456789', undefined, 0.123456789);
        checkParsingPair('TM(0.123:0.4543)', 'TM', 'trimmedMean', false, false, undefined, 0.123, 0.4543);
        checkParsingPair('TM(0.123%:0.4543%)', 'TM', 'trimmedMean', true, false, undefined, 0.123, 0.4543);
        checkParsingPair('TM(0.1000%:0.1000%)', 'TM', 'trimmedMean', true, false, undefined, 0.1, 0.1);
        checkParsingPair('TM(0.9999:100.9999)', 'TM', 'trimmedMean', false, false, undefined, 0.9999, 100.9999);
        /* eslint-enable no-multi-spaces */
        // Check invalid statistics
        expect((0, statistic_1.parseStatistic)('p99.99.99').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('p200').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('pa99').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('99').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('tm1.').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('tm12.').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('tm123').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('tm123.123456789').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('tm.123456789').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(10:90%)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(10%:1500)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(10)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM()').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(0.:)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(:0.)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('()').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('(:)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(:)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(0.123456789%:%)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(0.123:0.4543%)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(0.123%:0.4543)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(1000%:)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(:1000%)').type).toEqual('generic');
        expect((0, statistic_1.parseStatistic)('TM(1000%:1000%)').type).toEqual('generic');
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0cmljcy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWV0cmljcy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQTRDO0FBQzVDLHFDQUFxQztBQUNyQyw4REFBMEQ7QUFDMUQsa0NBQWtDO0FBQ2xDLGdDQUE4QztBQUM5Qyx3REFBMEY7QUFFMUYsUUFBUSxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7SUFDdkIsSUFBSSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7UUFDeEIsUUFBUTtRQUNSLE1BQU0sS0FBSyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzlCLE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFO1lBQzNDLFNBQVMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxZQUFZLEVBQUU7U0FDbEMsQ0FBQyxDQUFDO1FBRUgsT0FBTztRQUNQLFlBQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVoQyxPQUFPO1FBQ1AscUJBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMscUJBQXFCLENBQUMsa0JBQWtCLEVBQUU7WUFDbEUsY0FBYyxFQUFFO2dCQUNkLE9BQU8sRUFBRSxZQUFZO2dCQUNyQixTQUFTLEVBQUU7b0JBQ1Q7d0JBQ0UsTUFBTSxFQUFFLDBCQUEwQjt3QkFDbEMsTUFBTSxFQUFFLE9BQU87d0JBQ2YsUUFBUSxFQUFFLEdBQUc7cUJBQ2Q7aUJBQ0Y7YUFDRjtTQUNGLENBQUMsQ0FBQztJQUdMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtRQUNoRCxNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ1YsSUFBSSxZQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxRQUFR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T0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sQ0FBQyxJQUFBLDBCQUFjLEVBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3hELE1BQU0sQ0FBQyxJQUFBLDBCQUFjLEVBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3hELE1BQU0sQ0FBQyxJQUFBLDBCQUFjLEVBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDbEUsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDL0QsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDN0QsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDL0QsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDekQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDckQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdEQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdEQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdEQsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxvQkFBb0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNyRSxNQUFNLENBQUMsSUFBQSwwQkFBYyxFQUFDLG1CQUFtQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3BFLE1BQU0sQ0FBQyxJQUFBLDBCQUFjLEVBQUMsbUJBQW1CLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDcEUsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDN0QsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDN0QsTUFBTSxDQUFDLElBQUEsMEJBQWMsRUFBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNwRSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi8uLi9hc3NlcnRpb25zJztcbmltcG9ydCAqIGFzIGlhbSBmcm9tICcuLi8uLi9hd3MtaWFtJztcbmltcG9ydCB7IHRlc3REZXByZWNhdGVkIH0gZnJvbSAnQGF3cy1jZGsvY2RrLWJ1aWxkLXRvb2xzJztcbmltcG9ydCAqIGFzIGNkayBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IEFsYXJtLCBNZXRyaWMsIFN0YXRzIH0gZnJvbSAnLi4vbGliJztcbmltcG9ydCB7IFBhaXJTdGF0aXN0aWMsIHBhcnNlU3RhdGlzdGljLCBTaW5nbGVTdGF0aXN0aWMgfSBmcm9tICcuLi9saWIvcHJpdmF0ZS9zdGF0aXN0aWMnO1xuXG5kZXNjcmliZSgnTWV0cmljcycsICgpID0+IHtcbiAgdGVzdCgnbWV0cmljIGdyYW50JywgKCkgPT4ge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG4gICAgY29uc3Qgcm9sZSA9IG5ldyBpYW0uUm9sZShzdGFjaywgJ1NvbWVSb2xlJywge1xuICAgICAgYXNzdW1lZEJ5OiBuZXcgaWFtLkFueVByaW5jaXBhbCgpLFxuICAgIH0pO1xuXG4gICAgLy8gV0hFTlxuICAgIE1ldHJpYy5ncmFudFB1dE1ldHJpY0RhdGEocm9sZSk7XG5cbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6SUFNOjpQb2xpY3knLCB7XG4gICAgICBQb2xpY3lEb2N1bWVudDoge1xuICAgICAgICBWZXJzaW9uOiAnMjAxMi0xMC0xNycsXG4gICAgICAgIFN0YXRlbWVudDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIEFjdGlvbjogJ2Nsb3Vkd2F0Y2g6UHV0TWV0cmljRGF0YScsXG4gICAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXG4gICAgICAgICAgICBSZXNvdXJjZTogJyonLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuXG5cbiAgfSk7XG5cbiAgdGVzdCgnY2FuIG5vdCB1c2UgaW52YWxpZCBwZXJpb2QgaW4gTWV0cmljJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBuZXcgTWV0cmljKHsgbmFtZXNwYWNlOiAnVGVzdCcsIG1ldHJpY05hbWU6ICdBQ291bnQnLCBwZXJpb2Q6IGNkay5EdXJhdGlvbi5zZWNvbmRzKDIwKSB9KTtcbiAgICB9KS50b1Rocm93KC8ncGVyaW9kJyBtdXN0IGJlIDEsIDUsIDEwLCAzMCwgb3IgYSBtdWx0aXBsZSBvZiA2MCBzZWNvbmRzLCByZWNlaXZlZCAyMC8pO1xuXG5cbiAgfSk7XG5cbiAgdGVzdCgnTWV0cmljIG9wdGltaXphdGlvbjogXCJ3aXRoXCIgd2l0aCB0aGUgc2FtZSBwZXJpb2QgcmV0dXJucyB0aGUgc2FtZSBvYmplY3QnLCAoKSA9PiB7XG4gICAgY29uc3QgbSA9IG5ldyBNZXRyaWMoeyBuYW1lc3BhY2U6ICdUZXN0JywgbWV0cmljTmFtZTogJ01ldHJpYycsIHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApIH0pO1xuXG4gICAgLy8gTm90ZTogb2JqZWN0IGVxdWFsaXR5LCBOT1QgZGVlcCBlcXVhbGl0eSBvbiBwdXJwb3NlXG4gICAgZXhwZWN0KG0ud2l0aCh7fSkpLnRvRXF1YWwobSk7XG4gICAgZXhwZWN0KG0ud2l0aCh7IHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApIH0pKS50b0VxdWFsKG0pO1xuXG4gICAgZXhwZWN0KG0ud2l0aCh7IHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoNSkgfSkpLm5vdC50b0VxdWFsKG0pO1xuXG5cbiAgfSk7XG5cbiAgdGVzdERlcHJlY2F0ZWQoJ2Nhbm5vdCB1c2UgbnVsbCBkaW1lbnNpb24gdmFsdWUnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIG5ldyBNZXRyaWMoe1xuICAgICAgICBuYW1lc3BhY2U6ICdUZXN0JyxcbiAgICAgICAgbWV0cmljTmFtZTogJ0FDb3VudCcsXG4gICAgICAgIHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApLFxuICAgICAgICBkaW1lbnNpb25zOiB7XG4gICAgICAgICAgRGltZW5zaW9uV2l0aE51bGw6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KS50b1Rocm93KC9EaW1lbnNpb24gdmFsdWUgb2YgJ251bGwnIGlzIGludmFsaWQvKTtcblxuXG4gIH0pO1xuXG4gIHRlc3REZXByZWNhdGVkKCdjYW5ub3QgdXNlIHVuZGVmaW5lZCBkaW1lbnNpb24gdmFsdWUnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIG5ldyBNZXRyaWMoe1xuICAgICAgICBuYW1lc3BhY2U6ICdUZXN0JyxcbiAgICAgICAgbWV0cmljTmFtZTogJ0FDb3VudCcsXG4gICAgICAgIHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApLFxuICAgICAgICBkaW1lbnNpb25zOiB7XG4gICAgICAgICAgRGltZW5zaW9uV2l0aFVuZGVmaW5lZDogdW5kZWZpbmVkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSkudG9UaHJvdygvRGltZW5zaW9uIHZhbHVlIG9mICd1bmRlZmluZWQnIGlzIGludmFsaWQvKTtcblxuXG4gIH0pO1xuXG4gIHRlc3REZXByZWNhdGVkKCdjYW5ub3QgdXNlIGxvbmcgZGltZW5zaW9uIHZhbHVlcycsICgpID0+IHtcbiAgICBjb25zdCBhcnIgPSBuZXcgQXJyYXkoMjU2KTtcbiAgICBjb25zdCBpbnZhbGlkRGltZW5zaW9uVmFsdWUgPSBhcnIuZmlsbCgnQScsIDApLmpvaW4oJycpO1xuXG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIG5ldyBNZXRyaWMoe1xuICAgICAgICBuYW1lc3BhY2U6ICdUZXN0JyxcbiAgICAgICAgbWV0cmljTmFtZTogJ0FDb3VudCcsXG4gICAgICAgIHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApLFxuICAgICAgICBkaW1lbnNpb25zOiB7XG4gICAgICAgICAgRGltZW5zaW9uV2l0aExvbmdWYWx1ZTogaW52YWxpZERpbWVuc2lvblZhbHVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSkudG9UaHJvdyhgRGltZW5zaW9uIHZhbHVlIG11c3QgYmUgYXQgbGVhc3QgMSBhbmQgbm8gbW9yZSB0aGFuIDI1NSBjaGFyYWN0ZXJzOyByZWNlaXZlZCAke2ludmFsaWREaW1lbnNpb25WYWx1ZX1gKTtcblxuXG4gIH0pO1xuXG4gIHRlc3QoJ2Nhbm5vdCB1c2UgbG9uZyBkaW1lbnNpb24gdmFsdWVzIGluIGRpbWVuc2lvbnNNYXAnLCAoKSA9PiB7XG4gICAgY29uc3QgYXJyID0gbmV3IEFycmF5KDI1Nik7XG4gICAgY29uc3QgaW52YWxpZERpbWVuc2lvblZhbHVlID0gYXJyLmZpbGwoJ0EnLCAwKS5qb2luKCcnKTtcblxuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBuZXcgTWV0cmljKHtcbiAgICAgICAgbmFtZXNwYWNlOiAnVGVzdCcsXG4gICAgICAgIG1ldHJpY05hbWU6ICdBQ291bnQnLFxuICAgICAgICBwZXJpb2Q6IGNkay5EdXJhdGlvbi5taW51dGVzKDEwKSxcbiAgICAgICAgZGltZW5zaW9uc01hcDoge1xuICAgICAgICAgIERpbWVuc2lvbldpdGhMb25nVmFsdWU6IGludmFsaWREaW1lbnNpb25WYWx1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pLnRvVGhyb3coYERpbWVuc2lvbiB2YWx1ZSBtdXN0IGJlIGF0IGxlYXN0IDEgYW5kIG5vIG1vcmUgdGhhbiAyNTUgY2hhcmFjdGVyczsgcmVjZWl2ZWQgJHtpbnZhbGlkRGltZW5zaW9uVmFsdWV9YCk7XG5cblxuICB9KTtcblxuICB0ZXN0RGVwcmVjYXRlZCgndGhyb3dzIGVycm9yIHdoZW4gdGhlcmUgYXJlIG1vcmUgdGhhbiAxMCBkaW1lbnNpb25zJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBuZXcgTWV0cmljKHtcbiAgICAgICAgbmFtZXNwYWNlOiAnVGVzdCcsXG4gICAgICAgIG1ldHJpY05hbWU6ICdBQ291bnQnLFxuICAgICAgICBwZXJpb2Q6IGNkay5EdXJhdGlvbi5taW51dGVzKDEwKSxcbiAgICAgICAgZGltZW5zaW9uczoge1xuICAgICAgICAgIGRpbWVuc2lvbkE6ICd2YWx1ZTEnLFxuICAgICAgICAgIGRpbWVuc2lvbkI6ICd2YWx1ZTInLFxuICAgICAgICAgIGRpbWVuc2lvbkM6ICd2YWx1ZTMnLFxuICAgICAgICAgIGRpbWVuc2lvbkQ6ICd2YWx1ZTQnLFxuICAgICAgICAgIGRpbWVuc2lvbkU6ICd2YWx1ZTUnLFxuICAgICAgICAgIGRpbWVuc2lvbkY6ICd2YWx1ZTYnLFxuICAgICAgICAgIGRpbWVuc2lvbkc6ICd2YWx1ZTcnLFxuICAgICAgICAgIGRpbWVuc2lvbkg6ICd2YWx1ZTgnLFxuICAgICAgICAgIGRpbWVuc2lvbkk6ICd2YWx1ZTknLFxuICAgICAgICAgIGRpbWVuc2lvbko6ICd2YWx1ZTEwJyxcbiAgICAgICAgICBkaW1lbnNpb25LOiAndmFsdWUxMScsXG4gICAgICAgIH0sXG4gICAgICB9ICk7XG4gICAgfSkudG9UaHJvdygvVGhlIG1heGltdW0gbnVtYmVyIG9mIGRpbWVuc2lvbnMgaXMgMTAsIHJlY2VpdmVkIDExLyk7XG5cblxuICB9KTtcblxuICB0ZXN0KCd0aHJvd3MgZXJyb3Igd2hlbiB0aGVyZSBhcmUgbW9yZSB0aGFuIDEwIGRpbWVuc2lvbnMgaW4gZGltZW5zaW9uc01hcCcsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgbmV3IE1ldHJpYyh7XG4gICAgICAgIG5hbWVzcGFjZTogJ1Rlc3QnLFxuICAgICAgICBtZXRyaWNOYW1lOiAnQUNvdW50JyxcbiAgICAgICAgcGVyaW9kOiBjZGsuRHVyYXRpb24ubWludXRlcygxMCksXG4gICAgICAgIGRpbWVuc2lvbnNNYXA6IHtcbiAgICAgICAgICBkaW1lbnNpb25BOiAndmFsdWUxJyxcbiAgICAgICAgICBkaW1lbnNpb25COiAndmFsdWUyJyxcbiAgICAgICAgICBkaW1lbnNpb25DOiAndmFsdWUzJyxcbiAgICAgICAgICBkaW1lbnNpb25EOiAndmFsdWU0JyxcbiAgICAgICAgICBkaW1lbnNpb25FOiAndmFsdWU1JyxcbiAgICAgICAgICBkaW1lbnNpb25GOiAndmFsdWU2JyxcbiAgICAgICAgICBkaW1lbnNpb25HOiAndmFsdWU3JyxcbiAgICAgICAgICBkaW1lbnNpb25IOiAndmFsdWU4JyxcbiAgICAgICAgICBkaW1lbnNpb25JOiAndmFsdWU5JyxcbiAgICAgICAgICBkaW1lbnNpb25KOiAndmFsdWUxMCcsXG4gICAgICAgICAgZGltZW5zaW9uSzogJ3ZhbHVlMTEnLFxuICAgICAgICB9LFxuICAgICAgfSApO1xuICAgIH0pLnRvVGhyb3coL1RoZSBtYXhpbXVtIG51bWJlciBvZiBkaW1lbnNpb25zIGlzIDEwLCByZWNlaXZlZCAxMS8pO1xuXG5cbiAgfSk7XG5cbiAgdGVzdCgnY2FuIGNyZWF0ZSBtZXRyaWMgd2l0aCBkaW1lbnNpb25zTWFwIHByb3BlcnR5JywgKCkgPT4ge1xuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuICAgIGNvbnN0IG1ldHJpYyA9IG5ldyBNZXRyaWMoe1xuICAgICAgbmFtZXNwYWNlOiAnVGVzdCcsXG4gICAgICBtZXRyaWNOYW1lOiAnTWV0cmljJyxcbiAgICAgIGRpbWVuc2lvbnNNYXA6IHtcbiAgICAgICAgZGltZW5zaW9uQTogJ3ZhbHVlMScsXG4gICAgICAgIGRpbWVuc2lvbkI6ICd2YWx1ZTInLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIG5ldyBBbGFybShzdGFjaywgJ0FsYXJtJywge1xuICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgZXZhbHVhdGlvblBlcmlvZHM6IDEsXG4gICAgfSk7XG5cbiAgICBleHBlY3QobWV0cmljLmRpbWVuc2lvbnMpLnRvRXF1YWwoe1xuICAgICAgZGltZW5zaW9uQTogJ3ZhbHVlMScsXG4gICAgICBkaW1lbnNpb25COiAndmFsdWUyJyxcbiAgICB9KTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcbiAgICAgIE5hbWVzcGFjZTogJ1Rlc3QnLFxuICAgICAgTWV0cmljTmFtZTogJ01ldHJpYycsXG4gICAgICBEaW1lbnNpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBOYW1lOiAnZGltZW5zaW9uQScsXG4gICAgICAgICAgVmFsdWU6ICd2YWx1ZTEnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgTmFtZTogJ2RpbWVuc2lvbkInLFxuICAgICAgICAgIFZhbHVlOiAndmFsdWUyJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBUaHJlc2hvbGQ6IDEwLFxuICAgICAgRXZhbHVhdGlvblBlcmlvZHM6IDEsXG4gICAgfSk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdcIndpdGhcIiB3aXRoIGEgZGlmZmVyZW50IGRpbWVuc2lvbnMgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgY29uc3QgZGltcyA9IHtcbiAgICAgIGRpbWVuc2lvbkE6ICd2YWx1ZTEnLFxuICAgIH07XG5cbiAgICBjb25zdCBtZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ1Rlc3QnLFxuICAgICAgbWV0cmljTmFtZTogJ01ldHJpYycsXG4gICAgICBwZXJpb2Q6IGNkay5EdXJhdGlvbi5taW51dGVzKDEwKSxcbiAgICAgIGRpbWVuc2lvbnNNYXA6IGRpbXMsXG4gICAgfSk7XG5cbiAgICBjb25zdCBuZXdEaW1zID0ge1xuICAgICAgZGltZW5zaW9uQjogJ3ZhbHVlMicsXG4gICAgfTtcblxuICAgIGV4cGVjdChtZXRyaWMud2l0aCh7XG4gICAgICBkaW1lbnNpb25zTWFwOiBuZXdEaW1zLFxuICAgIH0pLmRpbWVuc2lvbnMpLnRvRXF1YWwobmV3RGltcyk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdtZXRyaWMgYWNjZXB0cyBhIHZhcmlldHkgb2Ygc3RhdGlzdGljcycsICgpID0+IHtcbiAgICBjb25zdCBjdXN0b21TdGF0ID0gJ215Q3VzdG9tU3RhdGlzdGljJztcbiAgICBjb25zdCBtZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ1Rlc3QnLFxuICAgICAgbWV0cmljTmFtZTogJ01ldHJpYycsXG4gICAgICBzdGF0aXN0aWM6IGN1c3RvbVN0YXQsXG4gICAgfSk7XG5cbiAgICBleHBlY3QobWV0cmljLnN0YXRpc3RpYykudG9FcXVhbChjdXN0b21TdGF0KTtcbiAgfSk7XG5cbiAgdGVzdCgnc3RhdGlzdGljIGlzIHByb3Blcmx5IHBhcnNlZCcsICgpID0+IHtcbiAgICBjb25zdCBjaGVja1BhcnNpbmdTaW5nbGUgPSAoc3RhdGlzdGljOiBzdHJpbmcsIHN0YXRQcmVmaXg6IHN0cmluZywgc3RhdE5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VTdGF0aXN0aWMoc3RhdGlzdGljKTtcbiAgICAgIGV4cGVjdChwYXJzZWQudHlwZSkudG9FcXVhbCgnc2luZ2xlJyk7XG4gICAgICBleHBlY3QoKHBhcnNlZCBhcyBTaW5nbGVTdGF0aXN0aWMpLnZhbHVlKS50b0VxdWFsKHZhbHVlKTtcbiAgICAgIGV4cGVjdCgocGFyc2VkIGFzIFNpbmdsZVN0YXRpc3RpYykuc3RhdFByZWZpeCkudG9FcXVhbChzdGF0UHJlZml4KTtcbiAgICAgIGV4cGVjdCgocGFyc2VkIGFzIFNpbmdsZVN0YXRpc3RpYykuc3RhdE5hbWUpLnRvRXF1YWwoc3RhdE5hbWUpO1xuICAgIH07XG5cbiAgICBjb25zdCBjaGVja1BhcnNpbmdQYWlyID0gKFxuICAgICAgc3RhdGlzdGljOiBzdHJpbmcsXG4gICAgICBzdGF0UHJlZml4OiBzdHJpbmcsXG4gICAgICBzdGF0TmFtZTogc3RyaW5nLFxuICAgICAgaXNQZXJjZW50OiBib29sZWFuLFxuICAgICAgY2FuQmVTaW5nbGVTdGF0OiBib29sZWFuLFxuICAgICAgYXNTaW5nbGVTdGF0U3RyPzogc3RyaW5nLFxuICAgICAgbG93ZXI/OiBudW1iZXIsXG4gICAgICB1cHBlcj86IG51bWJlcixcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlU3RhdGlzdGljKHN0YXRpc3RpYyk7XG4gICAgICBleHBlY3QocGFyc2VkLnR5cGUpLnRvRXF1YWwoJ3BhaXInKTtcbiAgICAgIGV4cGVjdCgocGFyc2VkIGFzIFBhaXJTdGF0aXN0aWMpLmlzUGVyY2VudCkudG9FcXVhbChpc1BlcmNlbnQpO1xuICAgICAgZXhwZWN0KChwYXJzZWQgYXMgUGFpclN0YXRpc3RpYykubG93ZXIpLnRvRXF1YWwobG93ZXIpO1xuICAgICAgZXhwZWN0KChwYXJzZWQgYXMgUGFpclN0YXRpc3RpYykudXBwZXIpLnRvRXF1YWwodXBwZXIpO1xuICAgICAgZXhwZWN0KChwYXJzZWQgYXMgUGFpclN0YXRpc3RpYykuY2FuQmVTaW5nbGVTdGF0KS50b0VxdWFsKGNhbkJlU2luZ2xlU3RhdCk7XG4gICAgICBleHBlY3QoKHBhcnNlZCBhcyBQYWlyU3RhdGlzdGljKS5hc1NpbmdsZVN0YXRTdHIpLnRvRXF1YWwoYXNTaW5nbGVTdGF0U3RyKTtcbiAgICAgIGV4cGVjdCgocGFyc2VkIGFzIFBhaXJTdGF0aXN0aWMpLnN0YXRQcmVmaXgpLnRvRXF1YWwoc3RhdFByZWZpeCk7XG4gICAgICBleHBlY3QoKHBhcnNlZCBhcyBQYWlyU3RhdGlzdGljKS5zdGF0TmFtZSkudG9FcXVhbChzdGF0TmFtZSk7XG4gICAgfTtcblxuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYyhTdGF0cy5TQU1QTEVfQ09VTlQpLnR5cGUpLnRvRXF1YWwoJ3NpbXBsZScpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYyhTdGF0cy5BVkVSQUdFKS50eXBlKS50b0VxdWFsKCdzaW1wbGUnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoU3RhdHMuU1VNKS50eXBlKS50b0VxdWFsKCdzaW1wbGUnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoU3RhdHMuTUlOSU1VTSkudHlwZSkudG9FcXVhbCgnc2ltcGxlJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKFN0YXRzLk1BWElNVU0pLnR5cGUpLnRvRXF1YWwoJ3NpbXBsZScpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYyhTdGF0cy5JUU0pLnR5cGUpLnRvRXF1YWwoJ3NpbXBsZScpO1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbXVsdGktc3BhY2VzICovXG5cbiAgICAvLyBDaGVjayBzaW5nbGUgc3RhdGlzdGljc1xuICAgIGNoZWNrUGFyc2luZ1NpbmdsZSgncDknLCAgICAgJ3AnLCAgJ3BlcmNlbnRpbGUnLCAgICAgOSk7XG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCdwOTknLCAgICAncCcsICAncGVyY2VudGlsZScsICAgICA5OSk7XG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCdQOTknLCAgICAncCcsICAncGVyY2VudGlsZScsICAgICA5OSk7XG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCdwOTkuOTknLCAncCcsICAncGVyY2VudGlsZScsICAgICA5OS45OSk7XG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCd0bTk5JywgICAndG0nLCAndHJpbW1lZE1lYW4nLCAgICA5OSk7XG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCd3bTk5JywgICAnd20nLCAnd2luc29yaXplZE1lYW4nLCA5OSk7XG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCd0Yzk5JywgICAndGMnLCAndHJpbW1lZENvdW50JywgICA5OSk7XG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCd0czk5JywgICAndHMnLCAndHJpbW1lZFN1bScsICAgICA5OSk7XG5cbiAgICAvLyBDaGVjayBhbGwgcGFpciBzdGF0aXN0aWNzXG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMTAlOjkwJSknLCAgICAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCAgICB0cnVlLCBmYWxzZSwgdW5kZWZpbmVkLCAxMCwgICAgICAgIDkwKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgxMC45OSU6OTAuOTklKScsICdUTScsICd0cmltbWVkTWVhbicsICAgIHRydWUsIGZhbHNlLCB1bmRlZmluZWQsIDEwLjk5LCAgICAgOTAuOTkpO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1dNKDEwJTo5MCUpJywgICAgICAgJ1dNJywgJ3dpbnNvcml6ZWRNZWFuJywgdHJ1ZSwgZmFsc2UsIHVuZGVmaW5lZCwgMTAsICAgICAgICA5MCk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVEMoMTAlOjkwJSknLCAgICAgICAnVEMnLCAndHJpbW1lZENvdW50JywgICB0cnVlLCBmYWxzZSwgdW5kZWZpbmVkLCAxMCwgICAgICAgIDkwKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUUygxMCU6OTAlKScsICAgICAgICdUUycsICd0cmltbWVkU3VtJywgICAgIHRydWUsIGZhbHNlLCB1bmRlZmluZWQsIDEwLCAgICAgICAgOTApO1xuXG4gICAgLy8gQ2hlY2sgY2FuIGJlIHJlcHJlc2VudGVkIGFzIGEgc2luZ2xlIHN0YXRpc3RpY1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDo5MCUpJywgICAgICAgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgICAgdHJ1ZSwgdHJ1ZSwgICd0bTkwJywgICAgdW5kZWZpbmVkLCA5MCk7XG5cbiAgICAvLyBDaGVjayBldmVyeSBjYXNlXG4gICAgY2hlY2tQYXJzaW5nUGFpcigndG0oMTAlOjkwJSknLCAgICAgICAgICdUTScsICd0cmltbWVkTWVhbicsIHRydWUsICBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAxMCwgICAgICAgICAgOTApO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDEwJTo5MCUpJywgICAgICAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCB0cnVlLCAgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgMTAsICAgICAgICAgIDkwKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSg6OTAlKScsICAgICAgICAgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgdHJ1ZSwgIHRydWUsICAndG05MCcsICAgICAgICAgIHVuZGVmaW5lZCwgICA5MCk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMTAlOiknLCAgICAgICAgICAgICdUTScsICd0cmltbWVkTWVhbicsIHRydWUsICBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAxMCwgICAgICAgICAgdW5kZWZpbmVkKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgxMDoxNTAwKScsICAgICAgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgZmFsc2UsIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDEwLCAgICAgICAgICAxNTAwKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgxMDopJywgICAgICAgICAgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgZmFsc2UsIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDEwLCAgICAgICAgICB1bmRlZmluZWQpO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDo1MDAwKScsICAgICAgICAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCBmYWxzZSwgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgdW5kZWZpbmVkLCAgIDUwMDApO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDAuMTIzNDU2Nzg5OiknLCAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCBmYWxzZSwgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgMC4xMjM0NTY3ODksIHVuZGVmaW5lZCk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMC4xMjM0NTY3ODk6KScsICAgICdUTScsICd0cmltbWVkTWVhbicsIGZhbHNlLCBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAwLjEyMzQ1Njc4OSwgdW5kZWZpbmVkKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSg6MC4xMjM0NTY3ODkpJywgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgZmFsc2UsIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIHVuZGVmaW5lZCwgICAwLjEyMzQ1Njc4OSk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMC4xMjM0NTY3ODklOiknLCAgICdUTScsICd0cmltbWVkTWVhbicsIHRydWUsICBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAwLjEyMzQ1Njc4OSwgdW5kZWZpbmVkKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSg6MC4xMjM0NTY3ODklKScsICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgdHJ1ZSwgIHRydWUsICAndG0wLjEyMzQ1Njc4OScsIHVuZGVmaW5lZCwgICAwLjEyMzQ1Njc4OSk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMC4xMjM6MC40NTQzKScsICAgICdUTScsICd0cmltbWVkTWVhbicsIGZhbHNlLCBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAwLjEyMywgICAgICAgMC40NTQzKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgwLjEyMyU6MC40NTQzJSknLCAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgdHJ1ZSwgIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDAuMTIzLCAgICAgICAwLjQ1NDMpO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDAuMTAwMCU6MC4xMDAwJSknLCAnVE0nLCAndHJpbW1lZE1lYW4nLCB0cnVlLCAgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgMC4xLCAgICAgICAgIDAuMSk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMC45OTk5OjEwMC45OTk5KScsICdUTScsICd0cmltbWVkTWVhbicsIGZhbHNlLCBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAwLjk5OTksICAgICAgMTAwLjk5OTkpO1xuXG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1tdWx0aS1zcGFjZXMgKi9cblxuICAgIC8vIENoZWNrIGludmFsaWQgc3RhdGlzdGljc1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygncDk5Ljk5Ljk5JykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygncDIwMCcpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ3BhOTknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCc5OScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ3RtMS4nKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCd0bTEyLicpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ3RtMTIzJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygndG0xMjMuMTIzNDU2Nzg5JykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygndG0uMTIzNDU2Nzg5JykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oMTA6OTAlKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDEwJToxNTAwKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDEwKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKCknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSgwLjopJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oOjAuKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJygpJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnKDopJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oOiknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSgnKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSgwLjEyMzQ1Njc4OSU6JSknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSgwLjEyMzowLjQ1NDMlKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDAuMTIzJTowLjQ1NDMpJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oMTAwMCU6KScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDoxMDAwJSknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSgxMDAwJToxMDAwJSknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gIH0pO1xufSk7XG4iXX0=