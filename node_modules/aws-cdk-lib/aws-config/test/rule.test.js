"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const targets = require("../../aws-events-targets");
const lambda = require("../../aws-lambda");
const cdk = require("../../core");
const config = require("../lib");
describe('rule', () => {
    test('create a managed rule', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        new config.ManagedRule(stack, 'Rule', {
            description: 'really cool rule',
            identifier: 'AWS_SUPER_COOL',
            inputParameters: {
                key: 'value',
            },
            maximumExecutionFrequency: config.MaximumExecutionFrequency.THREE_HOURS,
            configRuleName: 'cool rule',
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Config::ConfigRule', {
            Source: {
                Owner: 'AWS',
                SourceIdentifier: 'AWS_SUPER_COOL',
            },
            ConfigRuleName: 'cool rule',
            Description: 'really cool rule',
            InputParameters: {
                key: 'value',
            },
            MaximumExecutionFrequency: 'Three_Hours',
        });
    });
    test('create a custom rule', () => {
        // GIVEN
        const stack = new cdk.Stack();
        const fn = new lambda.Function(stack, 'Function', {
            code: lambda.AssetCode.fromInline('foo'),
            handler: 'index.handler',
            runtime: lambda.Runtime.NODEJS_14_X,
        });
        // WHEN
        new config.CustomRule(stack, 'Rule', {
            configurationChanges: true,
            description: 'really cool rule',
            inputParameters: {
                key: 'value',
            },
            lambdaFunction: fn,
            maximumExecutionFrequency: config.MaximumExecutionFrequency.SIX_HOURS,
            configRuleName: 'cool rule',
            periodic: true,
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResource('AWS::Config::ConfigRule', {
            Properties: {
                Source: {
                    Owner: 'CUSTOM_LAMBDA',
                    SourceDetails: [
                        {
                            EventSource: 'aws.config',
                            MessageType: 'ConfigurationItemChangeNotification',
                        },
                        {
                            EventSource: 'aws.config',
                            MessageType: 'OversizedConfigurationItemChangeNotification',
                        },
                        {
                            EventSource: 'aws.config',
                            MaximumExecutionFrequency: 'Six_Hours',
                            MessageType: 'ScheduledNotification',
                        },
                    ],
                    SourceIdentifier: {
                        'Fn::GetAtt': [
                            'Function76856677',
                            'Arn',
                        ],
                    },
                },
                ConfigRuleName: 'cool rule',
                Description: 'really cool rule',
                InputParameters: {
                    key: 'value',
                },
                MaximumExecutionFrequency: 'Six_Hours',
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Lambda::Permission', {
            Principal: 'config.amazonaws.com',
            SourceAccount: {
                Ref: 'AWS::AccountId',
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Role', {
            ManagedPolicyArns: [
                {
                    'Fn::Join': [
                        '',
                        [
                            'arn:',
                            {
                                Ref: 'AWS::Partition',
                            },
                            ':iam::aws:policy/service-role/AWSLambdaBasicExecutionRole',
                        ],
                    ],
                },
                {
                    'Fn::Join': [
                        '',
                        [
                            'arn:',
                            {
                                Ref: 'AWS::Partition',
                            },
                            ':iam::aws:policy/service-role/AWSConfigRulesExecutionRole',
                        ],
                    ],
                },
            ],
        });
    });
    test('scope to resource', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        new config.ManagedRule(stack, 'Rule', {
            identifier: 'AWS_SUPER_COOL',
            ruleScope: config.RuleScope.fromResource(config.ResourceType.EC2_INSTANCE, 'i-1234'),
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Config::ConfigRule', {
            Scope: {
                ComplianceResourceId: 'i-1234',
                ComplianceResourceTypes: [
                    'AWS::EC2::Instance',
                ],
            },
        });
    });
    test('scope to resources', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        new config.ManagedRule(stack, 'Rule', {
            identifier: 'AWS_SUPER_COOL',
            ruleScope: config.RuleScope.fromResources([config.ResourceType.S3_BUCKET, config.ResourceType.CLOUDFORMATION_STACK]),
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Config::ConfigRule', {
            Scope: {
                ComplianceResourceTypes: [
                    'AWS::S3::Bucket',
                    'AWS::CloudFormation::Stack',
                ],
            },
        });
    }),
        test('scope to tag', () => {
            // GIVEN
            const stack = new cdk.Stack();
            // WHEN
            new config.ManagedRule(stack, 'Rule', {
                identifier: 'RULE',
                ruleScope: config.RuleScope.fromTag('key', 'value'),
            });
            // THEN
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Config::ConfigRule', {
                Scope: {
                    TagKey: 'key',
                    TagValue: 'value',
                },
            });
        }),
        test('allows scoping a custom rule without configurationChanges enabled', () => {
            // GIVEN
            const stack = new cdk.Stack();
            const fn = new lambda.Function(stack, 'Function', {
                code: lambda.AssetCode.fromInline('foo'),
                handler: 'index.handler',
                runtime: lambda.Runtime.NODEJS_14_X,
            });
            // THEN
            expect(() => new config.CustomRule(stack, 'Rule', {
                lambdaFunction: fn,
                periodic: true,
                ruleScope: config.RuleScope.fromResources([config.ResourceType.of('resource')]),
            })).not.toThrow();
        }),
        test('throws when both configurationChanges and periodic are falsy', () => {
            // GIVEN
            const stack = new cdk.Stack();
            const fn = new lambda.Function(stack, 'Function', {
                code: lambda.AssetCode.fromInline('foo'),
                handler: 'index.handler',
                runtime: lambda.Runtime.NODEJS_14_X,
            });
            // THEN
            expect(() => new config.CustomRule(stack, 'Rule', {
                lambdaFunction: fn,
            })).toThrow(/`configurationChanges`.*`periodic`/);
        }),
        test('on compliance change event', () => {
            // GIVEN
            const stack = new cdk.Stack();
            const rule = new config.ManagedRule(stack, 'Rule', {
                identifier: 'RULE',
            });
            const fn = new lambda.Function(stack, 'Function', {
                code: lambda.Code.fromInline('dummy'),
                handler: 'index.handler',
                runtime: lambda.Runtime.NODEJS_14_X,
            });
            // WHEN
            rule.onComplianceChange('ComplianceChange', {
                target: new targets.LambdaFunction(fn),
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Events::Rule', {
                EventPattern: {
                    'source': [
                        'aws.config',
                    ],
                    'detail': {
                        configRuleName: [
                            {
                                Ref: 'Rule4C995B7F',
                            },
                        ],
                    },
                    'detail-type': [
                        'Config Rules Compliance Change',
                    ],
                },
            });
        });
    test('Add EKS Cluster check to ManagedRule', () => {
        // GIVEN
        const stack1 = new cdk.Stack();
        const stack2 = new cdk.Stack();
        // WHEN
        new config.ManagedRule(stack1, 'RuleEksClusterOldest', {
            identifier: config.ManagedRuleIdentifiers.EKS_CLUSTER_OLDEST_SUPPORTED_VERSION,
            ruleScope: config.RuleScope.fromResource(config.ResourceType.EKS_CLUSTER),
        });
        new config.ManagedRule(stack2, 'RuleEksClusterVersion', {
            identifier: config.ManagedRuleIdentifiers.EKS_CLUSTER_SUPPORTED_VERSION,
            ruleScope: config.RuleScope.fromResources([config.ResourceType.EKS_CLUSTER]),
        });
        // THEN
        assertions_1.Template.fromStack(stack1).hasResourceProperties('AWS::Config::ConfigRule', {
            Source: {
                SourceIdentifier: 'EKS_CLUSTER_OLDEST_SUPPORTED_VERSION',
            },
            Scope: {
                ComplianceResourceTypes: ['AWS::EKS::Cluster'],
            },
        });
        assertions_1.Template.fromStack(stack2).hasResourceProperties('AWS::Config::ConfigRule', {
            Source: {
                SourceIdentifier: 'EKS_CLUSTER_SUPPORTED_VERSION',
            },
            Scope: {
                ComplianceResourceTypes: ['AWS::EKS::Cluster'],
            },
        });
    });
    test('scope to resource', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        new config.ManagedRule(stack, 'Rule', {
            identifier: 'AWS_SUPER_COOL',
            ruleScope: config.RuleScope.fromResources([
                config.ResourceType.EC2_NETWORK_INTERFACE,
                config.ResourceType.EC2_TRANSIT_GATEWAY,
                config.ResourceType.EC2_TRANSIT_GATEWAY_ATTACHMENT,
                config.ResourceType.EC2_TRANSIT_GATEWAY_ROUTE_TABLE,
                config.ResourceType.EC2_REGISTERED_HA_INSTANCE,
                config.ResourceType.EC2_LAUNCH_TEMPLATE,
                config.ResourceType.ECR_REPOSITORY,
                config.ResourceType.ECR_PUBLIC_REPOSITORY,
                config.ResourceType.ECS_CLUSTER,
                config.ResourceType.ECS_TASK_DEFINITION,
                config.ResourceType.ECS_SERVICE,
                config.ResourceType.EFS_FILE_SYSTEM,
                config.ResourceType.EFS_ACCESS_POINT,
                config.ResourceType.EMR_SECURITY_CONFIGURATION,
                config.ResourceType.GUARDDUTY_DETECTOR,
                config.ResourceType.OPENSEARCH_DOMAIN,
                config.ResourceType.KINESIS_STREAM,
                config.ResourceType.KINESIS_STREAM_CONSUMER,
                config.ResourceType.MSK_CLUSTER,
                config.ResourceType.ROUTE53_RESOLVER_RESOLVER_ENDPOINT,
                config.ResourceType.ROUTE53_RESOLVER_RESOLVER_RULE,
                config.ResourceType.ROUTE53_RESOLVER_RESOLVER_RULE_ASSOCIATION,
                config.ResourceType.SAGEMAKER_CODE_REPOSITORY,
                config.ResourceType.SAGEMAKER_MODEL,
                config.ResourceType.SAGEMAKER_NOTEBOOK_INSTANCE,
                config.ResourceType.WORKSPACES_CONNECTION_ALIAS,
                config.ResourceType.WORKSPACES_WORKSPACE,
                config.ResourceType.BACKUP_BACKUP_PLAN,
                config.ResourceType.BACKUP_BACKUP_SELECTION,
                config.ResourceType.BACKUP_BACKUP_VAULT,
                config.ResourceType.BACKUP_RECOVERY_POINT,
                config.ResourceType.BATCH_JOB_QUEUE,
                config.ResourceType.BATCH_COMPUTE_ENVIRONMENT,
                config.ResourceType.CODEDEPLOY_APPLICATION,
                config.ResourceType.CODEDEPLOY_DEPLOYMENT_CONFIG,
                config.ResourceType.CODEDEPLOY_DEPLOYMENT_GROUP,
                config.ResourceType.CONFIG_RESOURCE_COMPLIANCE,
                config.ResourceType.CONFIG_CONFORMANCE_PACK_COMPLIANCE,
                config.ResourceType.DMS_EVENT_SUBSCRIPTION,
                config.ResourceType.DMS_REPLICATION_SUBNET_GROUP,
                config.ResourceType.GLOBALACCELERATOR_LISTENER,
                config.ResourceType.GLOBALACCELERATOR_ENDPOINT_GROUP,
                config.ResourceType.GLOBALACCELERATOR_ACCELERATOR,
                config.ResourceType.IAM_ACCESSANALYZER_ANALYZER,
                config.ResourceType.STEPFUNCTIONS_ACTIVITY,
                config.ResourceType.STEPFUNCTIONS_STATE_MACHINE,
                config.ResourceType.WAFV2_IP_SET,
                config.ResourceType.WAFV2_REGEX_PATTERN_SET,
                config.ResourceType.ELBV2_LISTENER,
            ]),
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Config::ConfigRule', {
            Scope: {
                ComplianceResourceTypes: [
                    'AWS::EC2::NetworkInterface',
                    'AWS::EC2::TransitGateway',
                    'AWS::EC2::TransitGatewayAttachment',
                    'AWS::EC2::TransitGatewayRouteTable',
                    'AWS::EC2::RegisteredHAInstance',
                    'AWS::EC2::LaunchTemplate',
                    'AWS::ECR::Repository',
                    'AWS::ECR::PublicRepository',
                    'AWS::ECS::Cluster',
                    'AWS::ECS::TaskDefinition',
                    'AWS::ECS::Service',
                    'AWS::EFS::FileSystem',
                    'AWS::EFS::AccessPoint',
                    'AWS::EMR::SecurityConfiguration',
                    'AWS::GuardDuty::Detector',
                    'AWS::OpenSearch::Domain',
                    'AWS::Kinesis::Stream',
                    'AWS::Kinesis::StreamConsumer',
                    'AWS::MSK::Cluster',
                    'AWS::Route53Resolver::ResolverEndpoint',
                    'AWS::Route53Resolver::ResolverRule',
                    'AWS::Route53Resolver::ResolverRuleAssociation',
                    'AWS::SageMaker::CodeRepository',
                    'AWS::SageMaker::Model',
                    'AWS::SageMaker::NotebookInstance',
                    'AWS::WorkSpaces::ConnectionAlias',
                    'AWS::WorkSpaces::Workspace',
                    'AWS::Backup::BackupPlan',
                    'AWS::Backup::BackupSelection',
                    'AWS::Backup::BackupVault',
                    'AWS::Backup::RecoveryPoint',
                    'AWS::Batch::JobQueue',
                    'AWS::Batch::ComputeEnvironment',
                    'AWS::CodeDeploy::Application',
                    'AWS::CodeDeploy::DeploymentConfig',
                    'AWS::CodeDeploy::DeploymentGroup',
                    'AWS::Config::ResourceCompliance',
                    'AWS::Config::ConformancePackCompliance',
                    'AWS::DMS::EventSubscription',
                    'AWS::DMS::ReplicationSubnetGroup',
                    'AWS::GlobalAccelerator::Listener',
                    'AWS::GlobalAccelerator::EndpointGroup',
                    'AWS::GlobalAccelerator::Accelerator',
                    'AWS::AccessAnalyzer::Analyzer',
                    'AWS::StepFunctions::Activity',
                    'AWS::StepFunctions::StateMachine',
                    'AWS::WAFv2::IPSet',
                    'AWS::WAFv2::RegexPatternSet',
                    'AWS::ElasticLoadBalancingV2::Listener',
                ],
            },
        });
    });
    test('create a custom policy', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        new config.CustomPolicy(stack, 'Rule', {
            policyText: `
      let status = ['ACTIVE']
  
      rule tableisactive when
          resourceType == "AWS::DynamoDB::Table" {
          configuration.tableStatus == %status
      }
  
      rule checkcompliance when
          resourceType == "AWS::DynamoDB::Table"
          tableisactive {
              let pitr = supplementaryConfiguration.ContinuousBackupsDescription.pointInTimeRecoveryDescription.pointInTimeRecoveryStatus
              %pitr == "ENABLED"
      }`,
            description: 'really cool rule',
            configRuleName: 'cool rule',
        });
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Config::ConfigRule', {
            Source: {
                Owner: 'CUSTOM_POLICY',
                SourceDetails: [
                    {
                        EventSource: 'aws.config',
                        MessageType: 'ConfigurationItemChangeNotification',
                    },
                    {
                        EventSource: 'aws.config',
                        MessageType: 'OversizedConfigurationItemChangeNotification',
                    },
                ],
            },
            ConfigRuleName: 'cool rule',
            Description: 'really cool rule',
        });
    });
    test('create two custom rules and one function', () => {
        // GIVEN
        const stack = new cdk.Stack();
        const fn = new lambda.Function(stack, 'Function', {
            code: lambda.AssetCode.fromInline('foo'),
            handler: 'index.handler',
            runtime: lambda.Runtime.NODEJS_14_X,
        });
        // WHEN
        new config.CustomRule(stack, 'Rule1', {
            configurationChanges: true,
            description: 'really cool rule',
            lambdaFunction: fn,
            maximumExecutionFrequency: config.MaximumExecutionFrequency.SIX_HOURS,
            configRuleName: 'cool rule 1',
            periodic: true,
        });
        new config.CustomRule(stack, 'Rule2', {
            configurationChanges: true,
            description: 'really cool rule',
            lambdaFunction: fn,
            configRuleName: 'cool rule 2',
        });
        // THEN
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::Config::ConfigRule', 2);
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::Lambda::Permission', 1);
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Lambda::Permission', {
            Action: 'lambda:InvokeFunction',
            FunctionName: {
                'Fn::GetAtt': [
                    'Function76856677',
                    'Arn',
                ],
            },
            Principal: 'config.amazonaws.com',
            SourceAccount: {
                Ref: 'AWS::AccountId',
            },
        });
    });
    test('create a 0 charactor policy', () => {
        // GIVEN
        const stack = new cdk.Stack();
        // WHEN
        // THEN
        expect(() => new config.CustomPolicy(stack, 'Rule', {
            policyText: '',
        })).toThrow('Policy Text cannot be empty.');
    });
    test('create over 10000 charactor policy', () => {
        // GIVEN
        const stack = new cdk.Stack();
        const stringLen10001 = '0123456789'.repeat(1000) + 'a';
        // WHEN
        // THEN
        expect(() => new config.CustomPolicy(stack, 'Rule', {
            policyText: stringLen10001,
        })).toThrow('Policy Text is limited to 10,000 characters or less.');
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVsZS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicnVsZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQTRDO0FBQzVDLG9EQUFvRDtBQUNwRCwyQ0FBMkM7QUFDM0Msa0NBQWtDO0FBQ2xDLGlDQUFpQztBQUVqQyxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtJQUNwQixJQUFJLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFO1FBQ2pDLFFBQVE7UUFDUixNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUU5QixPQUFPO1FBQ1AsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7WUFDcEMsV0FBVyxFQUFFLGtCQUFrQjtZQUMvQixVQUFVLEVBQUUsZ0JBQWdCO1lBQzVCLGVBQWUsRUFBRTtnQkFDZixHQUFHLEVBQUUsT0FBTzthQUNiO1lBQ0QseUJBQXlCLEVBQUUsTUFBTSxDQUFDLHlCQUF5QixDQUFDLFdBQVc7WUFDdkUsY0FBYyxFQUFFLFdBQVc7U0FDNUIsQ0FBQyxDQUFDO1FBRUgsT0FBTztRQUNQLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixDQUFDLHlCQUF5QixFQUFFO1lBQ3pFLE1BQU0sRUFBRTtnQkFDTixLQUFLLEVBQUUsS0FBSztnQkFDWixnQkFBZ0IsRUFBRSxnQkFBZ0I7YUFDbkM7WUFDRCxjQUFjLEVBQUUsV0FBVztZQUMzQixXQUFXLEVBQUUsa0JBQWtCO1lBQy9CLGVBQWUsRUFBRTtnQkFDZixHQUFHLEVBQUUsT0FBTzthQUNiO1lBQ0QseUJBQXlCLEVBQUUsYUFBYTtTQUN6QyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7UUFDaEMsUUFBUTtRQUNSLE1BQU0sS0FBSyxHQUFHLElBQUksR0FBRyxDQUFD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Q0FBQztJQUN0RSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi8uLi9hc3NlcnRpb25zJztcbmltcG9ydCAqIGFzIHRhcmdldHMgZnJvbSAnLi4vLi4vYXdzLWV2ZW50cy10YXJnZXRzJztcbmltcG9ydCAqIGFzIGxhbWJkYSBmcm9tICcuLi8uLi9hd3MtbGFtYmRhJztcbmltcG9ydCAqIGFzIGNkayBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tICcuLi9saWInO1xuXG5kZXNjcmliZSgncnVsZScsICgpID0+IHtcbiAgdGVzdCgnY3JlYXRlIGEgbWFuYWdlZCBydWxlJywgKCkgPT4ge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAvLyBXSEVOXG4gICAgbmV3IGNvbmZpZy5NYW5hZ2VkUnVsZShzdGFjaywgJ1J1bGUnLCB7XG4gICAgICBkZXNjcmlwdGlvbjogJ3JlYWxseSBjb29sIHJ1bGUnLFxuICAgICAgaWRlbnRpZmllcjogJ0FXU19TVVBFUl9DT09MJyxcbiAgICAgIGlucHV0UGFyYW1ldGVyczoge1xuICAgICAgICBrZXk6ICd2YWx1ZScsXG4gICAgICB9LFxuICAgICAgbWF4aW11bUV4ZWN1dGlvbkZyZXF1ZW5jeTogY29uZmlnLk1heGltdW1FeGVjdXRpb25GcmVxdWVuY3kuVEhSRUVfSE9VUlMsXG4gICAgICBjb25maWdSdWxlTmFtZTogJ2Nvb2wgcnVsZScsXG4gICAgfSk7XG5cbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29uZmlnOjpDb25maWdSdWxlJywge1xuICAgICAgU291cmNlOiB7XG4gICAgICAgIE93bmVyOiAnQVdTJyxcbiAgICAgICAgU291cmNlSWRlbnRpZmllcjogJ0FXU19TVVBFUl9DT09MJyxcbiAgICAgIH0sXG4gICAgICBDb25maWdSdWxlTmFtZTogJ2Nvb2wgcnVsZScsXG4gICAgICBEZXNjcmlwdGlvbjogJ3JlYWxseSBjb29sIHJ1bGUnLFxuICAgICAgSW5wdXRQYXJhbWV0ZXJzOiB7XG4gICAgICAgIGtleTogJ3ZhbHVlJyxcbiAgICAgIH0sXG4gICAgICBNYXhpbXVtRXhlY3V0aW9uRnJlcXVlbmN5OiAnVGhyZWVfSG91cnMnLFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdjcmVhdGUgYSBjdXN0b20gcnVsZScsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuICAgIGNvbnN0IGZuID0gbmV3IGxhbWJkYS5GdW5jdGlvbihzdGFjaywgJ0Z1bmN0aW9uJywge1xuICAgICAgY29kZTogbGFtYmRhLkFzc2V0Q29kZS5mcm9tSW5saW5lKCdmb28nKSxcbiAgICAgIGhhbmRsZXI6ICdpbmRleC5oYW5kbGVyJyxcbiAgICAgIHJ1bnRpbWU6IGxhbWJkYS5SdW50aW1lLk5PREVKU18xNF9YLFxuICAgIH0pO1xuXG4gICAgLy8gV0hFTlxuICAgIG5ldyBjb25maWcuQ3VzdG9tUnVsZShzdGFjaywgJ1J1bGUnLCB7XG4gICAgICBjb25maWd1cmF0aW9uQ2hhbmdlczogdHJ1ZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAncmVhbGx5IGNvb2wgcnVsZScsXG4gICAgICBpbnB1dFBhcmFtZXRlcnM6IHtcbiAgICAgICAga2V5OiAndmFsdWUnLFxuICAgICAgfSxcbiAgICAgIGxhbWJkYUZ1bmN0aW9uOiBmbixcbiAgICAgIG1heGltdW1FeGVjdXRpb25GcmVxdWVuY3k6IGNvbmZpZy5NYXhpbXVtRXhlY3V0aW9uRnJlcXVlbmN5LlNJWF9IT1VSUyxcbiAgICAgIGNvbmZpZ1J1bGVOYW1lOiAnY29vbCBydWxlJyxcbiAgICAgIHBlcmlvZGljOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2UoJ0FXUzo6Q29uZmlnOjpDb25maWdSdWxlJywge1xuICAgICAgUHJvcGVydGllczoge1xuICAgICAgICBTb3VyY2U6IHtcbiAgICAgICAgICBPd25lcjogJ0NVU1RPTV9MQU1CREEnLFxuICAgICAgICAgIFNvdXJjZURldGFpbHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgRXZlbnRTb3VyY2U6ICdhd3MuY29uZmlnJyxcbiAgICAgICAgICAgICAgTWVzc2FnZVR5cGU6ICdDb25maWd1cmF0aW9uSXRlbUNoYW5nZU5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBFdmVudFNvdXJjZTogJ2F3cy5jb25maWcnLFxuICAgICAgICAgICAgICBNZXNzYWdlVHlwZTogJ092ZXJzaXplZENvbmZpZ3VyYXRpb25JdGVtQ2hhbmdlTm90aWZpY2F0aW9uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIEV2ZW50U291cmNlOiAnYXdzLmNvbmZpZycsXG4gICAgICAgICAgICAgIE1heGltdW1FeGVjdXRpb25GcmVxdWVuY3k6ICdTaXhfSG91cnMnLFxuICAgICAgICAgICAgICBNZXNzYWdlVHlwZTogJ1NjaGVkdWxlZE5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgU291cmNlSWRlbnRpZmllcjoge1xuICAgICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAgICdGdW5jdGlvbjc2ODU2Njc3JyxcbiAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIENvbmZpZ1J1bGVOYW1lOiAnY29vbCBydWxlJyxcbiAgICAgICAgRGVzY3JpcHRpb246ICdyZWFsbHkgY29vbCBydWxlJyxcbiAgICAgICAgSW5wdXRQYXJhbWV0ZXJzOiB7XG4gICAgICAgICAga2V5OiAndmFsdWUnLFxuICAgICAgICB9LFxuICAgICAgICBNYXhpbXVtRXhlY3V0aW9uRnJlcXVlbmN5OiAnU2l4X0hvdXJzJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpMYW1iZGE6OlBlcm1pc3Npb24nLCB7XG4gICAgICBQcmluY2lwYWw6ICdjb25maWcuYW1hem9uYXdzLmNvbScsXG4gICAgICBTb3VyY2VBY2NvdW50OiB7XG4gICAgICAgIFJlZjogJ0FXUzo6QWNjb3VudElkJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlJvbGUnLCB7XG4gICAgICBNYW5hZ2VkUG9saWN5QXJuczogW1xuICAgICAgICB7XG4gICAgICAgICAgJ0ZuOjpKb2luJzogW1xuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICdhcm46JyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFJlZjogJ0FXUzo6UGFydGl0aW9uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgJzppYW06OmF3czpwb2xpY3kvc2VydmljZS1yb2xlL0FXU0xhbWJkYUJhc2ljRXhlY3V0aW9uUm9sZScsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnRm46OkpvaW4nOiBbXG4gICAgICAgICAgICAnJyxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgJ2FybjonLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgUmVmOiAnQVdTOjpQYXJ0aXRpb24nLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAnOmlhbTo6YXdzOnBvbGljeS9zZXJ2aWNlLXJvbGUvQVdTQ29uZmlnUnVsZXNFeGVjdXRpb25Sb2xlJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Njb3BlIHRvIHJlc291cmNlJywgKCkgPT4ge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAvLyBXSEVOXG4gICAgbmV3IGNvbmZpZy5NYW5hZ2VkUnVsZShzdGFjaywgJ1J1bGUnLCB7XG4gICAgICBpZGVudGlmaWVyOiAnQVdTX1NVUEVSX0NPT0wnLFxuICAgICAgcnVsZVNjb3BlOiBjb25maWcuUnVsZVNjb3BlLmZyb21SZXNvdXJjZShjb25maWcuUmVzb3VyY2VUeXBlLkVDMl9JTlNUQU5DRSwgJ2ktMTIzNCcpLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvbmZpZzo6Q29uZmlnUnVsZScsIHtcbiAgICAgIFNjb3BlOiB7XG4gICAgICAgIENvbXBsaWFuY2VSZXNvdXJjZUlkOiAnaS0xMjM0JyxcbiAgICAgICAgQ29tcGxpYW5jZVJlc291cmNlVHlwZXM6IFtcbiAgICAgICAgICAnQVdTOjpFQzI6Okluc3RhbmNlJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Njb3BlIHRvIHJlc291cmNlcycsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgLy8gV0hFTlxuICAgIG5ldyBjb25maWcuTWFuYWdlZFJ1bGUoc3RhY2ssICdSdWxlJywge1xuICAgICAgaWRlbnRpZmllcjogJ0FXU19TVVBFUl9DT09MJyxcbiAgICAgIHJ1bGVTY29wZTogY29uZmlnLlJ1bGVTY29wZS5mcm9tUmVzb3VyY2VzKFtjb25maWcuUmVzb3VyY2VUeXBlLlMzX0JVQ0tFVCwgY29uZmlnLlJlc291cmNlVHlwZS5DTE9VREZPUk1BVElPTl9TVEFDS10pLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvbmZpZzo6Q29uZmlnUnVsZScsIHtcbiAgICAgIFNjb3BlOiB7XG4gICAgICAgIENvbXBsaWFuY2VSZXNvdXJjZVR5cGVzOiBbXG4gICAgICAgICAgJ0FXUzo6UzM6OkJ1Y2tldCcsXG4gICAgICAgICAgJ0FXUzo6Q2xvdWRGb3JtYXRpb246OlN0YWNrJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pLFxuXG4gIHRlc3QoJ3Njb3BlIHRvIHRhZycsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgLy8gV0hFTlxuICAgIG5ldyBjb25maWcuTWFuYWdlZFJ1bGUoc3RhY2ssICdSdWxlJywge1xuICAgICAgaWRlbnRpZmllcjogJ1JVTEUnLFxuICAgICAgcnVsZVNjb3BlOiBjb25maWcuUnVsZVNjb3BlLmZyb21UYWcoJ2tleScsICd2YWx1ZScpLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvbmZpZzo6Q29uZmlnUnVsZScsIHtcbiAgICAgIFNjb3BlOiB7XG4gICAgICAgIFRhZ0tleTogJ2tleScsXG4gICAgICAgIFRhZ1ZhbHVlOiAndmFsdWUnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSksXG5cbiAgdGVzdCgnYWxsb3dzIHNjb3BpbmcgYSBjdXN0b20gcnVsZSB3aXRob3V0IGNvbmZpZ3VyYXRpb25DaGFuZ2VzIGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICBjb25zdCBmbiA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oc3RhY2ssICdGdW5jdGlvbicsIHtcbiAgICAgIGNvZGU6IGxhbWJkYS5Bc3NldENvZGUuZnJvbUlubGluZSgnZm9vJyksXG4gICAgICBoYW5kbGVyOiAnaW5kZXguaGFuZGxlcicsXG4gICAgICBydW50aW1lOiBsYW1iZGEuUnVudGltZS5OT0RFSlNfMTRfWCxcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBleHBlY3QoKCkgPT4gbmV3IGNvbmZpZy5DdXN0b21SdWxlKHN0YWNrLCAnUnVsZScsIHtcbiAgICAgIGxhbWJkYUZ1bmN0aW9uOiBmbixcbiAgICAgIHBlcmlvZGljOiB0cnVlLFxuICAgICAgcnVsZVNjb3BlOiBjb25maWcuUnVsZVNjb3BlLmZyb21SZXNvdXJjZXMoW2NvbmZpZy5SZXNvdXJjZVR5cGUub2YoJ3Jlc291cmNlJyldKSxcbiAgICB9KSkubm90LnRvVGhyb3coKTtcbiAgfSksXG5cbiAgdGVzdCgndGhyb3dzIHdoZW4gYm90aCBjb25maWd1cmF0aW9uQ2hhbmdlcyBhbmQgcGVyaW9kaWMgYXJlIGZhbHN5JywgKCkgPT4ge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG4gICAgY29uc3QgZm4gPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHN0YWNrLCAnRnVuY3Rpb24nLCB7XG4gICAgICBjb2RlOiBsYW1iZGEuQXNzZXRDb2RlLmZyb21JbmxpbmUoJ2ZvbycpLFxuICAgICAgaGFuZGxlcjogJ2luZGV4LmhhbmRsZXInLFxuICAgICAgcnVudGltZTogbGFtYmRhLlJ1bnRpbWUuTk9ERUpTXzE0X1gsXG4gICAgfSk7XG5cbiAgICAvLyBUSEVOXG4gICAgZXhwZWN0KCgpID0+IG5ldyBjb25maWcuQ3VzdG9tUnVsZShzdGFjaywgJ1J1bGUnLCB7XG4gICAgICBsYW1iZGFGdW5jdGlvbjogZm4sXG4gICAgfSkpLnRvVGhyb3coL2Bjb25maWd1cmF0aW9uQ2hhbmdlc2AuKmBwZXJpb2RpY2AvKTtcbiAgfSksXG5cbiAgdGVzdCgnb24gY29tcGxpYW5jZSBjaGFuZ2UgZXZlbnQnLCAoKSA9PiB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICBjb25zdCBydWxlID0gbmV3IGNvbmZpZy5NYW5hZ2VkUnVsZShzdGFjaywgJ1J1bGUnLCB7XG4gICAgICBpZGVudGlmaWVyOiAnUlVMRScsXG4gICAgfSk7XG5cbiAgICBjb25zdCBmbiA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oc3RhY2ssICdGdW5jdGlvbicsIHtcbiAgICAgIGNvZGU6IGxhbWJkYS5Db2RlLmZyb21JbmxpbmUoJ2R1bW15JyksXG4gICAgICBoYW5kbGVyOiAnaW5kZXguaGFuZGxlcicsXG4gICAgICBydW50aW1lOiBsYW1iZGEuUnVudGltZS5OT0RFSlNfMTRfWCxcbiAgICB9KTtcblxuICAgIC8vIFdIRU5cbiAgICBydWxlLm9uQ29tcGxpYW5jZUNoYW5nZSgnQ29tcGxpYW5jZUNoYW5nZScsIHtcbiAgICAgIHRhcmdldDogbmV3IHRhcmdldHMuTGFtYmRhRnVuY3Rpb24oZm4pLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RXZlbnRzOjpSdWxlJywge1xuICAgICAgRXZlbnRQYXR0ZXJuOiB7XG4gICAgICAgICdzb3VyY2UnOiBbXG4gICAgICAgICAgJ2F3cy5jb25maWcnLFxuICAgICAgICBdLFxuICAgICAgICAnZGV0YWlsJzoge1xuICAgICAgICAgIGNvbmZpZ1J1bGVOYW1lOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFJlZjogJ1J1bGU0Qzk5NUI3RicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgICdkZXRhaWwtdHlwZSc6IFtcbiAgICAgICAgICAnQ29uZmlnIFJ1bGVzIENvbXBsaWFuY2UgQ2hhbmdlJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ0FkZCBFS1MgQ2x1c3RlciBjaGVjayB0byBNYW5hZ2VkUnVsZScsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrMSA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICBjb25zdCBzdGFjazIgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAvLyBXSEVOXG4gICAgbmV3IGNvbmZpZy5NYW5hZ2VkUnVsZShzdGFjazEsICdSdWxlRWtzQ2x1c3Rlck9sZGVzdCcsIHtcbiAgICAgIGlkZW50aWZpZXI6IGNvbmZpZy5NYW5hZ2VkUnVsZUlkZW50aWZpZXJzLkVLU19DTFVTVEVSX09MREVTVF9TVVBQT1JURURfVkVSU0lPTixcbiAgICAgIHJ1bGVTY29wZTogY29uZmlnLlJ1bGVTY29wZS5mcm9tUmVzb3VyY2UoY29uZmlnLlJlc291cmNlVHlwZS5FS1NfQ0xVU1RFUiksXG4gICAgfSk7XG4gICAgbmV3IGNvbmZpZy5NYW5hZ2VkUnVsZShzdGFjazIsICdSdWxlRWtzQ2x1c3RlclZlcnNpb24nLCB7XG4gICAgICBpZGVudGlmaWVyOiBjb25maWcuTWFuYWdlZFJ1bGVJZGVudGlmaWVycy5FS1NfQ0xVU1RFUl9TVVBQT1JURURfVkVSU0lPTixcbiAgICAgIHJ1bGVTY29wZTogY29uZmlnLlJ1bGVTY29wZS5mcm9tUmVzb3VyY2VzKFtjb25maWcuUmVzb3VyY2VUeXBlLkVLU19DTFVTVEVSXSksXG4gICAgfSk7XG5cbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrMSkuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvbmZpZzo6Q29uZmlnUnVsZScsIHtcbiAgICAgIFNvdXJjZToge1xuICAgICAgICBTb3VyY2VJZGVudGlmaWVyOiAnRUtTX0NMVVNURVJfT0xERVNUX1NVUFBPUlRFRF9WRVJTSU9OJyxcbiAgICAgIH0sXG4gICAgICBTY29wZToge1xuICAgICAgICBDb21wbGlhbmNlUmVzb3VyY2VUeXBlczogWydBV1M6OkVLUzo6Q2x1c3RlciddLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2syKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29uZmlnOjpDb25maWdSdWxlJywge1xuICAgICAgU291cmNlOiB7XG4gICAgICAgIFNvdXJjZUlkZW50aWZpZXI6ICdFS1NfQ0xVU1RFUl9TVVBQT1JURURfVkVSU0lPTicsXG4gICAgICB9LFxuICAgICAgU2NvcGU6IHtcbiAgICAgICAgQ29tcGxpYW5jZVJlc291cmNlVHlwZXM6IFsnQVdTOjpFS1M6OkNsdXN0ZXInXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Njb3BlIHRvIHJlc291cmNlJywgKCkgPT4ge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAvLyBXSEVOXG4gICAgbmV3IGNvbmZpZy5NYW5hZ2VkUnVsZShzdGFjaywgJ1J1bGUnLCB7XG4gICAgICBpZGVudGlmaWVyOiAnQVdTX1NVUEVSX0NPT0wnLFxuICAgICAgcnVsZVNjb3BlOiBjb25maWcuUnVsZVNjb3BlLmZyb21SZXNvdXJjZXMoW1xuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkVDMl9ORVRXT1JLX0lOVEVSRkFDRSxcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5FQzJfVFJBTlNJVF9HQVRFV0FZLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkVDMl9UUkFOU0lUX0dBVEVXQVlfQVRUQUNITUVOVCxcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5FQzJfVFJBTlNJVF9HQVRFV0FZX1JPVVRFX1RBQkxFLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkVDMl9SRUdJU1RFUkVEX0hBX0lOU1RBTkNFLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkVDMl9MQVVOQ0hfVEVNUExBVEUsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuRUNSX1JFUE9TSVRPUlksXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuRUNSX1BVQkxJQ19SRVBPU0lUT1JZLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkVDU19DTFVTVEVSLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkVDU19UQVNLX0RFRklOSVRJT04sXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuRUNTX1NFUlZJQ0UsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuRUZTX0ZJTEVfU1lTVEVNLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkVGU19BQ0NFU1NfUE9JTlQsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuRU1SX1NFQ1VSSVRZX0NPTkZJR1VSQVRJT04sXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuR1VBUkREVVRZX0RFVEVDVE9SLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLk9QRU5TRUFSQ0hfRE9NQUlOLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLktJTkVTSVNfU1RSRUFNLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLktJTkVTSVNfU1RSRUFNX0NPTlNVTUVSLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLk1TS19DTFVTVEVSLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLlJPVVRFNTNfUkVTT0xWRVJfUkVTT0xWRVJfRU5EUE9JTlQsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuUk9VVEU1M19SRVNPTFZFUl9SRVNPTFZFUl9SVUxFLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLlJPVVRFNTNfUkVTT0xWRVJfUkVTT0xWRVJfUlVMRV9BU1NPQ0lBVElPTixcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5TQUdFTUFLRVJfQ09ERV9SRVBPU0lUT1JZLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLlNBR0VNQUtFUl9NT0RFTCxcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5TQUdFTUFLRVJfTk9URUJPT0tfSU5TVEFOQ0UsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuV09SS1NQQUNFU19DT05ORUNUSU9OX0FMSUFTLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLldPUktTUEFDRVNfV09SS1NQQUNFLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkJBQ0tVUF9CQUNLVVBfUExBTixcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5CQUNLVVBfQkFDS1VQX1NFTEVDVElPTixcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5CQUNLVVBfQkFDS1VQX1ZBVUxULFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkJBQ0tVUF9SRUNPVkVSWV9QT0lOVCxcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5CQVRDSF9KT0JfUVVFVUUsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuQkFUQ0hfQ09NUFVURV9FTlZJUk9OTUVOVCxcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5DT0RFREVQTE9ZX0FQUExJQ0FUSU9OLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkNPREVERVBMT1lfREVQTE9ZTUVOVF9DT05GSUcsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuQ09ERURFUExPWV9ERVBMT1lNRU5UX0dST1VQLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkNPTkZJR19SRVNPVVJDRV9DT01QTElBTkNFLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkNPTkZJR19DT05GT1JNQU5DRV9QQUNLX0NPTVBMSUFOQ0UsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuRE1TX0VWRU5UX1NVQlNDUklQVElPTixcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5ETVNfUkVQTElDQVRJT05fU1VCTkVUX0dST1VQLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkdMT0JBTEFDQ0VMRVJBVE9SX0xJU1RFTkVSLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkdMT0JBTEFDQ0VMRVJBVE9SX0VORFBPSU5UX0dST1VQLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLkdMT0JBTEFDQ0VMRVJBVE9SX0FDQ0VMRVJBVE9SLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLklBTV9BQ0NFU1NBTkFMWVpFUl9BTkFMWVpFUixcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5TVEVQRlVOQ1RJT05TX0FDVElWSVRZLFxuICAgICAgICBjb25maWcuUmVzb3VyY2VUeXBlLlNURVBGVU5DVElPTlNfU1RBVEVfTUFDSElORSxcbiAgICAgICAgY29uZmlnLlJlc291cmNlVHlwZS5XQUZWMl9JUF9TRVQsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuV0FGVjJfUkVHRVhfUEFUVEVSTl9TRVQsXG4gICAgICAgIGNvbmZpZy5SZXNvdXJjZVR5cGUuRUxCVjJfTElTVEVORVIsXG4gICAgICBdKSxcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDb25maWc6OkNvbmZpZ1J1bGUnLCB7XG4gICAgICBTY29wZToge1xuICAgICAgICBDb21wbGlhbmNlUmVzb3VyY2VUeXBlczogW1xuICAgICAgICAgICdBV1M6OkVDMjo6TmV0d29ya0ludGVyZmFjZScsXG4gICAgICAgICAgJ0FXUzo6RUMyOjpUcmFuc2l0R2F0ZXdheScsXG4gICAgICAgICAgJ0FXUzo6RUMyOjpUcmFuc2l0R2F0ZXdheUF0dGFjaG1lbnQnLFxuICAgICAgICAgICdBV1M6OkVDMjo6VHJhbnNpdEdhdGV3YXlSb3V0ZVRhYmxlJyxcbiAgICAgICAgICAnQVdTOjpFQzI6OlJlZ2lzdGVyZWRIQUluc3RhbmNlJyxcbiAgICAgICAgICAnQVdTOjpFQzI6OkxhdW5jaFRlbXBsYXRlJyxcbiAgICAgICAgICAnQVdTOjpFQ1I6OlJlcG9zaXRvcnknLFxuICAgICAgICAgICdBV1M6OkVDUjo6UHVibGljUmVwb3NpdG9yeScsXG4gICAgICAgICAgJ0FXUzo6RUNTOjpDbHVzdGVyJyxcbiAgICAgICAgICAnQVdTOjpFQ1M6OlRhc2tEZWZpbml0aW9uJyxcbiAgICAgICAgICAnQVdTOjpFQ1M6OlNlcnZpY2UnLFxuICAgICAgICAgICdBV1M6OkVGUzo6RmlsZVN5c3RlbScsXG4gICAgICAgICAgJ0FXUzo6RUZTOjpBY2Nlc3NQb2ludCcsXG4gICAgICAgICAgJ0FXUzo6RU1SOjpTZWN1cml0eUNvbmZpZ3VyYXRpb24nLFxuICAgICAgICAgICdBV1M6Okd1YXJkRHV0eTo6RGV0ZWN0b3InLFxuICAgICAgICAgICdBV1M6Ok9wZW5TZWFyY2g6OkRvbWFpbicsXG4gICAgICAgICAgJ0FXUzo6S2luZXNpczo6U3RyZWFtJyxcbiAgICAgICAgICAnQVdTOjpLaW5lc2lzOjpTdHJlYW1Db25zdW1lcicsXG4gICAgICAgICAgJ0FXUzo6TVNLOjpDbHVzdGVyJyxcbiAgICAgICAgICAnQVdTOjpSb3V0ZTUzUmVzb2x2ZXI6OlJlc29sdmVyRW5kcG9pbnQnLFxuICAgICAgICAgICdBV1M6OlJvdXRlNTNSZXNvbHZlcjo6UmVzb2x2ZXJSdWxlJyxcbiAgICAgICAgICAnQVdTOjpSb3V0ZTUzUmVzb2x2ZXI6OlJlc29sdmVyUnVsZUFzc29jaWF0aW9uJyxcbiAgICAgICAgICAnQVdTOjpTYWdlTWFrZXI6OkNvZGVSZXBvc2l0b3J5JyxcbiAgICAgICAgICAnQVdTOjpTYWdlTWFrZXI6Ok1vZGVsJyxcbiAgICAgICAgICAnQVdTOjpTYWdlTWFrZXI6Ok5vdGVib29rSW5zdGFuY2UnLFxuICAgICAgICAgICdBV1M6OldvcmtTcGFjZXM6OkNvbm5lY3Rpb25BbGlhcycsXG4gICAgICAgICAgJ0FXUzo6V29ya1NwYWNlczo6V29ya3NwYWNlJyxcbiAgICAgICAgICAnQVdTOjpCYWNrdXA6OkJhY2t1cFBsYW4nLFxuICAgICAgICAgICdBV1M6OkJhY2t1cDo6QmFja3VwU2VsZWN0aW9uJyxcbiAgICAgICAgICAnQVdTOjpCYWNrdXA6OkJhY2t1cFZhdWx0JyxcbiAgICAgICAgICAnQVdTOjpCYWNrdXA6OlJlY292ZXJ5UG9pbnQnLFxuICAgICAgICAgICdBV1M6OkJhdGNoOjpKb2JRdWV1ZScsXG4gICAgICAgICAgJ0FXUzo6QmF0Y2g6OkNvbXB1dGVFbnZpcm9ubWVudCcsXG4gICAgICAgICAgJ0FXUzo6Q29kZURlcGxveTo6QXBwbGljYXRpb24nLFxuICAgICAgICAgICdBV1M6OkNvZGVEZXBsb3k6OkRlcGxveW1lbnRDb25maWcnLFxuICAgICAgICAgICdBV1M6OkNvZGVEZXBsb3k6OkRlcGxveW1lbnRHcm91cCcsXG4gICAgICAgICAgJ0FXUzo6Q29uZmlnOjpSZXNvdXJjZUNvbXBsaWFuY2UnLFxuICAgICAgICAgICdBV1M6OkNvbmZpZzo6Q29uZm9ybWFuY2VQYWNrQ29tcGxpYW5jZScsXG4gICAgICAgICAgJ0FXUzo6RE1TOjpFdmVudFN1YnNjcmlwdGlvbicsXG4gICAgICAgICAgJ0FXUzo6RE1TOjpSZXBsaWNhdGlvblN1Ym5ldEdyb3VwJyxcbiAgICAgICAgICAnQVdTOjpHbG9iYWxBY2NlbGVyYXRvcjo6TGlzdGVuZXInLFxuICAgICAgICAgICdBV1M6Okdsb2JhbEFjY2VsZXJhdG9yOjpFbmRwb2ludEdyb3VwJyxcbiAgICAgICAgICAnQVdTOjpHbG9iYWxBY2NlbGVyYXRvcjo6QWNjZWxlcmF0b3InLFxuICAgICAgICAgICdBV1M6OkFjY2Vzc0FuYWx5emVyOjpBbmFseXplcicsXG4gICAgICAgICAgJ0FXUzo6U3RlcEZ1bmN0aW9uczo6QWN0aXZpdHknLFxuICAgICAgICAgICdBV1M6OlN0ZXBGdW5jdGlvbnM6OlN0YXRlTWFjaGluZScsXG4gICAgICAgICAgJ0FXUzo6V0FGdjI6OklQU2V0JyxcbiAgICAgICAgICAnQVdTOjpXQUZ2Mjo6UmVnZXhQYXR0ZXJuU2V0JyxcbiAgICAgICAgICAnQVdTOjpFbGFzdGljTG9hZEJhbGFuY2luZ1YyOjpMaXN0ZW5lcicsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcbiAgdGVzdCgnY3JlYXRlIGEgY3VzdG9tIHBvbGljeScsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgLy8gV0hFTlxuICAgIG5ldyBjb25maWcuQ3VzdG9tUG9saWN5KHN0YWNrLCAnUnVsZScsIHtcbiAgICAgIHBvbGljeVRleHQ6IGBcbiAgICAgIGxldCBzdGF0dXMgPSBbJ0FDVElWRSddXG4gIFxuICAgICAgcnVsZSB0YWJsZWlzYWN0aXZlIHdoZW5cbiAgICAgICAgICByZXNvdXJjZVR5cGUgPT0gXCJBV1M6OkR5bmFtb0RCOjpUYWJsZVwiIHtcbiAgICAgICAgICBjb25maWd1cmF0aW9uLnRhYmxlU3RhdHVzID09ICVzdGF0dXNcbiAgICAgIH1cbiAgXG4gICAgICBydWxlIGNoZWNrY29tcGxpYW5jZSB3aGVuXG4gICAgICAgICAgcmVzb3VyY2VUeXBlID09IFwiQVdTOjpEeW5hbW9EQjo6VGFibGVcIlxuICAgICAgICAgIHRhYmxlaXNhY3RpdmUge1xuICAgICAgICAgICAgICBsZXQgcGl0ciA9IHN1cHBsZW1lbnRhcnlDb25maWd1cmF0aW9uLkNvbnRpbnVvdXNCYWNrdXBzRGVzY3JpcHRpb24ucG9pbnRJblRpbWVSZWNvdmVyeURlc2NyaXB0aW9uLnBvaW50SW5UaW1lUmVjb3ZlcnlTdGF0dXNcbiAgICAgICAgICAgICAgJXBpdHIgPT0gXCJFTkFCTEVEXCJcbiAgICAgIH1gLFxuICAgICAgZGVzY3JpcHRpb246ICdyZWFsbHkgY29vbCBydWxlJyxcbiAgICAgIGNvbmZpZ1J1bGVOYW1lOiAnY29vbCBydWxlJyxcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDb25maWc6OkNvbmZpZ1J1bGUnLCB7XG4gICAgICBTb3VyY2U6IHtcbiAgICAgICAgT3duZXI6ICdDVVNUT01fUE9MSUNZJyxcbiAgICAgICAgU291cmNlRGV0YWlsczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIEV2ZW50U291cmNlOiAnYXdzLmNvbmZpZycsXG4gICAgICAgICAgICBNZXNzYWdlVHlwZTogJ0NvbmZpZ3VyYXRpb25JdGVtQ2hhbmdlTm90aWZpY2F0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIEV2ZW50U291cmNlOiAnYXdzLmNvbmZpZycsXG4gICAgICAgICAgICBNZXNzYWdlVHlwZTogJ092ZXJzaXplZENvbmZpZ3VyYXRpb25JdGVtQ2hhbmdlTm90aWZpY2F0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIENvbmZpZ1J1bGVOYW1lOiAnY29vbCBydWxlJyxcbiAgICAgIERlc2NyaXB0aW9uOiAncmVhbGx5IGNvb2wgcnVsZScsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2NyZWF0ZSB0d28gY3VzdG9tIHJ1bGVzIGFuZCBvbmUgZnVuY3Rpb24nLCAoKSA9PiB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICBjb25zdCBmbiA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oc3RhY2ssICdGdW5jdGlvbicsIHtcbiAgICAgIGNvZGU6IGxhbWJkYS5Bc3NldENvZGUuZnJvbUlubGluZSgnZm9vJyksXG4gICAgICBoYW5kbGVyOiAnaW5kZXguaGFuZGxlcicsXG4gICAgICBydW50aW1lOiBsYW1iZGEuUnVudGltZS5OT0RFSlNfMTRfWCxcbiAgICB9KTtcblxuICAgIC8vIFdIRU5cbiAgICBuZXcgY29uZmlnLkN1c3RvbVJ1bGUoc3RhY2ssICdSdWxlMScsIHtcbiAgICAgIGNvbmZpZ3VyYXRpb25DaGFuZ2VzOiB0cnVlLFxuICAgICAgZGVzY3JpcHRpb246ICdyZWFsbHkgY29vbCBydWxlJyxcbiAgICAgIGxhbWJkYUZ1bmN0aW9uOiBmbixcbiAgICAgIG1heGltdW1FeGVjdXRpb25GcmVxdWVuY3k6IGNvbmZpZy5NYXhpbXVtRXhlY3V0aW9uRnJlcXVlbmN5LlNJWF9IT1VSUyxcbiAgICAgIGNvbmZpZ1J1bGVOYW1lOiAnY29vbCBydWxlIDEnLFxuICAgICAgcGVyaW9kaWM6IHRydWUsXG4gICAgfSk7XG4gICAgbmV3IGNvbmZpZy5DdXN0b21SdWxlKHN0YWNrLCAnUnVsZTInLCB7XG4gICAgICBjb25maWd1cmF0aW9uQ2hhbmdlczogdHJ1ZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAncmVhbGx5IGNvb2wgcnVsZScsXG4gICAgICBsYW1iZGFGdW5jdGlvbjogZm4sXG4gICAgICBjb25maWdSdWxlTmFtZTogJ2Nvb2wgcnVsZSAyJyxcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpDb25maWc6OkNvbmZpZ1J1bGUnLCAyKTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpMYW1iZGE6OlBlcm1pc3Npb24nLCAxKTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6UGVybWlzc2lvbicsIHtcbiAgICAgIEFjdGlvbjogJ2xhbWJkYTpJbnZva2VGdW5jdGlvbicsXG4gICAgICBGdW5jdGlvbk5hbWU6IHtcbiAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgJ0Z1bmN0aW9uNzY4NTY2NzcnLFxuICAgICAgICAgICdBcm4nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIFByaW5jaXBhbDogJ2NvbmZpZy5hbWF6b25hd3MuY29tJyxcbiAgICAgIFNvdXJjZUFjY291bnQ6IHtcbiAgICAgICAgUmVmOiAnQVdTOjpBY2NvdW50SWQnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG4gIHRlc3QoJ2NyZWF0ZSBhIDAgY2hhcmFjdG9yIHBvbGljeScsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgLy8gV0hFTlxuICAgIC8vIFRIRU5cbiAgICBleHBlY3QoKCkgPT4gbmV3IGNvbmZpZy5DdXN0b21Qb2xpY3koc3RhY2ssICdSdWxlJywge1xuICAgICAgcG9saWN5VGV4dDogJycsXG4gICAgfSkpLnRvVGhyb3coJ1BvbGljeSBUZXh0IGNhbm5vdCBiZSBlbXB0eS4nKTtcbiAgfSk7XG5cbiAgdGVzdCgnY3JlYXRlIG92ZXIgMTAwMDAgY2hhcmFjdG9yIHBvbGljeScsICgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuICAgIGNvbnN0IHN0cmluZ0xlbjEwMDAxID0gJzAxMjM0NTY3ODknLnJlcGVhdCgxMDAwKSArICdhJztcbiAgICAvLyBXSEVOXG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdCgoKSA9PiBuZXcgY29uZmlnLkN1c3RvbVBvbGljeShzdGFjaywgJ1J1bGUnLCB7XG4gICAgICBwb2xpY3lUZXh0OiBzdHJpbmdMZW4xMDAwMSxcbiAgICB9KSkudG9UaHJvdygnUG9saWN5IFRleHQgaXMgbGltaXRlZCB0byAxMCwwMDAgY2hhcmFjdGVycyBvciBsZXNzLicpO1xuICB9KTtcbn0pO1xuIl19