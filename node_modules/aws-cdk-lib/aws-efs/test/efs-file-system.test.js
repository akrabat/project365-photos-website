"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const ec2 = require("../../aws-ec2");
const iam = require("../../aws-iam");
const kms = require("../../aws-kms");
const core_1 = require("../../core");
const lib_1 = require("../lib");
let stack = new core_1.Stack();
let vpc = new ec2.Vpc(stack, 'VPC');
beforeEach(() => {
    stack = new core_1.Stack();
    vpc = new ec2.Vpc(stack, 'VPC');
});
test('encryption is enabled by default', () => {
    const customStack = new core_1.Stack();
    const customVpc = new ec2.Vpc(customStack, 'VPC');
    new lib_1.FileSystem(customVpc, 'EfsFileSystem', {
        vpc: customVpc,
    });
    assertions_1.Template.fromStack(customStack).hasResourceProperties('AWS::EFS::FileSystem', {
        Encrypted: true,
    });
});
test('default file system is created correctly', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
    });
    // THEN
    const assertions = assertions_1.Template.fromStack(stack);
    assertions.hasResource('AWS::EFS::FileSystem', {
        DeletionPolicy: 'Retain',
        UpdateReplacePolicy: 'Retain',
    });
    assertions.resourceCountIs('AWS::EFS::MountTarget', 2);
    assertions.resourceCountIs('AWS::EC2::SecurityGroup', 1);
});
test('unencrypted file system is created correctly with default KMS', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        encrypted: false,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        Encrypted: false,
    });
});
test('encrypted file system is created correctly with default KMS', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        encrypted: true,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        Encrypted: true,
    });
});
test('encrypted file system is created correctly with custom KMS', () => {
    const key = new kms.Key(stack, 'customKeyFS');
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        encrypted: true,
        kmsKey: key,
    });
    // THEN
    /*
     * CDK appends 8-digit MD5 hash of the resource path to the logical Id of the resource in order to make sure
     * that the id is unique across multiple stacks. There isnt a direct way to identify the exact name of the resource
     * in generated CDK, hence hardcoding the MD5 hash here for assertion. Assumption is that the path of the Key wont
     * change in this UT. Checked the unique id by generating the cloud formation stack.
     */
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        Encrypted: true,
        KmsKeyId: {
            'Fn::GetAtt': [
                'customKeyFSDDB87C6D',
                'Arn',
            ],
        },
    });
});
test('file system is created correctly with a life cycle property', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        lifecyclePolicy: lib_1.LifecyclePolicy.AFTER_7_DAYS,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        LifecyclePolicies: [{
                TransitionToIA: 'AFTER_7_DAYS',
            }],
    });
});
test('file system is created correctly with a life cycle property and out of infrequent access property', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        lifecyclePolicy: lib_1.LifecyclePolicy.AFTER_7_DAYS,
        outOfInfrequentAccessPolicy: lib_1.OutOfInfrequentAccessPolicy.AFTER_1_ACCESS,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        LifecyclePolicies: [
            {
                TransitionToIA: 'AFTER_7_DAYS',
            },
            {
                TransitionToPrimaryStorageClass: 'AFTER_1_ACCESS',
            },
        ],
    });
});
test('LifecyclePolicies should be disabled when lifecyclePolicy and outInfrequentAccessPolicy are not specified', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        LifecyclePolicies: assertions_1.Match.absent(),
    });
});
test('file system is created correctly with performance mode', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        performanceMode: lib_1.PerformanceMode.MAX_IO,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        PerformanceMode: 'maxIO',
    });
});
test('file system is created correctly with bursting throughput mode', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        throughputMode: lib_1.ThroughputMode.BURSTING,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        ThroughputMode: 'bursting',
    });
});
test('file system is created correctly with elastic throughput mode', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        throughputMode: lib_1.ThroughputMode.ELASTIC,
        performanceMode: lib_1.PerformanceMode.GENERAL_PURPOSE,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        ThroughputMode: 'elastic',
    });
});
test('Exception when throughput mode is set to ELASTIC, performance mode cannot be MaxIO', () => {
    expect(() => {
        new lib_1.FileSystem(stack, 'EfsFileSystem', {
            vpc,
            throughputMode: lib_1.ThroughputMode.ELASTIC,
            performanceMode: lib_1.PerformanceMode.MAX_IO,
        });
    }).toThrowError(/ThroughputMode ELASTIC is not supported for file systems with performanceMode MAX_IO/);
});
test('Exception when throughput mode is set to PROVISIONED, but provisioned throughput is not set', () => {
    expect(() => {
        new lib_1.FileSystem(stack, 'EfsFileSystem', {
            vpc,
            throughputMode: lib_1.ThroughputMode.PROVISIONED,
        });
    }).toThrowError(/Property provisionedThroughputPerSecond is required when throughputMode is PROVISIONED/);
});
test('fails when provisioned throughput is less than the valid range', () => {
    expect(() => new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        throughputMode: lib_1.ThroughputMode.PROVISIONED,
        provisionedThroughputPerSecond: core_1.Size.kibibytes(10),
    })).toThrow(/cannot be converted into a whole number/);
});
test('fails when provisioned throughput is not a whole number of mebibytes', () => {
    expect(() => {
        new lib_1.FileSystem(stack, 'EfsFileSystem2', {
            vpc,
            throughputMode: lib_1.ThroughputMode.PROVISIONED,
            provisionedThroughputPerSecond: core_1.Size.kibibytes(2050),
        });
    }).toThrowError(/cannot be converted into a whole number/);
});
test('file system is created correctly with provisioned throughput mode', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
        throughputMode: lib_1.ThroughputMode.PROVISIONED,
        provisionedThroughputPerSecond: core_1.Size.mebibytes(5),
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        ThroughputMode: 'provisioned',
        ProvisionedThroughputInMibps: 5,
    });
});
test('existing file system is imported correctly using id', () => {
    // WHEN
    const fs = lib_1.FileSystem.fromFileSystemAttributes(stack, 'existingFS', {
        fileSystemId: 'fs123',
        securityGroup: ec2.SecurityGroup.fromSecurityGroupId(stack, 'SG', 'sg-123456789', {
            allowAllOutbound: false,
        }),
    });
    fs.connections.allowToAnyIpv4(ec2.Port.tcp(443));
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EC2::SecurityGroupEgress', {
        GroupId: 'sg-123456789',
    });
});
test('existing file system is imported correctly using arn', () => {
    // WHEN
    const arn = stack.formatArn({
        service: 'elasticfilesystem',
        resource: 'file-system',
        resourceName: 'fs-12912923',
    });
    const fs = lib_1.FileSystem.fromFileSystemAttributes(stack, 'existingFS', {
        fileSystemArn: arn,
        securityGroup: ec2.SecurityGroup.fromSecurityGroupId(stack, 'SG', 'sg-123456789', {
            allowAllOutbound: false,
        }),
    });
    fs.connections.allowToAnyIpv4(ec2.Port.tcp(443));
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EC2::SecurityGroupEgress', {
        GroupId: 'sg-123456789',
    });
    expect(fs.fileSystemArn).toEqual(arn);
    expect(fs.fileSystemId).toEqual('fs-12912923');
});
test('must throw an error when trying to import a fileSystem without specifying id or arn', () => {
    // WHEN
    expect(() => {
        lib_1.FileSystem.fromFileSystemAttributes(stack, 'existingFS', {
            securityGroup: ec2.SecurityGroup.fromSecurityGroupId(stack, 'SG', 'sg-123456789', {
                allowAllOutbound: false,
            }),
        });
    }).toThrow(/One of fileSystemId or fileSystemArn, but not both, must be provided./);
});
test('must throw an error when trying to import a fileSystem specifying both id and arn', () => {
    // WHEN
    const arn = stack.formatArn({
        service: 'elasticfilesystem',
        resource: 'file-system',
        resourceName: 'fs-12912923',
    });
    expect(() => {
        lib_1.FileSystem.fromFileSystemAttributes(stack, 'existingFS', {
            fileSystemArn: arn,
            fileSystemId: 'fs-12343435',
            securityGroup: ec2.SecurityGroup.fromSecurityGroupId(stack, 'SG', 'sg-123456789', {
                allowAllOutbound: false,
            }),
        });
    }).toThrow(/One of fileSystemId or fileSystemArn, but not both, must be provided./);
});
test('support granting permissions', () => {
    const fileSystem = new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
    });
    const role = new iam.Role(stack, 'Role', {
        assumedBy: new iam.AnyPrincipal(),
    });
    fileSystem.grant(role, 'elasticfilesystem:ClientWrite');
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Policy', {
        PolicyDocument: {
            Statement: [
                {
                    Action: 'elasticfilesystem:ClientWrite',
                    Effect: 'Allow',
                    Resource: {
                        'Fn::GetAtt': [
                            'EfsFileSystem37910666',
                            'Arn',
                        ],
                    },
                },
            ],
            Version: '2012-10-17',
        },
        PolicyName: 'RoleDefaultPolicy5FFB7DAB',
        Roles: [
            {
                Ref: 'Role1ABCC5F0',
            },
        ],
    });
});
test('support tags', () => {
    // WHEN
    const fileSystem = new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
    });
    core_1.Tags.of(fileSystem).add('Name', 'LookAtMeAndMyFancyTags');
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        FileSystemTags: [
            { Key: 'Name', Value: 'LookAtMeAndMyFancyTags' },
        ],
    });
});
test('file system is created correctly when given a name', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        fileSystemName: 'MyNameableFileSystem',
        vpc,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        FileSystemTags: [
            { Key: 'Name', Value: 'MyNameableFileSystem' },
        ],
    });
});
test('auto-named if none provided', () => {
    // WHEN
    const fileSystem = new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc,
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        FileSystemTags: [
            { Key: 'Name', Value: fileSystem.node.path },
        ],
    });
});
test('removalPolicy is DESTROY', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', { vpc, removalPolicy: core_1.RemovalPolicy.DESTROY });
    // THEN
    assertions_1.Template.fromStack(stack).hasResource('AWS::EFS::FileSystem', {
        DeletionPolicy: 'Delete',
        UpdateReplacePolicy: 'Delete',
    });
});
test('can specify backup policy', () => {
    // WHEN
    new lib_1.FileSystem(stack, 'EfsFileSystem', { vpc, enableAutomaticBackups: true });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        BackupPolicy: {
            Status: 'ENABLED',
        },
    });
});
test('can create when using a VPC with multiple subnets per availability zone', () => {
    // create a vpc with two subnets in the same availability zone.
    const oneAzVpc = new ec2.Vpc(stack, 'Vpc', {
        maxAzs: 1,
        subnetConfiguration: [{ name: 'One', subnetType: ec2.SubnetType.PRIVATE_ISOLATED }, { name: 'Two', subnetType: ec2.SubnetType.PRIVATE_ISOLATED }],
        natGateways: 0,
    });
    new lib_1.FileSystem(stack, 'EfsFileSystem', {
        vpc: oneAzVpc,
    });
    // make sure only one mount target is created.
    assertions_1.Template.fromStack(stack).resourceCountIs('AWS::EFS::MountTarget', 1);
});
test('can specify file system policy', () => {
    // WHEN
    const myFileSystemPolicy = new iam.PolicyDocument({
        statements: [new iam.PolicyStatement({
                actions: [
                    'elasticfilesystem:ClientWrite',
                    'elasticfilesystem:ClientMount',
                ],
                principals: [new iam.ArnPrincipal('arn:aws:iam::111122223333:role/Testing_Role')],
                resources: ['arn:aws:elasticfilesystem:us-east-2:111122223333:file-system/fs-1234abcd'],
                conditions: {
                    Bool: {
                        'elasticfilesystem:AccessedViaMountTarget': 'true',
                    },
                },
            })],
    });
    new lib_1.FileSystem(stack, 'EfsFileSystem', { vpc, fileSystemPolicy: myFileSystemPolicy });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        FileSystemPolicy: {
            Statement: [
                {
                    Effect: 'Allow',
                    Principal: {
                        AWS: 'arn:aws:iam::111122223333:role/Testing_Role',
                    },
                    Action: [
                        'elasticfilesystem:ClientWrite',
                        'elasticfilesystem:ClientMount',
                    ],
                    Resource: 'arn:aws:elasticfilesystem:us-east-2:111122223333:file-system/fs-1234abcd',
                    Condition: {
                        Bool: {
                            'elasticfilesystem:AccessedViaMountTarget': 'true',
                        },
                    },
                },
            ],
        },
    });
});
test('can add statements to file system policy', () => {
    // WHEN
    const statement1 = new iam.PolicyStatement({
        actions: [
            'elasticfilesystem:ClientMount',
        ],
        principals: [new iam.ArnPrincipal('arn:aws:iam::111122223333:role/Testing_Role1')],
        resources: ['arn:aws:elasticfilesystem:us-east-2:111122223333:file-system/fs-1234abcd'],
        conditions: {
            Bool: {
                'elasticfilesystem:AccessedViaMountTarget': 'true',
            },
        },
    });
    const statement2 = new iam.PolicyStatement({
        actions: [
            'elasticfilesystem:ClientMount',
            'elasticfilesystem:ClientWrite',
        ],
        principals: [new iam.ArnPrincipal('arn:aws:iam::111122223333:role/Testing_Role2')],
        resources: ['arn:aws:elasticfilesystem:us-east-2:111122223333:file-system/fs-1234abcd'],
        conditions: {
            Bool: {
                'elasticfilesystem:AccessedViaMountTarget': 'true',
            },
        },
    });
    const fileSystem = new lib_1.FileSystem(stack, 'EfsFileSystem', { vpc });
    fileSystem.addToResourcePolicy(statement1);
    fileSystem.addToResourcePolicy(statement2);
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::EFS::FileSystem', {
        FileSystemPolicy: {
            Statement: [
                {
                    Effect: 'Allow',
                    Principal: {
                        AWS: 'arn:aws:iam::111122223333:role/Testing_Role1',
                    },
                    Action: 'elasticfilesystem:ClientMount',
                    Resource: 'arn:aws:elasticfilesystem:us-east-2:111122223333:file-system/fs-1234abcd',
                    Condition: {
                        Bool: {
                            'elasticfilesystem:AccessedViaMountTarget': 'true',
                        },
                    },
                },
                {
                    Effect: 'Allow',
                    Principal: {
                        AWS: 'arn:aws:iam::111122223333:role/Testing_Role2',
                    },
                    Action: [
                        'elasticfilesystem:ClientMount',
                        'elasticfilesystem:ClientWrite',
                    ],
                    Resource: 'arn:aws:elasticfilesystem:us-east-2:111122223333:file-system/fs-1234abcd',
                    Condition: {
                        Bool: {
                            'elasticfilesystem:AccessedViaMountTarget': 'true',
                        },
                    },
                },
            ],
        },
    });
});
test('imported file system can not add statements to file system policy', () => {
    // WHEN
    const statement = new iam.PolicyStatement({
        actions: [
            'elasticfilesystem:ClientMount',
        ],
        principals: [new iam.ArnPrincipal('arn:aws:iam::111122223333:role/Testing_Role')],
        resources: ['arn:aws:elasticfilesystem:us-east-2:111122223333:file-system/fs-1234abcd'],
        conditions: {
            Bool: {
                'elasticfilesystem:AccessedViaMountTarget': 'true',
            },
        },
    });
    const fileSystem = new lib_1.FileSystem(stack, 'FileSystem', { vpc });
    const importedFileSystem = lib_1.FileSystem.fromFileSystemAttributes(stack, 'ImportedFileSystem', {
        securityGroup: fileSystem.connections.securityGroups[0],
        fileSystemArn: fileSystem.fileSystemArn,
    });
    const fileSystemResult = fileSystem.addToResourcePolicy(statement);
    const importedFileSystemResult = importedFileSystem.addToResourcePolicy(statement);
    // THEN
    expect(fileSystemResult).toStrictEqual({
        statementAdded: true,
        policyDependable: fileSystem,
    });
    expect(importedFileSystemResult).toStrictEqual({
        statementAdded: false,
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWZzLWZpbGUtc3lzdGVtLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJlZnMtZmlsZS1zeXN0ZW0udGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUFtRDtBQUNuRCxxQ0FBcUM7QUFDckMscUNBQXFDO0FBQ3JDLHFDQUFxQztBQUNyQyxxQ0FBOEQ7QUFDOUQsZ0NBQW1IO0FBRW5ILElBQUksS0FBSyxHQUFHLElBQUksWUFBSyxFQUFFLENBQUM7QUFDeEIsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztBQUVwQyxVQUFVLENBQUMsR0FBRyxFQUFFO0lBQ2QsS0FBSyxHQUFHLElBQUksWUFBSyxFQUFFLENBQUM7SUFDcEIsR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDbEMsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO0lBQzVDLE1BQU0sV0FBVyxHQUFHLElBQUksWUFBSyxFQUFFLENBQUM7SUFFaEMsTUFBTSxTQUFTLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNsRCxJQUFJLGdCQUFVLENBQUMsU0FBUyxFQUFFLGVBQWUsRUFBRTtRQUN6QyxHQUFHLEVBQUUsU0FBUztLQUNmLENBQUMsQ0FBQztJQUVILHFCQUFRLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLHNCQUFzQixFQUFFO1FBQzVFLFNBQVMsRUFBRSxJQUFJO0tBQ2hCLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtJQUNwRCxPQUFPO0lBQ1AsSUFBSSxnQkFBVSxDQUFDLEtBQUssRUFBRSxlQUFlLEVBQUU7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QTBFLENBQUM7UUFDdkYsVUFBVSxFQUFFO1lBQ1YsSUFBSSxFQUFFO2dCQUNKLDBDQUEwQyxFQUFFLE1BQU07YUFDbkQ7U0FDRjtLQUNGLENBQUMsQ0FBQztJQUVILE1BQU0sVUFBVSxHQUFHLElBQUksZ0JBQVUsQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNoRSxNQUFNLGtCQUFrQixHQUFHLGdCQUFVLENBQUMsd0JBQXdCLENBQUMsS0FBSyxFQUFFLG9CQUFvQixFQUFFO1FBQzFGLGFBQWEsRUFBRSxVQUFVLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDdkQsYUFBYSxFQUFFLFVBQVUsQ0FBQyxhQUFhO0tBQ3hDLENBQUMsQ0FBQztJQUNILE1BQU0sZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ25FLE1BQU0sd0JBQXdCLEdBQUcsa0JBQWtCLENBQUMsbUJBQW1CLENBQUMsU0FBUyxDQUFDLENBQUM7SUFFbkYsT0FBTztJQUNQLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQztRQUNyQyxjQUFjLEVBQUUsSUFBSTtRQUNwQixnQkFBZ0IsRUFBRSxVQUFVO0tBQzdCLENBQUMsQ0FBQztJQUNILE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQztRQUM3QyxjQUFjLEVBQUUsS0FBSztLQUN0QixDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlbXBsYXRlLCBNYXRjaCB9IGZyb20gJy4uLy4uL2Fzc2VydGlvbnMnO1xuaW1wb3J0ICogYXMgZWMyIGZyb20gJy4uLy4uL2F3cy1lYzInO1xuaW1wb3J0ICogYXMgaWFtIGZyb20gJy4uLy4uL2F3cy1pYW0nO1xuaW1wb3J0ICogYXMga21zIGZyb20gJy4uLy4uL2F3cy1rbXMnO1xuaW1wb3J0IHsgUmVtb3ZhbFBvbGljeSwgU2l6ZSwgU3RhY2ssIFRhZ3MgfSBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IEZpbGVTeXN0ZW0sIExpZmVjeWNsZVBvbGljeSwgUGVyZm9ybWFuY2VNb2RlLCBUaHJvdWdocHV0TW9kZSwgT3V0T2ZJbmZyZXF1ZW50QWNjZXNzUG9saWN5IH0gZnJvbSAnLi4vbGliJztcblxubGV0IHN0YWNrID0gbmV3IFN0YWNrKCk7XG5sZXQgdnBjID0gbmV3IGVjMi5WcGMoc3RhY2ssICdWUEMnKTtcblxuYmVmb3JlRWFjaCgoKSA9PiB7XG4gIHN0YWNrID0gbmV3IFN0YWNrKCk7XG4gIHZwYyA9IG5ldyBlYzIuVnBjKHN0YWNrLCAnVlBDJyk7XG59KTtcblxudGVzdCgnZW5jcnlwdGlvbiBpcyBlbmFibGVkIGJ5IGRlZmF1bHQnLCAoKSA9PiB7XG4gIGNvbnN0IGN1c3RvbVN0YWNrID0gbmV3IFN0YWNrKCk7XG5cbiAgY29uc3QgY3VzdG9tVnBjID0gbmV3IGVjMi5WcGMoY3VzdG9tU3RhY2ssICdWUEMnKTtcbiAgbmV3IEZpbGVTeXN0ZW0oY3VzdG9tVnBjLCAnRWZzRmlsZVN5c3RlbScsIHtcbiAgICB2cGM6IGN1c3RvbVZwYyxcbiAgfSk7XG5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKGN1c3RvbVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RUZTOjpGaWxlU3lzdGVtJywge1xuICAgIEVuY3J5cHRlZDogdHJ1ZSxcbiAgfSk7XG59KTtcblxudGVzdCgnZGVmYXVsdCBmaWxlIHN5c3RlbSBpcyBjcmVhdGVkIGNvcnJlY3RseScsICgpID0+IHtcbiAgLy8gV0hFTlxuICBuZXcgRmlsZVN5c3RlbShzdGFjaywgJ0Vmc0ZpbGVTeXN0ZW0nLCB7XG4gICAgdnBjLFxuICB9KTtcbiAgLy8gVEhFTlxuICBjb25zdCBhc3NlcnRpb25zID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcbiAgYXNzZXJ0aW9ucy5oYXNSZXNvdXJjZSgnQVdTOjpFRlM6OkZpbGVTeXN0ZW0nLCB7XG4gICAgRGVsZXRpb25Qb2xpY3k6ICdSZXRhaW4nLFxuICAgIFVwZGF0ZVJlcGxhY2VQb2xpY3k6ICdSZXRhaW4nLFxuICB9KTtcbiAgYXNzZXJ0aW9ucy5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6RUZTOjpNb3VudFRhcmdldCcsIDIpO1xuICBhc3NlcnRpb25zLnJlc291cmNlQ291bnRJcygnQVdTOjpFQzI6OlNlY3VyaXR5R3JvdXAnLCAxKTtcbn0pO1xuXG50ZXN0KCd1bmVuY3J5cHRlZCBmaWxlIHN5c3RlbSBpcyBjcmVhdGVkIGNvcnJlY3RseSB3aXRoIGRlZmF1bHQgS01TJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHtcbiAgICB2cGMsXG4gICAgZW5jcnlwdGVkOiBmYWxzZSxcbiAgfSk7XG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RUZTOjpGaWxlU3lzdGVtJywge1xuICAgIEVuY3J5cHRlZDogZmFsc2UsXG4gIH0pO1xufSk7XG5cbnRlc3QoJ2VuY3J5cHRlZCBmaWxlIHN5c3RlbSBpcyBjcmVhdGVkIGNvcnJlY3RseSB3aXRoIGRlZmF1bHQgS01TJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHtcbiAgICB2cGMsXG4gICAgZW5jcnlwdGVkOiB0cnVlLFxuICB9KTtcbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpFRlM6OkZpbGVTeXN0ZW0nLCB7XG4gICAgRW5jcnlwdGVkOiB0cnVlLFxuICB9KTtcbn0pO1xuXG50ZXN0KCdlbmNyeXB0ZWQgZmlsZSBzeXN0ZW0gaXMgY3JlYXRlZCBjb3JyZWN0bHkgd2l0aCBjdXN0b20gS01TJywgKCkgPT4ge1xuICBjb25zdCBrZXkgPSBuZXcga21zLktleShzdGFjaywgJ2N1c3RvbUtleUZTJyk7XG5cbiAgLy8gV0hFTlxuICBuZXcgRmlsZVN5c3RlbShzdGFjaywgJ0Vmc0ZpbGVTeXN0ZW0nLCB7XG4gICAgdnBjLFxuICAgIGVuY3J5cHRlZDogdHJ1ZSxcbiAgICBrbXNLZXk6IGtleSxcbiAgfSk7XG4gIC8vIFRIRU5cblxuICAvKlxuICAgKiBDREsgYXBwZW5kcyA4LWRpZ2l0IE1ENSBoYXNoIG9mIHRoZSByZXNvdXJjZSBwYXRoIHRvIHRoZSBsb2dpY2FsIElkIG9mIHRoZSByZXNvdXJjZSBpbiBvcmRlciB0byBtYWtlIHN1cmVcbiAgICogdGhhdCB0aGUgaWQgaXMgdW5pcXVlIGFjcm9zcyBtdWx0aXBsZSBzdGFja3MuIFRoZXJlIGlzbnQgYSBkaXJlY3Qgd2F5IHRvIGlkZW50aWZ5IHRoZSBleGFjdCBuYW1lIG9mIHRoZSByZXNvdXJjZVxuICAgKiBpbiBnZW5lcmF0ZWQgQ0RLLCBoZW5jZSBoYXJkY29kaW5nIHRoZSBNRDUgaGFzaCBoZXJlIGZvciBhc3NlcnRpb24uIEFzc3VtcHRpb24gaXMgdGhhdCB0aGUgcGF0aCBvZiB0aGUgS2V5IHdvbnRcbiAgICogY2hhbmdlIGluIHRoaXMgVVQuIENoZWNrZWQgdGhlIHVuaXF1ZSBpZCBieSBnZW5lcmF0aW5nIHRoZSBjbG91ZCBmb3JtYXRpb24gc3RhY2suXG4gICAqL1xuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpFRlM6OkZpbGVTeXN0ZW0nLCB7XG4gICAgRW5jcnlwdGVkOiB0cnVlLFxuICAgIEttc0tleUlkOiB7XG4gICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgJ2N1c3RvbUtleUZTRERCODdDNkQnLFxuICAgICAgICAnQXJuJyxcbiAgICAgIF0sXG4gICAgfSxcbiAgfSk7XG59KTtcblxudGVzdCgnZmlsZSBzeXN0ZW0gaXMgY3JlYXRlZCBjb3JyZWN0bHkgd2l0aCBhIGxpZmUgY3ljbGUgcHJvcGVydHknLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgIHZwYyxcbiAgICBsaWZlY3ljbGVQb2xpY3k6IExpZmVjeWNsZVBvbGljeS5BRlRFUl83X0RBWVMsXG4gIH0pO1xuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkVGUzo6RmlsZVN5c3RlbScsIHtcbiAgICBMaWZlY3ljbGVQb2xpY2llczogW3tcbiAgICAgIFRyYW5zaXRpb25Ub0lBOiAnQUZURVJfN19EQVlTJyxcbiAgICB9XSxcbiAgfSk7XG59KTtcblxudGVzdCgnZmlsZSBzeXN0ZW0gaXMgY3JlYXRlZCBjb3JyZWN0bHkgd2l0aCBhIGxpZmUgY3ljbGUgcHJvcGVydHkgYW5kIG91dCBvZiBpbmZyZXF1ZW50IGFjY2VzcyBwcm9wZXJ0eScsICgpID0+IHtcbiAgLy8gV0hFTlxuICBuZXcgRmlsZVN5c3RlbShzdGFjaywgJ0Vmc0ZpbGVTeXN0ZW0nLCB7XG4gICAgdnBjLFxuICAgIGxpZmVjeWNsZVBvbGljeTogTGlmZWN5Y2xlUG9saWN5LkFGVEVSXzdfREFZUyxcbiAgICBvdXRPZkluZnJlcXVlbnRBY2Nlc3NQb2xpY3k6IE91dE9mSW5mcmVxdWVudEFjY2Vzc1BvbGljeS5BRlRFUl8xX0FDQ0VTUyxcbiAgfSk7XG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RUZTOjpGaWxlU3lzdGVtJywge1xuICAgIExpZmVjeWNsZVBvbGljaWVzOiBbXG4gICAgICB7XG4gICAgICAgIFRyYW5zaXRpb25Ub0lBOiAnQUZURVJfN19EQVlTJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFRyYW5zaXRpb25Ub1ByaW1hcnlTdG9yYWdlQ2xhc3M6ICdBRlRFUl8xX0FDQ0VTUycsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ0xpZmVjeWNsZVBvbGljaWVzIHNob3VsZCBiZSBkaXNhYmxlZCB3aGVuIGxpZmVjeWNsZVBvbGljeSBhbmQgb3V0SW5mcmVxdWVudEFjY2Vzc1BvbGljeSBhcmUgbm90IHNwZWNpZmllZCcsICgpID0+IHtcbiAgLy8gV0hFTlxuICBuZXcgRmlsZVN5c3RlbShzdGFjaywgJ0Vmc0ZpbGVTeXN0ZW0nLCB7XG4gICAgdnBjLFxuICB9KTtcbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpFRlM6OkZpbGVTeXN0ZW0nLCB7XG4gICAgTGlmZWN5Y2xlUG9saWNpZXM6IE1hdGNoLmFic2VudCgpLFxuICB9KTtcbn0pO1xuXG50ZXN0KCdmaWxlIHN5c3RlbSBpcyBjcmVhdGVkIGNvcnJlY3RseSB3aXRoIHBlcmZvcm1hbmNlIG1vZGUnLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgIHZwYyxcbiAgICBwZXJmb3JtYW5jZU1vZGU6IFBlcmZvcm1hbmNlTW9kZS5NQVhfSU8sXG4gIH0pO1xuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkVGUzo6RmlsZVN5c3RlbScsIHtcbiAgICBQZXJmb3JtYW5jZU1vZGU6ICdtYXhJTycsXG4gIH0pO1xufSk7XG5cbnRlc3QoJ2ZpbGUgc3lzdGVtIGlzIGNyZWF0ZWQgY29ycmVjdGx5IHdpdGggYnVyc3RpbmcgdGhyb3VnaHB1dCBtb2RlJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHtcbiAgICB2cGMsXG4gICAgdGhyb3VnaHB1dE1vZGU6IFRocm91Z2hwdXRNb2RlLkJVUlNUSU5HLFxuICB9KTtcbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpFRlM6OkZpbGVTeXN0ZW0nLCB7XG4gICAgVGhyb3VnaHB1dE1vZGU6ICdidXJzdGluZycsXG4gIH0pO1xufSk7XG5cbnRlc3QoJ2ZpbGUgc3lzdGVtIGlzIGNyZWF0ZWQgY29ycmVjdGx5IHdpdGggZWxhc3RpYyB0aHJvdWdocHV0IG1vZGUnLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgIHZwYyxcbiAgICB0aHJvdWdocHV0TW9kZTogVGhyb3VnaHB1dE1vZGUuRUxBU1RJQyxcbiAgICBwZXJmb3JtYW5jZU1vZGU6IFBlcmZvcm1hbmNlTW9kZS5HRU5FUkFMX1BVUlBPU0UsXG4gIH0pO1xuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkVGUzo6RmlsZVN5c3RlbScsIHtcbiAgICBUaHJvdWdocHV0TW9kZTogJ2VsYXN0aWMnLFxuICB9KTtcbn0pO1xuXG50ZXN0KCdFeGNlcHRpb24gd2hlbiB0aHJvdWdocHV0IG1vZGUgaXMgc2V0IHRvIEVMQVNUSUMsIHBlcmZvcm1hbmNlIG1vZGUgY2Fubm90IGJlIE1heElPJywgKCkgPT4ge1xuICBleHBlY3QoKCkgPT4ge1xuICAgIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHtcbiAgICAgIHZwYyxcbiAgICAgIHRocm91Z2hwdXRNb2RlOiBUaHJvdWdocHV0TW9kZS5FTEFTVElDLFxuICAgICAgcGVyZm9ybWFuY2VNb2RlOiBQZXJmb3JtYW5jZU1vZGUuTUFYX0lPLFxuICAgIH0pO1xuICB9KS50b1Rocm93RXJyb3IoL1Rocm91Z2hwdXRNb2RlIEVMQVNUSUMgaXMgbm90IHN1cHBvcnRlZCBmb3IgZmlsZSBzeXN0ZW1zIHdpdGggcGVyZm9ybWFuY2VNb2RlIE1BWF9JTy8pO1xufSk7XG5cbnRlc3QoJ0V4Y2VwdGlvbiB3aGVuIHRocm91Z2hwdXQgbW9kZSBpcyBzZXQgdG8gUFJPVklTSU9ORUQsIGJ1dCBwcm92aXNpb25lZCB0aHJvdWdocHV0IGlzIG5vdCBzZXQnLCAoKSA9PiB7XG4gIGV4cGVjdCgoKSA9PiB7XG4gICAgbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgICAgdnBjLFxuICAgICAgdGhyb3VnaHB1dE1vZGU6IFRocm91Z2hwdXRNb2RlLlBST1ZJU0lPTkVELFxuICAgIH0pO1xuICB9KS50b1Rocm93RXJyb3IoL1Byb3BlcnR5IHByb3Zpc2lvbmVkVGhyb3VnaHB1dFBlclNlY29uZCBpcyByZXF1aXJlZCB3aGVuIHRocm91Z2hwdXRNb2RlIGlzIFBST1ZJU0lPTkVELyk7XG59KTtcblxudGVzdCgnZmFpbHMgd2hlbiBwcm92aXNpb25lZCB0aHJvdWdocHV0IGlzIGxlc3MgdGhhbiB0aGUgdmFsaWQgcmFuZ2UnLCAoKSA9PiB7XG4gIGV4cGVjdCgoKSA9PiBuZXcgRmlsZVN5c3RlbShzdGFjaywgJ0Vmc0ZpbGVTeXN0ZW0nLCB7XG4gICAgdnBjLFxuICAgIHRocm91Z2hwdXRNb2RlOiBUaHJvdWdocHV0TW9kZS5QUk9WSVNJT05FRCxcbiAgICBwcm92aXNpb25lZFRocm91Z2hwdXRQZXJTZWNvbmQ6IFNpemUua2liaWJ5dGVzKDEwKSxcbiAgfSkpLnRvVGhyb3coL2Nhbm5vdCBiZSBjb252ZXJ0ZWQgaW50byBhIHdob2xlIG51bWJlci8pO1xufSk7XG5cbnRlc3QoJ2ZhaWxzIHdoZW4gcHJvdmlzaW9uZWQgdGhyb3VnaHB1dCBpcyBub3QgYSB3aG9sZSBudW1iZXIgb2YgbWViaWJ5dGVzJywgKCkgPT4ge1xuICBleHBlY3QoKCkgPT4ge1xuICAgIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbTInLCB7XG4gICAgICB2cGMsXG4gICAgICB0aHJvdWdocHV0TW9kZTogVGhyb3VnaHB1dE1vZGUuUFJPVklTSU9ORUQsXG4gICAgICBwcm92aXNpb25lZFRocm91Z2hwdXRQZXJTZWNvbmQ6IFNpemUua2liaWJ5dGVzKDIwNTApLFxuICAgIH0pO1xuICB9KS50b1Rocm93RXJyb3IoL2Nhbm5vdCBiZSBjb252ZXJ0ZWQgaW50byBhIHdob2xlIG51bWJlci8pO1xufSk7XG5cbnRlc3QoJ2ZpbGUgc3lzdGVtIGlzIGNyZWF0ZWQgY29ycmVjdGx5IHdpdGggcHJvdmlzaW9uZWQgdGhyb3VnaHB1dCBtb2RlJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHtcbiAgICB2cGMsXG4gICAgdGhyb3VnaHB1dE1vZGU6IFRocm91Z2hwdXRNb2RlLlBST1ZJU0lPTkVELFxuICAgIHByb3Zpc2lvbmVkVGhyb3VnaHB1dFBlclNlY29uZDogU2l6ZS5tZWJpYnl0ZXMoNSksXG4gIH0pO1xuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkVGUzo6RmlsZVN5c3RlbScsIHtcbiAgICBUaHJvdWdocHV0TW9kZTogJ3Byb3Zpc2lvbmVkJyxcbiAgICBQcm92aXNpb25lZFRocm91Z2hwdXRJbk1pYnBzOiA1LFxuICB9KTtcbn0pO1xuXG50ZXN0KCdleGlzdGluZyBmaWxlIHN5c3RlbSBpcyBpbXBvcnRlZCBjb3JyZWN0bHkgdXNpbmcgaWQnLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgY29uc3QgZnMgPSBGaWxlU3lzdGVtLmZyb21GaWxlU3lzdGVtQXR0cmlidXRlcyhzdGFjaywgJ2V4aXN0aW5nRlMnLCB7XG4gICAgZmlsZVN5c3RlbUlkOiAnZnMxMjMnLFxuICAgIHNlY3VyaXR5R3JvdXA6IGVjMi5TZWN1cml0eUdyb3VwLmZyb21TZWN1cml0eUdyb3VwSWQoc3RhY2ssICdTRycsICdzZy0xMjM0NTY3ODknLCB7XG4gICAgICBhbGxvd0FsbE91dGJvdW5kOiBmYWxzZSxcbiAgICB9KSxcbiAgfSk7XG5cbiAgZnMuY29ubmVjdGlvbnMuYWxsb3dUb0FueUlwdjQoZWMyLlBvcnQudGNwKDQ0MykpO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RUMyOjpTZWN1cml0eUdyb3VwRWdyZXNzJywge1xuICAgIEdyb3VwSWQ6ICdzZy0xMjM0NTY3ODknLFxuICB9KTtcbn0pO1xuXG50ZXN0KCdleGlzdGluZyBmaWxlIHN5c3RlbSBpcyBpbXBvcnRlZCBjb3JyZWN0bHkgdXNpbmcgYXJuJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGNvbnN0IGFybiA9IHN0YWNrLmZvcm1hdEFybih7XG4gICAgc2VydmljZTogJ2VsYXN0aWNmaWxlc3lzdGVtJyxcbiAgICByZXNvdXJjZTogJ2ZpbGUtc3lzdGVtJyxcbiAgICByZXNvdXJjZU5hbWU6ICdmcy0xMjkxMjkyMycsXG4gIH0pO1xuICBjb25zdCBmcyA9IEZpbGVTeXN0ZW0uZnJvbUZpbGVTeXN0ZW1BdHRyaWJ1dGVzKHN0YWNrLCAnZXhpc3RpbmdGUycsIHtcbiAgICBmaWxlU3lzdGVtQXJuOiBhcm4sXG4gICAgc2VjdXJpdHlHcm91cDogZWMyLlNlY3VyaXR5R3JvdXAuZnJvbVNlY3VyaXR5R3JvdXBJZChzdGFjaywgJ1NHJywgJ3NnLTEyMzQ1Njc4OScsIHtcbiAgICAgIGFsbG93QWxsT3V0Ym91bmQ6IGZhbHNlLFxuICAgIH0pLFxuICB9KTtcblxuICBmcy5jb25uZWN0aW9ucy5hbGxvd1RvQW55SXB2NChlYzIuUG9ydC50Y3AoNDQzKSk7XG5cbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpFQzI6OlNlY3VyaXR5R3JvdXBFZ3Jlc3MnLCB7XG4gICAgR3JvdXBJZDogJ3NnLTEyMzQ1Njc4OScsXG4gIH0pO1xuXG4gIGV4cGVjdChmcy5maWxlU3lzdGVtQXJuKS50b0VxdWFsKGFybik7XG4gIGV4cGVjdChmcy5maWxlU3lzdGVtSWQpLnRvRXF1YWwoJ2ZzLTEyOTEyOTIzJyk7XG59KTtcblxudGVzdCgnbXVzdCB0aHJvdyBhbiBlcnJvciB3aGVuIHRyeWluZyB0byBpbXBvcnQgYSBmaWxlU3lzdGVtIHdpdGhvdXQgc3BlY2lmeWluZyBpZCBvciBhcm4nLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgZXhwZWN0KCgpID0+IHtcbiAgICBGaWxlU3lzdGVtLmZyb21GaWxlU3lzdGVtQXR0cmlidXRlcyhzdGFjaywgJ2V4aXN0aW5nRlMnLCB7XG4gICAgICBzZWN1cml0eUdyb3VwOiBlYzIuU2VjdXJpdHlHcm91cC5mcm9tU2VjdXJpdHlHcm91cElkKHN0YWNrLCAnU0cnLCAnc2ctMTIzNDU2Nzg5Jywge1xuICAgICAgICBhbGxvd0FsbE91dGJvdW5kOiBmYWxzZSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9KS50b1Rocm93KC9PbmUgb2YgZmlsZVN5c3RlbUlkIG9yIGZpbGVTeXN0ZW1Bcm4sIGJ1dCBub3QgYm90aCwgbXVzdCBiZSBwcm92aWRlZC4vKTtcbn0pO1xuXG50ZXN0KCdtdXN0IHRocm93IGFuIGVycm9yIHdoZW4gdHJ5aW5nIHRvIGltcG9ydCBhIGZpbGVTeXN0ZW0gc3BlY2lmeWluZyBib3RoIGlkIGFuZCBhcm4nLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgY29uc3QgYXJuID0gc3RhY2suZm9ybWF0QXJuKHtcbiAgICBzZXJ2aWNlOiAnZWxhc3RpY2ZpbGVzeXN0ZW0nLFxuICAgIHJlc291cmNlOiAnZmlsZS1zeXN0ZW0nLFxuICAgIHJlc291cmNlTmFtZTogJ2ZzLTEyOTEyOTIzJyxcbiAgfSk7XG5cbiAgZXhwZWN0KCgpID0+IHtcbiAgICBGaWxlU3lzdGVtLmZyb21GaWxlU3lzdGVtQXR0cmlidXRlcyhzdGFjaywgJ2V4aXN0aW5nRlMnLCB7XG4gICAgICBmaWxlU3lzdGVtQXJuOiBhcm4sXG4gICAgICBmaWxlU3lzdGVtSWQ6ICdmcy0xMjM0MzQzNScsXG4gICAgICBzZWN1cml0eUdyb3VwOiBlYzIuU2VjdXJpdHlHcm91cC5mcm9tU2VjdXJpdHlHcm91cElkKHN0YWNrLCAnU0cnLCAnc2ctMTIzNDU2Nzg5Jywge1xuICAgICAgICBhbGxvd0FsbE91dGJvdW5kOiBmYWxzZSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9KS50b1Rocm93KC9PbmUgb2YgZmlsZVN5c3RlbUlkIG9yIGZpbGVTeXN0ZW1Bcm4sIGJ1dCBub3QgYm90aCwgbXVzdCBiZSBwcm92aWRlZC4vKTtcbn0pO1xuXG50ZXN0KCdzdXBwb3J0IGdyYW50aW5nIHBlcm1pc3Npb25zJywgKCkgPT4ge1xuICBjb25zdCBmaWxlU3lzdGVtID0gbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgIHZwYyxcbiAgfSk7XG5cbiAgY29uc3Qgcm9sZSA9IG5ldyBpYW0uUm9sZShzdGFjaywgJ1JvbGUnLCB7XG4gICAgYXNzdW1lZEJ5OiBuZXcgaWFtLkFueVByaW5jaXBhbCgpLFxuICB9KTtcblxuICBmaWxlU3lzdGVtLmdyYW50KHJvbGUsICdlbGFzdGljZmlsZXN5c3RlbTpDbGllbnRXcml0ZScpO1xuXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OklBTTo6UG9saWN5Jywge1xuICAgIFBvbGljeURvY3VtZW50OiB7XG4gICAgICBTdGF0ZW1lbnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIEFjdGlvbjogJ2VsYXN0aWNmaWxlc3lzdGVtOkNsaWVudFdyaXRlJyxcbiAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXG4gICAgICAgICAgUmVzb3VyY2U6IHtcbiAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAnRWZzRmlsZVN5c3RlbTM3OTEwNjY2JyxcbiAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgVmVyc2lvbjogJzIwMTItMTAtMTcnLFxuICAgIH0sXG4gICAgUG9saWN5TmFtZTogJ1JvbGVEZWZhdWx0UG9saWN5NUZGQjdEQUInLFxuICAgIFJvbGVzOiBbXG4gICAgICB7XG4gICAgICAgIFJlZjogJ1JvbGUxQUJDQzVGMCcsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ3N1cHBvcnQgdGFncycsICgpID0+IHtcbiAgLy8gV0hFTlxuICBjb25zdCBmaWxlU3lzdGVtID0gbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgIHZwYyxcbiAgfSk7XG4gIFRhZ3Mub2YoZmlsZVN5c3RlbSkuYWRkKCdOYW1lJywgJ0xvb2tBdE1lQW5kTXlGYW5jeVRhZ3MnKTtcblxuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkVGUzo6RmlsZVN5c3RlbScsIHtcbiAgICBGaWxlU3lzdGVtVGFnczogW1xuICAgICAgeyBLZXk6ICdOYW1lJywgVmFsdWU6ICdMb29rQXRNZUFuZE15RmFuY3lUYWdzJyB9LFxuICAgIF0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ2ZpbGUgc3lzdGVtIGlzIGNyZWF0ZWQgY29ycmVjdGx5IHdoZW4gZ2l2ZW4gYSBuYW1lJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHtcbiAgICBmaWxlU3lzdGVtTmFtZTogJ015TmFtZWFibGVGaWxlU3lzdGVtJyxcbiAgICB2cGMsXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RUZTOjpGaWxlU3lzdGVtJywge1xuICAgIEZpbGVTeXN0ZW1UYWdzOiBbXG4gICAgICB7IEtleTogJ05hbWUnLCBWYWx1ZTogJ015TmFtZWFibGVGaWxlU3lzdGVtJyB9LFxuICAgIF0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ2F1dG8tbmFtZWQgaWYgbm9uZSBwcm92aWRlZCcsICgpID0+IHtcbiAgLy8gV0hFTlxuICBjb25zdCBmaWxlU3lzdGVtID0gbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgIHZwYyxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpFRlM6OkZpbGVTeXN0ZW0nLCB7XG4gICAgRmlsZVN5c3RlbVRhZ3M6IFtcbiAgICAgIHsgS2V5OiAnTmFtZScsIFZhbHVlOiBmaWxlU3lzdGVtLm5vZGUucGF0aCB9LFxuICAgIF0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ3JlbW92YWxQb2xpY3kgaXMgREVTVFJPWScsICgpID0+IHtcbiAgLy8gV0hFTlxuICBuZXcgRmlsZVN5c3RlbShzdGFjaywgJ0Vmc0ZpbGVTeXN0ZW0nLCB7IHZwYywgcmVtb3ZhbFBvbGljeTogUmVtb3ZhbFBvbGljeS5ERVNUUk9ZIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZSgnQVdTOjpFRlM6OkZpbGVTeXN0ZW0nLCB7XG4gICAgRGVsZXRpb25Qb2xpY3k6ICdEZWxldGUnLFxuICAgIFVwZGF0ZVJlcGxhY2VQb2xpY3k6ICdEZWxldGUnLFxuICB9KTtcbn0pO1xuXG50ZXN0KCdjYW4gc3BlY2lmeSBiYWNrdXAgcG9saWN5JywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHsgdnBjLCBlbmFibGVBdXRvbWF0aWNCYWNrdXBzOiB0cnVlIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RUZTOjpGaWxlU3lzdGVtJywge1xuICAgIEJhY2t1cFBvbGljeToge1xuICAgICAgU3RhdHVzOiAnRU5BQkxFRCcsXG4gICAgfSxcbiAgfSk7XG59KTtcblxudGVzdCgnY2FuIGNyZWF0ZSB3aGVuIHVzaW5nIGEgVlBDIHdpdGggbXVsdGlwbGUgc3VibmV0cyBwZXIgYXZhaWxhYmlsaXR5IHpvbmUnLCAoKSA9PiB7XG4gIC8vIGNyZWF0ZSBhIHZwYyB3aXRoIHR3byBzdWJuZXRzIGluIHRoZSBzYW1lIGF2YWlsYWJpbGl0eSB6b25lLlxuICBjb25zdCBvbmVBelZwYyA9IG5ldyBlYzIuVnBjKHN0YWNrLCAnVnBjJywge1xuICAgIG1heEF6czogMSxcbiAgICBzdWJuZXRDb25maWd1cmF0aW9uOiBbeyBuYW1lOiAnT25lJywgc3VibmV0VHlwZTogZWMyLlN1Ym5ldFR5cGUuUFJJVkFURV9JU09MQVRFRCB9LCB7IG5hbWU6ICdUd28nLCBzdWJuZXRUeXBlOiBlYzIuU3VibmV0VHlwZS5QUklWQVRFX0lTT0xBVEVEIH1dLFxuICAgIG5hdEdhdGV3YXlzOiAwLFxuICB9KTtcbiAgbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywge1xuICAgIHZwYzogb25lQXpWcGMsXG4gIH0pO1xuICAvLyBtYWtlIHN1cmUgb25seSBvbmUgbW91bnQgdGFyZ2V0IGlzIGNyZWF0ZWQuXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OkVGUzo6TW91bnRUYXJnZXQnLCAxKTtcbn0pO1xuXG50ZXN0KCdjYW4gc3BlY2lmeSBmaWxlIHN5c3RlbSBwb2xpY3knLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgY29uc3QgbXlGaWxlU3lzdGVtUG9saWN5ID0gbmV3IGlhbS5Qb2xpY3lEb2N1bWVudCh7XG4gICAgc3RhdGVtZW50czogW25ldyBpYW0uUG9saWN5U3RhdGVtZW50KHtcbiAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgJ2VsYXN0aWNmaWxlc3lzdGVtOkNsaWVudFdyaXRlJyxcbiAgICAgICAgJ2VsYXN0aWNmaWxlc3lzdGVtOkNsaWVudE1vdW50JyxcbiAgICAgIF0sXG4gICAgICBwcmluY2lwYWxzOiBbbmV3IGlhbS5Bcm5QcmluY2lwYWwoJ2Fybjphd3M6aWFtOjoxMTExMjIyMjMzMzM6cm9sZS9UZXN0aW5nX1JvbGUnKV0sXG4gICAgICByZXNvdXJjZXM6IFsnYXJuOmF3czplbGFzdGljZmlsZXN5c3RlbTp1cy1lYXN0LTI6MTExMTIyMjIzMzMzOmZpbGUtc3lzdGVtL2ZzLTEyMzRhYmNkJ10sXG4gICAgICBjb25kaXRpb25zOiB7XG4gICAgICAgIEJvb2w6IHtcbiAgICAgICAgICAnZWxhc3RpY2ZpbGVzeXN0ZW06QWNjZXNzZWRWaWFNb3VudFRhcmdldCc6ICd0cnVlJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSldLFxuICB9KTtcbiAgbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdFZnNGaWxlU3lzdGVtJywgeyB2cGMsIGZpbGVTeXN0ZW1Qb2xpY3k6IG15RmlsZVN5c3RlbVBvbGljeSB9KTtcblxuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkVGUzo6RmlsZVN5c3RlbScsIHtcbiAgICBGaWxlU3lzdGVtUG9saWN5OiB7XG4gICAgICBTdGF0ZW1lbnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICBQcmluY2lwYWw6IHtcbiAgICAgICAgICAgIEFXUzogJ2Fybjphd3M6aWFtOjoxMTExMjIyMjMzMzM6cm9sZS9UZXN0aW5nX1JvbGUnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgQWN0aW9uOiBbXG4gICAgICAgICAgICAnZWxhc3RpY2ZpbGVzeXN0ZW06Q2xpZW50V3JpdGUnLFxuICAgICAgICAgICAgJ2VsYXN0aWNmaWxlc3lzdGVtOkNsaWVudE1vdW50JyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIFJlc291cmNlOiAnYXJuOmF3czplbGFzdGljZmlsZXN5c3RlbTp1cy1lYXN0LTI6MTExMTIyMjIzMzMzOmZpbGUtc3lzdGVtL2ZzLTEyMzRhYmNkJyxcbiAgICAgICAgICBDb25kaXRpb246IHtcbiAgICAgICAgICAgIEJvb2w6IHtcbiAgICAgICAgICAgICAgJ2VsYXN0aWNmaWxlc3lzdGVtOkFjY2Vzc2VkVmlhTW91bnRUYXJnZXQnOiAndHJ1ZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ2NhbiBhZGQgc3RhdGVtZW50cyB0byBmaWxlIHN5c3RlbSBwb2xpY3knLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgY29uc3Qgc3RhdGVtZW50MSA9IG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHtcbiAgICBhY3Rpb25zOiBbXG4gICAgICAnZWxhc3RpY2ZpbGVzeXN0ZW06Q2xpZW50TW91bnQnLFxuICAgIF0sXG4gICAgcHJpbmNpcGFsczogW25ldyBpYW0uQXJuUHJpbmNpcGFsKCdhcm46YXdzOmlhbTo6MTExMTIyMjIzMzMzOnJvbGUvVGVzdGluZ19Sb2xlMScpXSxcbiAgICByZXNvdXJjZXM6IFsnYXJuOmF3czplbGFzdGljZmlsZXN5c3RlbTp1cy1lYXN0LTI6MTExMTIyMjIzMzMzOmZpbGUtc3lzdGVtL2ZzLTEyMzRhYmNkJ10sXG4gICAgY29uZGl0aW9uczoge1xuICAgICAgQm9vbDoge1xuICAgICAgICAnZWxhc3RpY2ZpbGVzeXN0ZW06QWNjZXNzZWRWaWFNb3VudFRhcmdldCc6ICd0cnVlJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIGNvbnN0IHN0YXRlbWVudDIgPSBuZXcgaWFtLlBvbGljeVN0YXRlbWVudCh7XG4gICAgYWN0aW9uczogW1xuICAgICAgJ2VsYXN0aWNmaWxlc3lzdGVtOkNsaWVudE1vdW50JyxcbiAgICAgICdlbGFzdGljZmlsZXN5c3RlbTpDbGllbnRXcml0ZScsXG4gICAgXSxcbiAgICBwcmluY2lwYWxzOiBbbmV3IGlhbS5Bcm5QcmluY2lwYWwoJ2Fybjphd3M6aWFtOjoxMTExMjIyMjMzMzM6cm9sZS9UZXN0aW5nX1JvbGUyJyldLFxuICAgIHJlc291cmNlczogWydhcm46YXdzOmVsYXN0aWNmaWxlc3lzdGVtOnVzLWVhc3QtMjoxMTExMjIyMjMzMzM6ZmlsZS1zeXN0ZW0vZnMtMTIzNGFiY2QnXSxcbiAgICBjb25kaXRpb25zOiB7XG4gICAgICBCb29sOiB7XG4gICAgICAgICdlbGFzdGljZmlsZXN5c3RlbTpBY2Nlc3NlZFZpYU1vdW50VGFyZ2V0JzogJ3RydWUnLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgZmlsZVN5c3RlbSA9IG5ldyBGaWxlU3lzdGVtKHN0YWNrLCAnRWZzRmlsZVN5c3RlbScsIHsgdnBjIH0pO1xuICBmaWxlU3lzdGVtLmFkZFRvUmVzb3VyY2VQb2xpY3koc3RhdGVtZW50MSk7XG4gIGZpbGVTeXN0ZW0uYWRkVG9SZXNvdXJjZVBvbGljeShzdGF0ZW1lbnQyKTtcblxuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkVGUzo6RmlsZVN5c3RlbScsIHtcbiAgICBGaWxlU3lzdGVtUG9saWN5OiB7XG4gICAgICBTdGF0ZW1lbnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICBQcmluY2lwYWw6IHtcbiAgICAgICAgICAgIEFXUzogJ2Fybjphd3M6aWFtOjoxMTExMjIyMjMzMzM6cm9sZS9UZXN0aW5nX1JvbGUxJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIEFjdGlvbjogJ2VsYXN0aWNmaWxlc3lzdGVtOkNsaWVudE1vdW50JyxcbiAgICAgICAgICBSZXNvdXJjZTogJ2Fybjphd3M6ZWxhc3RpY2ZpbGVzeXN0ZW06dXMtZWFzdC0yOjExMTEyMjIyMzMzMzpmaWxlLXN5c3RlbS9mcy0xMjM0YWJjZCcsXG4gICAgICAgICAgQ29uZGl0aW9uOiB7XG4gICAgICAgICAgICBCb29sOiB7XG4gICAgICAgICAgICAgICdlbGFzdGljZmlsZXN5c3RlbTpBY2Nlc3NlZFZpYU1vdW50VGFyZ2V0JzogJ3RydWUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgRWZmZWN0OiAnQWxsb3cnLFxuICAgICAgICAgIFByaW5jaXBhbDoge1xuICAgICAgICAgICAgQVdTOiAnYXJuOmF3czppYW06OjExMTEyMjIyMzMzMzpyb2xlL1Rlc3RpbmdfUm9sZTInLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgQWN0aW9uOiBbXG4gICAgICAgICAgICAnZWxhc3RpY2ZpbGVzeXN0ZW06Q2xpZW50TW91bnQnLFxuICAgICAgICAgICAgJ2VsYXN0aWNmaWxlc3lzdGVtOkNsaWVudFdyaXRlJyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIFJlc291cmNlOiAnYXJuOmF3czplbGFzdGljZmlsZXN5c3RlbTp1cy1lYXN0LTI6MTExMTIyMjIzMzMzOmZpbGUtc3lzdGVtL2ZzLTEyMzRhYmNkJyxcbiAgICAgICAgICBDb25kaXRpb246IHtcbiAgICAgICAgICAgIEJvb2w6IHtcbiAgICAgICAgICAgICAgJ2VsYXN0aWNmaWxlc3lzdGVtOkFjY2Vzc2VkVmlhTW91bnRUYXJnZXQnOiAndHJ1ZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ2ltcG9ydGVkIGZpbGUgc3lzdGVtIGNhbiBub3QgYWRkIHN0YXRlbWVudHMgdG8gZmlsZSBzeXN0ZW0gcG9saWN5JywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGNvbnN0IHN0YXRlbWVudCA9IG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHtcbiAgICBhY3Rpb25zOiBbXG4gICAgICAnZWxhc3RpY2ZpbGVzeXN0ZW06Q2xpZW50TW91bnQnLFxuICAgIF0sXG4gICAgcHJpbmNpcGFsczogW25ldyBpYW0uQXJuUHJpbmNpcGFsKCdhcm46YXdzOmlhbTo6MTExMTIyMjIzMzMzOnJvbGUvVGVzdGluZ19Sb2xlJyldLFxuICAgIHJlc291cmNlczogWydhcm46YXdzOmVsYXN0aWNmaWxlc3lzdGVtOnVzLWVhc3QtMjoxMTExMjIyMjMzMzM6ZmlsZS1zeXN0ZW0vZnMtMTIzNGFiY2QnXSxcbiAgICBjb25kaXRpb25zOiB7XG4gICAgICBCb29sOiB7XG4gICAgICAgICdlbGFzdGljZmlsZXN5c3RlbTpBY2Nlc3NlZFZpYU1vdW50VGFyZ2V0JzogJ3RydWUnLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBmaWxlU3lzdGVtID0gbmV3IEZpbGVTeXN0ZW0oc3RhY2ssICdGaWxlU3lzdGVtJywgeyB2cGMgfSk7XG4gIGNvbnN0IGltcG9ydGVkRmlsZVN5c3RlbSA9IEZpbGVTeXN0ZW0uZnJvbUZpbGVTeXN0ZW1BdHRyaWJ1dGVzKHN0YWNrLCAnSW1wb3J0ZWRGaWxlU3lzdGVtJywge1xuICAgIHNlY3VyaXR5R3JvdXA6IGZpbGVTeXN0ZW0uY29ubmVjdGlvbnMuc2VjdXJpdHlHcm91cHNbMF0sXG4gICAgZmlsZVN5c3RlbUFybjogZmlsZVN5c3RlbS5maWxlU3lzdGVtQXJuLFxuICB9KTtcbiAgY29uc3QgZmlsZVN5c3RlbVJlc3VsdCA9IGZpbGVTeXN0ZW0uYWRkVG9SZXNvdXJjZVBvbGljeShzdGF0ZW1lbnQpO1xuICBjb25zdCBpbXBvcnRlZEZpbGVTeXN0ZW1SZXN1bHQgPSBpbXBvcnRlZEZpbGVTeXN0ZW0uYWRkVG9SZXNvdXJjZVBvbGljeShzdGF0ZW1lbnQpO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KGZpbGVTeXN0ZW1SZXN1bHQpLnRvU3RyaWN0RXF1YWwoe1xuICAgIHN0YXRlbWVudEFkZGVkOiB0cnVlLFxuICAgIHBvbGljeURlcGVuZGFibGU6IGZpbGVTeXN0ZW0sXG4gIH0pO1xuICBleHBlY3QoaW1wb3J0ZWRGaWxlU3lzdGVtUmVzdWx0KS50b1N0cmljdEVxdWFsKHtcbiAgICBzdGF0ZW1lbnRBZGRlZDogZmFsc2UsXG4gIH0pO1xufSk7Il19