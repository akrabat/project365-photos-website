"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/* eslint-disable jest/expect-expect */
const assertions_1 = require("../../assertions");
const acm = require("../../aws-certificatemanager");
const aws_cloudwatch_1 = require("../../aws-cloudwatch");
const aws_ec2_1 = require("../../aws-ec2");
const iam = require("../../aws-iam");
const kms = require("../../aws-kms");
const logs = require("../../aws-logs");
const route53 = require("../../aws-route53");
const core_1 = require("../../core");
const jest_each_1 = require("jest-each");
const lib_1 = require("../lib");
let app;
let stack;
beforeEach(() => {
    app = new core_1.App();
    stack = new core_1.Stack(app, 'Stack', {
        env: { account: '1234', region: 'testregion' },
    });
    jest.resetAllMocks();
});
const readActions = ['ESHttpGet', 'ESHttpHead'];
const writeActions = ['ESHttpDelete', 'ESHttpPost', 'ESHttpPut', 'ESHttpPatch'];
const readWriteActions = [
    ...readActions,
    ...writeActions,
];
const testedOpenSearchVersions = [
    lib_1.EngineVersion.OPENSEARCH_1_0,
    lib_1.EngineVersion.OPENSEARCH_1_1,
    lib_1.EngineVersion.OPENSEARCH_1_2,
    lib_1.EngineVersion.OPENSEARCH_1_3,
    lib_1.EngineVersion.OPENSEARCH_2_3,
];
(0, jest_each_1.default)(testedOpenSearchVersions).test('connections throws if domain is not placed inside a vpc', (engineVersion) => {
    expect(() => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
        }).connections;
    }).toThrowError("Connections are only available on VPC enabled domains. Use the 'vpc' property to place a domain inside a VPC");
});
(0, jest_each_1.default)(testedOpenSearchVersions).test('subnets and security groups can be provided when vpc is used', (engineVersion) => {
    const vpc = new aws_ec2_1.Vpc(stack, 'Vpc');
    const securityGroup = new aws_ec2_1.SecurityGroup(stack, 'CustomSecurityGroup', {
        vpc,
    });
    const domain = new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
        vpc,
        vpcSubnets: [{ subnets: [vpc.privateSubnets[0]] }],
        securityGroups: [securityGroup],
    });
    expect(domain.connections.securityGroups[0].securityGroupId).toEqual(securityGroup.securityGroupId);
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
        VPCOptions: {
            SecurityGroupIds: [
                {
                    'Fn::GetAtt': [
                        'CustomSecurityGroupE5E500E5',
                        'GroupId',
                    ],
                },
            ],
            SubnetIds: [
                {
                    Ref: 'VpcPrivateSubnet1Subnet536B997A',
                },
            ],
        },
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).test('default subnets and security group when vpc is used', (engineVersion) => {
    const vpc = new aws_ec2_1.Vpc(stack, 'Vpc');
    const domain = new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
        vpc,
    });
    expect(stack.resolve(domain.connections.securityGroups[0].securityGroupId)).toEqual({ 'Fn::GetAtt': ['DomainSecurityGroup48AA5FD6', 'GroupId'] });
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
        VPCOptions: {
            SecurityGroupIds: [
                {
                    'Fn::GetAtt': [
                        'DomainSecurityGroup48AA5FD6',
                        'GroupId',
                    ],
                },
            ],
            SubnetIds: [
                {
                    Ref: 'VpcPrivateSubnet1Subnet536B997A',
                },
                {
                    Ref: 'VpcPrivateSubnet2Subnet3788AAA1',
                },
                {
                    Ref: 'VpcPrivateSubnet3SubnetF258B56E',
                },
            ],
        },
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).test('connections has no default port if enforceHttps is false', (engineVersion) => {
    const vpc = new aws_ec2_1.Vpc(stack, 'Vpc');
    const domain = new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
        vpc,
        enforceHttps: false,
    });
    expect(domain.connections.defaultPort).toBeUndefined();
});
(0, jest_each_1.default)(testedOpenSearchVersions).test('connections has default port 443 if enforceHttps is true', (engineVersion) => {
    const vpc = new aws_ec2_1.Vpc(stack, 'Vpc');
    const domain = new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
        vpc,
        enforceHttps: true,
    });
    expect(domain.connections.defaultPort).toEqual(aws_ec2_1.Port.tcp(443));
});
(0, jest_each_1.default)(testedOpenSearchVersions).test('default removalpolicy is retain', (engineVersion) => {
    new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
    });
    assertions_1.Template.fromStack(stack).hasResource('AWS::OpenSearchService::Domain', {
        DeletionPolicy: 'Retain',
    });
});
(0, jest_each_1.default)([testedOpenSearchVersions]).test('grants kms permissions if needed', (engineVersion) => {
    const key = new kms.Key(stack, 'Key');
    new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
        encryptionAtRest: {
            kmsKey: key,
        },
        // so that the access policy custom resource will be used.
        useUnsignedBasicAuth: true,
    });
    const expectedPolicy = {
        Statement: [
            {
                Action: [
                    'kms:List*',
                    'kms:Describe*',
                    'kms:CreateGrant',
                ],
                Effect: 'Allow',
                Resource: {
                    'Fn::GetAtt': [
                        'Key961B73FD',
                        'Arn',
                    ],
                },
            },
        ],
        Version: '2012-10-17',
    };
    const resources = assertions_1.Template.fromStack(stack).toJSON().Resources;
    expect(resources.AWS679f53fac002430cb0da5b7982bd2287ServiceRoleDefaultPolicyD28E1A5E.Properties.PolicyDocument).toStrictEqual(expectedPolicy);
});
(0, jest_each_1.default)([
    [lib_1.EngineVersion.OPENSEARCH_1_0, 'OpenSearch_1.0'],
    [lib_1.EngineVersion.OPENSEARCH_1_1, 'OpenSearch_1.1'],
    [lib_1.EngineVersion.OPENSEARCH_1_2, 'OpenSearch_1.2'],
    [lib_1.EngineVersion.OPENSEARCH_1_3, 'OpenSearch_1.3'],
    [lib_1.EngineVersion.OPENSEARCH_2_3, 'OpenSearch_2.3'],
]).test('minimal example renders correctly', (engineVersion, expectedCfVersion) => {
    new lib_1.Domain(stack, 'Domain', { version: engineVersion });
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
        EBSOptions: {
            EBSEnabled: true,
            VolumeSize: 10,
            VolumeType: 'gp2',
        },
        ClusterConfig: {
            DedicatedMasterEnabled: false,
            InstanceCount: 1,
            InstanceType: 'r5.large.search',
            ZoneAwarenessEnabled: false,
        },
        EngineVersion: expectedCfVersion,
        EncryptionAtRestOptions: {
            Enabled: false,
        },
        LogPublishingOptions: {
            AUDIT_LOGS: assertions_1.Match.absent(),
            ES_APPLICATION_LOGS: assertions_1.Match.absent(),
            SEARCH_SLOW_LOGS: assertions_1.Match.absent(),
            INDEX_SLOW_LOGS: assertions_1.Match.absent(),
        },
        NodeToNodeEncryptionOptions: {
            Enabled: false,
        },
    });
});
(0, jest_each_1.default)([testedOpenSearchVersions]).test('can enable version upgrade update policy', (engineVersion) => {
    new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
        enableVersionUpgrade: true,
    });
    assertions_1.Template.fromStack(stack).hasResource('AWS::OpenSearchService::Domain', {
        UpdatePolicy: {
            EnableVersionUpgrade: true,
        },
    });
});
(0, jest_each_1.default)([testedOpenSearchVersions]).test('can set a self-referencing custom policy', (engineVersion) => {
    const domain = new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
    });
    domain.addAccessPolicies(new iam.PolicyStatement({
        actions: ['es:ESHttpPost', 'es:ESHttpPut'],
        effect: iam.Effect.ALLOW,
        principals: [new iam.AccountPrincipal('5678')],
        resources: [domain.domainArn, `${domain.domainArn}/*`],
    }));
    const expectedPolicy = {
        'Fn::Join': [
            '',
            [
                '{"action":"updateDomainConfig","service":"OpenSearch","parameters":{"DomainName":"',
                {
                    Ref: 'Domain66AC69E0',
                },
                '","AccessPolicies":"{\\"Statement\\":[{\\"Action\\":[\\"es:ESHttpPost\\",\\"es:ESHttpPut\\"],\\"Effect\\":\\"Allow\\",\\"Principal\\":{\\"AWS\\":\\"arn:',
                {
                    Ref: 'AWS::Partition',
                },
                ':iam::5678:root\\"},\\"Resource\\":[\\"',
                {
                    'Fn::GetAtt': [
                        'Domain66AC69E0',
                        'Arn',
                    ],
                },
                '\\",\\"',
                {
                    'Fn::GetAtt': [
                        'Domain66AC69E0',
                        'Arn',
                    ],
                },
                '/*\\"]}],\\"Version\\":\\"2012-10-17\\"}"},"outputPaths":["DomainConfig.AccessPolicies"],"physicalResourceId":{"id":"',
                {
                    Ref: 'Domain66AC69E0',
                },
                'AccessPolicy"}}',
            ],
        ],
    };
    assertions_1.Template.fromStack(stack).hasResourceProperties('Custom::OpenSearchAccessPolicy', {
        ServiceToken: {
            'Fn::GetAtt': [
                'AWS679f53fac002430cb0da5b7982bd22872D164C4C',
                'Arn',
            ],
        },
        Create: expectedPolicy,
        Update: expectedPolicy,
    });
});
(0, jest_each_1.default)([testedOpenSearchVersions]).describe('UltraWarm instances', (engineVersion) => {
    test('can enable UltraWarm instances', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            capacity: {
                masterNodes: 2,
                warmNodes: 2,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            ClusterConfig: {
                DedicatedMasterEnabled: true,
                WarmEnabled: true,
                WarmCount: 2,
                WarmType: 'ultrawarm1.medium.search',
            },
        });
    });
    test('can enable UltraWarm instances with specific instance type', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            capacity: {
                masterNodes: 2,
                warmNodes: 2,
                warmInstanceType: 'ultrawarm1.large.search',
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            ClusterConfig: {
                DedicatedMasterEnabled: true,
                WarmEnabled: true,
                WarmCount: 2,
                WarmType: 'ultrawarm1.large.search',
            },
        });
    });
});
(0, jest_each_1.default)([testedOpenSearchVersions]).test('can use tokens in capacity configuration', (engineVersion) => {
    new lib_1.Domain(stack, 'Domain', {
        version: engineVersion,
        capacity: {
            dataNodeInstanceType: core_1.Token.asString({ Ref: 'dataNodeInstanceType' }),
            dataNodes: core_1.Token.asNumber({ Ref: 'dataNodes' }),
            masterNodeInstanceType: core_1.Token.asString({ Ref: 'masterNodeInstanceType' }),
            masterNodes: core_1.Token.asNumber({ Ref: 'masterNodes' }),
            warmInstanceType: core_1.Token.asString({ Ref: 'warmInstanceType' }),
            warmNodes: core_1.Token.asNumber({ Ref: 'warmNodes' }),
        },
    });
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
        ClusterConfig: {
            InstanceCount: {
                Ref: 'dataNodes',
            },
            InstanceType: {
                Ref: 'dataNodeInstanceType',
            },
            DedicatedMasterEnabled: true,
            DedicatedMasterCount: {
                Ref: 'masterNodes',
            },
            DedicatedMasterType: {
                Ref: 'masterNodeInstanceType',
            },
            WarmEnabled: true,
            WarmCount: {
                Ref: 'warmNodes',
            },
            WarmType: {
                Ref: 'warmInstanceType',
            },
        },
    });
});
(0, jest_each_1.default)([testedOpenSearchVersions]).describe('log groups', (engineVersion) => {
    test('slowSearchLogEnabled should create a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                slowSearchLogEnabled: true,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                SEARCH_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'DomainSlowSearchLogs5B35A97A',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
                ES_APPLICATION_LOGS: assertions_1.Match.absent(),
                INDEX_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('slowIndexLogEnabled should create a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                slowIndexLogEnabled: true,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                INDEX_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'DomainSlowIndexLogsFE2F1061',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
                ES_APPLICATION_LOGS: assertions_1.Match.absent(),
                SEARCH_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('appLogEnabled should create a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                appLogEnabled: true,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                ES_APPLICATION_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'DomainAppLogs21698C1B',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
                SEARCH_SLOW_LOGS: assertions_1.Match.absent(),
                INDEX_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('auditLogEnabled should create a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                auditLogEnabled: true,
            },
            fineGrainedAccessControl: {
                masterUserName: 'username',
            },
            nodeToNodeEncryption: true,
            encryptionAtRest: {
                enabled: true,
            },
            enforceHttps: true,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                AUDIT_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'DomainAuditLogs608E0FA6',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                ES_APPLICATION_LOGS: assertions_1.Match.absent(),
                SEARCH_SLOW_LOGS: assertions_1.Match.absent(),
                INDEX_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('two domains with logging enabled can be created in same stack', () => {
        new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            logging: {
                appLogEnabled: true,
                slowSearchLogEnabled: true,
                slowIndexLogEnabled: true,
            },
        });
        new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            logging: {
                appLogEnabled: true,
                slowSearchLogEnabled: true,
                slowIndexLogEnabled: true,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                ES_APPLICATION_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'Domain1AppLogs6E8D1D67',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                SEARCH_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'Domain1SlowSearchLogs8F3B0506',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                INDEX_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'Domain1SlowIndexLogs9354D098',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                ES_APPLICATION_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'Domain2AppLogs810876E2',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                SEARCH_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'Domain2SlowSearchLogs0C75F64B',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                INDEX_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'Domain2SlowIndexLogs0CB900D0',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('log group policy is uniquely named for each domain', () => {
        new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            logging: {
                appLogEnabled: true,
            },
        });
        new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            logging: {
                appLogEnabled: true,
            },
        });
        // Domain1
        assertions_1.Template.fromStack(stack).hasResourceProperties('Custom::CloudwatchLogResourcePolicy', {
            Create: {
                'Fn::Join': [
                    '',
                    [
                        '{"service":"CloudWatchLogs","action":"putResourcePolicy","parameters":{"policyName":"ESLogPolicyc836fd92f07ec41eb70c2f6f08dc4b43cfb7c25391","policyDocument":"{\\"Statement\\":[{\\"Action\\":[\\"logs:PutLogEvents\\",\\"logs:CreateLogStream\\"],\\"Effect\\":\\"Allow\\",\\"Principal\\":{\\"Service\\":\\"es.amazonaws.com\\"},\\"Resource\\":\\"',
                        {
                            'Fn::GetAtt': [
                                'Domain1AppLogs6E8D1D67',
                                'Arn',
                            ],
                        },
                        '\\"}],\\"Version\\":\\"2012-10-17\\"}"},"physicalResourceId":{"id":"ESLogGroupPolicyc836fd92f07ec41eb70c2f6f08dc4b43cfb7c25391"}}',
                    ],
                ],
            },
        });
        // Domain2
        assertions_1.Template.fromStack(stack).hasResourceProperties('Custom::CloudwatchLogResourcePolicy', {
            Create: {
                'Fn::Join': [
                    '',
                    [
                        '{"service":"CloudWatchLogs","action":"putResourcePolicy","parameters":{"policyName":"ESLogPolicyc8f05f015be3baf6ec1ee06cd1ee5cc8706ebbe5b2","policyDocument":"{\\"Statement\\":[{\\"Action\\":[\\"logs:PutLogEvents\\",\\"logs:CreateLogStream\\"],\\"Effect\\":\\"Allow\\",\\"Principal\\":{\\"Service\\":\\"es.amazonaws.com\\"},\\"Resource\\":\\"',
                        {
                            'Fn::GetAtt': [
                                'Domain2AppLogs810876E2',
                                'Arn',
                            ],
                        },
                        '\\"}],\\"Version\\":\\"2012-10-17\\"}"},"physicalResourceId":{"id":"ESLogGroupPolicyc8f05f015be3baf6ec1ee06cd1ee5cc8706ebbe5b2"}}',
                    ],
                ],
            },
        });
    });
    test('enabling audit logs throws without fine grained access control enabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                auditLogEnabled: true,
            },
        })).toThrow(/Fine-grained access control is required when audit logs publishing is enabled\./);
    });
    test('slowSearchLogGroup should use a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                slowSearchLogEnabled: true,
                slowSearchLogGroup: new logs.LogGroup(stack, 'SlowSearchLogs', {
                    retention: logs.RetentionDays.THREE_MONTHS,
                }),
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                SEARCH_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'SlowSearchLogsE00DC2E7',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
                ES_APPLICATION_LOGS: assertions_1.Match.absent(),
                INDEX_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('slowIndexLogEnabled should use a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                slowIndexLogEnabled: true,
                slowIndexLogGroup: new logs.LogGroup(stack, 'SlowIndexLogs', {
                    retention: logs.RetentionDays.THREE_MONTHS,
                }),
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                INDEX_SLOW_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'SlowIndexLogsAD49DED0',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
                ES_APPLICATION_LOGS: assertions_1.Match.absent(),
                SEARCH_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('appLogGroup should use a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            logging: {
                appLogEnabled: true,
                appLogGroup: new logs.LogGroup(stack, 'AppLogs', {
                    retention: logs.RetentionDays.THREE_MONTHS,
                }),
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                ES_APPLICATION_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'AppLogsC5DF83A6',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                AUDIT_LOGS: assertions_1.Match.absent(),
                SEARCH_SLOW_LOGS: assertions_1.Match.absent(),
                INDEX_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
    test('auditLOgGroup should use a custom log group', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserName: 'username',
            },
            nodeToNodeEncryption: true,
            encryptionAtRest: {
                enabled: true,
            },
            enforceHttps: true,
            logging: {
                auditLogEnabled: true,
                auditLogGroup: new logs.LogGroup(stack, 'AuditLogs', {
                    retention: logs.RetentionDays.THREE_MONTHS,
                }),
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            LogPublishingOptions: {
                AUDIT_LOGS: {
                    CloudWatchLogsLogGroupArn: {
                        'Fn::GetAtt': [
                            'AuditLogsB945E340',
                            'Arn',
                        ],
                    },
                    Enabled: true,
                },
                ES_APPLICATION_LOGS: assertions_1.Match.absent(),
                SEARCH_SLOW_LOGS: assertions_1.Match.absent(),
                INDEX_SLOW_LOGS: assertions_1.Match.absent(),
            },
        });
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('grants', (engineVersion) => {
    test('"grantRead" allows read actions associated with this domain resource', () => {
        testGrant(readActions, (p, d) => d.grantRead(p), engineVersion);
    });
    test('"grantWrite" allows write actions associated with this domain resource', () => {
        testGrant(writeActions, (p, d) => d.grantWrite(p), engineVersion);
    });
    test('"grantReadWrite" allows read and write actions associated with this domain resource', () => {
        testGrant(readWriteActions, (p, d) => d.grantReadWrite(p), engineVersion);
    });
    test('"grantIndexRead" allows read actions associated with an index in this domain resource', () => {
        testGrant(readActions, (p, d) => d.grantIndexRead('my-index', p), engineVersion, false, ['/my-index', '/my-index/*']);
    });
    test('"grantIndexWrite" allows write actions associated with an index in this domain resource', () => {
        testGrant(writeActions, (p, d) => d.grantIndexWrite('my-index', p), engineVersion, false, ['/my-index', '/my-index/*']);
    });
    test('"grantIndexReadWrite" allows read and write actions associated with an index in this domain resource', () => {
        testGrant(readWriteActions, (p, d) => d.grantIndexReadWrite('my-index', p), engineVersion, false, ['/my-index', '/my-index/*']);
    });
    test('"grantPathRead" allows read actions associated with a given path in this domain resource', () => {
        testGrant(readActions, (p, d) => d.grantPathRead('my-index/my-path', p), engineVersion, false, ['/my-index/my-path']);
    });
    test('"grantPathWrite" allows write actions associated with a given path in this domain resource', () => {
        testGrant(writeActions, (p, d) => d.grantPathWrite('my-index/my-path', p), engineVersion, false, ['/my-index/my-path']);
    });
    test('"grantPathReadWrite" allows read and write actions associated with a given path in this domain resource', () => {
        testGrant(readWriteActions, (p, d) => d.grantPathReadWrite('my-index/my-path', p), engineVersion, false, ['/my-index/my-path']);
    });
    test('"grant" for an imported domain', () => {
        const domainEndpoint = 'https://test-domain-2w2x2u3tifly-jcjotrt6f7otem4sqcwbch3c4u.testregion.es.amazonaws.com';
        const domain = lib_1.Domain.fromDomainEndpoint(stack, 'Domain', domainEndpoint);
        const user = new iam.User(stack, 'user');
        domain.grantReadWrite(user);
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Statement: [
                    {
                        Action: [
                            'es:ESHttpGet',
                            'es:ESHttpHead',
                            'es:ESHttpDelete',
                            'es:ESHttpPost',
                            'es:ESHttpPut',
                            'es:ESHttpPatch',
                        ],
                        Effect: 'Allow',
                        Resource: [
                            {
                                'Fn::Join': [
                                    '',
                                    [
                                        'arn:',
                                        {
                                            Ref: 'AWS::Partition',
                                        },
                                        ':es:testregion:1234:domain/test-domain-2w2x2u3tifly',
                                    ],
                                ],
                            },
                            {
                                'Fn::Join': [
                                    '',
                                    [
                                        'arn:',
                                        {
                                            Ref: 'AWS::Partition',
                                        },
                                        ':es:testregion:1234:domain/test-domain-2w2x2u3tifly/*',
                                    ],
                                ],
                            },
                        ],
                    },
                ],
                Version: '2012-10-17',
            },
            PolicyName: 'userDefaultPolicy083DF682',
            Users: [
                {
                    Ref: 'user2C2B57AE',
                },
            ],
        });
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('metrics', (engineVersion) => {
    test('metricClusterStatusRed', () => {
        testMetric((domain) => domain.metricClusterStatusRed(), 'ClusterStatus.red', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricClusterStatusYellow', () => {
        testMetric((domain) => domain.metricClusterStatusYellow(), 'ClusterStatus.yellow', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricFreeStorageSpace', () => {
        testMetric((domain) => domain.metricFreeStorageSpace(), 'FreeStorageSpace', engineVersion, aws_cloudwatch_1.Statistic.MINIMUM);
    });
    test('metricClusterIndexWriteBlocked', () => {
        testMetric((domain) => domain.metricClusterIndexWritesBlocked(), 'ClusterIndexWritesBlocked', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM, core_1.Duration.minutes(1));
    });
    test('metricNodes', () => {
        testMetric((domain) => domain.metricNodes(), 'Nodes', engineVersion, aws_cloudwatch_1.Statistic.MINIMUM, core_1.Duration.hours(1));
    });
    test('metricAutomatedSnapshotFailure', () => {
        testMetric((domain) => domain.metricAutomatedSnapshotFailure(), 'AutomatedSnapshotFailure', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricCPUUtilization', () => {
        testMetric((domain) => domain.metricCPUUtilization(), 'CPUUtilization', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricJVMMemoryPressure', () => {
        testMetric((domain) => domain.metricJVMMemoryPressure(), 'JVMMemoryPressure', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricMasterCPUUtilization', () => {
        testMetric((domain) => domain.metricMasterCPUUtilization(), 'MasterCPUUtilization', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricMasterJVMMemoryPressure', () => {
        testMetric((domain) => domain.metricMasterJVMMemoryPressure(), 'MasterJVMMemoryPressure', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricKMSKeyError', () => {
        testMetric((domain) => domain.metricKMSKeyError(), 'KMSKeyError', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricKMSKeyInaccessible', () => {
        testMetric((domain) => domain.metricKMSKeyInaccessible(), 'KMSKeyInaccessible', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricSearchableDocuments', () => {
        testMetric((domain) => domain.metricSearchableDocuments(), 'SearchableDocuments', engineVersion, aws_cloudwatch_1.Statistic.MAXIMUM);
    });
    test('metricSearchLatency', () => {
        testMetric((domain) => domain.metricSearchLatency(), 'SearchLatency', engineVersion, 'p99');
    });
    test('metricIndexingLatency', () => {
        testMetric((domain) => domain.metricIndexingLatency(), 'IndexingLatency', engineVersion, 'p99');
    });
});
describe('import', () => {
    test('static fromDomainEndpoint(endpoint) allows importing an external/existing domain', () => {
        const domainName = 'test-domain-2w2x2u3tifly';
        const domainEndpointWithoutHttps = `${domainName}-jcjotrt6f7otem4sqcwbch3c4u.testregion.es.amazonaws.com`;
        const domainEndpoint = `https://${domainEndpointWithoutHttps}`;
        const imported = lib_1.Domain.fromDomainEndpoint(stack, 'Domain', domainEndpoint);
        expect(imported.domainName).toEqual(domainName);
        expect(imported.domainArn).toMatch(RegExp(`es:testregion:1234:domain/${domainName}$`));
        expect(imported.domainEndpoint).toEqual(domainEndpointWithoutHttps);
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::OpenSearchService::Domain', 0);
    });
    test('static fromDomainAttributes(attributes) allows importing an external/existing domain', () => {
        const domainName = 'test-domain-2w2x2u3tifly';
        const domainArn = `arn:aws:es:testregion:1234:domain/${domainName}`;
        const domainEndpointWithoutHttps = `${domainName}-jcjotrt6f7otem4sqcwbch3c4u.testregion.es.amazonaws.com`;
        const domainEndpoint = `https://${domainEndpointWithoutHttps}`;
        const imported = lib_1.Domain.fromDomainAttributes(stack, 'Domain', {
            domainArn,
            domainEndpoint,
        });
        expect(imported.domainName).toEqual(domainName);
        expect(imported.domainArn).toEqual(domainArn);
        expect(imported.domainEndpoint).toEqual(domainEndpointWithoutHttps);
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::OpenSearchService::Domain', 0);
    });
    test('static fromDomainAttributes(attributes) allows importing with token arn and endpoint', () => {
        const domainArn = new core_1.CfnParameter(stack, 'domainArn', { type: 'String' }).valueAsString;
        const domainEndpoint = new core_1.CfnParameter(stack, 'domainEndpoint', { type: 'String' }).valueAsString;
        const imported = lib_1.Domain.fromDomainAttributes(stack, 'Domain', {
            domainArn,
            domainEndpoint,
        });
        const expectedDomainName = {
            'Fn::Select': [
                1,
                {
                    'Fn::Split': [
                        '/',
                        {
                            'Fn::Select': [
                                5,
                                {
                                    'Fn::Split': [
                                        ':',
                                        {
                                            Ref: 'domainArn',
                                        },
                                    ],
                                },
                            ],
                        },
                    ],
                },
            ],
        };
        expect(stack.resolve(imported.domainName)).toEqual(expectedDomainName);
        expect(imported.domainArn).toEqual(domainArn);
        expect(imported.domainEndpoint).toEqual(domainEndpoint);
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::OpenSearchService::Domain', 0);
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('advanced security options', (engineVersion) => {
    const masterUserArn = 'arn:aws:iam::123456789012:user/JohnDoe';
    const masterUserName = 'JohnDoe';
    const password = 'password';
    const masterUserPassword = core_1.SecretValue.unsafePlainText(password);
    test('enable fine-grained access control with a master user ARN', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserArn,
            },
            encryptionAtRest: {
                enabled: true,
            },
            nodeToNodeEncryption: true,
            enforceHttps: true,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedSecurityOptions: {
                Enabled: true,
                InternalUserDatabaseEnabled: false,
                MasterUserOptions: {
                    MasterUserARN: masterUserArn,
                },
            },
            EncryptionAtRestOptions: {
                Enabled: true,
            },
            NodeToNodeEncryptionOptions: {
                Enabled: true,
            },
            DomainEndpointOptions: {
                EnforceHTTPS: true,
            },
        });
    });
    test('enable fine-grained access control with a master user name and password', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserName,
                masterUserPassword,
            },
            encryptionAtRest: {
                enabled: true,
            },
            nodeToNodeEncryption: true,
            enforceHttps: true,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedSecurityOptions: {
                Enabled: true,
                InternalUserDatabaseEnabled: true,
                MasterUserOptions: {
                    MasterUserName: masterUserName,
                    MasterUserPassword: password,
                },
            },
            EncryptionAtRestOptions: {
                Enabled: true,
            },
            NodeToNodeEncryptionOptions: {
                Enabled: true,
            },
            DomainEndpointOptions: {
                EnforceHTTPS: true,
            },
        });
    });
    test('enable fine-grained access control with a master user name and dynamically generated password', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserName,
            },
            encryptionAtRest: {
                enabled: true,
            },
            nodeToNodeEncryption: true,
            enforceHttps: true,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedSecurityOptions: {
                Enabled: true,
                InternalUserDatabaseEnabled: true,
                MasterUserOptions: {
                    MasterUserName: masterUserName,
                    MasterUserPassword: {
                        'Fn::Join': [
                            '',
                            [
                                '{{resolve:secretsmanager:',
                                {
                                    Ref: 'DomainMasterUserBFAFA7D9',
                                },
                                ':SecretString:password::}}',
                            ],
                        ],
                    },
                },
            },
            EncryptionAtRestOptions: {
                Enabled: true,
            },
            NodeToNodeEncryptionOptions: {
                Enabled: true,
            },
            DomainEndpointOptions: {
                EnforceHTTPS: true,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::SecretsManager::Secret', {
            GenerateSecretString: {
                GenerateStringKey: 'password',
            },
        });
    });
    test('enabling fine-grained access control throws with Elasticsearch version < 6.7', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: lib_1.EngineVersion.ELASTICSEARCH_6_5,
            fineGrainedAccessControl: {
                masterUserArn,
            },
            encryptionAtRest: {
                enabled: true,
            },
            nodeToNodeEncryption: true,
            enforceHttps: true,
        })).toThrow(/Fine-grained access control requires Elasticsearch version 6\.7 or later or OpenSearch version 1\.0 or later/);
    });
    test('enabling fine-grained access control throws without node-to-node encryption enabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserArn,
            },
            encryptionAtRest: {
                enabled: true,
            },
            nodeToNodeEncryption: false,
            enforceHttps: true,
        })).toThrow(/Node-to-node encryption is required when fine-grained access control is enabled/);
    });
    test('enabling fine-grained access control throws without encryption-at-rest enabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserArn,
            },
            encryptionAtRest: {
                enabled: false,
            },
            nodeToNodeEncryption: true,
            enforceHttps: true,
        })).toThrow(/Encryption-at-rest is required when fine-grained access control is enabled/);
    });
    test('enabling fine-grained access control throws without enforceHttps enabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserArn,
            },
            encryptionAtRest: {
                enabled: true,
            },
            nodeToNodeEncryption: true,
            enforceHttps: false,
        })).toThrow(/Enforce HTTPS is required when fine-grained access control is enabled/);
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('custom endpoints', (engineVersion) => {
    const customDomainName = 'search.example.com';
    test('custom domain without hosted zone and default cert', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            nodeToNodeEncryption: true,
            enforceHttps: true,
            customEndpoint: {
                domainName: customDomainName,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            DomainEndpointOptions: {
                EnforceHTTPS: true,
                CustomEndpointEnabled: true,
                CustomEndpoint: customDomainName,
                CustomEndpointCertificateArn: {
                    Ref: 'DomainCustomEndpointCertificateD080A69E', // Auto-generated certificate
                },
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::CertificateManager::Certificate', {
            DomainName: customDomainName,
            ValidationMethod: 'EMAIL',
        });
    });
    test('custom domain with hosted zone and default cert', () => {
        const zone = new route53.HostedZone(stack, 'DummyZone', { zoneName: 'example.com' });
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            nodeToNodeEncryption: true,
            enforceHttps: true,
            customEndpoint: {
                domainName: customDomainName,
                hostedZone: zone,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            DomainEndpointOptions: {
                EnforceHTTPS: true,
                CustomEndpointEnabled: true,
                CustomEndpoint: customDomainName,
                CustomEndpointCertificateArn: {
                    Ref: 'DomainCustomEndpointCertificateD080A69E', // Auto-generated certificate
                },
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::CertificateManager::Certificate', {
            DomainName: customDomainName,
            DomainValidationOptions: [
                {
                    DomainName: customDomainName,
                    HostedZoneId: {
                        Ref: 'DummyZone03E0FE81',
                    },
                },
            ],
            ValidationMethod: 'DNS',
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Route53::RecordSet', {
            Name: 'search.example.com.',
            Type: 'CNAME',
            HostedZoneId: {
                Ref: 'DummyZone03E0FE81',
            },
            ResourceRecords: [
                {
                    'Fn::GetAtt': [
                        'Domain66AC69E0',
                        'DomainEndpoint',
                    ],
                },
            ],
        });
    });
    test('custom domain with hosted zone and given cert', () => {
        const zone = new route53.HostedZone(stack, 'DummyZone', {
            zoneName: 'example.com',
        });
        const certificate = new acm.Certificate(stack, 'DummyCert', {
            domainName: customDomainName,
        });
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            nodeToNodeEncryption: true,
            enforceHttps: true,
            customEndpoint: {
                domainName: customDomainName,
                hostedZone: zone,
                certificate,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            DomainEndpointOptions: {
                EnforceHTTPS: true,
                CustomEndpointEnabled: true,
                CustomEndpoint: customDomainName,
                CustomEndpointCertificateArn: {
                    Ref: 'DummyCertFA37670B',
                },
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::Route53::RecordSet', {
            Name: 'search.example.com.',
            Type: 'CNAME',
            HostedZoneId: {
                Ref: 'DummyZone03E0FE81',
            },
            ResourceRecords: [
                {
                    'Fn::GetAtt': [
                        'Domain66AC69E0',
                        'DomainEndpoint',
                    ],
                },
            ],
        });
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('custom error responses', (engineVersion) => {
    test('error when availabilityZoneCount does not match vpcOptions.subnets length', () => {
        const vpc = new aws_ec2_1.Vpc(stack, 'Vpc', {
            maxAzs: 1,
        });
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            zoneAwareness: {
                enabled: true,
                availabilityZoneCount: 2,
            },
            vpc,
        })).toThrow(/you need to provide a subnet for each AZ you are using/);
    });
    test('Imported VPC with subnets that are still pending lookup won\'t throw Az count mismatch', () => {
        const vpc = aws_ec2_1.Vpc.fromLookup(stack, 'ExampleVpc', {
            vpcId: 'vpc-123',
        });
        let subnets = vpc.selectSubnets({
            subnetType: aws_ec2_1.SubnetType.PRIVATE_WITH_EGRESS,
        });
        new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            vpc,
            vpcSubnets: [subnets],
            zoneAwareness: {
                enabled: true,
                availabilityZoneCount: 3,
            },
        });
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::OpenSearchService::Domain', 1);
    });
    test('error when master, data or Ultra Warm instance types do not end with .search', () => {
        const error = /instance types must end with ".search"/;
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            capacity: {
                masterNodeInstanceType: 'c5.large',
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            capacity: {
                dataNodeInstanceType: 'c5.2xlarge',
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain3', {
            version: engineVersion,
            capacity: {
                warmInstanceType: 'ultrawarm1.medium',
            },
        })).toThrow(error);
    });
    test('error when Ultra Warm instance types do not start with ultrawarm', () => {
        const error = /UltraWarm node instance type must start with "ultrawarm"./;
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            capacity: {
                warmInstanceType: 't3.small.search',
            },
        })).toThrow(error);
    });
    test('error when Elasticsearch version is unsupported/unknown', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.elasticsearch('5.4'),
        })).toThrow('Unknown Elasticsearch version: 5.4');
    });
    test('error when invalid domain name is given', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.OPENSEARCH_1_0,
            domainName: 'InvalidName',
        })).toThrow(/Valid characters are a-z/);
        expect(() => new lib_1.Domain(stack, 'Domain2', {
            version: lib_1.EngineVersion.OPENSEARCH_1_0,
            domainName: 'a'.repeat(29),
        })).toThrow(/It must be between 3 and 28 characters/);
        expect(() => new lib_1.Domain(stack, 'Domain3', {
            version: lib_1.EngineVersion.OPENSEARCH_1_0,
            domainName: '123domain',
        })).toThrow(/It must start with a lowercase letter/);
    });
    test('error when error log publishing is enabled for Elasticsearch version < 5.1', () => {
        const error = /Error logs publishing requires Elasticsearch version 5.1 or later or OpenSearch version 1.0 or later/;
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.ELASTICSEARCH_2_3,
            logging: {
                appLogEnabled: true,
            },
        })).toThrow(error);
    });
    test('error when encryption at rest is enabled for Elasticsearch version < 5.1', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.ELASTICSEARCH_2_3,
            encryptionAtRest: {
                enabled: true,
            },
        })).toThrow(/Encryption of data at rest requires Elasticsearch version 5.1 or later or OpenSearch version 1.0 or later/);
    });
    test('error when cognito for OpenSearch Dashboards is enabled for elasticsearch version < 5.1', () => {
        const user = new iam.User(stack, 'user');
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.ELASTICSEARCH_2_3,
            cognitoDashboardsAuth: {
                identityPoolId: 'test-identity-pool-id',
                role: new iam.Role(stack, 'Role', { assumedBy: user }),
                userPoolId: 'test-user-pool-id',
            },
        })).toThrow(/Cognito authentication for OpenSearch Dashboards requires Elasticsearch version 5.1 or later or OpenSearch version 1.0 or later/);
    });
    test('error when C5, I3, M5, or R5 instance types are specified for Elasticsearch version < 5.1', () => {
        const error = /C5, I3, M5, and R5 instance types require Elasticsearch version 5.1 or later or OpenSearch version 1.0 or later/;
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.ELASTICSEARCH_2_3,
            capacity: {
                masterNodeInstanceType: 'c5.medium.search',
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain2', {
            version: lib_1.EngineVersion.ELASTICSEARCH_1_5,
            capacity: {
                dataNodeInstanceType: 'i3.2xlarge.search',
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain3', {
            version: lib_1.EngineVersion.ELASTICSEARCH_1_5,
            capacity: {
                dataNodeInstanceType: 'm5.2xlarge.search',
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain4', {
            version: lib_1.EngineVersion.ELASTICSEARCH_1_5,
            capacity: {
                masterNodeInstanceType: 'r5.2xlarge.search',
            },
        })).toThrow(error);
    });
    test('error when node to node encryption is enabled for Elasticsearch version < 6.0', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.ELASTICSEARCH_5_6,
            nodeToNodeEncryption: true,
        })).toThrow(/Node-to-node encryption requires Elasticsearch version 6.0 or later or OpenSearch version 1.0 or later/);
    });
    test('error when i3 or r6g instance types are specified with EBS enabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            capacity: {
                dataNodeInstanceType: 'i3.2xlarge.search',
            },
            ebs: {
                volumeSize: 100,
                volumeType: aws_ec2_1.EbsDeviceVolumeType.GENERAL_PURPOSE_SSD,
            },
        })).toThrow(/I3 and R6GD instance types do not support EBS storage volumes/);
        expect(() => new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            capacity: {
                dataNodeInstanceType: 'r6gd.large.search',
            },
            ebs: {
                volumeSize: 100,
                volumeType: aws_ec2_1.EbsDeviceVolumeType.GENERAL_PURPOSE_SSD,
            },
        })).toThrow(/I3 and R6GD instance types do not support EBS storage volumes/);
    });
    test('error when m3, r3, or t2 instance types are specified with encryption at rest enabled', () => {
        const error = /M3, R3, and T2 instance types do not support encryption of data at rest/;
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            capacity: {
                masterNodeInstanceType: 'm3.2xlarge.search',
            },
            encryptionAtRest: {
                enabled: true,
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            capacity: {
                dataNodeInstanceType: 'r3.2xlarge.search',
            },
            encryptionAtRest: {
                enabled: true,
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain3', {
            version: engineVersion,
            capacity: {
                masterNodeInstanceType: 't2.2xlarge.search',
            },
            encryptionAtRest: {
                enabled: true,
            },
        })).toThrow(error);
    });
    test('error when t2.micro is specified with Elasticsearch version > 2.3', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            capacity: {
                masterNodeInstanceType: 't2.micro.search',
            },
        })).toThrow(/t2.micro.search instance type supports only Elasticsearch versions 1.5 and 2.3/);
    });
    test('error when any instance type other than R3, I3 and R6GD are specified without EBS enabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            ebs: {
                enabled: false,
            },
            capacity: {
                masterNodeInstanceType: 'm5.large.search',
            },
        })).toThrow(/EBS volumes are required when using instance types other than r3, i3 or r6gd/);
        expect(() => new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            ebs: {
                enabled: false,
            },
            capacity: {
                dataNodeInstanceType: 'm5.large.search',
            },
        })).toThrow(/EBS volumes are required when using instance types other than r3, i3 or r6gd/);
    });
    test('can use compatible master instance types that does not have local storage when data node type is i3 or r6gd', () => {
        new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            ebs: {
                enabled: false,
            },
            capacity: {
                masterNodeInstanceType: 'c5.2xlarge.search',
                dataNodeInstanceType: 'i3.2xlarge.search',
            },
        });
        new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            ebs: {
                enabled: false,
            },
            capacity: {
                masterNodes: 3,
                masterNodeInstanceType: 'c6g.large.search',
                dataNodeInstanceType: 'r6gd.large.search',
            },
        });
        // both configurations pass synth-time validation
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::OpenSearchService::Domain', 2);
    });
    test('error when availabilityZoneCount is not 2 or 3', () => {
        const vpc = new aws_ec2_1.Vpc(stack, 'Vpc');
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            vpc,
            zoneAwareness: {
                availabilityZoneCount: 4,
            },
        })).toThrow(/Invalid zone awareness configuration; availabilityZoneCount must be 2 or 3/);
    });
    test('error when UltraWarm instance is used with Elasticsearch version < 6.8', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: lib_1.EngineVersion.ELASTICSEARCH_6_7,
            capacity: {
                masterNodes: 1,
                warmNodes: 1,
            },
        })).toThrow(/UltraWarm requires Elasticsearch version 6\.8 or later or OpenSearch version 1.0 or later/);
    });
    test('error when t2 or t3 instance types are specified with UltramWarm enabled', () => {
        const error = /T2 and T3 instance types do not support UltraWarm storage/;
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            capacity: {
                masterNodeInstanceType: 't2.2xlarge.search',
                warmNodes: 1,
            },
        })).toThrow(error);
        expect(() => new lib_1.Domain(stack, 'Domain2', {
            version: engineVersion,
            capacity: {
                masterNodeInstanceType: 't3.2xlarge.search',
                warmNodes: 1,
            },
        })).toThrow(error);
    });
    test('error when UltraWarm instance is used and no dedicated master instance specified', () => {
        expect(() => new lib_1.Domain(stack, 'Domain1', {
            version: engineVersion,
            capacity: {
                warmNodes: 1,
                masterNodes: 0,
            },
        })).toThrow(/Dedicated master node is required when UltraWarm storage is enabled/);
    });
});
test('can specify future version', () => {
    new lib_1.Domain(stack, 'Domain', { version: lib_1.EngineVersion.elasticsearch('8.2') });
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
        EngineVersion: 'Elasticsearch_8.2',
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('unsigned basic auth', (engineVersion) => {
    test('can create a domain with unsigned basic auth', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            useUnsignedBasicAuth: true,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedSecurityOptions: {
                Enabled: true,
                InternalUserDatabaseEnabled: true,
                MasterUserOptions: {
                    MasterUserName: 'admin',
                },
            },
            EncryptionAtRestOptions: {
                Enabled: true,
            },
            NodeToNodeEncryptionOptions: {
                Enabled: true,
            },
            DomainEndpointOptions: {
                EnforceHTTPS: true,
            },
        });
    });
    test('does not overwrite master user ARN configuration', () => {
        const masterUserArn = 'arn:aws:iam::123456789012:user/JohnDoe';
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserArn,
            },
            useUnsignedBasicAuth: true,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedSecurityOptions: {
                Enabled: true,
                InternalUserDatabaseEnabled: false,
                MasterUserOptions: {
                    MasterUserARN: masterUserArn,
                },
            },
            EncryptionAtRestOptions: {
                Enabled: true,
            },
            NodeToNodeEncryptionOptions: {
                Enabled: true,
            },
            DomainEndpointOptions: {
                EnforceHTTPS: true,
            },
        });
    });
    test('does not overwrite master user name and password', () => {
        const masterUserName = 'JohnDoe';
        const password = 'password';
        const masterUserPassword = core_1.SecretValue.unsafePlainText(password);
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            fineGrainedAccessControl: {
                masterUserName,
                masterUserPassword,
            },
            useUnsignedBasicAuth: true,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedSecurityOptions: {
                Enabled: true,
                InternalUserDatabaseEnabled: true,
                MasterUserOptions: {
                    MasterUserName: masterUserName,
                    MasterUserPassword: password,
                },
            },
            EncryptionAtRestOptions: {
                Enabled: true,
            },
            NodeToNodeEncryptionOptions: {
                Enabled: true,
            },
            DomainEndpointOptions: {
                EnforceHTTPS: true,
            },
        });
    });
    test('fails to create a domain with unsigned basic auth when enforce HTTPS is disabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            useUnsignedBasicAuth: true,
            enforceHttps: false,
        })).toThrow(/You cannot disable HTTPS and use unsigned basic auth/);
    });
    test('fails to create a domain with unsigned basic auth when node to node encryption is disabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            useUnsignedBasicAuth: true,
            nodeToNodeEncryption: false,
        })).toThrow(/You cannot disable node to node encryption and use unsigned basic auth/);
    });
    test('fails to create a domain with unsigned basic auth when encryption at rest is disabled', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            useUnsignedBasicAuth: true,
            encryptionAtRest: { enabled: false },
        })).toThrow(/You cannot disable encryption at rest and use unsigned basic auth/);
    });
    test('using unsigned basic auth throws with Elasticsearch < 6.7', () => {
        expect(() => new lib_1.Domain(stack, 'Domain', {
            version: lib_1.EngineVersion.ELASTICSEARCH_6_5,
            useUnsignedBasicAuth: true,
        })).toThrow(/Using unsigned basic auth requires Elasticsearch version 6\.7 or later or OpenSearch version 1.0 or later/);
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('advanced options', (engineVersion) => {
    test('use advanced options', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            advancedOptions: {
                'rest.action.multi.allow_explicit_index': 'true',
                'indices.fielddata.cache.size': '50',
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedOptions: {
                'rest.action.multi.allow_explicit_index': 'true',
                'indices.fielddata.cache.size': '50',
            },
        });
    });
    test('advanced options absent by default', () => {
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            AdvancedOptions: assertions_1.Match.absent(),
        });
    });
});
(0, jest_each_1.default)(testedOpenSearchVersions).describe('cognito dashboards auth', (engineVersion) => {
    test('cognito dashboards auth is not configured by default', () => {
        new lib_1.Domain(stack, 'Domain', { version: engineVersion });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            CognitoOptions: assertions_1.Match.absent(),
        });
    });
    test('cognito dashboards auth can be configured', () => {
        const identityPoolId = 'test-identity-pool-id';
        const userPoolId = 'test-user-pool-id';
        const user = new iam.User(stack, 'testuser');
        const role = new iam.Role(stack, 'testrole', { assumedBy: user });
        new lib_1.Domain(stack, 'Domain', {
            version: engineVersion,
            cognitoDashboardsAuth: {
                role,
                identityPoolId,
                userPoolId,
            },
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::OpenSearchService::Domain', {
            CognitoOptions: {
                Enabled: true,
                IdentityPoolId: identityPoolId,
                RoleArn: {
                    'Fn::GetAtt': [
                        'testroleFAA56B58',
                        'Arn',
                    ],
                },
                UserPoolId: userPoolId,
            },
        });
    });
});
function testGrant(expectedActions, invocation, engineVersion, appliesToDomainRoot = true, paths = ['/*']) {
    const domain = new lib_1.Domain(stack, 'Domain', { version: engineVersion });
    const user = new iam.User(stack, 'user');
    invocation(user, domain);
    const action = expectedActions.length > 1 ? expectedActions.map(a => `es:${a}`) : `es:${expectedActions[0]}`;
    const domainArn = {
        'Fn::GetAtt': [
            'Domain66AC69E0',
            'Arn',
        ],
    };
    const resolvedPaths = paths.map(path => {
        return {
            'Fn::Join': [
                '',
                [
                    domainArn,
                    path,
                ],
            ],
        };
    });
    const resource = appliesToDomainRoot
        ? [domainArn, ...resolvedPaths]
        : resolvedPaths.length > 1
            ? resolvedPaths
            : resolvedPaths[0];
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Policy', {
        PolicyDocument: {
            Statement: [
                {
                    Action: action,
                    Effect: 'Allow',
                    Resource: resource,
                },
            ],
            Version: '2012-10-17',
        },
        PolicyName: 'userDefaultPolicy083DF682',
        Users: [
            {
                Ref: 'user2C2B57AE',
            },
        ],
    });
}
function testMetric(invocation, metricName, engineVersion, statistic = aws_cloudwatch_1.Statistic.SUM, period = core_1.Duration.minutes(5)) {
    const domain = new lib_1.Domain(stack, 'Domain', { version: engineVersion });
    const metric = invocation(domain);
    expect(metric).toMatchObject({
        metricName,
        namespace: 'AWS/ES',
        period,
        statistic,
        dimensions: {
            ClientId: '1234',
        },
    });
    expect(metric.dimensions).toHaveProperty('DomainName');
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9tYWluLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkb21haW4udGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUF1QztBQUN2QyxpREFBbUQ7QUFDbkQsb0RBQW9EO0FBQ3BELHlEQUF5RDtBQUN6RCwyQ0FBMEY7QUFDMUYscUNBQXFDO0FBQ3JDLHFDQUFxQztBQUNyQyx1Q0FBdUM7QUFDdkMsNkNBQTZDO0FBQzdDLHFDQUFvRjtBQUNwRix5Q0FBNkI7QUFDN0IsZ0NBQStDO0FBRS9DLElBQUksR0FBUSxDQUFDO0FBQ2IsSUFBSSxLQUFZLENBQUM7QUFFakIsVUFBVSxDQUFDLEdBQUcsRUFBRTtJQUNkLEdBQUcsR0FBRyxJQUFJLFVBQUcsRUFBRSxDQUFDO0lBQ2hCLEtBQUssR0FBRyxJQUFJLFlBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFO1FBQzlCLEdBQUcsRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRTtLQUMvQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFFSCxNQUFNLFdBQVcsR0FBRyxDQUFDLFdBQVcsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUNoRCxNQUFNLFlBQVksR0FBRyxDQUFDLGNBQWMsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ2hGLE1BQU0sZ0JBQWdCLEdBQUc7SUFDdkIsR0FBRyxXQUFXO0lBQ2QsR0FBRyxZQUFZO0NBQ2hCLENBQUM7QUFFRixNQUFNLHdCQUF3QixHQUFHO0lBQy9CLG1CQUFhLENBQUMsY0FBYztJQUM1QixtQkFBYSxDQUFDLGNBQWM7SUFDNUIsbUJBQWEsQ0FBQyxjQUFjO0lBQzVCLG1CQUFhLENBQUMsY0FBYztJQUM1QixtQkFBYSxDQUFDLGNBQWM7Q0FDN0IsQ0FBQztBQUVGLElBQUEsbUJBQUksRUFBQyx3QkFBd0Is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QUMsTUFBTSxDQUFDLENBQUMsYUFBYSxDQUFDO1FBQzNCLFVBQVU7UUFDVixTQUFTLEVBQUUsUUFBUTtRQUNuQixNQUFNO1FBQ04sU0FBUztRQUNULFVBQVUsRUFBRTtZQUNWLFFBQVEsRUFBRSxNQUFNO1NBQ2pCO0tBQ0YsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDekQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGplc3QvZXhwZWN0LWV4cGVjdCAqL1xuaW1wb3J0IHsgTWF0Y2gsIFRlbXBsYXRlIH0gZnJvbSAnLi4vLi4vYXNzZXJ0aW9ucyc7XG5pbXBvcnQgKiBhcyBhY20gZnJvbSAnLi4vLi4vYXdzLWNlcnRpZmljYXRlbWFuYWdlcic7XG5pbXBvcnQgeyBNZXRyaWMsIFN0YXRpc3RpYyB9IGZyb20gJy4uLy4uL2F3cy1jbG91ZHdhdGNoJztcbmltcG9ydCB7IFZwYywgRWJzRGV2aWNlVm9sdW1lVHlwZSwgUG9ydCwgU2VjdXJpdHlHcm91cCwgU3VibmV0VHlwZSB9IGZyb20gJy4uLy4uL2F3cy1lYzInO1xuaW1wb3J0ICogYXMgaWFtIGZyb20gJy4uLy4uL2F3cy1pYW0nO1xuaW1wb3J0ICogYXMga21zIGZyb20gJy4uLy4uL2F3cy1rbXMnO1xuaW1wb3J0ICogYXMgbG9ncyBmcm9tICcuLi8uLi9hd3MtbG9ncyc7XG5pbXBvcnQgKiBhcyByb3V0ZTUzIGZyb20gJy4uLy4uL2F3cy1yb3V0ZTUzJztcbmltcG9ydCB7IEFwcCwgU3RhY2ssIER1cmF0aW9uLCBTZWNyZXRWYWx1ZSwgQ2ZuUGFyYW1ldGVyLCBUb2tlbiB9IGZyb20gJy4uLy4uL2NvcmUnO1xuaW1wb3J0IGVhY2ggZnJvbSAnamVzdC1lYWNoJztcbmltcG9ydCB7IERvbWFpbiwgRW5naW5lVmVyc2lvbiB9IGZyb20gJy4uL2xpYic7XG5cbmxldCBhcHA6IEFwcDtcbmxldCBzdGFjazogU3RhY2s7XG5cbmJlZm9yZUVhY2goKCkgPT4ge1xuICBhcHAgPSBuZXcgQXBwKCk7XG4gIHN0YWNrID0gbmV3IFN0YWNrKGFwcCwgJ1N0YWNrJywge1xuICAgIGVudjogeyBhY2NvdW50OiAnMTIzNCcsIHJlZ2lvbjogJ3Rlc3RyZWdpb24nIH0sXG4gIH0pO1xuXG4gIGplc3QucmVzZXRBbGxNb2NrcygpO1xufSk7XG5cbmNvbnN0IHJlYWRBY3Rpb25zID0gWydFU0h0dHBHZXQnLCAnRVNIdHRwSGVhZCddO1xuY29uc3Qgd3JpdGVBY3Rpb25zID0gWydFU0h0dHBEZWxldGUnLCAnRVNIdHRwUG9zdCcsICdFU0h0dHBQdXQnLCAnRVNIdHRwUGF0Y2gnXTtcbmNvbnN0IHJlYWRXcml0ZUFjdGlvbnMgPSBbXG4gIC4uLnJlYWRBY3Rpb25zLFxuICAuLi53cml0ZUFjdGlvbnMsXG5dO1xuXG5jb25zdCB0ZXN0ZWRPcGVuU2VhcmNoVmVyc2lvbnMgPSBbXG4gIEVuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8xXzAsXG4gIEVuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8xXzEsXG4gIEVuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8xXzIsXG4gIEVuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8xXzMsXG4gIEVuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8yXzMsXG5dO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykudGVzdCgnY29ubmVjdGlvbnMgdGhyb3dzIGlmIGRvbWFpbiBpcyBub3QgcGxhY2VkIGluc2lkZSBhIHZwYycsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG5cbiAgZXhwZWN0KCgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICB9KS5jb25uZWN0aW9ucztcbiAgfSkudG9UaHJvd0Vycm9yKFwiQ29ubmVjdGlvbnMgYXJlIG9ubHkgYXZhaWxhYmxlIG9uIFZQQyBlbmFibGVkIGRvbWFpbnMuIFVzZSB0aGUgJ3ZwYycgcHJvcGVydHkgdG8gcGxhY2UgYSBkb21haW4gaW5zaWRlIGEgVlBDXCIpO1xufSk7XG5cbmVhY2godGVzdGVkT3BlblNlYXJjaFZlcnNpb25zKS50ZXN0KCdzdWJuZXRzIGFuZCBzZWN1cml0eSBncm91cHMgY2FuIGJlIHByb3ZpZGVkIHdoZW4gdnBjIGlzIHVzZWQnLCAoZW5naW5lVmVyc2lvbikgPT4ge1xuXG4gIGNvbnN0IHZwYyA9IG5ldyBWcGMoc3RhY2ssICdWcGMnKTtcbiAgY29uc3Qgc2VjdXJpdHlHcm91cCA9IG5ldyBTZWN1cml0eUdyb3VwKHN0YWNrLCAnQ3VzdG9tU2VjdXJpdHlHcm91cCcsIHtcbiAgICB2cGMsXG4gIH0pO1xuICBjb25zdCBkb21haW4gPSBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgdnBjLFxuICAgIHZwY1N1Ym5ldHM6IFt7IHN1Ym5ldHM6IFt2cGMucHJpdmF0ZVN1Ym5ldHNbMF1dIH1dLFxuICAgIHNlY3VyaXR5R3JvdXBzOiBbc2VjdXJpdHlHcm91cF0sXG4gIH0pO1xuXG4gIGV4cGVjdChkb21haW4uY29ubmVjdGlvbnMuc2VjdXJpdHlHcm91cHNbMF0uc2VjdXJpdHlHcm91cElkKS50b0VxdWFsKHNlY3VyaXR5R3JvdXAuc2VjdXJpdHlHcm91cElkKTtcbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICBWUENPcHRpb25zOiB7XG4gICAgICBTZWN1cml0eUdyb3VwSWRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICdDdXN0b21TZWN1cml0eUdyb3VwRTVFNTAwRTUnLFxuICAgICAgICAgICAgJ0dyb3VwSWQnLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgU3VibmV0SWRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBSZWY6ICdWcGNQcml2YXRlU3VibmV0MVN1Ym5ldDUzNkI5OTdBJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgfSk7XG5cbn0pO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykudGVzdCgnZGVmYXVsdCBzdWJuZXRzIGFuZCBzZWN1cml0eSBncm91cCB3aGVuIHZwYyBpcyB1c2VkJywgKGVuZ2luZVZlcnNpb24pID0+IHtcblxuICBjb25zdCB2cGMgPSBuZXcgVnBjKHN0YWNrLCAnVnBjJyk7XG4gIGNvbnN0IGRvbWFpbiA9IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICB2cGMsXG4gIH0pO1xuXG4gIGV4cGVjdChzdGFjay5yZXNvbHZlKGRvbWFpbi5jb25uZWN0aW9ucy5zZWN1cml0eUdyb3Vwc1swXS5zZWN1cml0eUdyb3VwSWQpKS50b0VxdWFsKHsgJ0ZuOjpHZXRBdHQnOiBbJ0RvbWFpblNlY3VyaXR5R3JvdXA0OEFBNUZENicsICdHcm91cElkJ10gfSk7XG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgVlBDT3B0aW9uczoge1xuICAgICAgU2VjdXJpdHlHcm91cElkczogW1xuICAgICAgICB7XG4gICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAnRG9tYWluU2VjdXJpdHlHcm91cDQ4QUE1RkQ2JyxcbiAgICAgICAgICAgICdHcm91cElkJyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIFN1Ym5ldElkczogW1xuICAgICAgICB7XG4gICAgICAgICAgUmVmOiAnVnBjUHJpdmF0ZVN1Ym5ldDFTdWJuZXQ1MzZCOTk3QScsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBSZWY6ICdWcGNQcml2YXRlU3VibmV0MlN1Ym5ldDM3ODhBQUExJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIFJlZjogJ1ZwY1ByaXZhdGVTdWJuZXQzU3VibmV0RjI1OEI1NkUnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICB9KTtcblxufSk7XG5cbmVhY2godGVzdGVkT3BlblNlYXJjaFZlcnNpb25zKS50ZXN0KCdjb25uZWN0aW9ucyBoYXMgbm8gZGVmYXVsdCBwb3J0IGlmIGVuZm9yY2VIdHRwcyBpcyBmYWxzZScsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG5cbiAgY29uc3QgdnBjID0gbmV3IFZwYyhzdGFjaywgJ1ZwYycpO1xuICBjb25zdCBkb21haW4gPSBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgdnBjLFxuICAgIGVuZm9yY2VIdHRwczogZmFsc2UsXG4gIH0pO1xuXG4gIGV4cGVjdChkb21haW4uY29ubmVjdGlvbnMuZGVmYXVsdFBvcnQpLnRvQmVVbmRlZmluZWQoKTtcblxufSk7XG5cbmVhY2godGVzdGVkT3BlblNlYXJjaFZlcnNpb25zKS50ZXN0KCdjb25uZWN0aW9ucyBoYXMgZGVmYXVsdCBwb3J0IDQ0MyBpZiBlbmZvcmNlSHR0cHMgaXMgdHJ1ZScsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG5cbiAgY29uc3QgdnBjID0gbmV3IFZwYyhzdGFjaywgJ1ZwYycpO1xuICBjb25zdCBkb21haW4gPSBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgdnBjLFxuICAgIGVuZm9yY2VIdHRwczogdHJ1ZSxcbiAgfSk7XG5cbiAgZXhwZWN0KGRvbWFpbi5jb25uZWN0aW9ucy5kZWZhdWx0UG9ydCkudG9FcXVhbChQb3J0LnRjcCg0NDMpKTtcblxufSk7XG5cbmVhY2godGVzdGVkT3BlblNlYXJjaFZlcnNpb25zKS50ZXN0KCdkZWZhdWx0IHJlbW92YWxwb2xpY3kgaXMgcmV0YWluJywgKGVuZ2luZVZlcnNpb24pID0+IHtcbiAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICB9KTtcblxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgRGVsZXRpb25Qb2xpY3k6ICdSZXRhaW4nLFxuICB9KTtcbn0pO1xuXG5lYWNoKFt0ZXN0ZWRPcGVuU2VhcmNoVmVyc2lvbnNdKS50ZXN0KCdncmFudHMga21zIHBlcm1pc3Npb25zIGlmIG5lZWRlZCcsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG5cbiAgY29uc3Qga2V5ID0gbmV3IGttcy5LZXkoc3RhY2ssICdLZXknKTtcblxuICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgZW5jcnlwdGlvbkF0UmVzdDoge1xuICAgICAga21zS2V5OiBrZXksXG4gICAgfSxcbiAgICAvLyBzbyB0aGF0IHRoZSBhY2Nlc3MgcG9saWN5IGN1c3RvbSByZXNvdXJjZSB3aWxsIGJlIHVzZWQuXG4gICAgdXNlVW5zaWduZWRCYXNpY0F1dGg6IHRydWUsXG4gIH0pO1xuXG4gIGNvbnN0IGV4cGVjdGVkUG9saWN5ID0ge1xuICAgIFN0YXRlbWVudDogW1xuICAgICAge1xuICAgICAgICBBY3Rpb246IFtcbiAgICAgICAgICAna21zOkxpc3QqJyxcbiAgICAgICAgICAna21zOkRlc2NyaWJlKicsXG4gICAgICAgICAgJ2ttczpDcmVhdGVHcmFudCcsXG4gICAgICAgIF0sXG4gICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgUmVzb3VyY2U6IHtcbiAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICdLZXk5NjFCNzNGRCcsXG4gICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgfTtcblxuICBjb25zdCByZXNvdXJjZXMgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnRvSlNPTigpLlJlc291cmNlcztcbiAgZXhwZWN0KHJlc291cmNlcy5BV1M2NzlmNTNmYWMwMDI0MzBjYjBkYTViNzk4MmJkMjI4N1NlcnZpY2VSb2xlRGVmYXVsdFBvbGljeUQyOEUxQTVFLlByb3BlcnRpZXMuUG9saWN5RG9jdW1lbnQpLnRvU3RyaWN0RXF1YWwoZXhwZWN0ZWRQb2xpY3kpO1xuXG59KTtcblxuZWFjaChbXG4gIFtFbmdpbmVWZXJzaW9uLk9QRU5TRUFSQ0hfMV8wLCAnT3BlblNlYXJjaF8xLjAnXSxcbiAgW0VuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8xXzEsICdPcGVuU2VhcmNoXzEuMSddLFxuICBbRW5naW5lVmVyc2lvbi5PUEVOU0VBUkNIXzFfMiwgJ09wZW5TZWFyY2hfMS4yJ10sXG4gIFtFbmdpbmVWZXJzaW9uLk9QRU5TRUFSQ0hfMV8zLCAnT3BlblNlYXJjaF8xLjMnXSxcbiAgW0VuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8yXzMsICdPcGVuU2VhcmNoXzIuMyddLFxuXSkudGVzdCgnbWluaW1hbCBleGFtcGxlIHJlbmRlcnMgY29ycmVjdGx5JywgKGVuZ2luZVZlcnNpb24sIGV4cGVjdGVkQ2ZWZXJzaW9uKSA9PiB7XG4gIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7IHZlcnNpb246IGVuZ2luZVZlcnNpb24gfSk7XG5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICBFQlNPcHRpb25zOiB7XG4gICAgICBFQlNFbmFibGVkOiB0cnVlLFxuICAgICAgVm9sdW1lU2l6ZTogMTAsXG4gICAgICBWb2x1bWVUeXBlOiAnZ3AyJyxcbiAgICB9LFxuICAgIENsdXN0ZXJDb25maWc6IHtcbiAgICAgIERlZGljYXRlZE1hc3RlckVuYWJsZWQ6IGZhbHNlLFxuICAgICAgSW5zdGFuY2VDb3VudDogMSxcbiAgICAgIEluc3RhbmNlVHlwZTogJ3I1LmxhcmdlLnNlYXJjaCcsXG4gICAgICBab25lQXdhcmVuZXNzRW5hYmxlZDogZmFsc2UsXG4gICAgfSxcbiAgICBFbmdpbmVWZXJzaW9uOiBleHBlY3RlZENmVmVyc2lvbixcbiAgICBFbmNyeXB0aW9uQXRSZXN0T3B0aW9uczoge1xuICAgICAgRW5hYmxlZDogZmFsc2UsXG4gICAgfSxcbiAgICBMb2dQdWJsaXNoaW5nT3B0aW9uczoge1xuICAgICAgQVVESVRfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICBFU19BUFBMSUNBVElPTl9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgIFNFQVJDSF9TTE9XX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgSU5ERVhfU0xPV19MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICB9LFxuICAgIE5vZGVUb05vZGVFbmNyeXB0aW9uT3B0aW9uczoge1xuICAgICAgRW5hYmxlZDogZmFsc2UsXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZWFjaChbdGVzdGVkT3BlblNlYXJjaFZlcnNpb25zXSkudGVzdCgnY2FuIGVuYWJsZSB2ZXJzaW9uIHVwZ3JhZGUgdXBkYXRlIHBvbGljeScsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG4gIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICBlbmFibGVWZXJzaW9uVXBncmFkZTogdHJ1ZSxcbiAgfSk7XG5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZSgnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgIFVwZGF0ZVBvbGljeToge1xuICAgICAgRW5hYmxlVmVyc2lvblVwZ3JhZGU6IHRydWUsXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZWFjaChbdGVzdGVkT3BlblNlYXJjaFZlcnNpb25zXSkudGVzdCgnY2FuIHNldCBhIHNlbGYtcmVmZXJlbmNpbmcgY3VzdG9tIHBvbGljeScsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG4gIGNvbnN0IGRvbWFpbiA9IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgfSk7XG5cbiAgZG9tYWluLmFkZEFjY2Vzc1BvbGljaWVzKFxuICAgIG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHtcbiAgICAgIGFjdGlvbnM6IFsnZXM6RVNIdHRwUG9zdCcsICdlczpFU0h0dHBQdXQnXSxcbiAgICAgIGVmZmVjdDogaWFtLkVmZmVjdC5BTExPVyxcbiAgICAgIHByaW5jaXBhbHM6IFtuZXcgaWFtLkFjY291bnRQcmluY2lwYWwoJzU2NzgnKV0sXG4gICAgICByZXNvdXJjZXM6IFtkb21haW4uZG9tYWluQXJuLCBgJHtkb21haW4uZG9tYWluQXJufS8qYF0sXG4gICAgfSksXG4gICk7XG5cbiAgY29uc3QgZXhwZWN0ZWRQb2xpY3kgPSB7XG4gICAgJ0ZuOjpKb2luJzogW1xuICAgICAgJycsXG4gICAgICBbXG4gICAgICAgICd7XCJhY3Rpb25cIjpcInVwZGF0ZURvbWFpbkNvbmZpZ1wiLFwic2VydmljZVwiOlwiT3BlblNlYXJjaFwiLFwicGFyYW1ldGVyc1wiOntcIkRvbWFpbk5hbWVcIjpcIicsXG4gICAgICAgIHtcbiAgICAgICAgICBSZWY6ICdEb21haW42NkFDNjlFMCcsXG4gICAgICAgIH0sXG4gICAgICAgICdcIixcIkFjY2Vzc1BvbGljaWVzXCI6XCJ7XFxcXFwiU3RhdGVtZW50XFxcXFwiOlt7XFxcXFwiQWN0aW9uXFxcXFwiOltcXFxcXCJlczpFU0h0dHBQb3N0XFxcXFwiLFxcXFxcImVzOkVTSHR0cFB1dFxcXFxcIl0sXFxcXFwiRWZmZWN0XFxcXFwiOlxcXFxcIkFsbG93XFxcXFwiLFxcXFxcIlByaW5jaXBhbFxcXFxcIjp7XFxcXFwiQVdTXFxcXFwiOlxcXFxcImFybjonLFxuICAgICAgICB7XG4gICAgICAgICAgUmVmOiAnQVdTOjpQYXJ0aXRpb24nLFxuICAgICAgICB9LFxuICAgICAgICAnOmlhbTo6NTY3ODpyb290XFxcXFwifSxcXFxcXCJSZXNvdXJjZVxcXFxcIjpbXFxcXFwiJyxcbiAgICAgICAge1xuICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgJ0RvbWFpbjY2QUM2OUUwJyxcbiAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgICdcXFxcXCIsXFxcXFwiJyxcbiAgICAgICAge1xuICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgJ0RvbWFpbjY2QUM2OUUwJyxcbiAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgICcvKlxcXFxcIl19XSxcXFxcXCJWZXJzaW9uXFxcXFwiOlxcXFxcIjIwMTItMTAtMTdcXFxcXCJ9XCJ9LFwib3V0cHV0UGF0aHNcIjpbXCJEb21haW5Db25maWcuQWNjZXNzUG9saWNpZXNcIl0sXCJwaHlzaWNhbFJlc291cmNlSWRcIjp7XCJpZFwiOlwiJyxcbiAgICAgICAge1xuICAgICAgICAgIFJlZjogJ0RvbWFpbjY2QUM2OUUwJyxcbiAgICAgICAgfSxcbiAgICAgICAgJ0FjY2Vzc1BvbGljeVwifX0nLFxuICAgICAgXSxcbiAgICBdLFxuICB9O1xuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQ3VzdG9tOjpPcGVuU2VhcmNoQWNjZXNzUG9saWN5Jywge1xuICAgIFNlcnZpY2VUb2tlbjoge1xuICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICdBV1M2NzlmNTNmYWMwMDI0MzBjYjBkYTViNzk4MmJkMjI4NzJEMTY0QzRDJyxcbiAgICAgICAgJ0FybicsXG4gICAgICBdLFxuICAgIH0sXG4gICAgQ3JlYXRlOiBleHBlY3RlZFBvbGljeSxcbiAgICBVcGRhdGU6IGV4cGVjdGVkUG9saWN5LFxuICB9KTtcbn0pO1xuXG5lYWNoKFt0ZXN0ZWRPcGVuU2VhcmNoVmVyc2lvbnNdKS5kZXNjcmliZSgnVWx0cmFXYXJtIGluc3RhbmNlcycsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG5cbiAgdGVzdCgnY2FuIGVuYWJsZSBVbHRyYVdhcm0gaW5zdGFuY2VzJywgKCkgPT4ge1xuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgY2FwYWNpdHk6IHtcbiAgICAgICAgbWFzdGVyTm9kZXM6IDIsXG4gICAgICAgIHdhcm1Ob2RlczogMixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgQ2x1c3RlckNvbmZpZzoge1xuICAgICAgICBEZWRpY2F0ZWRNYXN0ZXJFbmFibGVkOiB0cnVlLFxuICAgICAgICBXYXJtRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgV2FybUNvdW50OiAyLFxuICAgICAgICBXYXJtVHlwZTogJ3VsdHJhd2FybTEubWVkaXVtLnNlYXJjaCcsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdjYW4gZW5hYmxlIFVsdHJhV2FybSBpbnN0YW5jZXMgd2l0aCBzcGVjaWZpYyBpbnN0YW5jZSB0eXBlJywgKCkgPT4ge1xuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgY2FwYWNpdHk6IHtcbiAgICAgICAgbWFzdGVyTm9kZXM6IDIsXG4gICAgICAgIHdhcm1Ob2RlczogMixcbiAgICAgICAgd2FybUluc3RhbmNlVHlwZTogJ3VsdHJhd2FybTEubGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgQ2x1c3RlckNvbmZpZzoge1xuICAgICAgICBEZWRpY2F0ZWRNYXN0ZXJFbmFibGVkOiB0cnVlLFxuICAgICAgICBXYXJtRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgV2FybUNvdW50OiAyLFxuICAgICAgICBXYXJtVHlwZTogJ3VsdHJhd2FybTEubGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG59KTtcblxuZWFjaChbdGVzdGVkT3BlblNlYXJjaFZlcnNpb25zXSkudGVzdCgnY2FuIHVzZSB0b2tlbnMgaW4gY2FwYWNpdHkgY29uZmlndXJhdGlvbicsIChlbmdpbmVWZXJzaW9uKSA9PiB7XG4gIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICBjYXBhY2l0eToge1xuICAgICAgZGF0YU5vZGVJbnN0YW5jZVR5cGU6IFRva2VuLmFzU3RyaW5nKHsgUmVmOiAnZGF0YU5vZGVJbnN0YW5jZVR5cGUnIH0pLFxuICAgICAgZGF0YU5vZGVzOiBUb2tlbi5hc051bWJlcih7IFJlZjogJ2RhdGFOb2RlcycgfSksXG4gICAgICBtYXN0ZXJOb2RlSW5zdGFuY2VUeXBlOiBUb2tlbi5hc1N0cmluZyh7IFJlZjogJ21hc3Rlck5vZGVJbnN0YW5jZVR5cGUnIH0pLFxuICAgICAgbWFzdGVyTm9kZXM6IFRva2VuLmFzTnVtYmVyKHsgUmVmOiAnbWFzdGVyTm9kZXMnIH0pLFxuICAgICAgd2FybUluc3RhbmNlVHlwZTogVG9rZW4uYXNTdHJpbmcoeyBSZWY6ICd3YXJtSW5zdGFuY2VUeXBlJyB9KSxcbiAgICAgIHdhcm1Ob2RlczogVG9rZW4uYXNOdW1iZXIoeyBSZWY6ICd3YXJtTm9kZXMnIH0pLFxuICAgIH0sXG4gIH0pO1xuXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgQ2x1c3RlckNvbmZpZzoge1xuICAgICAgSW5zdGFuY2VDb3VudDoge1xuICAgICAgICBSZWY6ICdkYXRhTm9kZXMnLFxuICAgICAgfSxcbiAgICAgIEluc3RhbmNlVHlwZToge1xuICAgICAgICBSZWY6ICdkYXRhTm9kZUluc3RhbmNlVHlwZScsXG4gICAgICB9LFxuICAgICAgRGVkaWNhdGVkTWFzdGVyRW5hYmxlZDogdHJ1ZSxcbiAgICAgIERlZGljYXRlZE1hc3RlckNvdW50OiB7XG4gICAgICAgIFJlZjogJ21hc3Rlck5vZGVzJyxcbiAgICAgIH0sXG4gICAgICBEZWRpY2F0ZWRNYXN0ZXJUeXBlOiB7XG4gICAgICAgIFJlZjogJ21hc3Rlck5vZGVJbnN0YW5jZVR5cGUnLFxuICAgICAgfSxcbiAgICAgIFdhcm1FbmFibGVkOiB0cnVlLFxuICAgICAgV2FybUNvdW50OiB7XG4gICAgICAgIFJlZjogJ3dhcm1Ob2RlcycsXG4gICAgICB9LFxuICAgICAgV2FybVR5cGU6IHtcbiAgICAgICAgUmVmOiAnd2FybUluc3RhbmNlVHlwZScsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbmVhY2goW3Rlc3RlZE9wZW5TZWFyY2hWZXJzaW9uc10pLmRlc2NyaWJlKCdsb2cgZ3JvdXBzJywgKGVuZ2luZVZlcnNpb24pID0+IHtcblxuICB0ZXN0KCdzbG93U2VhcmNoTG9nRW5hYmxlZCBzaG91bGQgY3JlYXRlIGEgY3VzdG9tIGxvZyBncm91cCcsICgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGxvZ2dpbmc6IHtcbiAgICAgICAgc2xvd1NlYXJjaExvZ0VuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIExvZ1B1Ymxpc2hpbmdPcHRpb25zOiB7XG4gICAgICAgIFNFQVJDSF9TTE9XX0xPR1M6IHtcbiAgICAgICAgICBDbG91ZFdhdGNoTG9nc0xvZ0dyb3VwQXJuOiB7XG4gICAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICAgJ0RvbWFpblNsb3dTZWFyY2hMb2dzNUIzNUE5N0EnLFxuICAgICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBBVURJVF9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgICAgRVNfQVBQTElDQVRJT05fTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICAgIElOREVYX1NMT1dfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzbG93SW5kZXhMb2dFbmFibGVkIHNob3VsZCBjcmVhdGUgYSBjdXN0b20gbG9nIGdyb3VwJywgKCkgPT4ge1xuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgbG9nZ2luZzoge1xuICAgICAgICBzbG93SW5kZXhMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgICBMb2dQdWJsaXNoaW5nT3B0aW9uczoge1xuICAgICAgICBJTkRFWF9TTE9XX0xPR1M6IHtcbiAgICAgICAgICBDbG91ZFdhdGNoTG9nc0xvZ0dyb3VwQXJuOiB7XG4gICAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICAgJ0RvbWFpblNsb3dJbmRleExvZ3NGRTJGMTA2MScsXG4gICAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIEFVRElUX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgICBFU19BUFBMSUNBVElPTl9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgICAgU0VBUkNIX1NMT1dfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhcHBMb2dFbmFibGVkIHNob3VsZCBjcmVhdGUgYSBjdXN0b20gbG9nIGdyb3VwJywgKCkgPT4ge1xuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgbG9nZ2luZzoge1xuICAgICAgICBhcHBMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgICBMb2dQdWJsaXNoaW5nT3B0aW9uczoge1xuICAgICAgICBFU19BUFBMSUNBVElPTl9MT0dTOiB7XG4gICAgICAgICAgQ2xvdWRXYXRjaExvZ3NMb2dHcm91cEFybjoge1xuICAgICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAgICdEb21haW5BcHBMb2dzMjE2OThDMUInLFxuICAgICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBBVURJVF9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgICAgU0VBUkNIX1NMT1dfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICAgIElOREVYX1NMT1dfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhdWRpdExvZ0VuYWJsZWQgc2hvdWxkIGNyZWF0ZSBhIGN1c3RvbSBsb2cgZ3JvdXAnLCAoKSA9PiB7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIGF1ZGl0TG9nRW5hYmxlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBmaW5lR3JhaW5lZEFjY2Vzc0NvbnRyb2w6IHtcbiAgICAgICAgbWFzdGVyVXNlck5hbWU6ICd1c2VybmFtZScsXG4gICAgICB9LFxuICAgICAgbm9kZVRvTm9kZUVuY3J5cHRpb246IHRydWUsXG4gICAgICBlbmNyeXB0aW9uQXRSZXN0OiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgZW5mb3JjZUh0dHBzOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIExvZ1B1Ymxpc2hpbmdPcHRpb25zOiB7XG4gICAgICAgIEFVRElUX0xPR1M6IHtcbiAgICAgICAgICBDbG91ZFdhdGNoTG9nc0xvZ0dyb3VwQXJuOiB7XG4gICAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICAgJ0RvbWFpbkF1ZGl0TG9nczYwOEUwRkE2JyxcbiAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgRVNfQVBQTElDQVRJT05fTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICAgIFNFQVJDSF9TTE9XX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgICBJTkRFWF9TTE9XX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgndHdvIGRvbWFpbnMgd2l0aCBsb2dnaW5nIGVuYWJsZWQgY2FuIGJlIGNyZWF0ZWQgaW4gc2FtZSBzdGFjaycsICgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMScsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIGFwcExvZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIHNsb3dTZWFyY2hMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgICBzbG93SW5kZXhMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIGFwcExvZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIHNsb3dTZWFyY2hMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgICBzbG93SW5kZXhMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgTG9nUHVibGlzaGluZ09wdGlvbnM6IHtcbiAgICAgICAgRVNfQVBQTElDQVRJT05fTE9HUzoge1xuICAgICAgICAgIENsb3VkV2F0Y2hMb2dzTG9nR3JvdXBBcm46IHtcbiAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAnRG9tYWluMUFwcExvZ3M2RThEMUQ2NycsXG4gICAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIFNFQVJDSF9TTE9XX0xPR1M6IHtcbiAgICAgICAgICBDbG91ZFdhdGNoTG9nc0xvZ0dyb3VwQXJuOiB7XG4gICAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICAgJ0RvbWFpbjFTbG93U2VhcmNoTG9nczhGM0IwNTA2JyxcbiAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgSU5ERVhfU0xPV19MT0dTOiB7XG4gICAgICAgICAgQ2xvdWRXYXRjaExvZ3NMb2dHcm91cEFybjoge1xuICAgICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAgICdEb21haW4xU2xvd0luZGV4TG9nczkzNTREMDk4JyxcbiAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgQVVESVRfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgICBMb2dQdWJsaXNoaW5nT3B0aW9uczoge1xuICAgICAgICBFU19BUFBMSUNBVElPTl9MT0dTOiB7XG4gICAgICAgICAgQ2xvdWRXYXRjaExvZ3NMb2dHcm91cEFybjoge1xuICAgICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAgICdEb21haW4yQXBwTG9nczgxMDg3NkUyJyxcbiAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgU0VBUkNIX1NMT1dfTE9HUzoge1xuICAgICAgICAgIENsb3VkV2F0Y2hMb2dzTG9nR3JvdXBBcm46IHtcbiAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAnRG9tYWluMlNsb3dTZWFyY2hMb2dzMEM3NUY2NEInLFxuICAgICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBJTkRFWF9TTE9XX0xPR1M6IHtcbiAgICAgICAgICBDbG91ZFdhdGNoTG9nc0xvZ0dyb3VwQXJuOiB7XG4gICAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICAgJ0RvbWFpbjJTbG93SW5kZXhMb2dzMENCOTAwRDAnLFxuICAgICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBBVURJVF9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2xvZyBncm91cCBwb2xpY3kgaXMgdW5pcXVlbHkgbmFtZWQgZm9yIGVhY2ggZG9tYWluJywgKCkgPT4ge1xuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4xJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGxvZ2dpbmc6IHtcbiAgICAgICAgYXBwTG9nRW5hYmxlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjInLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgbG9nZ2luZzoge1xuICAgICAgICBhcHBMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIERvbWFpbjFcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQ3VzdG9tOjpDbG91ZHdhdGNoTG9nUmVzb3VyY2VQb2xpY3knLCB7XG4gICAgICBDcmVhdGU6IHtcbiAgICAgICAgJ0ZuOjpKb2luJzogW1xuICAgICAgICAgICcnLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICd7XCJzZXJ2aWNlXCI6XCJDbG91ZFdhdGNoTG9nc1wiLFwiYWN0aW9uXCI6XCJwdXRSZXNvdXJjZVBvbGljeVwiLFwicGFyYW1ldGVyc1wiOntcInBvbGljeU5hbWVcIjpcIkVTTG9nUG9saWN5YzgzNmZkOTJmMDdlYzQxZWI3MGMyZjZmMDhkYzRiNDNjZmI3YzI1MzkxXCIsXCJwb2xpY3lEb2N1bWVudFwiOlwie1xcXFxcIlN0YXRlbWVudFxcXFxcIjpbe1xcXFxcIkFjdGlvblxcXFxcIjpbXFxcXFwibG9nczpQdXRMb2dFdmVudHNcXFxcXCIsXFxcXFwibG9nczpDcmVhdGVMb2dTdHJlYW1cXFxcXCJdLFxcXFxcIkVmZmVjdFxcXFxcIjpcXFxcXCJBbGxvd1xcXFxcIixcXFxcXCJQcmluY2lwYWxcXFxcXCI6e1xcXFxcIlNlcnZpY2VcXFxcXCI6XFxcXFwiZXMuYW1hem9uYXdzLmNvbVxcXFxcIn0sXFxcXFwiUmVzb3VyY2VcXFxcXCI6XFxcXFwiJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAgICAgJ0RvbWFpbjFBcHBMb2dzNkU4RDFENjcnLFxuICAgICAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdcXFxcXCJ9XSxcXFxcXCJWZXJzaW9uXFxcXFwiOlxcXFxcIjIwMTItMTAtMTdcXFxcXCJ9XCJ9LFwicGh5c2ljYWxSZXNvdXJjZUlkXCI6e1wiaWRcIjpcIkVTTG9nR3JvdXBQb2xpY3ljODM2ZmQ5MmYwN2VjNDFlYjcwYzJmNmYwOGRjNGI0M2NmYjdjMjUzOTFcIn19JyxcbiAgICAgICAgICBdLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBEb21haW4yXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0N1c3RvbTo6Q2xvdWR3YXRjaExvZ1Jlc291cmNlUG9saWN5Jywge1xuICAgICAgQ3JlYXRlOiB7XG4gICAgICAgICdGbjo6Sm9pbic6IFtcbiAgICAgICAgICAnJyxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAne1wic2VydmljZVwiOlwiQ2xvdWRXYXRjaExvZ3NcIixcImFjdGlvblwiOlwicHV0UmVzb3VyY2VQb2xpY3lcIixcInBhcmFtZXRlcnNcIjp7XCJwb2xpY3lOYW1lXCI6XCJFU0xvZ1BvbGljeWM4ZjA1ZjAxNWJlM2JhZjZlYzFlZTA2Y2QxZWU1Y2M4NzA2ZWJiZTViMlwiLFwicG9saWN5RG9jdW1lbnRcIjpcIntcXFxcXCJTdGF0ZW1lbnRcXFxcXCI6W3tcXFxcXCJBY3Rpb25cXFxcXCI6W1xcXFxcImxvZ3M6UHV0TG9nRXZlbnRzXFxcXFwiLFxcXFxcImxvZ3M6Q3JlYXRlTG9nU3RyZWFtXFxcXFwiXSxcXFxcXCJFZmZlY3RcXFxcXCI6XFxcXFwiQWxsb3dcXFxcXCIsXFxcXFwiUHJpbmNpcGFsXFxcXFwiOntcXFxcXCJTZXJ2aWNlXFxcXFwiOlxcXFxcImVzLmFtYXpvbmF3cy5jb21cXFxcXCJ9LFxcXFxcIlJlc291cmNlXFxcXFwiOlxcXFxcIicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAgICdEb21haW4yQXBwTG9nczgxMDg3NkUyJyxcbiAgICAgICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnXFxcXFwifV0sXFxcXFwiVmVyc2lvblxcXFxcIjpcXFxcXCIyMDEyLTEwLTE3XFxcXFwifVwifSxcInBoeXNpY2FsUmVzb3VyY2VJZFwiOntcImlkXCI6XCJFU0xvZ0dyb3VwUG9saWN5YzhmMDVmMDE1YmUzYmFmNmVjMWVlMDZjZDFlZTVjYzg3MDZlYmJlNWIyXCJ9fScsXG4gICAgICAgICAgXSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2VuYWJsaW5nIGF1ZGl0IGxvZ3MgdGhyb3dzIHdpdGhvdXQgZmluZSBncmFpbmVkIGFjY2VzcyBjb250cm9sIGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgbG9nZ2luZzoge1xuICAgICAgICBhdWRpdExvZ0VuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KC9GaW5lLWdyYWluZWQgYWNjZXNzIGNvbnRyb2wgaXMgcmVxdWlyZWQgd2hlbiBhdWRpdCBsb2dzIHB1Ymxpc2hpbmcgaXMgZW5hYmxlZFxcLi8pO1xuICB9KTtcblxuICB0ZXN0KCdzbG93U2VhcmNoTG9nR3JvdXAgc2hvdWxkIHVzZSBhIGN1c3RvbSBsb2cgZ3JvdXAnLCAoKSA9PiB7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIHNsb3dTZWFyY2hMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgICBzbG93U2VhcmNoTG9nR3JvdXA6IG5ldyBsb2dzLkxvZ0dyb3VwKHN0YWNrLCAnU2xvd1NlYXJjaExvZ3MnLCB7XG4gICAgICAgICAgcmV0ZW50aW9uOiBsb2dzLlJldGVudGlvbkRheXMuVEhSRUVfTU9OVEhTLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgTG9nUHVibGlzaGluZ09wdGlvbnM6IHtcbiAgICAgICAgU0VBUkNIX1NMT1dfTE9HUzoge1xuICAgICAgICAgIENsb3VkV2F0Y2hMb2dzTG9nR3JvdXBBcm46IHtcbiAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAnU2xvd1NlYXJjaExvZ3NFMDBEQzJFNycsXG4gICAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIEFVRElUX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgICBFU19BUFBMSUNBVElPTl9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgICAgSU5ERVhfU0xPV19MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nsb3dJbmRleExvZ0VuYWJsZWQgc2hvdWxkIHVzZSBhIGN1c3RvbSBsb2cgZ3JvdXAnLCAoKSA9PiB7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIHNsb3dJbmRleExvZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIHNsb3dJbmRleExvZ0dyb3VwOiBuZXcgbG9ncy5Mb2dHcm91cChzdGFjaywgJ1Nsb3dJbmRleExvZ3MnLCB7XG4gICAgICAgICAgcmV0ZW50aW9uOiBsb2dzLlJldGVudGlvbkRheXMuVEhSRUVfTU9OVEhTLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgTG9nUHVibGlzaGluZ09wdGlvbnM6IHtcbiAgICAgICAgSU5ERVhfU0xPV19MT0dTOiB7XG4gICAgICAgICAgQ2xvdWRXYXRjaExvZ3NMb2dHcm91cEFybjoge1xuICAgICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAgICdTbG93SW5kZXhMb2dzQUQ0OURFRDAnLFxuICAgICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBBVURJVF9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgICAgRVNfQVBQTElDQVRJT05fTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICAgIFNFQVJDSF9TTE9XX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYXBwTG9nR3JvdXAgc2hvdWxkIHVzZSBhIGN1c3RvbSBsb2cgZ3JvdXAnLCAoKSA9PiB7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIGFwcExvZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIGFwcExvZ0dyb3VwOiBuZXcgbG9ncy5Mb2dHcm91cChzdGFjaywgJ0FwcExvZ3MnLCB7XG4gICAgICAgICAgcmV0ZW50aW9uOiBsb2dzLlJldGVudGlvbkRheXMuVEhSRUVfTU9OVEhTLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgTG9nUHVibGlzaGluZ09wdGlvbnM6IHtcbiAgICAgICAgRVNfQVBQTElDQVRJT05fTE9HUzoge1xuICAgICAgICAgIENsb3VkV2F0Y2hMb2dzTG9nR3JvdXBBcm46IHtcbiAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAnQXBwTG9nc0M1REY4M0E2JyxcbiAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgQVVESVRfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICAgIFNFQVJDSF9TTE9XX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgICBJTkRFWF9TTE9XX0xPR1M6IE1hdGNoLmFic2VudCgpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYXVkaXRMT2dHcm91cCBzaG91bGQgdXNlIGEgY3VzdG9tIGxvZyBncm91cCcsICgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGZpbmVHcmFpbmVkQWNjZXNzQ29udHJvbDoge1xuICAgICAgICBtYXN0ZXJVc2VyTmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgIH0sXG4gICAgICBub2RlVG9Ob2RlRW5jcnlwdGlvbjogdHJ1ZSxcbiAgICAgIGVuY3J5cHRpb25BdFJlc3Q6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBlbmZvcmNlSHR0cHM6IHRydWUsXG4gICAgICBsb2dnaW5nOiB7XG4gICAgICAgIGF1ZGl0TG9nRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgYXVkaXRMb2dHcm91cDogbmV3IGxvZ3MuTG9nR3JvdXAoc3RhY2ssICdBdWRpdExvZ3MnLCB7XG4gICAgICAgICAgcmV0ZW50aW9uOiBsb2dzLlJldGVudGlvbkRheXMuVEhSRUVfTU9OVEhTLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgTG9nUHVibGlzaGluZ09wdGlvbnM6IHtcbiAgICAgICAgQVVESVRfTE9HUzoge1xuICAgICAgICAgIENsb3VkV2F0Y2hMb2dzTG9nR3JvdXBBcm46IHtcbiAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAnQXVkaXRMb2dzQjk0NUUzNDAnLFxuICAgICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBFU19BUFBMSUNBVElPTl9MT0dTOiBNYXRjaC5hYnNlbnQoKSxcbiAgICAgICAgU0VBUkNIX1NMT1dfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICAgIElOREVYX1NMT1dfTE9HUzogTWF0Y2guYWJzZW50KCksXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxufSk7XG5cbmVhY2godGVzdGVkT3BlblNlYXJjaFZlcnNpb25zKS5kZXNjcmliZSgnZ3JhbnRzJywgKGVuZ2luZVZlcnNpb24pID0+IHtcblxuICB0ZXN0KCdcImdyYW50UmVhZFwiIGFsbG93cyByZWFkIGFjdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9tYWluIHJlc291cmNlJywgKCkgPT4ge1xuICAgIHRlc3RHcmFudChyZWFkQWN0aW9ucywgKHAsIGQpID0+IGQuZ3JhbnRSZWFkKHApLCBlbmdpbmVWZXJzaW9uKTtcbiAgfSk7XG5cbiAgdGVzdCgnXCJncmFudFdyaXRlXCIgYWxsb3dzIHdyaXRlIGFjdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9tYWluIHJlc291cmNlJywgKCkgPT4ge1xuICAgIHRlc3RHcmFudCh3cml0ZUFjdGlvbnMsIChwLCBkKSA9PiBkLmdyYW50V3JpdGUocCksIGVuZ2luZVZlcnNpb24pO1xuICB9KTtcblxuICB0ZXN0KCdcImdyYW50UmVhZFdyaXRlXCIgYWxsb3dzIHJlYWQgYW5kIHdyaXRlIGFjdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9tYWluIHJlc291cmNlJywgKCkgPT4ge1xuICAgIHRlc3RHcmFudChyZWFkV3JpdGVBY3Rpb25zLCAocCwgZCkgPT4gZC5ncmFudFJlYWRXcml0ZShwKSwgZW5naW5lVmVyc2lvbik7XG4gIH0pO1xuXG4gIHRlc3QoJ1wiZ3JhbnRJbmRleFJlYWRcIiBhbGxvd3MgcmVhZCBhY3Rpb25zIGFzc29jaWF0ZWQgd2l0aCBhbiBpbmRleCBpbiB0aGlzIGRvbWFpbiByZXNvdXJjZScsICgpID0+IHtcbiAgICB0ZXN0R3JhbnQoXG4gICAgICByZWFkQWN0aW9ucyxcbiAgICAgIChwLCBkKSA9PiBkLmdyYW50SW5kZXhSZWFkKCdteS1pbmRleCcsIHApLFxuICAgICAgZW5naW5lVmVyc2lvbixcbiAgICAgIGZhbHNlLFxuICAgICAgWycvbXktaW5kZXgnLCAnL215LWluZGV4LyonXSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdcImdyYW50SW5kZXhXcml0ZVwiIGFsbG93cyB3cml0ZSBhY3Rpb25zIGFzc29jaWF0ZWQgd2l0aCBhbiBpbmRleCBpbiB0aGlzIGRvbWFpbiByZXNvdXJjZScsICgpID0+IHtcbiAgICB0ZXN0R3JhbnQoXG4gICAgICB3cml0ZUFjdGlvbnMsXG4gICAgICAocCwgZCkgPT4gZC5ncmFudEluZGV4V3JpdGUoJ215LWluZGV4JywgcCksXG4gICAgICBlbmdpbmVWZXJzaW9uLFxuICAgICAgZmFsc2UsXG4gICAgICBbJy9teS1pbmRleCcsICcvbXktaW5kZXgvKiddLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ1wiZ3JhbnRJbmRleFJlYWRXcml0ZVwiIGFsbG93cyByZWFkIGFuZCB3cml0ZSBhY3Rpb25zIGFzc29jaWF0ZWQgd2l0aCBhbiBpbmRleCBpbiB0aGlzIGRvbWFpbiByZXNvdXJjZScsICgpID0+IHtcbiAgICB0ZXN0R3JhbnQoXG4gICAgICByZWFkV3JpdGVBY3Rpb25zLFxuICAgICAgKHAsIGQpID0+IGQuZ3JhbnRJbmRleFJlYWRXcml0ZSgnbXktaW5kZXgnLCBwKSxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBmYWxzZSxcbiAgICAgIFsnL215LWluZGV4JywgJy9teS1pbmRleC8qJ10sXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnXCJncmFudFBhdGhSZWFkXCIgYWxsb3dzIHJlYWQgYWN0aW9ucyBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBwYXRoIGluIHRoaXMgZG9tYWluIHJlc291cmNlJywgKCkgPT4ge1xuICAgIHRlc3RHcmFudChcbiAgICAgIHJlYWRBY3Rpb25zLFxuICAgICAgKHAsIGQpID0+IGQuZ3JhbnRQYXRoUmVhZCgnbXktaW5kZXgvbXktcGF0aCcsIHApLFxuICAgICAgZW5naW5lVmVyc2lvbixcbiAgICAgIGZhbHNlLFxuICAgICAgWycvbXktaW5kZXgvbXktcGF0aCddLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ1wiZ3JhbnRQYXRoV3JpdGVcIiBhbGxvd3Mgd3JpdGUgYWN0aW9ucyBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBwYXRoIGluIHRoaXMgZG9tYWluIHJlc291cmNlJywgKCkgPT4ge1xuICAgIHRlc3RHcmFudChcbiAgICAgIHdyaXRlQWN0aW9ucyxcbiAgICAgIChwLCBkKSA9PiBkLmdyYW50UGF0aFdyaXRlKCdteS1pbmRleC9teS1wYXRoJywgcCksXG4gICAgICBlbmdpbmVWZXJzaW9uLFxuICAgICAgZmFsc2UsXG4gICAgICBbJy9teS1pbmRleC9teS1wYXRoJ10sXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnXCJncmFudFBhdGhSZWFkV3JpdGVcIiBhbGxvd3MgcmVhZCBhbmQgd3JpdGUgYWN0aW9ucyBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBwYXRoIGluIHRoaXMgZG9tYWluIHJlc291cmNlJywgKCkgPT4ge1xuICAgIHRlc3RHcmFudChcbiAgICAgIHJlYWRXcml0ZUFjdGlvbnMsXG4gICAgICAocCwgZCkgPT4gZC5ncmFudFBhdGhSZWFkV3JpdGUoJ215LWluZGV4L215LXBhdGgnLCBwKSxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBmYWxzZSxcbiAgICAgIFsnL215LWluZGV4L215LXBhdGgnXSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdcImdyYW50XCIgZm9yIGFuIGltcG9ydGVkIGRvbWFpbicsICgpID0+IHtcbiAgICBjb25zdCBkb21haW5FbmRwb2ludCA9ICdodHRwczovL3Rlc3QtZG9tYWluLTJ3MngydTN0aWZseS1qY2pvdHJ0NmY3b3RlbTRzcWN3YmNoM2M0dS50ZXN0cmVnaW9uLmVzLmFtYXpvbmF3cy5jb20nO1xuICAgIGNvbnN0IGRvbWFpbiA9IERvbWFpbi5mcm9tRG9tYWluRW5kcG9pbnQoc3RhY2ssICdEb21haW4nLCBkb21haW5FbmRwb2ludCk7XG4gICAgY29uc3QgdXNlciA9IG5ldyBpYW0uVXNlcihzdGFjaywgJ3VzZXInKTtcblxuICAgIGRvbWFpbi5ncmFudFJlYWRXcml0ZSh1c2VyKTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OklBTTo6UG9saWN5Jywge1xuICAgICAgUG9saWN5RG9jdW1lbnQ6IHtcbiAgICAgICAgU3RhdGVtZW50OiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgQWN0aW9uOiBbXG4gICAgICAgICAgICAgICdlczpFU0h0dHBHZXQnLFxuICAgICAgICAgICAgICAnZXM6RVNIdHRwSGVhZCcsXG4gICAgICAgICAgICAgICdlczpFU0h0dHBEZWxldGUnLFxuICAgICAgICAgICAgICAnZXM6RVNIdHRwUG9zdCcsXG4gICAgICAgICAgICAgICdlczpFU0h0dHBQdXQnLFxuICAgICAgICAgICAgICAnZXM6RVNIdHRwUGF0Y2gnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICAgIFJlc291cmNlOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAnRm46OkpvaW4nOiBbXG4gICAgICAgICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgJ2FybjonLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgUmVmOiAnQVdTOjpQYXJ0aXRpb24nLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnOmVzOnRlc3RyZWdpb246MTIzNDpkb21haW4vdGVzdC1kb21haW4tMncyeDJ1M3RpZmx5JyxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICdGbjo6Sm9pbic6IFtcbiAgICAgICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAnYXJuOicsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBSZWY6ICdBV1M6OlBhcnRpdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICc6ZXM6dGVzdHJlZ2lvbjoxMjM0OmRvbWFpbi90ZXN0LWRvbWFpbi0ydzJ4MnUzdGlmbHkvKicsXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgICAgIH0sXG4gICAgICBQb2xpY3lOYW1lOiAndXNlckRlZmF1bHRQb2xpY3kwODNERjY4MicsXG4gICAgICBVc2VyczogW1xuICAgICAgICB7XG4gICAgICAgICAgUmVmOiAndXNlcjJDMkI1N0FFJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH0pO1xuXG59KTtcblxuZWFjaCh0ZXN0ZWRPcGVuU2VhcmNoVmVyc2lvbnMpLmRlc2NyaWJlKCdtZXRyaWNzJywgKGVuZ2luZVZlcnNpb24pID0+IHtcblxuICB0ZXN0KCdtZXRyaWNDbHVzdGVyU3RhdHVzUmVkJywgKCkgPT4ge1xuICAgIHRlc3RNZXRyaWMoXG4gICAgICAoZG9tYWluKSA9PiBkb21haW4ubWV0cmljQ2x1c3RlclN0YXR1c1JlZCgpLFxuICAgICAgJ0NsdXN0ZXJTdGF0dXMucmVkJyxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBTdGF0aXN0aWMuTUFYSU1VTSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdtZXRyaWNDbHVzdGVyU3RhdHVzWWVsbG93JywgKCkgPT4ge1xuICAgIHRlc3RNZXRyaWMoXG4gICAgICAoZG9tYWluKSA9PiBkb21haW4ubWV0cmljQ2x1c3RlclN0YXR1c1llbGxvdygpLFxuICAgICAgJ0NsdXN0ZXJTdGF0dXMueWVsbG93JyxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBTdGF0aXN0aWMuTUFYSU1VTSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdtZXRyaWNGcmVlU3RvcmFnZVNwYWNlJywgKCkgPT4ge1xuICAgIHRlc3RNZXRyaWMoXG4gICAgICAoZG9tYWluKSA9PiBkb21haW4ubWV0cmljRnJlZVN0b3JhZ2VTcGFjZSgpLFxuICAgICAgJ0ZyZWVTdG9yYWdlU3BhY2UnLFxuICAgICAgZW5naW5lVmVyc2lvbixcbiAgICAgIFN0YXRpc3RpYy5NSU5JTVVNLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ21ldHJpY0NsdXN0ZXJJbmRleFdyaXRlQmxvY2tlZCcsICgpID0+IHtcbiAgICB0ZXN0TWV0cmljKFxuICAgICAgKGRvbWFpbikgPT4gZG9tYWluLm1ldHJpY0NsdXN0ZXJJbmRleFdyaXRlc0Jsb2NrZWQoKSxcbiAgICAgICdDbHVzdGVySW5kZXhXcml0ZXNCbG9ja2VkJyxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBTdGF0aXN0aWMuTUFYSU1VTSxcbiAgICAgIER1cmF0aW9uLm1pbnV0ZXMoMSksXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnbWV0cmljTm9kZXMnLCAoKSA9PiB7XG4gICAgdGVzdE1ldHJpYyhcbiAgICAgIChkb21haW4pID0+IGRvbWFpbi5tZXRyaWNOb2RlcygpLFxuICAgICAgJ05vZGVzJyxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBTdGF0aXN0aWMuTUlOSU1VTSxcbiAgICAgIER1cmF0aW9uLmhvdXJzKDEpLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ21ldHJpY0F1dG9tYXRlZFNuYXBzaG90RmFpbHVyZScsICgpID0+IHtcbiAgICB0ZXN0TWV0cmljKFxuICAgICAgKGRvbWFpbikgPT4gZG9tYWluLm1ldHJpY0F1dG9tYXRlZFNuYXBzaG90RmFpbHVyZSgpLFxuICAgICAgJ0F1dG9tYXRlZFNuYXBzaG90RmFpbHVyZScsXG4gICAgICBlbmdpbmVWZXJzaW9uLFxuICAgICAgU3RhdGlzdGljLk1BWElNVU0sXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnbWV0cmljQ1BVVXRpbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdE1ldHJpYyhcbiAgICAgIChkb21haW4pID0+IGRvbWFpbi5tZXRyaWNDUFVVdGlsaXphdGlvbigpLFxuICAgICAgJ0NQVVV0aWxpemF0aW9uJyxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBTdGF0aXN0aWMuTUFYSU1VTSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdtZXRyaWNKVk1NZW1vcnlQcmVzc3VyZScsICgpID0+IHtcbiAgICB0ZXN0TWV0cmljKFxuICAgICAgKGRvbWFpbikgPT4gZG9tYWluLm1ldHJpY0pWTU1lbW9yeVByZXNzdXJlKCksXG4gICAgICAnSlZNTWVtb3J5UHJlc3N1cmUnLFxuICAgICAgZW5naW5lVmVyc2lvbixcbiAgICAgIFN0YXRpc3RpYy5NQVhJTVVNLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ21ldHJpY01hc3RlckNQVVV0aWxpemF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3RNZXRyaWMoXG4gICAgICAoZG9tYWluKSA9PiBkb21haW4ubWV0cmljTWFzdGVyQ1BVVXRpbGl6YXRpb24oKSxcbiAgICAgICdNYXN0ZXJDUFVVdGlsaXphdGlvbicsXG4gICAgICBlbmdpbmVWZXJzaW9uLFxuICAgICAgU3RhdGlzdGljLk1BWElNVU0sXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnbWV0cmljTWFzdGVySlZNTWVtb3J5UHJlc3N1cmUnLCAoKSA9PiB7XG4gICAgdGVzdE1ldHJpYyhcbiAgICAgIChkb21haW4pID0+IGRvbWFpbi5tZXRyaWNNYXN0ZXJKVk1NZW1vcnlQcmVzc3VyZSgpLFxuICAgICAgJ01hc3RlckpWTU1lbW9yeVByZXNzdXJlJyxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBTdGF0aXN0aWMuTUFYSU1VTSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdtZXRyaWNLTVNLZXlFcnJvcicsICgpID0+IHtcbiAgICB0ZXN0TWV0cmljKFxuICAgICAgKGRvbWFpbikgPT4gZG9tYWluLm1ldHJpY0tNU0tleUVycm9yKCksXG4gICAgICAnS01TS2V5RXJyb3InLFxuICAgICAgZW5naW5lVmVyc2lvbixcbiAgICAgIFN0YXRpc3RpYy5NQVhJTVVNLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ21ldHJpY0tNU0tleUluYWNjZXNzaWJsZScsICgpID0+IHtcbiAgICB0ZXN0TWV0cmljKFxuICAgICAgKGRvbWFpbikgPT4gZG9tYWluLm1ldHJpY0tNU0tleUluYWNjZXNzaWJsZSgpLFxuICAgICAgJ0tNU0tleUluYWNjZXNzaWJsZScsXG4gICAgICBlbmdpbmVWZXJzaW9uLFxuICAgICAgU3RhdGlzdGljLk1BWElNVU0sXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnbWV0cmljU2VhcmNoYWJsZURvY3VtZW50cycsICgpID0+IHtcbiAgICB0ZXN0TWV0cmljKFxuICAgICAgKGRvbWFpbikgPT4gZG9tYWluLm1ldHJpY1NlYXJjaGFibGVEb2N1bWVudHMoKSxcbiAgICAgICdTZWFyY2hhYmxlRG9jdW1lbnRzJyxcbiAgICAgIGVuZ2luZVZlcnNpb24sXG4gICAgICBTdGF0aXN0aWMuTUFYSU1VTSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdtZXRyaWNTZWFyY2hMYXRlbmN5JywgKCkgPT4ge1xuICAgIHRlc3RNZXRyaWMoXG4gICAgICAoZG9tYWluKSA9PiBkb21haW4ubWV0cmljU2VhcmNoTGF0ZW5jeSgpLFxuICAgICAgJ1NlYXJjaExhdGVuY3knLFxuICAgICAgZW5naW5lVmVyc2lvbixcbiAgICAgICdwOTknLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ21ldHJpY0luZGV4aW5nTGF0ZW5jeScsICgpID0+IHtcbiAgICB0ZXN0TWV0cmljKFxuICAgICAgKGRvbWFpbikgPT4gZG9tYWluLm1ldHJpY0luZGV4aW5nTGF0ZW5jeSgpLFxuICAgICAgJ0luZGV4aW5nTGF0ZW5jeScsXG4gICAgICBlbmdpbmVWZXJzaW9uLFxuICAgICAgJ3A5OScsXG4gICAgKTtcbiAgfSk7XG5cbn0pO1xuXG5kZXNjcmliZSgnaW1wb3J0JywgKCkgPT4ge1xuXG4gIHRlc3QoJ3N0YXRpYyBmcm9tRG9tYWluRW5kcG9pbnQoZW5kcG9pbnQpIGFsbG93cyBpbXBvcnRpbmcgYW4gZXh0ZXJuYWwvZXhpc3RpbmcgZG9tYWluJywgKCkgPT4ge1xuICAgIGNvbnN0IGRvbWFpbk5hbWUgPSAndGVzdC1kb21haW4tMncyeDJ1M3RpZmx5JztcbiAgICBjb25zdCBkb21haW5FbmRwb2ludFdpdGhvdXRIdHRwcyA9IGAke2RvbWFpbk5hbWV9LWpjam90cnQ2ZjdvdGVtNHNxY3diY2gzYzR1LnRlc3RyZWdpb24uZXMuYW1hem9uYXdzLmNvbWA7XG4gICAgY29uc3QgZG9tYWluRW5kcG9pbnQgPSBgaHR0cHM6Ly8ke2RvbWFpbkVuZHBvaW50V2l0aG91dEh0dHBzfWA7XG4gICAgY29uc3QgaW1wb3J0ZWQgPSBEb21haW4uZnJvbURvbWFpbkVuZHBvaW50KHN0YWNrLCAnRG9tYWluJywgZG9tYWluRW5kcG9pbnQpO1xuXG4gICAgZXhwZWN0KGltcG9ydGVkLmRvbWFpbk5hbWUpLnRvRXF1YWwoZG9tYWluTmFtZSk7XG4gICAgZXhwZWN0KGltcG9ydGVkLmRvbWFpbkFybikudG9NYXRjaChSZWdFeHAoYGVzOnRlc3RyZWdpb246MTIzNDpkb21haW4vJHtkb21haW5OYW1lfSRgKSk7XG4gICAgZXhwZWN0KGltcG9ydGVkLmRvbWFpbkVuZHBvaW50KS50b0VxdWFsKGRvbWFpbkVuZHBvaW50V2l0aG91dEh0dHBzKTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCAwKTtcbiAgfSk7XG5cbiAgdGVzdCgnc3RhdGljIGZyb21Eb21haW5BdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpIGFsbG93cyBpbXBvcnRpbmcgYW4gZXh0ZXJuYWwvZXhpc3RpbmcgZG9tYWluJywgKCkgPT4ge1xuICAgIGNvbnN0IGRvbWFpbk5hbWUgPSAndGVzdC1kb21haW4tMncyeDJ1M3RpZmx5JztcbiAgICBjb25zdCBkb21haW5Bcm4gPSBgYXJuOmF3czplczp0ZXN0cmVnaW9uOjEyMzQ6ZG9tYWluLyR7ZG9tYWluTmFtZX1gO1xuICAgIGNvbnN0IGRvbWFpbkVuZHBvaW50V2l0aG91dEh0dHBzID0gYCR7ZG9tYWluTmFtZX0tamNqb3RydDZmN290ZW00c3Fjd2JjaDNjNHUudGVzdHJlZ2lvbi5lcy5hbWF6b25hd3MuY29tYDtcbiAgICBjb25zdCBkb21haW5FbmRwb2ludCA9IGBodHRwczovLyR7ZG9tYWluRW5kcG9pbnRXaXRob3V0SHR0cHN9YDtcbiAgICBjb25zdCBpbXBvcnRlZCA9IERvbWFpbi5mcm9tRG9tYWluQXR0cmlidXRlcyhzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIGRvbWFpbkFybixcbiAgICAgIGRvbWFpbkVuZHBvaW50LFxuICAgIH0pO1xuXG4gICAgZXhwZWN0KGltcG9ydGVkLmRvbWFpbk5hbWUpLnRvRXF1YWwoZG9tYWluTmFtZSk7XG4gICAgZXhwZWN0KGltcG9ydGVkLmRvbWFpbkFybikudG9FcXVhbChkb21haW5Bcm4pO1xuICAgIGV4cGVjdChpbXBvcnRlZC5kb21haW5FbmRwb2ludCkudG9FcXVhbChkb21haW5FbmRwb2ludFdpdGhvdXRIdHRwcyk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywgMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3N0YXRpYyBmcm9tRG9tYWluQXR0cmlidXRlcyhhdHRyaWJ1dGVzKSBhbGxvd3MgaW1wb3J0aW5nIHdpdGggdG9rZW4gYXJuIGFuZCBlbmRwb2ludCcsICgpID0+IHtcbiAgICBjb25zdCBkb21haW5Bcm4gPSBuZXcgQ2ZuUGFyYW1ldGVyKHN0YWNrLCAnZG9tYWluQXJuJywgeyB0eXBlOiAnU3RyaW5nJyB9KS52YWx1ZUFzU3RyaW5nO1xuICAgIGNvbnN0IGRvbWFpbkVuZHBvaW50ID0gbmV3IENmblBhcmFtZXRlcihzdGFjaywgJ2RvbWFpbkVuZHBvaW50JywgeyB0eXBlOiAnU3RyaW5nJyB9KS52YWx1ZUFzU3RyaW5nO1xuICAgIGNvbnN0IGltcG9ydGVkID0gRG9tYWluLmZyb21Eb21haW5BdHRyaWJ1dGVzKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgZG9tYWluQXJuLFxuICAgICAgZG9tYWluRW5kcG9pbnQsXG4gICAgfSk7XG4gICAgY29uc3QgZXhwZWN0ZWREb21haW5OYW1lID0ge1xuICAgICAgJ0ZuOjpTZWxlY3QnOiBbXG4gICAgICAgIDEsXG4gICAgICAgIHtcbiAgICAgICAgICAnRm46OlNwbGl0JzogW1xuICAgICAgICAgICAgJy8nLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAnRm46OlNlbGVjdCc6IFtcbiAgICAgICAgICAgICAgICA1LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICdGbjo6U3BsaXQnOiBbXG4gICAgICAgICAgICAgICAgICAgICc6JyxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIFJlZjogJ2RvbWFpbkFybicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG5cbiAgICBleHBlY3Qoc3RhY2sucmVzb2x2ZShpbXBvcnRlZC5kb21haW5OYW1lKSkudG9FcXVhbChleHBlY3RlZERvbWFpbk5hbWUpO1xuICAgIGV4cGVjdChpbXBvcnRlZC5kb21haW5Bcm4pLnRvRXF1YWwoZG9tYWluQXJuKTtcbiAgICBleHBlY3QoaW1wb3J0ZWQuZG9tYWluRW5kcG9pbnQpLnRvRXF1YWwoZG9tYWluRW5kcG9pbnQpO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIDApO1xuICB9KTtcbn0pO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykuZGVzY3JpYmUoJ2FkdmFuY2VkIHNlY3VyaXR5IG9wdGlvbnMnLCAoZW5naW5lVmVyc2lvbikgPT4ge1xuICBjb25zdCBtYXN0ZXJVc2VyQXJuID0gJ2Fybjphd3M6aWFtOjoxMjM0NTY3ODkwMTI6dXNlci9Kb2huRG9lJztcbiAgY29uc3QgbWFzdGVyVXNlck5hbWUgPSAnSm9obkRvZSc7XG4gIGNvbnN0IHBhc3N3b3JkID0gJ3Bhc3N3b3JkJztcbiAgY29uc3QgbWFzdGVyVXNlclBhc3N3b3JkID0gU2VjcmV0VmFsdWUudW5zYWZlUGxhaW5UZXh0KHBhc3N3b3JkKTtcblxuICB0ZXN0KCdlbmFibGUgZmluZS1ncmFpbmVkIGFjY2VzcyBjb250cm9sIHdpdGggYSBtYXN0ZXIgdXNlciBBUk4nLCAoKSA9PiB7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBmaW5lR3JhaW5lZEFjY2Vzc0NvbnRyb2w6IHtcbiAgICAgICAgbWFzdGVyVXNlckFybixcbiAgICAgIH0sXG4gICAgICBlbmNyeXB0aW9uQXRSZXN0OiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgbm9kZVRvTm9kZUVuY3J5cHRpb246IHRydWUsXG4gICAgICBlbmZvcmNlSHR0cHM6IHRydWUsXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgQWR2YW5jZWRTZWN1cml0eU9wdGlvbnM6IHtcbiAgICAgICAgRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgSW50ZXJuYWxVc2VyRGF0YWJhc2VFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgTWFzdGVyVXNlck9wdGlvbnM6IHtcbiAgICAgICAgICBNYXN0ZXJVc2VyQVJOOiBtYXN0ZXJVc2VyQXJuLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIEVuY3J5cHRpb25BdFJlc3RPcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgTm9kZVRvTm9kZUVuY3J5cHRpb25PcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgRG9tYWluRW5kcG9pbnRPcHRpb25zOiB7XG4gICAgICAgIEVuZm9yY2VIVFRQUzogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2VuYWJsZSBmaW5lLWdyYWluZWQgYWNjZXNzIGNvbnRyb2wgd2l0aCBhIG1hc3RlciB1c2VyIG5hbWUgYW5kIHBhc3N3b3JkJywgKCkgPT4ge1xuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgZmluZUdyYWluZWRBY2Nlc3NDb250cm9sOiB7XG4gICAgICAgIG1hc3RlclVzZXJOYW1lLFxuICAgICAgICBtYXN0ZXJVc2VyUGFzc3dvcmQsXG4gICAgICB9LFxuICAgICAgZW5jcnlwdGlvbkF0UmVzdDoge1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG5vZGVUb05vZGVFbmNyeXB0aW9uOiB0cnVlLFxuICAgICAgZW5mb3JjZUh0dHBzOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIEFkdmFuY2VkU2VjdXJpdHlPcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIEludGVybmFsVXNlckRhdGFiYXNlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgTWFzdGVyVXNlck9wdGlvbnM6IHtcbiAgICAgICAgICBNYXN0ZXJVc2VyTmFtZTogbWFzdGVyVXNlck5hbWUsXG4gICAgICAgICAgTWFzdGVyVXNlclBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBFbmNyeXB0aW9uQXRSZXN0T3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIE5vZGVUb05vZGVFbmNyeXB0aW9uT3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIERvbWFpbkVuZHBvaW50T3B0aW9uczoge1xuICAgICAgICBFbmZvcmNlSFRUUFM6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdlbmFibGUgZmluZS1ncmFpbmVkIGFjY2VzcyBjb250cm9sIHdpdGggYSBtYXN0ZXIgdXNlciBuYW1lIGFuZCBkeW5hbWljYWxseSBnZW5lcmF0ZWQgcGFzc3dvcmQnLCAoKSA9PiB7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBmaW5lR3JhaW5lZEFjY2Vzc0NvbnRyb2w6IHtcbiAgICAgICAgbWFzdGVyVXNlck5hbWUsXG4gICAgICB9LFxuICAgICAgZW5jcnlwdGlvbkF0UmVzdDoge1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG5vZGVUb05vZGVFbmNyeXB0aW9uOiB0cnVlLFxuICAgICAgZW5mb3JjZUh0dHBzOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIEFkdmFuY2VkU2VjdXJpdHlPcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIEludGVybmFsVXNlckRhdGFiYXNlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgTWFzdGVyVXNlck9wdGlvbnM6IHtcbiAgICAgICAgICBNYXN0ZXJVc2VyTmFtZTogbWFzdGVyVXNlck5hbWUsXG4gICAgICAgICAgTWFzdGVyVXNlclBhc3N3b3JkOiB7XG4gICAgICAgICAgICAnRm46OkpvaW4nOiBbXG4gICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgJ3t7cmVzb2x2ZTpzZWNyZXRzbWFuYWdlcjonLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIFJlZjogJ0RvbWFpbk1hc3RlclVzZXJCRkFGQTdEOScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnOlNlY3JldFN0cmluZzpwYXNzd29yZDo6fX0nLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIEVuY3J5cHRpb25BdFJlc3RPcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgTm9kZVRvTm9kZUVuY3J5cHRpb25PcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgRG9tYWluRW5kcG9pbnRPcHRpb25zOiB7XG4gICAgICAgIEVuZm9yY2VIVFRQUzogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTZWNyZXRzTWFuYWdlcjo6U2VjcmV0Jywge1xuICAgICAgR2VuZXJhdGVTZWNyZXRTdHJpbmc6IHtcbiAgICAgICAgR2VuZXJhdGVTdHJpbmdLZXk6ICdwYXNzd29yZCcsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdlbmFibGluZyBmaW5lLWdyYWluZWQgYWNjZXNzIGNvbnRyb2wgdGhyb3dzIHdpdGggRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDwgNi43JywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogRW5naW5lVmVyc2lvbi5FTEFTVElDU0VBUkNIXzZfNSxcbiAgICAgIGZpbmVHcmFpbmVkQWNjZXNzQ29udHJvbDoge1xuICAgICAgICBtYXN0ZXJVc2VyQXJuLFxuICAgICAgfSxcbiAgICAgIGVuY3J5cHRpb25BdFJlc3Q6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBub2RlVG9Ob2RlRW5jcnlwdGlvbjogdHJ1ZSxcbiAgICAgIGVuZm9yY2VIdHRwczogdHJ1ZSxcbiAgICB9KSkudG9UaHJvdygvRmluZS1ncmFpbmVkIGFjY2VzcyBjb250cm9sIHJlcXVpcmVzIEVsYXN0aWNzZWFyY2ggdmVyc2lvbiA2XFwuNyBvciBsYXRlciBvciBPcGVuU2VhcmNoIHZlcnNpb24gMVxcLjAgb3IgbGF0ZXIvKTtcbiAgfSk7XG5cbiAgdGVzdCgnZW5hYmxpbmcgZmluZS1ncmFpbmVkIGFjY2VzcyBjb250cm9sIHRocm93cyB3aXRob3V0IG5vZGUtdG8tbm9kZSBlbmNyeXB0aW9uIGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgZmluZUdyYWluZWRBY2Nlc3NDb250cm9sOiB7XG4gICAgICAgIG1hc3RlclVzZXJBcm4sXG4gICAgICB9LFxuICAgICAgZW5jcnlwdGlvbkF0UmVzdDoge1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG5vZGVUb05vZGVFbmNyeXB0aW9uOiBmYWxzZSxcbiAgICAgIGVuZm9yY2VIdHRwczogdHJ1ZSxcbiAgICB9KSkudG9UaHJvdygvTm9kZS10by1ub2RlIGVuY3J5cHRpb24gaXMgcmVxdWlyZWQgd2hlbiBmaW5lLWdyYWluZWQgYWNjZXNzIGNvbnRyb2wgaXMgZW5hYmxlZC8pO1xuICB9KTtcblxuICB0ZXN0KCdlbmFibGluZyBmaW5lLWdyYWluZWQgYWNjZXNzIGNvbnRyb2wgdGhyb3dzIHdpdGhvdXQgZW5jcnlwdGlvbi1hdC1yZXN0IGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgZmluZUdyYWluZWRBY2Nlc3NDb250cm9sOiB7XG4gICAgICAgIG1hc3RlclVzZXJBcm4sXG4gICAgICB9LFxuICAgICAgZW5jcnlwdGlvbkF0UmVzdDoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBub2RlVG9Ob2RlRW5jcnlwdGlvbjogdHJ1ZSxcbiAgICAgIGVuZm9yY2VIdHRwczogdHJ1ZSxcbiAgICB9KSkudG9UaHJvdygvRW5jcnlwdGlvbi1hdC1yZXN0IGlzIHJlcXVpcmVkIHdoZW4gZmluZS1ncmFpbmVkIGFjY2VzcyBjb250cm9sIGlzIGVuYWJsZWQvKTtcbiAgfSk7XG5cbiAgdGVzdCgnZW5hYmxpbmcgZmluZS1ncmFpbmVkIGFjY2VzcyBjb250cm9sIHRocm93cyB3aXRob3V0IGVuZm9yY2VIdHRwcyBlbmFibGVkJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGZpbmVHcmFpbmVkQWNjZXNzQ29udHJvbDoge1xuICAgICAgICBtYXN0ZXJVc2VyQXJuLFxuICAgICAgfSxcbiAgICAgIGVuY3J5cHRpb25BdFJlc3Q6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBub2RlVG9Ob2RlRW5jcnlwdGlvbjogdHJ1ZSxcbiAgICAgIGVuZm9yY2VIdHRwczogZmFsc2UsXG4gICAgfSkpLnRvVGhyb3coL0VuZm9yY2UgSFRUUFMgaXMgcmVxdWlyZWQgd2hlbiBmaW5lLWdyYWluZWQgYWNjZXNzIGNvbnRyb2wgaXMgZW5hYmxlZC8pO1xuICB9KTtcbn0pO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykuZGVzY3JpYmUoJ2N1c3RvbSBlbmRwb2ludHMnLCAoZW5naW5lVmVyc2lvbikgPT4ge1xuICBjb25zdCBjdXN0b21Eb21haW5OYW1lID0gJ3NlYXJjaC5leGFtcGxlLmNvbSc7XG5cbiAgdGVzdCgnY3VzdG9tIGRvbWFpbiB3aXRob3V0IGhvc3RlZCB6b25lIGFuZCBkZWZhdWx0IGNlcnQnLCAoKSA9PiB7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBub2RlVG9Ob2RlRW5jcnlwdGlvbjogdHJ1ZSxcbiAgICAgIGVuZm9yY2VIdHRwczogdHJ1ZSxcbiAgICAgIGN1c3RvbUVuZHBvaW50OiB7XG4gICAgICAgIGRvbWFpbk5hbWU6IGN1c3RvbURvbWFpbk5hbWUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIERvbWFpbkVuZHBvaW50T3B0aW9uczoge1xuICAgICAgICBFbmZvcmNlSFRUUFM6IHRydWUsXG4gICAgICAgIEN1c3RvbUVuZHBvaW50RW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgQ3VzdG9tRW5kcG9pbnQ6IGN1c3RvbURvbWFpbk5hbWUsXG4gICAgICAgIEN1c3RvbUVuZHBvaW50Q2VydGlmaWNhdGVBcm46IHtcbiAgICAgICAgICBSZWY6ICdEb21haW5DdXN0b21FbmRwb2ludENlcnRpZmljYXRlRDA4MEE2OUUnLCAvLyBBdXRvLWdlbmVyYXRlZCBjZXJ0aWZpY2F0ZVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDZXJ0aWZpY2F0ZU1hbmFnZXI6OkNlcnRpZmljYXRlJywge1xuICAgICAgRG9tYWluTmFtZTogY3VzdG9tRG9tYWluTmFtZSxcbiAgICAgIFZhbGlkYXRpb25NZXRob2Q6ICdFTUFJTCcsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2N1c3RvbSBkb21haW4gd2l0aCBob3N0ZWQgem9uZSBhbmQgZGVmYXVsdCBjZXJ0JywgKCkgPT4ge1xuICAgIGNvbnN0IHpvbmUgPSBuZXcgcm91dGU1My5Ib3N0ZWRab25lKHN0YWNrLCAnRHVtbXlab25lJywgeyB6b25lTmFtZTogJ2V4YW1wbGUuY29tJyB9KTtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIG5vZGVUb05vZGVFbmNyeXB0aW9uOiB0cnVlLFxuICAgICAgZW5mb3JjZUh0dHBzOiB0cnVlLFxuICAgICAgY3VzdG9tRW5kcG9pbnQ6IHtcbiAgICAgICAgZG9tYWluTmFtZTogY3VzdG9tRG9tYWluTmFtZSxcbiAgICAgICAgaG9zdGVkWm9uZTogem9uZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgRG9tYWluRW5kcG9pbnRPcHRpb25zOiB7XG4gICAgICAgIEVuZm9yY2VIVFRQUzogdHJ1ZSxcbiAgICAgICAgQ3VzdG9tRW5kcG9pbnRFbmFibGVkOiB0cnVlLFxuICAgICAgICBDdXN0b21FbmRwb2ludDogY3VzdG9tRG9tYWluTmFtZSxcbiAgICAgICAgQ3VzdG9tRW5kcG9pbnRDZXJ0aWZpY2F0ZUFybjoge1xuICAgICAgICAgIFJlZjogJ0RvbWFpbkN1c3RvbUVuZHBvaW50Q2VydGlmaWNhdGVEMDgwQTY5RScsIC8vIEF1dG8tZ2VuZXJhdGVkIGNlcnRpZmljYXRlXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNlcnRpZmljYXRlTWFuYWdlcjo6Q2VydGlmaWNhdGUnLCB7XG4gICAgICBEb21haW5OYW1lOiBjdXN0b21Eb21haW5OYW1lLFxuICAgICAgRG9tYWluVmFsaWRhdGlvbk9wdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIERvbWFpbk5hbWU6IGN1c3RvbURvbWFpbk5hbWUsXG4gICAgICAgICAgSG9zdGVkWm9uZUlkOiB7XG4gICAgICAgICAgICBSZWY6ICdEdW1teVpvbmUwM0UwRkU4MScsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBWYWxpZGF0aW9uTWV0aG9kOiAnRE5TJyxcbiAgICB9KTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpSb3V0ZTUzOjpSZWNvcmRTZXQnLCB7XG4gICAgICBOYW1lOiAnc2VhcmNoLmV4YW1wbGUuY29tLicsXG4gICAgICBUeXBlOiAnQ05BTUUnLFxuICAgICAgSG9zdGVkWm9uZUlkOiB7XG4gICAgICAgIFJlZjogJ0R1bW15Wm9uZTAzRTBGRTgxJyxcbiAgICAgIH0sXG4gICAgICBSZXNvdXJjZVJlY29yZHM6IFtcbiAgICAgICAge1xuICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgJ0RvbWFpbjY2QUM2OUUwJyxcbiAgICAgICAgICAgICdEb21haW5FbmRwb2ludCcsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2N1c3RvbSBkb21haW4gd2l0aCBob3N0ZWQgem9uZSBhbmQgZ2l2ZW4gY2VydCcsICgpID0+IHtcbiAgICBjb25zdCB6b25lID0gbmV3IHJvdXRlNTMuSG9zdGVkWm9uZShzdGFjaywgJ0R1bW15Wm9uZScsIHtcbiAgICAgIHpvbmVOYW1lOiAnZXhhbXBsZS5jb20nLFxuICAgIH0pO1xuICAgIGNvbnN0IGNlcnRpZmljYXRlID0gbmV3IGFjbS5DZXJ0aWZpY2F0ZShzdGFjaywgJ0R1bW15Q2VydCcsIHtcbiAgICAgIGRvbWFpbk5hbWU6IGN1c3RvbURvbWFpbk5hbWUsXG4gICAgfSk7XG5cbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIG5vZGVUb05vZGVFbmNyeXB0aW9uOiB0cnVlLFxuICAgICAgZW5mb3JjZUh0dHBzOiB0cnVlLFxuICAgICAgY3VzdG9tRW5kcG9pbnQ6IHtcbiAgICAgICAgZG9tYWluTmFtZTogY3VzdG9tRG9tYWluTmFtZSxcbiAgICAgICAgaG9zdGVkWm9uZTogem9uZSxcbiAgICAgICAgY2VydGlmaWNhdGUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIERvbWFpbkVuZHBvaW50T3B0aW9uczoge1xuICAgICAgICBFbmZvcmNlSFRUUFM6IHRydWUsXG4gICAgICAgIEN1c3RvbUVuZHBvaW50RW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgQ3VzdG9tRW5kcG9pbnQ6IGN1c3RvbURvbWFpbk5hbWUsXG4gICAgICAgIEN1c3RvbUVuZHBvaW50Q2VydGlmaWNhdGVBcm46IHtcbiAgICAgICAgICBSZWY6ICdEdW1teUNlcnRGQTM3NjcwQicsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlJvdXRlNTM6OlJlY29yZFNldCcsIHtcbiAgICAgIE5hbWU6ICdzZWFyY2guZXhhbXBsZS5jb20uJyxcbiAgICAgIFR5cGU6ICdDTkFNRScsXG4gICAgICBIb3N0ZWRab25lSWQ6IHtcbiAgICAgICAgUmVmOiAnRHVtbXlab25lMDNFMEZFODEnLFxuICAgICAgfSxcbiAgICAgIFJlc291cmNlUmVjb3JkczogW1xuICAgICAgICB7XG4gICAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgICAnRG9tYWluNjZBQzY5RTAnLFxuICAgICAgICAgICAgJ0RvbWFpbkVuZHBvaW50JyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfSk7XG5cbn0pO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykuZGVzY3JpYmUoJ2N1c3RvbSBlcnJvciByZXNwb25zZXMnLCAoZW5naW5lVmVyc2lvbikgPT4ge1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gYXZhaWxhYmlsaXR5Wm9uZUNvdW50IGRvZXMgbm90IG1hdGNoIHZwY09wdGlvbnMuc3VibmV0cyBsZW5ndGgnLCAoKSA9PiB7XG4gICAgY29uc3QgdnBjID0gbmV3IFZwYyhzdGFjaywgJ1ZwYycsIHtcbiAgICAgIG1heEF6czogMSxcbiAgICB9KTtcblxuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIHpvbmVBd2FyZW5lc3M6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgYXZhaWxhYmlsaXR5Wm9uZUNvdW50OiAyLFxuICAgICAgfSxcbiAgICAgIHZwYyxcbiAgICB9KSkudG9UaHJvdygveW91IG5lZWQgdG8gcHJvdmlkZSBhIHN1Ym5ldCBmb3IgZWFjaCBBWiB5b3UgYXJlIHVzaW5nLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ0ltcG9ydGVkIFZQQyB3aXRoIHN1Ym5ldHMgdGhhdCBhcmUgc3RpbGwgcGVuZGluZyBsb29rdXAgd29uXFwndCB0aHJvdyBBeiBjb3VudCBtaXNtYXRjaCcsICgpID0+IHtcbiAgICBjb25zdCB2cGMgPSBWcGMuZnJvbUxvb2t1cChzdGFjaywgJ0V4YW1wbGVWcGMnLCB7XG4gICAgICB2cGNJZDogJ3ZwYy0xMjMnLFxuICAgIH0pO1xuICAgIGxldCBzdWJuZXRzID0gdnBjLnNlbGVjdFN1Ym5ldHMoe1xuICAgICAgc3VibmV0VHlwZTogU3VibmV0VHlwZS5QUklWQVRFX1dJVEhfRUdSRVNTLFxuICAgIH0pO1xuXG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjEnLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgdnBjLFxuICAgICAgdnBjU3VibmV0czogW3N1Ym5ldHNdLFxuICAgICAgem9uZUF3YXJlbmVzczoge1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBhdmFpbGFiaWxpdHlab25lQ291bnQ6IDMsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIDEpO1xuICB9KTtcblxuICB0ZXN0KCdlcnJvciB3aGVuIG1hc3RlciwgZGF0YSBvciBVbHRyYSBXYXJtIGluc3RhbmNlIHR5cGVzIGRvIG5vdCBlbmQgd2l0aCAuc2VhcmNoJywgKCkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gL2luc3RhbmNlIHR5cGVzIG11c3QgZW5kIHdpdGggXCIuc2VhcmNoXCIvO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMScsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBtYXN0ZXJOb2RlSW5zdGFuY2VUeXBlOiAnYzUubGFyZ2UnLFxuICAgICAgfSxcbiAgICB9KSkudG9UaHJvdyhlcnJvcik7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4yJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIGRhdGFOb2RlSW5zdGFuY2VUeXBlOiAnYzUuMnhsYXJnZScsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KGVycm9yKTtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjMnLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgY2FwYWNpdHk6IHtcbiAgICAgICAgd2FybUluc3RhbmNlVHlwZTogJ3VsdHJhd2FybTEubWVkaXVtJyxcbiAgICAgIH0sXG4gICAgfSkpLnRvVGhyb3coZXJyb3IpO1xuICB9KTtcblxuICB0ZXN0KCdlcnJvciB3aGVuIFVsdHJhIFdhcm0gaW5zdGFuY2UgdHlwZXMgZG8gbm90IHN0YXJ0IHdpdGggdWx0cmF3YXJtJywgKCkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gL1VsdHJhV2FybSBub2RlIGluc3RhbmNlIHR5cGUgbXVzdCBzdGFydCB3aXRoIFwidWx0cmF3YXJtXCIuLztcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjEnLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgY2FwYWNpdHk6IHtcbiAgICAgICAgd2FybUluc3RhbmNlVHlwZTogJ3QzLnNtYWxsLnNlYXJjaCcsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KGVycm9yKTtcbiAgfSk7XG5cbiAgdGVzdCgnZXJyb3Igd2hlbiBFbGFzdGljc2VhcmNoIHZlcnNpb24gaXMgdW5zdXBwb3J0ZWQvdW5rbm93bicsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjEnLCB7XG4gICAgICB2ZXJzaW9uOiBFbmdpbmVWZXJzaW9uLmVsYXN0aWNzZWFyY2goJzUuNCcpLFxuICAgIH0pKS50b1Rocm93KCdVbmtub3duIEVsYXN0aWNzZWFyY2ggdmVyc2lvbjogNS40Jyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gaW52YWxpZCBkb21haW4gbmFtZSBpcyBnaXZlbicsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjEnLCB7XG4gICAgICB2ZXJzaW9uOiBFbmdpbmVWZXJzaW9uLk9QRU5TRUFSQ0hfMV8wLFxuICAgICAgZG9tYWluTmFtZTogJ0ludmFsaWROYW1lJyxcbiAgICB9KSkudG9UaHJvdygvVmFsaWQgY2hhcmFjdGVycyBhcmUgYS16Lyk7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4yJywge1xuICAgICAgdmVyc2lvbjogRW5naW5lVmVyc2lvbi5PUEVOU0VBUkNIXzFfMCxcbiAgICAgIGRvbWFpbk5hbWU6ICdhJy5yZXBlYXQoMjkpLFxuICAgIH0pKS50b1Rocm93KC9JdCBtdXN0IGJlIGJldHdlZW4gMyBhbmQgMjggY2hhcmFjdGVycy8pO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMycsIHtcbiAgICAgIHZlcnNpb246IEVuZ2luZVZlcnNpb24uT1BFTlNFQVJDSF8xXzAsXG4gICAgICBkb21haW5OYW1lOiAnMTIzZG9tYWluJyxcbiAgICB9KSkudG9UaHJvdygvSXQgbXVzdCBzdGFydCB3aXRoIGEgbG93ZXJjYXNlIGxldHRlci8pO1xuICB9KTtcblxuICB0ZXN0KCdlcnJvciB3aGVuIGVycm9yIGxvZyBwdWJsaXNoaW5nIGlzIGVuYWJsZWQgZm9yIEVsYXN0aWNzZWFyY2ggdmVyc2lvbiA8IDUuMScsICgpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IC9FcnJvciBsb2dzIHB1Ymxpc2hpbmcgcmVxdWlyZXMgRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDUuMSBvciBsYXRlciBvciBPcGVuU2VhcmNoIHZlcnNpb24gMS4wIG9yIGxhdGVyLztcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjEnLCB7XG4gICAgICB2ZXJzaW9uOiBFbmdpbmVWZXJzaW9uLkVMQVNUSUNTRUFSQ0hfMl8zLFxuICAgICAgbG9nZ2luZzoge1xuICAgICAgICBhcHBMb2dFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KSkudG9UaHJvdyhlcnJvcik7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gZW5jcnlwdGlvbiBhdCByZXN0IGlzIGVuYWJsZWQgZm9yIEVsYXN0aWNzZWFyY2ggdmVyc2lvbiA8IDUuMScsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjEnLCB7XG4gICAgICB2ZXJzaW9uOiBFbmdpbmVWZXJzaW9uLkVMQVNUSUNTRUFSQ0hfMl8zLFxuICAgICAgZW5jcnlwdGlvbkF0UmVzdDoge1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KSkudG9UaHJvdygvRW5jcnlwdGlvbiBvZiBkYXRhIGF0IHJlc3QgcmVxdWlyZXMgRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDUuMSBvciBsYXRlciBvciBPcGVuU2VhcmNoIHZlcnNpb24gMS4wIG9yIGxhdGVyLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gY29nbml0byBmb3IgT3BlblNlYXJjaCBEYXNoYm9hcmRzIGlzIGVuYWJsZWQgZm9yIGVsYXN0aWNzZWFyY2ggdmVyc2lvbiA8IDUuMScsICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IGlhbS5Vc2VyKHN0YWNrLCAndXNlcicpO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMScsIHtcbiAgICAgIHZlcnNpb246IEVuZ2luZVZlcnNpb24uRUxBU1RJQ1NFQVJDSF8yXzMsXG4gICAgICBjb2duaXRvRGFzaGJvYXJkc0F1dGg6IHtcbiAgICAgICAgaWRlbnRpdHlQb29sSWQ6ICd0ZXN0LWlkZW50aXR5LXBvb2wtaWQnLFxuICAgICAgICByb2xlOiBuZXcgaWFtLlJvbGUoc3RhY2ssICdSb2xlJywgeyBhc3N1bWVkQnk6IHVzZXIgfSksXG4gICAgICAgIHVzZXJQb29sSWQ6ICd0ZXN0LXVzZXItcG9vbC1pZCcsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KC9Db2duaXRvIGF1dGhlbnRpY2F0aW9uIGZvciBPcGVuU2VhcmNoIERhc2hib2FyZHMgcmVxdWlyZXMgRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDUuMSBvciBsYXRlciBvciBPcGVuU2VhcmNoIHZlcnNpb24gMS4wIG9yIGxhdGVyLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gQzUsIEkzLCBNNSwgb3IgUjUgaW5zdGFuY2UgdHlwZXMgYXJlIHNwZWNpZmllZCBmb3IgRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDwgNS4xJywgKCkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gL0M1LCBJMywgTTUsIGFuZCBSNSBpbnN0YW5jZSB0eXBlcyByZXF1aXJlIEVsYXN0aWNzZWFyY2ggdmVyc2lvbiA1LjEgb3IgbGF0ZXIgb3IgT3BlblNlYXJjaCB2ZXJzaW9uIDEuMCBvciBsYXRlci87XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4xJywge1xuICAgICAgdmVyc2lvbjogRW5naW5lVmVyc2lvbi5FTEFTVElDU0VBUkNIXzJfMyxcbiAgICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIG1hc3Rlck5vZGVJbnN0YW5jZVR5cGU6ICdjNS5tZWRpdW0uc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgfSkpLnRvVGhyb3coZXJyb3IpO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMicsIHtcbiAgICAgIHZlcnNpb246IEVuZ2luZVZlcnNpb24uRUxBU1RJQ1NFQVJDSF8xXzUsXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBkYXRhTm9kZUluc3RhbmNlVHlwZTogJ2kzLjJ4bGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgfSkpLnRvVGhyb3coZXJyb3IpO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMycsIHtcbiAgICAgIHZlcnNpb246IEVuZ2luZVZlcnNpb24uRUxBU1RJQ1NFQVJDSF8xXzUsXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBkYXRhTm9kZUluc3RhbmNlVHlwZTogJ201LjJ4bGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgfSkpLnRvVGhyb3coZXJyb3IpO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluNCcsIHtcbiAgICAgIHZlcnNpb246IEVuZ2luZVZlcnNpb24uRUxBU1RJQ1NFQVJDSF8xXzUsXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBtYXN0ZXJOb2RlSW5zdGFuY2VUeXBlOiAncjUuMnhsYXJnZS5zZWFyY2gnLFxuICAgICAgfSxcbiAgICB9KSkudG9UaHJvdyhlcnJvcik7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gbm9kZSB0byBub2RlIGVuY3J5cHRpb24gaXMgZW5hYmxlZCBmb3IgRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDwgNi4wJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMScsIHtcbiAgICAgIHZlcnNpb246IEVuZ2luZVZlcnNpb24uRUxBU1RJQ1NFQVJDSF81XzYsXG4gICAgICBub2RlVG9Ob2RlRW5jcnlwdGlvbjogdHJ1ZSxcbiAgICB9KSkudG9UaHJvdygvTm9kZS10by1ub2RlIGVuY3J5cHRpb24gcmVxdWlyZXMgRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDYuMCBvciBsYXRlciBvciBPcGVuU2VhcmNoIHZlcnNpb24gMS4wIG9yIGxhdGVyLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gaTMgb3IgcjZnIGluc3RhbmNlIHR5cGVzIGFyZSBzcGVjaWZpZWQgd2l0aCBFQlMgZW5hYmxlZCcsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjEnLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgY2FwYWNpdHk6IHtcbiAgICAgICAgZGF0YU5vZGVJbnN0YW5jZVR5cGU6ICdpMy4yeGxhcmdlLnNlYXJjaCcsXG4gICAgICB9LFxuICAgICAgZWJzOiB7XG4gICAgICAgIHZvbHVtZVNpemU6IDEwMCxcbiAgICAgICAgdm9sdW1lVHlwZTogRWJzRGV2aWNlVm9sdW1lVHlwZS5HRU5FUkFMX1BVUlBPU0VfU1NELFxuICAgICAgfSxcbiAgICB9KSkudG9UaHJvdygvSTMgYW5kIFI2R0QgaW5zdGFuY2UgdHlwZXMgZG8gbm90IHN1cHBvcnQgRUJTIHN0b3JhZ2Ugdm9sdW1lcy8pO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBkYXRhTm9kZUluc3RhbmNlVHlwZTogJ3I2Z2QubGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgICBlYnM6IHtcbiAgICAgICAgdm9sdW1lU2l6ZTogMTAwLFxuICAgICAgICB2b2x1bWVUeXBlOiBFYnNEZXZpY2VWb2x1bWVUeXBlLkdFTkVSQUxfUFVSUE9TRV9TU0QsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KC9JMyBhbmQgUjZHRCBpbnN0YW5jZSB0eXBlcyBkbyBub3Qgc3VwcG9ydCBFQlMgc3RvcmFnZSB2b2x1bWVzLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gbTMsIHIzLCBvciB0MiBpbnN0YW5jZSB0eXBlcyBhcmUgc3BlY2lmaWVkIHdpdGggZW5jcnlwdGlvbiBhdCByZXN0IGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSAvTTMsIFIzLCBhbmQgVDIgaW5zdGFuY2UgdHlwZXMgZG8gbm90IHN1cHBvcnQgZW5jcnlwdGlvbiBvZiBkYXRhIGF0IHJlc3QvO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMScsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBtYXN0ZXJOb2RlSW5zdGFuY2VUeXBlOiAnbTMuMnhsYXJnZS5zZWFyY2gnLFxuICAgICAgfSxcbiAgICAgIGVuY3J5cHRpb25BdFJlc3Q6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSkpLnRvVGhyb3coZXJyb3IpO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBkYXRhTm9kZUluc3RhbmNlVHlwZTogJ3IzLjJ4bGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgICBlbmNyeXB0aW9uQXRSZXN0OiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KGVycm9yKTtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjMnLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgY2FwYWNpdHk6IHtcbiAgICAgICAgbWFzdGVyTm9kZUluc3RhbmNlVHlwZTogJ3QyLjJ4bGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgICBlbmNyeXB0aW9uQXRSZXN0OiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KGVycm9yKTtcbiAgfSk7XG5cbiAgdGVzdCgnZXJyb3Igd2hlbiB0Mi5taWNybyBpcyBzcGVjaWZpZWQgd2l0aCBFbGFzdGljc2VhcmNoIHZlcnNpb24gPiAyLjMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4xJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIG1hc3Rlck5vZGVJbnN0YW5jZVR5cGU6ICd0Mi5taWNyby5zZWFyY2gnLFxuICAgICAgfSxcbiAgICB9KSkudG9UaHJvdygvdDIubWljcm8uc2VhcmNoIGluc3RhbmNlIHR5cGUgc3VwcG9ydHMgb25seSBFbGFzdGljc2VhcmNoIHZlcnNpb25zIDEuNSBhbmQgMi4zLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gYW55IGluc3RhbmNlIHR5cGUgb3RoZXIgdGhhbiBSMywgSTMgYW5kIFI2R0QgYXJlIHNwZWNpZmllZCB3aXRob3V0IEVCUyBlbmFibGVkJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMScsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBlYnM6IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgY2FwYWNpdHk6IHtcbiAgICAgICAgbWFzdGVyTm9kZUluc3RhbmNlVHlwZTogJ201LmxhcmdlLnNlYXJjaCcsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KC9FQlMgdm9sdW1lcyBhcmUgcmVxdWlyZWQgd2hlbiB1c2luZyBpbnN0YW5jZSB0eXBlcyBvdGhlciB0aGFuIHIzLCBpMyBvciByNmdkLyk7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4yJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGViczoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBkYXRhTm9kZUluc3RhbmNlVHlwZTogJ201LmxhcmdlLnNlYXJjaCcsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KC9FQlMgdm9sdW1lcyBhcmUgcmVxdWlyZWQgd2hlbiB1c2luZyBpbnN0YW5jZSB0eXBlcyBvdGhlciB0aGFuIHIzLCBpMyBvciByNmdkLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2NhbiB1c2UgY29tcGF0aWJsZSBtYXN0ZXIgaW5zdGFuY2UgdHlwZXMgdGhhdCBkb2VzIG5vdCBoYXZlIGxvY2FsIHN0b3JhZ2Ugd2hlbiBkYXRhIG5vZGUgdHlwZSBpcyBpMyBvciByNmdkJywgKCkgPT4ge1xuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4xJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGViczoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBtYXN0ZXJOb2RlSW5zdGFuY2VUeXBlOiAnYzUuMnhsYXJnZS5zZWFyY2gnLFxuICAgICAgICBkYXRhTm9kZUluc3RhbmNlVHlwZTogJ2kzLjJ4bGFyZ2Uuc2VhcmNoJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbjInLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgZWJzOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIG1hc3Rlck5vZGVzOiAzLFxuICAgICAgICBtYXN0ZXJOb2RlSW5zdGFuY2VUeXBlOiAnYzZnLmxhcmdlLnNlYXJjaCcsXG4gICAgICAgIGRhdGFOb2RlSW5zdGFuY2VUeXBlOiAncjZnZC5sYXJnZS5zZWFyY2gnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBib3RoIGNvbmZpZ3VyYXRpb25zIHBhc3Mgc3ludGgtdGltZSB2YWxpZGF0aW9uXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIDIpO1xuICB9KTtcblxuICB0ZXN0KCdlcnJvciB3aGVuIGF2YWlsYWJpbGl0eVpvbmVDb3VudCBpcyBub3QgMiBvciAzJywgKCkgPT4ge1xuICAgIGNvbnN0IHZwYyA9IG5ldyBWcGMoc3RhY2ssICdWcGMnKTtcblxuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMScsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICB2cGMsXG4gICAgICB6b25lQXdhcmVuZXNzOiB7XG4gICAgICAgIGF2YWlsYWJpbGl0eVpvbmVDb3VudDogNCxcbiAgICAgIH0sXG4gICAgfSkpLnRvVGhyb3coL0ludmFsaWQgem9uZSBhd2FyZW5lc3MgY29uZmlndXJhdGlvbjsgYXZhaWxhYmlsaXR5Wm9uZUNvdW50IG11c3QgYmUgMiBvciAzLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Vycm9yIHdoZW4gVWx0cmFXYXJtIGluc3RhbmNlIGlzIHVzZWQgd2l0aCBFbGFzdGljc2VhcmNoIHZlcnNpb24gPCA2LjgnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4xJywge1xuICAgICAgdmVyc2lvbjogRW5naW5lVmVyc2lvbi5FTEFTVElDU0VBUkNIXzZfNyxcbiAgICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIG1hc3Rlck5vZGVzOiAxLFxuICAgICAgICB3YXJtTm9kZXM6IDEsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KC9VbHRyYVdhcm0gcmVxdWlyZXMgRWxhc3RpY3NlYXJjaCB2ZXJzaW9uIDZcXC44IG9yIGxhdGVyIG9yIE9wZW5TZWFyY2ggdmVyc2lvbiAxLjAgb3IgbGF0ZXIvKTtcbiAgfSk7XG5cbiAgdGVzdCgnZXJyb3Igd2hlbiB0MiBvciB0MyBpbnN0YW5jZSB0eXBlcyBhcmUgc3BlY2lmaWVkIHdpdGggVWx0cmFtV2FybSBlbmFibGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gL1QyIGFuZCBUMyBpbnN0YW5jZSB0eXBlcyBkbyBub3Qgc3VwcG9ydCBVbHRyYVdhcm0gc3RvcmFnZS87XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4xJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIG1hc3Rlck5vZGVJbnN0YW5jZVR5cGU6ICd0Mi4yeGxhcmdlLnNlYXJjaCcsXG4gICAgICAgIHdhcm1Ob2RlczogMSxcbiAgICAgIH0sXG4gICAgfSkpLnRvVGhyb3coZXJyb3IpO1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluMicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICBjYXBhY2l0eToge1xuICAgICAgICBtYXN0ZXJOb2RlSW5zdGFuY2VUeXBlOiAndDMuMnhsYXJnZS5zZWFyY2gnLFxuICAgICAgICB3YXJtTm9kZXM6IDEsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KGVycm9yKTtcbiAgfSk7XG5cbiAgdGVzdCgnZXJyb3Igd2hlbiBVbHRyYVdhcm0gaW5zdGFuY2UgaXMgdXNlZCBhbmQgbm8gZGVkaWNhdGVkIG1hc3RlciBpbnN0YW5jZSBzcGVjaWZpZWQnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4xJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIHdhcm1Ob2RlczogMSxcbiAgICAgICAgbWFzdGVyTm9kZXM6IDAsXG4gICAgICB9LFxuICAgIH0pKS50b1Rocm93KC9EZWRpY2F0ZWQgbWFzdGVyIG5vZGUgaXMgcmVxdWlyZWQgd2hlbiBVbHRyYVdhcm0gc3RvcmFnZSBpcyBlbmFibGVkLyk7XG4gIH0pO1xuXG59KTtcblxudGVzdCgnY2FuIHNwZWNpZnkgZnV0dXJlIHZlcnNpb24nLCAoKSA9PiB7XG4gIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7IHZlcnNpb246IEVuZ2luZVZlcnNpb24uZWxhc3RpY3NlYXJjaCgnOC4yJykgfSk7XG5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICBFbmdpbmVWZXJzaW9uOiAnRWxhc3RpY3NlYXJjaF84LjInLFxuICB9KTtcbn0pO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykuZGVzY3JpYmUoJ3Vuc2lnbmVkIGJhc2ljIGF1dGgnLCAoZW5naW5lVmVyc2lvbikgPT4ge1xuICB0ZXN0KCdjYW4gY3JlYXRlIGEgZG9tYWluIHdpdGggdW5zaWduZWQgYmFzaWMgYXV0aCcsICgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIHVzZVVuc2lnbmVkQmFzaWNBdXRoOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIEFkdmFuY2VkU2VjdXJpdHlPcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIEludGVybmFsVXNlckRhdGFiYXNlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgTWFzdGVyVXNlck9wdGlvbnM6IHtcbiAgICAgICAgICBNYXN0ZXJVc2VyTmFtZTogJ2FkbWluJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBFbmNyeXB0aW9uQXRSZXN0T3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIE5vZGVUb05vZGVFbmNyeXB0aW9uT3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIERvbWFpbkVuZHBvaW50T3B0aW9uczoge1xuICAgICAgICBFbmZvcmNlSFRUUFM6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdkb2VzIG5vdCBvdmVyd3JpdGUgbWFzdGVyIHVzZXIgQVJOIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgbWFzdGVyVXNlckFybiA9ICdhcm46YXdzOmlhbTo6MTIzNDU2Nzg5MDEyOnVzZXIvSm9obkRvZSc7XG5cbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGZpbmVHcmFpbmVkQWNjZXNzQ29udHJvbDoge1xuICAgICAgICBtYXN0ZXJVc2VyQXJuLFxuICAgICAgfSxcbiAgICAgIHVzZVVuc2lnbmVkQmFzaWNBdXRoOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIEFkdmFuY2VkU2VjdXJpdHlPcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIEludGVybmFsVXNlckRhdGFiYXNlRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIE1hc3RlclVzZXJPcHRpb25zOiB7XG4gICAgICAgICAgTWFzdGVyVXNlckFSTjogbWFzdGVyVXNlckFybixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBFbmNyeXB0aW9uQXRSZXN0T3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIE5vZGVUb05vZGVFbmNyeXB0aW9uT3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIERvbWFpbkVuZHBvaW50T3B0aW9uczoge1xuICAgICAgICBFbmZvcmNlSFRUUFM6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdkb2VzIG5vdCBvdmVyd3JpdGUgbWFzdGVyIHVzZXIgbmFtZSBhbmQgcGFzc3dvcmQnLCAoKSA9PiB7XG4gICAgY29uc3QgbWFzdGVyVXNlck5hbWUgPSAnSm9obkRvZSc7XG4gICAgY29uc3QgcGFzc3dvcmQgPSAncGFzc3dvcmQnO1xuICAgIGNvbnN0IG1hc3RlclVzZXJQYXNzd29yZCA9IFNlY3JldFZhbHVlLnVuc2FmZVBsYWluVGV4dChwYXNzd29yZCk7XG5cbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGZpbmVHcmFpbmVkQWNjZXNzQ29udHJvbDoge1xuICAgICAgICBtYXN0ZXJVc2VyTmFtZSxcbiAgICAgICAgbWFzdGVyVXNlclBhc3N3b3JkLFxuICAgICAgfSxcbiAgICAgIHVzZVVuc2lnbmVkQmFzaWNBdXRoOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIEFkdmFuY2VkU2VjdXJpdHlPcHRpb25zOiB7XG4gICAgICAgIEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIEludGVybmFsVXNlckRhdGFiYXNlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgTWFzdGVyVXNlck9wdGlvbnM6IHtcbiAgICAgICAgICBNYXN0ZXJVc2VyTmFtZTogbWFzdGVyVXNlck5hbWUsXG4gICAgICAgICAgTWFzdGVyVXNlclBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBFbmNyeXB0aW9uQXRSZXN0T3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIE5vZGVUb05vZGVFbmNyeXB0aW9uT3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIERvbWFpbkVuZHBvaW50T3B0aW9uczoge1xuICAgICAgICBFbmZvcmNlSFRUUFM6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdmYWlscyB0byBjcmVhdGUgYSBkb21haW4gd2l0aCB1bnNpZ25lZCBiYXNpYyBhdXRoIHdoZW4gZW5mb3JjZSBIVFRQUyBpcyBkaXNhYmxlZCcsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IGVuZ2luZVZlcnNpb24sXG4gICAgICB1c2VVbnNpZ25lZEJhc2ljQXV0aDogdHJ1ZSxcbiAgICAgIGVuZm9yY2VIdHRwczogZmFsc2UsXG4gICAgfSkpLnRvVGhyb3coL1lvdSBjYW5ub3QgZGlzYWJsZSBIVFRQUyBhbmQgdXNlIHVuc2lnbmVkIGJhc2ljIGF1dGgvKTtcbiAgfSk7XG5cbiAgdGVzdCgnZmFpbHMgdG8gY3JlYXRlIGEgZG9tYWluIHdpdGggdW5zaWduZWQgYmFzaWMgYXV0aCB3aGVuIG5vZGUgdG8gbm9kZSBlbmNyeXB0aW9uIGlzIGRpc2FibGVkJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIHVzZVVuc2lnbmVkQmFzaWNBdXRoOiB0cnVlLFxuICAgICAgbm9kZVRvTm9kZUVuY3J5cHRpb246IGZhbHNlLFxuICAgIH0pKS50b1Rocm93KC9Zb3UgY2Fubm90IGRpc2FibGUgbm9kZSB0byBub2RlIGVuY3J5cHRpb24gYW5kIHVzZSB1bnNpZ25lZCBiYXNpYyBhdXRoLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2ZhaWxzIHRvIGNyZWF0ZSBhIGRvbWFpbiB3aXRoIHVuc2lnbmVkIGJhc2ljIGF1dGggd2hlbiBlbmNyeXB0aW9uIGF0IHJlc3QgaXMgZGlzYWJsZWQnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgdXNlVW5zaWduZWRCYXNpY0F1dGg6IHRydWUsXG4gICAgICBlbmNyeXB0aW9uQXRSZXN0OiB7IGVuYWJsZWQ6IGZhbHNlIH0sXG4gICAgfSkpLnRvVGhyb3coL1lvdSBjYW5ub3QgZGlzYWJsZSBlbmNyeXB0aW9uIGF0IHJlc3QgYW5kIHVzZSB1bnNpZ25lZCBiYXNpYyBhdXRoLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3VzaW5nIHVuc2lnbmVkIGJhc2ljIGF1dGggdGhyb3dzIHdpdGggRWxhc3RpY3NlYXJjaCA8IDYuNycsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHtcbiAgICAgIHZlcnNpb246IEVuZ2luZVZlcnNpb24uRUxBU1RJQ1NFQVJDSF82XzUsXG4gICAgICB1c2VVbnNpZ25lZEJhc2ljQXV0aDogdHJ1ZSxcbiAgICB9KSkudG9UaHJvdygvVXNpbmcgdW5zaWduZWQgYmFzaWMgYXV0aCByZXF1aXJlcyBFbGFzdGljc2VhcmNoIHZlcnNpb24gNlxcLjcgb3IgbGF0ZXIgb3IgT3BlblNlYXJjaCB2ZXJzaW9uIDEuMCBvciBsYXRlci8pO1xuICB9KTtcbn0pO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykuZGVzY3JpYmUoJ2FkdmFuY2VkIG9wdGlvbnMnLCAoZW5naW5lVmVyc2lvbikgPT4ge1xuICB0ZXN0KCd1c2UgYWR2YW5jZWQgb3B0aW9ucycsICgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICAgIGFkdmFuY2VkT3B0aW9uczoge1xuICAgICAgICAncmVzdC5hY3Rpb24ubXVsdGkuYWxsb3dfZXhwbGljaXRfaW5kZXgnOiAndHJ1ZScsXG4gICAgICAgICdpbmRpY2VzLmZpZWxkZGF0YS5jYWNoZS5zaXplJzogJzUwJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpPcGVuU2VhcmNoU2VydmljZTo6RG9tYWluJywge1xuICAgICAgQWR2YW5jZWRPcHRpb25zOiB7XG4gICAgICAgICdyZXN0LmFjdGlvbi5tdWx0aS5hbGxvd19leHBsaWNpdF9pbmRleCc6ICd0cnVlJyxcbiAgICAgICAgJ2luZGljZXMuZmllbGRkYXRhLmNhY2hlLnNpemUnOiAnNTAnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYWR2YW5jZWQgb3B0aW9ucyBhYnNlbnQgYnkgZGVmYXVsdCcsICgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywge1xuICAgICAgdmVyc2lvbjogZW5naW5lVmVyc2lvbixcbiAgICB9KTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgICBBZHZhbmNlZE9wdGlvbnM6IE1hdGNoLmFic2VudCgpLFxuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5lYWNoKHRlc3RlZE9wZW5TZWFyY2hWZXJzaW9ucykuZGVzY3JpYmUoJ2NvZ25pdG8gZGFzaGJvYXJkcyBhdXRoJywgKGVuZ2luZVZlcnNpb24pID0+IHtcbiAgdGVzdCgnY29nbml0byBkYXNoYm9hcmRzIGF1dGggaXMgbm90IGNvbmZpZ3VyZWQgYnkgZGVmYXVsdCcsICgpID0+IHtcbiAgICBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywgeyB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6T3BlblNlYXJjaFNlcnZpY2U6OkRvbWFpbicsIHtcbiAgICAgIENvZ25pdG9PcHRpb25zOiBNYXRjaC5hYnNlbnQoKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnY29nbml0byBkYXNoYm9hcmRzIGF1dGggY2FuIGJlIGNvbmZpZ3VyZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgaWRlbnRpdHlQb29sSWQgPSAndGVzdC1pZGVudGl0eS1wb29sLWlkJztcbiAgICBjb25zdCB1c2VyUG9vbElkID0gJ3Rlc3QtdXNlci1wb29sLWlkJztcbiAgICBjb25zdCB1c2VyID0gbmV3IGlhbS5Vc2VyKHN0YWNrLCAndGVzdHVzZXInKTtcbiAgICBjb25zdCByb2xlID0gbmV3IGlhbS5Sb2xlKHN0YWNrLCAndGVzdHJvbGUnLCB7IGFzc3VtZWRCeTogdXNlciB9KTtcblxuICAgIG5ldyBEb21haW4oc3RhY2ssICdEb21haW4nLCB7XG4gICAgICB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uLFxuICAgICAgY29nbml0b0Rhc2hib2FyZHNBdXRoOiB7XG4gICAgICAgIHJvbGUsXG4gICAgICAgIGlkZW50aXR5UG9vbElkLFxuICAgICAgICB1c2VyUG9vbElkLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok9wZW5TZWFyY2hTZXJ2aWNlOjpEb21haW4nLCB7XG4gICAgICBDb2duaXRvT3B0aW9uczoge1xuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICBJZGVudGl0eVBvb2xJZDogaWRlbnRpdHlQb29sSWQsXG4gICAgICAgIFJvbGVBcm46IHtcbiAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICd0ZXN0cm9sZUZBQTU2QjU4JyxcbiAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIFVzZXJQb29sSWQ6IHVzZXJQb29sSWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiB0ZXN0R3JhbnQoXG4gIGV4cGVjdGVkQWN0aW9uczogc3RyaW5nW10sXG4gIGludm9jYXRpb246ICh1c2VyOiBpYW0uSVByaW5jaXBhbCwgZG9tYWluOiBEb21haW4pID0+IHZvaWQsXG4gIGVuZ2luZVZlcnNpb246IEVuZ2luZVZlcnNpb24sXG4gIGFwcGxpZXNUb0RvbWFpblJvb3Q6IEJvb2xlYW4gPSB0cnVlLFxuICBwYXRoczogc3RyaW5nW10gPSBbJy8qJ10sXG4pIHtcbiAgY29uc3QgZG9tYWluID0gbmV3IERvbWFpbihzdGFjaywgJ0RvbWFpbicsIHsgdmVyc2lvbjogZW5naW5lVmVyc2lvbiB9KTtcbiAgY29uc3QgdXNlciA9IG5ldyBpYW0uVXNlcihzdGFjaywgJ3VzZXInKTtcblxuICBpbnZvY2F0aW9uKHVzZXIsIGRvbWFpbik7XG5cbiAgY29uc3QgYWN0aW9uID0gZXhwZWN0ZWRBY3Rpb25zLmxlbmd0aCA+IDEgPyBleHBlY3RlZEFjdGlvbnMubWFwKGEgPT4gYGVzOiR7YX1gKSA6IGBlczoke2V4cGVjdGVkQWN0aW9uc1swXX1gO1xuICBjb25zdCBkb21haW5Bcm4gPSB7XG4gICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAnRG9tYWluNjZBQzY5RTAnLFxuICAgICAgJ0FybicsXG4gICAgXSxcbiAgfTtcbiAgY29uc3QgcmVzb2x2ZWRQYXRocyA9IHBhdGhzLm1hcChwYXRoID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgJ0ZuOjpKb2luJzogW1xuICAgICAgICAnJyxcbiAgICAgICAgW1xuICAgICAgICAgIGRvbWFpbkFybixcbiAgICAgICAgICBwYXRoLFxuICAgICAgICBdLFxuICAgICAgXSxcbiAgICB9O1xuICB9KTtcbiAgY29uc3QgcmVzb3VyY2UgPSBhcHBsaWVzVG9Eb21haW5Sb290XG4gICAgPyBbZG9tYWluQXJuLCAuLi5yZXNvbHZlZFBhdGhzXVxuICAgIDogcmVzb2x2ZWRQYXRocy5sZW5ndGggPiAxXG4gICAgICA/IHJlc29sdmVkUGF0aHNcbiAgICAgIDogcmVzb2x2ZWRQYXRoc1swXTtcblxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlBvbGljeScsIHtcbiAgICBQb2xpY3lEb2N1bWVudDoge1xuICAgICAgU3RhdGVtZW50OiBbXG4gICAgICAgIHtcbiAgICAgICAgICBBY3Rpb246IGFjdGlvbixcbiAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXG4gICAgICAgICAgUmVzb3VyY2U6IHJlc291cmNlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgICB9LFxuICAgIFBvbGljeU5hbWU6ICd1c2VyRGVmYXVsdFBvbGljeTA4M0RGNjgyJyxcbiAgICBVc2VyczogW1xuICAgICAge1xuICAgICAgICBSZWY6ICd1c2VyMkMyQjU3QUUnLFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcbn1cblxuZnVuY3Rpb24gdGVzdE1ldHJpYyhcbiAgaW52b2NhdGlvbjogKGRvbWFpbjogRG9tYWluKSA9PiBNZXRyaWMsXG4gIG1ldHJpY05hbWU6IHN0cmluZyxcbiAgZW5naW5lVmVyc2lvbjogRW5naW5lVmVyc2lvbixcbiAgc3RhdGlzdGljOiBzdHJpbmcgPSBTdGF0aXN0aWMuU1VNLFxuICBwZXJpb2Q6IER1cmF0aW9uID0gRHVyYXRpb24ubWludXRlcyg1KSxcbikge1xuICBjb25zdCBkb21haW4gPSBuZXcgRG9tYWluKHN0YWNrLCAnRG9tYWluJywgeyB2ZXJzaW9uOiBlbmdpbmVWZXJzaW9uIH0pO1xuXG4gIGNvbnN0IG1ldHJpYyA9IGludm9jYXRpb24oZG9tYWluKTtcblxuICBleHBlY3QobWV0cmljKS50b01hdGNoT2JqZWN0KHtcbiAgICBtZXRyaWNOYW1lLFxuICAgIG5hbWVzcGFjZTogJ0FXUy9FUycsXG4gICAgcGVyaW9kLFxuICAgIHN0YXRpc3RpYyxcbiAgICBkaW1lbnNpb25zOiB7XG4gICAgICBDbGllbnRJZDogJzEyMzQnLFxuICAgIH0sXG4gIH0pO1xuICBleHBlY3QobWV0cmljLmRpbWVuc2lvbnMpLnRvSGF2ZVByb3BlcnR5KCdEb21haW5OYW1lJyk7XG59XG4iXX0=