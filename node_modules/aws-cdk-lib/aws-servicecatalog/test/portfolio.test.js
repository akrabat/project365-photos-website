"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../assertions");
const iam = require("../../aws-iam");
const s3 = require("../../aws-s3");
const sns = require("../../aws-sns");
const cdk = require("../../core");
const servicecatalog = require("../lib");
describe('Portfolio', () => {
    let stack;
    beforeEach(() => {
        const app = new cdk.App({
            context: {
                '@aws-cdk/core:newStyleStackSynthesis': false,
            },
        });
        stack = new cdk.Stack(app);
    });
    describe('portfolio creation and importing', () => {
        test('default portfolio creation', () => {
            new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                displayName: 'testPortfolio',
                providerName: 'testProvider',
            });
            assertions_1.Template.fromStack(stack).templateMatches({
                Resources: {
                    MyPortfolio59CCA9C9: {
                        Type: 'AWS::ServiceCatalog::Portfolio',
                        Properties: {
                            DisplayName: 'testPortfolio',
                            ProviderName: 'testProvider',
                        },
                    },
                },
            });
        }),
            test('portfolio with explicit message language and description', () => {
                new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                    displayName: 'testPortfolio',
                    providerName: 'testProvider',
                    description: 'test portfolio description',
                    messageLanguage: servicecatalog.MessageLanguage.ZH,
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::Portfolio', {
                    Description: 'test portfolio description',
                    AcceptLanguage: servicecatalog.MessageLanguage.ZH,
                });
            }),
            test('portfolio from arn', () => {
                const portfolio = servicecatalog.Portfolio.fromPortfolioArn(stack, 'MyPortfolio', 'arn:aws:catalog:region:account-id:portfolio/port-djh8932wr');
                expect(portfolio.portfolioId).toEqual('port-djh8932wr');
            }),
            test('fails portfolio from arn without resource name in arn', () => {
                expect(() => {
                    servicecatalog.Portfolio.fromPortfolioArn(stack, 'MyPortfolio', 'arn:aws:catalog:region:account-id:portfolio');
                }).toThrowError(/Missing required Portfolio ID from Portfolio ARN/);
            }),
            test('portfolio arn formatting', () => {
                const portfolio = new servicecatalog.Portfolio(stack, 'Portfolio', {
                    displayName: 'MyPortfolio',
                    providerName: 'testProvider',
                });
                expect(portfolio.portfolioArn).toEqual(`arn:${stack.partition}:catalog:${stack.region}:${stack.account}:portfolio/${portfolio.portfolioId}`);
            }),
            test('fails portfolio creation with short name', () => {
                expect(() => {
                    new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                        displayName: '',
                        providerName: 'testProvider',
                    });
                }).toThrowError(/Invalid portfolio display name for resource Default\/MyPortfolio/);
            }),
            test('fails portfolio creation with long name', () => {
                expect(() => {
                    new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                        displayName: 'DisplayName'.repeat(1000),
                        providerName: 'testProvider',
                    });
                }).toThrowError(/Invalid portfolio display name for resource Default\/MyPortfolio/);
            }),
            test('fails portfolio creation with invalid provider name', () => {
                expect(() => {
                    new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                        displayName: 'testPortfolio',
                        providerName: '',
                    });
                }).toThrowError(/Invalid portfolio provider name for resource Default\/MyPortfolio/);
            }),
            test('fails portfolio creation with invalid description length', () => {
                const description = 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit'.repeat(50);
                expect(() => {
                    new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                        displayName: 'testPortfolio',
                        providerName: 'testProvider',
                        description: description,
                    });
                }).toThrowError(/Invalid portfolio description for resource Default\/MyPortfolio/);
            }),
            test('portfolio creation with token description does not throw validation error and creates', () => {
                const tokenDescription = new cdk.CfnParameter(stack, 'Description');
                new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                    displayName: 'testPortfolio',
                    providerName: 'testProvider',
                    description: tokenDescription.valueAsString,
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::Portfolio', {
                    Description: {
                        Ref: 'Description',
                    },
                });
            }),
            test('portfolio creation with token display name does not throw validation error and creates', () => {
                const tokenDisplayName = new cdk.CfnParameter(stack, 'DisplayName');
                new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                    displayName: tokenDisplayName.valueAsString,
                    providerName: 'testProvider',
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::Portfolio', {
                    DisplayName: {
                        Ref: 'DisplayName',
                    },
                });
            }),
            test('portfolio creation with token provider name does not throw validation error and creates', () => {
                const tokenProviderName = new cdk.CfnParameter(stack, 'ProviderName');
                new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                    displayName: 'testPortfolio',
                    providerName: tokenProviderName.valueAsString,
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::Portfolio', {
                    ProviderName: {
                        Ref: 'ProviderName',
                    },
                });
            });
    });
    describe('portfolio methods and associations', () => {
        let portfolio;
        beforeEach(() => {
            portfolio = new servicecatalog.Portfolio(stack, 'MyPortfolio', {
                displayName: 'testPortfolio',
                providerName: 'testProvider',
            });
        });
        test('portfolio with tags', () => {
            cdk.Tags.of(portfolio).add('myTestKey1', 'myTestKeyValue1');
            cdk.Tags.of(portfolio).add('myTestKey2', 'myTestKeyValue2');
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::Portfolio', {
                Tags: [
                    {
                        Key: 'myTestKey1',
                        Value: 'myTestKeyValue1',
                    },
                    {
                        Key: 'myTestKey2',
                        Value: 'myTestKeyValue2',
                    },
                ],
            });
        }),
            test('portfolio share', () => {
                const shareAccountId = '012345678901';
                portfolio.shareWithAccount(shareAccountId);
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioShare', {
                    AccountId: shareAccountId,
                });
            }),
            test('portfolio share with assets', () => {
                const assetBucket = new s3.Bucket(stack, 'MyProductStackAssetBucket', {
                    bucketName: 'test-asset-bucket',
                });
                const productStack = new servicecatalog.ProductStack(stack, 'MyProductStack', {});
                const product = new servicecatalog.CloudFormationProduct(stack, 'MyProduct', {
                    productName: 'testProduct',
                    owner: 'testOwner',
                    productVersions: [
                        {
                            productVersionName: 'v1',
                            cloudFormationTemplate: servicecatalog.CloudFormationTemplate.fromProductStack(productStack),
                        },
                    ],
                });
                product.assetBuckets.push(assetBucket);
                const shareAccountId = '012345678901';
                portfolio.addProduct(product);
                portfolio.shareWithAccount(shareAccountId);
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioShare', {
                    AccountId: shareAccountId,
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: 'test-asset-bucket',
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::S3::BucketPolicy', {
                    PolicyDocument: {
                        Statement: [{
                                Effect: 'Allow',
                                Action: ['s3:GetObject*', 's3:GetBucket*', 's3:List*'],
                                Principal: {
                                    AWS: {
                                        'Fn::Join': [
                                            '',
                                            [
                                                'arn:',
                                                {
                                                    Ref: 'AWS::Partition',
                                                },
                                                ':iam::012345678901:root',
                                            ],
                                        ],
                                    },
                                },
                            }],
                    },
                });
            }),
            test('portfolio share with share tagOptions', () => {
                const shareAccountId = '012345678901';
                portfolio.shareWithAccount(shareAccountId, {
                    shareTagOptions: true,
                    messageLanguage: servicecatalog.MessageLanguage.EN,
                });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioShare', {
                    AccountId: shareAccountId,
                    ShareTagOptions: true,
                    AcceptLanguage: 'en',
                });
            }),
            test('portfolio share without share tagOptions', () => {
                const shareAccountId = '012345678901';
                portfolio.shareWithAccount(shareAccountId, { shareTagOptions: false });
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioShare', {
                    AccountId: shareAccountId,
                    ShareTagOptions: false,
                });
            }),
            test('portfolio share without explicit share tagOptions', () => {
                const shareAccountId = '012345678901';
                portfolio.shareWithAccount(shareAccountId);
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioShare', {
                    AccountId: shareAccountId,
                });
            }),
            test('portfolio principal association with role type', () => {
                const role = new iam.Role(stack, 'TestRole', {
                    assumedBy: new iam.AccountRootPrincipal(),
                });
                portfolio.giveAccessToRole(role);
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioPrincipalAssociation', {
                    PrincipalARN: { 'Fn::GetAtt': ['TestRole6C9272DF', 'Arn'] },
                });
            }),
            test('portfolio principal association with user type', () => {
                const user = new iam.User(stack, 'TestUser');
                portfolio.giveAccessToUser(user);
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioPrincipalAssociation', {
                    PrincipalARN: { 'Fn::GetAtt': ['TestUser6A619381', 'Arn'] },
                });
            }),
            test('portfolio principal association with group type', () => {
                const group = new iam.Group(stack, 'TestGroup');
                portfolio.giveAccessToGroup(group);
                assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::PortfolioPrincipalAssociation', {
                    PrincipalARN: { 'Fn::GetAtt': ['TestGroupAF88660E', 'Arn'] },
                });
            }),
            test('portfolio duplicate principle associations are idempotent', () => {
                const role = new iam.Role(stack, 'TestRole', {
                    assumedBy: new iam.AccountRootPrincipal(),
                });
                // If this were not idempotent, the second call would produce an error for duplicate construct ID.
                portfolio.giveAccessToRole(role);
                portfolio.giveAccessToRole(role);
            });
    });
});
describe('portfolio associations and product constraints', () => {
    let stack;
    let portfolio;
    let product;
    beforeEach(() => {
        stack = new cdk.Stack();
        portfolio = new servicecatalog.Portfolio(stack, 'MyPortfolio', {
            displayName: 'testPortfolio',
            providerName: 'testProvider',
        });
        product = new servicecatalog.CloudFormationProduct(stack, 'MyProduct', {
            productName: 'testProduct',
            owner: 'testOwner',
            productVersions: [
                {
                    cloudFormationTemplate: servicecatalog.CloudFormationTemplate.fromUrl('https://awsdocs.s3.amazonaws.com/servicecatalog/development-environment.template'),
                },
            ],
        });
    }),
        test('basic portfolio product association', () => {
            portfolio.addProduct(product);
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::PortfolioProductAssociation', 1);
        });
    test('portfolio product associations are idempotent', () => {
        portfolio.addProduct(product);
        portfolio.addProduct(product); // If not idempotent these calls should fail
        assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::PortfolioProductAssociation', 1); //check anyway
    }),
        test('add tag options to portfolio', () => {
            const tagOptions = new servicecatalog.TagOptions(stack, 'TagOptions', {
                allowedValuesForTags: {
                    key1: ['value1', 'value2'],
                    key2: ['value1'],
                },
            });
            portfolio.associateTagOptions(tagOptions);
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::TagOption', 3); //Generates a resource for each unique key-value pair
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::TagOptionAssociation', 3);
        }),
        test('add tag options to portfolio as prop', () => {
            const tagOptions = new servicecatalog.TagOptions(stack, 'TagOptions', {
                allowedValuesForTags: {
                    key1: ['value1', 'value2'],
                    key2: ['value1'],
                },
            });
            portfolio = new servicecatalog.Portfolio(stack, 'MyPortfolioWithTag', {
                displayName: 'testPortfolio',
                providerName: 'testProvider',
                tagOptions: tagOptions,
            });
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::TagOption', 3); //Generates a resource for each unique key-value pair
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::TagOptionAssociation', 3);
        }),
        test('adding tag options to portfolio multiple times is idempotent', () => {
            const tagOptions = new servicecatalog.TagOptions(stack, 'TagOptions', {
                allowedValuesForTags: {
                    key1: ['value1', 'value2'],
                    key2: ['value1'],
                },
            });
            portfolio.associateTagOptions(tagOptions);
            portfolio.associateTagOptions(tagOptions); // If not idempotent this would fail
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::TagOption', 3); //Generates a resource for each unique key-value pair
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::TagOptionAssociation', 3);
        }),
        test('add tag update constraint', () => {
            portfolio.addProduct(product);
            portfolio.constrainTagUpdates(product, {
                allow: true,
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::ResourceUpdateConstraint', {
                TagUpdateOnProvisionedProduct: 'ALLOWED',
            });
        });
    test('tag update constraint still adds without explicit association', () => {
        portfolio.constrainTagUpdates(product, {
            messageLanguage: servicecatalog.MessageLanguage.EN,
            description: 'test constraint description',
            allow: false,
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::ResourceUpdateConstraint', {
            AcceptLanguage: servicecatalog.MessageLanguage.EN,
            Description: 'test constraint description',
            TagUpdateOnProvisionedProduct: 'NOT_ALLOWED',
        });
    }),
        test('fails to add multiple tag update constraints', () => {
            portfolio.constrainTagUpdates(product, {
                description: 'test constraint description',
            });
            expect(() => {
                portfolio.constrainTagUpdates(product, {
                    allow: false,
                    description: 'another test constraint description',
                });
            }).toThrowError(/Cannot have multiple tag update constraints for association/);
        }),
        test('add event notification constraint', () => {
            portfolio.addProduct(product);
            const topic = new sns.Topic(stack, 'Topic');
            const description = 'event notification constraint description';
            portfolio.notifyOnStackEvents(product, topic, {
                description: description,
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::LaunchNotificationConstraint', {
                NotificationArns: [{ Ref: 'TopicBFC7AF6E' }],
                Description: description,
                PortfolioId: { Ref: 'MyPortfolio59CCA9C9' },
                ProductId: { Ref: 'MyProduct49A3C587' },
            });
        }),
        test('event notification constraint will still add without explicit association', () => {
            const topic = new sns.Topic(stack, 'Topic1');
            portfolio.notifyOnStackEvents(product, topic);
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::LaunchNotificationConstraint', 1);
        }),
        test('can add multiple notifications', () => {
            const topic1 = new sns.Topic(stack, 'Topic1');
            const topic2 = new sns.Topic(stack, 'Topic2');
            const topic3 = new sns.Topic(stack, 'Topic3');
            portfolio.notifyOnStackEvents(product, topic1);
            portfolio.notifyOnStackEvents(product, topic2);
            portfolio.notifyOnStackEvents(product, topic3);
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::LaunchNotificationConstraint', 3);
        }),
        test('fails to add same topic multiple times in event notification constraint', () => {
            const topic = new sns.Topic(stack, 'Topic1');
            portfolio.notifyOnStackEvents(product, topic);
            expect(() => {
                portfolio.notifyOnStackEvents(product, topic);
            }).toThrowError(`Topic ${topic} is already subscribed to association`);
        }),
        test('creates a CloudFormation parameters constraint', () => {
            portfolio.addProduct(product);
            portfolio.constrainCloudFormationParameters(product, {
                rule: {
                    ruleName: 'Rule',
                    assertions: [
                        {
                            assert: cdk.Fn.conditionContains(['t2.micro', 't2.small'], cdk.Fn.ref('InstanceType')),
                            description: 'assert description',
                        },
                    ],
                },
            });
            assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::LaunchTemplateConstraint', {
                PortfolioId: { Ref: 'MyPortfolio59CCA9C9' },
                ProductId: { Ref: 'MyProduct49A3C587' },
                Rules: JSON.stringify({
                    Rule: {
                        Assertions: [
                            {
                                Assert: { 'Fn::Contains': [['t2.micro', 't2.small'], { Ref: 'InstanceType' }] },
                                AssertDescription: 'assert description',
                            },
                        ],
                    },
                }),
            });
        }),
        test('CloudFormation parameters constraint still creates without explicit association', () => {
            portfolio.constrainCloudFormationParameters(product, {
                rule: {
                    ruleName: 'Rule',
                    condition: cdk.Fn.conditionContains(['a', 'b'], 'text'),
                    assertions: [
                        {
                            assert: cdk.Fn.conditionContains(['t2.micro', 't2.small'], cdk.Fn.ref('InstanceType')),
                            description: 'assert description',
                        },
                    ],
                },
                description: 'test description',
                messageLanguage: servicecatalog.MessageLanguage.EN,
            });
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::LaunchTemplateConstraint', 1);
        }),
        test('set multiple CloudFormation parameters constraints', () => {
            portfolio.constrainCloudFormationParameters(product, {
                rule: {
                    ruleName: 'Rule01',
                    assertions: [{
                            assert: cdk.Fn.conditionContains(['BucketOwnerRead'], cdk.Fn.ref('AccessControl')),
                            description: 'assert description',
                        }],
                },
            });
            portfolio.constrainCloudFormationParameters(product, {
                rule: {
                    ruleName: 'Rule02',
                    assertions: [{
                            assert: cdk.Fn.conditionContains(['BucketOwnerWrite'], cdk.Fn.ref('AccessControl')),
                            description: 'assert description',
                        }],
                },
            });
            assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::LaunchTemplateConstraint', 2);
        }),
        test('fails to set a duplicate CloudFormation parameters constraint', () => {
            portfolio.constrainCloudFormationParameters(product, {
                rule: {
                    ruleName: 'Rule01',
                    assertions: [{
                            assert: cdk.Fn.conditionContains(['BucketOwnerRead'], cdk.Fn.ref('AccessControl')),
                            description: 'assert description',
                        }],
                },
            });
            expect(() => {
                portfolio.constrainCloudFormationParameters(product, {
                    rule: {
                        ruleName: 'Rule01',
                        assertions: [{
                                assert: cdk.Fn.conditionContains(['BucketOwnerWrite'], cdk.Fn.ref('AccessControl')),
                                description: 'assert description',
                            }],
                    },
                });
            }).toThrowError(/Provisioning rule Rule01 already configured on association/);
        }),
        describe('portfolio constraints that have roles', () => {
            let launchRole, adminRole;
            beforeEach(() => {
                adminRole = new iam.Role(stack, 'AdminRole', {
                    assumedBy: new iam.AccountRootPrincipal(),
                });
                launchRole = new iam.Role(stack, 'LaunchRole', {
                    roleName: 'LaunchRole',
                    assumedBy: new iam.ServicePrincipal('servicecatalog.amazonaws.com'),
                });
            }),
                test('set a launch role constraint', () => {
                    portfolio.addProduct(product);
                    portfolio.setLaunchRole(product, launchRole, {
                        description: 'set launch role description',
                        messageLanguage: servicecatalog.MessageLanguage.EN,
                    });
                    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::LaunchRoleConstraint', {
                        PortfolioId: { Ref: 'MyPortfolio59CCA9C9' },
                        ProductId: { Ref: 'MyProduct49A3C587' },
                        Description: 'set launch role description',
                        AcceptLanguage: 'en',
                        RoleArn: {
                            'Fn::GetAtt': ['LaunchRole2CFB2E44', 'Arn'],
                        },
                    });
                }),
                test('set a launch role constraint using local role name', () => {
                    portfolio.addProduct(product);
                    portfolio.setLocalLaunchRoleName(product, 'LocalLaunchRole', {
                        description: 'set launch role description',
                        messageLanguage: servicecatalog.MessageLanguage.EN,
                    });
                    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::LaunchRoleConstraint', {
                        PortfolioId: { Ref: 'MyPortfolio59CCA9C9' },
                        ProductId: { Ref: 'MyProduct49A3C587' },
                        Description: 'set launch role description',
                        AcceptLanguage: 'en',
                        LocalRoleName: { Ref: 'MyPortfolioLaunchRoleLocalLaunchRoleB2E6E22A' },
                    });
                }),
                test('set a launch role constraint using local role', () => {
                    portfolio.addProduct(product);
                    portfolio.setLocalLaunchRole(product, launchRole, {
                        description: 'set launch role description',
                        messageLanguage: servicecatalog.MessageLanguage.EN,
                    });
                    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::LaunchRoleConstraint', {
                        PortfolioId: { Ref: 'MyPortfolio59CCA9C9' },
                        ProductId: { Ref: 'MyProduct49A3C587' },
                        Description: 'set launch role description',
                        AcceptLanguage: 'en',
                        LocalRoleName: { Ref: 'LaunchRole2CFB2E44' },
                    });
                }),
                test('set a launch role constraint using imported local role', () => {
                    portfolio.addProduct(product);
                    const importedLaunchRole = iam.Role.fromRoleArn(portfolio.stack, 'ImportedLaunchRole', 'arn:aws:iam::123456789012:role/ImportedLaunchRole');
                    portfolio.setLocalLaunchRole(product, importedLaunchRole, {
                        description: 'set launch role description',
                        messageLanguage: servicecatalog.MessageLanguage.EN,
                    });
                    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::LaunchRoleConstraint', {
                        PortfolioId: { Ref: 'MyPortfolio59CCA9C9' },
                        ProductId: { Ref: 'MyProduct49A3C587' },
                        Description: 'set launch role description',
                        AcceptLanguage: 'en',
                        LocalRoleName: 'ImportedLaunchRole',
                    });
                }),
                test('set launch role constraint still adds without explicit association', () => {
                    portfolio.setLaunchRole(product, launchRole);
                    assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::LaunchRoleConstraint', 1);
                }),
                test('fails to add multiple set launch roles', () => {
                    const otherLaunchRole = new iam.Role(stack, 'otherLaunchRole', {
                        assumedBy: new iam.ServicePrincipal('servicecatalog.amazonaws.com'),
                    });
                    portfolio.setLaunchRole(product, launchRole);
                    expect(() => {
                        portfolio.setLaunchRole(product, otherLaunchRole);
                    }).toThrow(/Cannot set multiple launch roles for association/);
                }),
                test('local launch role must have roleName explicitly set', () => {
                    const otherLaunchRole = new iam.Role(stack, 'otherLaunchRole', {
                        assumedBy: new iam.ServicePrincipal('servicecatalog.amazonaws.com'),
                    });
                    expect(() => {
                        portfolio.setLocalLaunchRole(product, otherLaunchRole);
                    }).toThrow(/Role otherLaunchRole used for Local Launch Role must have roleName explicitly set/);
                }),
                test('fails to add multiple set launch roles - local launch role first', () => {
                    portfolio.setLocalLaunchRoleName(product, 'LaunchRole');
                    expect(() => {
                        portfolio.setLaunchRole(product, launchRole);
                    }).toThrow(/Cannot set multiple launch roles for association/);
                }),
                test('fails to add multiple set local launch roles - local launch role first', () => {
                    portfolio.setLocalLaunchRoleName(product, 'LaunchRole');
                    expect(() => {
                        portfolio.setLocalLaunchRole(product, launchRole);
                    }).toThrow(/Cannot set multiple launch roles for association/);
                }),
                test('fails to add multiple set local launch roles - local launch role name first', () => {
                    portfolio.setLocalLaunchRole(product, launchRole);
                    expect(() => {
                        portfolio.setLocalLaunchRoleName(product, 'LaunchRole');
                    }).toThrow(/Cannot set multiple launch roles for association/);
                }),
                test('fails to add multiple set launch roles - local launch role second', () => {
                    portfolio.setLaunchRole(product, launchRole);
                    expect(() => {
                        portfolio.setLocalLaunchRole(product, launchRole);
                    }).toThrow(/Cannot set multiple launch roles for association/);
                }),
                test('fails to add multiple set launch roles - local launch role second', () => {
                    portfolio.setLaunchRole(product, launchRole);
                    expect(() => {
                        portfolio.setLocalLaunchRoleName(product, 'LaunchRole');
                    }).toThrow(/Cannot set multiple launch roles for association/);
                }),
                test('fails to set launch role if stackset rule is already defined', () => {
                    portfolio.deployWithStackSets(product, {
                        accounts: ['012345678901', '012345678901'],
                        regions: ['us-east-1', 'us-west-2', 'eu-west-1'],
                        adminRole: adminRole,
                        executionRoleName: 'StackSetExecutionRole',
                        allowStackSetInstanceOperations: false,
                    });
                    expect(() => {
                        portfolio.setLaunchRole(product, launchRole);
                    }).toThrowError(/Cannot set launch role when a StackSet rule is already defined for association/);
                }),
                test('deploy with stacksets constraint', () => {
                    portfolio.addProduct(product);
                    portfolio.deployWithStackSets(product, {
                        accounts: ['012345678901', '012345678901'],
                        regions: ['us-east-1', 'us-west-2', 'eu-west-1'],
                        adminRole: adminRole,
                        executionRoleName: 'StackSetExecutionRole',
                        description: 'stackset description',
                        messageLanguage: servicecatalog.MessageLanguage.JP,
                    });
                    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::ServiceCatalog::StackSetConstraint', {
                        PortfolioId: { Ref: 'MyPortfolio59CCA9C9' },
                        ProductId: { Ref: 'MyProduct49A3C587' },
                        AdminRole: {
                            'Fn::GetAtt': [
                                'AdminRole38563C57',
                                'Arn',
                            ],
                        },
                        ExecutionRole: 'StackSetExecutionRole',
                        Description: 'stackset description',
                        AccountList: ['012345678901', '012345678901'],
                        RegionList: ['us-east-1', 'us-west-2', 'eu-west-1'],
                        StackInstanceControl: 'NOT_ALLOWED',
                        AcceptLanguage: 'jp',
                    });
                }),
                test('deployment with stacksets still adds without explicit association', () => {
                    portfolio.deployWithStackSets(product, {
                        accounts: ['012345678901', '012345678901'],
                        regions: ['us-east-1', 'us-west-2', 'eu-west-1'],
                        adminRole: adminRole,
                        executionRoleName: 'StackSetExecutionRole',
                        allowStackSetInstanceOperations: true,
                    });
                    assertions_1.Template.fromStack(stack).resourceCountIs('AWS::ServiceCatalog::StackSetConstraint', 1);
                }),
                test('fails to add multiple deploy with stackset constraints', () => {
                    portfolio.deployWithStackSets(product, {
                        accounts: ['012345678901', '012345678901'],
                        regions: ['us-east-1', 'us-west-2', 'eu-west-1'],
                        adminRole: adminRole,
                        executionRoleName: 'StackSetsExecutionRole',
                    });
                    expect(() => {
                        portfolio.deployWithStackSets(product, {
                            accounts: ['012345678901', '012345678901'],
                            regions: ['ap-east-1', 'ap-northeast-2', 'eu-west-1'],
                            adminRole: adminRole,
                            executionRoleName: 'StackSetExecutionRole',
                        });
                    }).toThrowError(/Cannot configure multiple StackSet deployment constraints for association/);
                }),
                test('fails to configure deployment with stacksets if a launch role has been set', () => {
                    portfolio.setLaunchRole(product, launchRole);
                    expect(() => {
                        portfolio.deployWithStackSets(product, {
                            accounts: ['012345678901', '012345678901'],
                            regions: ['us-east-1', 'us-west-2', 'eu-west-1'],
                            adminRole: adminRole,
                            executionRoleName: 'StackSetExecutionRole',
                            allowStackSetInstanceOperations: true,
                        });
                    }).toThrowError(/Cannot configure StackSet deployment when a launch role is already defined for association/);
                });
        });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9ydGZvbGlvLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwb3J0Zm9saW8udGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUE0QztBQUM1QyxxQ0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLHFDQUFxQztBQUNyQyxrQ0FBa0M7QUFDbEMseUNBQXlDO0FBRXpDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO0lBQ3pCLElBQUksS0FBZ0IsQ0FBQztJQUVyQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDO1lBQ3RCLE9BQU8sRUFBRTtnQkFDUCxzQ0FBc0MsRUFBRSxLQUFLO2FBQzlDO1NBQ0YsQ0FBQyxDQUFDO1FBQ0gsS0FBSyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM3QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7UUFDaEQsSUFBSSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRTtZQUN0QyxJQUFJLGNBQWMsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLGFBQWEsRUFBRTtnQkFDakQsV0FBVyxFQUFFLGVBQWU7Z0JBQzVCLFlBQVksRUFBRSxjQUFjO2FBQzdCLENBQUMsQ0FBQztZQUVILHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsQ0FBQztnQkFDeEMsU0FBUyxFQUFFO29CQUNULG1CQUFtQixFQUFFO3dCQUNuQixJQUFJLEVBQUUsZ0NBQWdDO3dCQUN0QyxVQUFVLEVBQUU7NEJBQ1YsV0FBVyxFQUFFLGVBQWU7NEJBQzVCLFlBQVksRUFBRSxjQUFjO3lCQUM3QjtxQkFDRjtpQkFDRjthQUNGLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztZQUVGLElBQUksQ0FBQywwREFBMEQsRUFBRSxHQUFHLEVBQUU7Z0JB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aUIsRUFBRSx3QkFBd0I7cUJBQzVDLENBQUMsQ0FBQztvQkFFSCxNQUFNLENBQUMsR0FBRyxFQUFFO3dCQUNWLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUU7NEJBQ3JDLFFBQVEsRUFBRSxDQUFDLGNBQWMsRUFBRSxjQUFjLENBQUM7NEJBQzFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxXQUFXLENBQUM7NEJBQ3JELFNBQVMsRUFBRSxTQUFTOzRCQUNwQixpQkFBaUIsRUFBRSx1QkFBdUI7eUJBQzNDLENBQUMsQ0FBQztvQkFDTCxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsMkVBQTJFLENBQUMsQ0FBQztnQkFDL0YsQ0FBQyxDQUFDO2dCQUVGLElBQUksQ0FBQyw0RUFBNEUsRUFBRSxHQUFHLEVBQUU7b0JBQ3RGLFNBQVMsQ0FBQyxhQUFhLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO29CQUU3QyxNQUFNLENBQUMsR0FBRyxFQUFFO3dCQUNWLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUU7NEJBQ3JDLFFBQVEsRUFBRSxDQUFDLGNBQWMsRUFBRSxjQUFjLENBQUM7NEJBQzFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFDOzRCQUNoRCxTQUFTLEVBQUUsU0FBUzs0QkFDcEIsaUJBQWlCLEVBQUUsdUJBQXVCOzRCQUMxQywrQkFBK0IsRUFBRSxJQUFJO3lCQUN0QyxDQUFDLENBQUM7b0JBQ0wsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLDRGQUE0RixDQUFDLENBQUM7Z0JBQ2hILENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlbXBsYXRlIH0gZnJvbSAnLi4vLi4vYXNzZXJ0aW9ucyc7XG5pbXBvcnQgKiBhcyBpYW0gZnJvbSAnLi4vLi4vYXdzLWlhbSc7XG5pbXBvcnQgKiBhcyBzMyBmcm9tICcuLi8uLi9hd3MtczMnO1xuaW1wb3J0ICogYXMgc25zIGZyb20gJy4uLy4uL2F3cy1zbnMnO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJy4uLy4uL2NvcmUnO1xuaW1wb3J0ICogYXMgc2VydmljZWNhdGFsb2cgZnJvbSAnLi4vbGliJztcblxuZGVzY3JpYmUoJ1BvcnRmb2xpbycsICgpID0+IHtcbiAgbGV0IHN0YWNrOiBjZGsuU3RhY2s7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY29uc3QgYXBwID0gbmV3IGNkay5BcHAoe1xuICAgICAgY29udGV4dDoge1xuICAgICAgICAnQGF3cy1jZGsvY29yZTpuZXdTdHlsZVN0YWNrU3ludGhlc2lzJzogZmFsc2UsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHN0YWNrID0gbmV3IGNkay5TdGFjayhhcHApO1xuICB9KTtcblxuICBkZXNjcmliZSgncG9ydGZvbGlvIGNyZWF0aW9uIGFuZCBpbXBvcnRpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnZGVmYXVsdCBwb3J0Zm9saW8gY3JlYXRpb24nLCAoKSA9PiB7XG4gICAgICBuZXcgc2VydmljZWNhdGFsb2cuUG9ydGZvbGlvKHN0YWNrLCAnTXlQb3J0Zm9saW8nLCB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAndGVzdFBvcnRmb2xpbycsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogJ3Rlc3RQcm92aWRlcicsXG4gICAgICB9KTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS50ZW1wbGF0ZU1hdGNoZXMoe1xuICAgICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgICBNeVBvcnRmb2xpbzU5Q0NBOUM5OiB7XG4gICAgICAgICAgICBUeXBlOiAnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6UG9ydGZvbGlvJyxcbiAgICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgRGlzcGxheU5hbWU6ICd0ZXN0UG9ydGZvbGlvJyxcbiAgICAgICAgICAgICAgUHJvdmlkZXJOYW1lOiAndGVzdFByb3ZpZGVyJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIHdpdGggZXhwbGljaXQgbWVzc2FnZSBsYW5ndWFnZSBhbmQgZGVzY3JpcHRpb24nLCAoKSA9PiB7XG4gICAgICBuZXcgc2VydmljZWNhdGFsb2cuUG9ydGZvbGlvKHN0YWNrLCAnTXlQb3J0Zm9saW8nLCB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAndGVzdFBvcnRmb2xpbycsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogJ3Rlc3RQcm92aWRlcicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAndGVzdCBwb3J0Zm9saW8gZGVzY3JpcHRpb24nLFxuICAgICAgICBtZXNzYWdlTGFuZ3VhZ2U6IHNlcnZpY2VjYXRhbG9nLk1lc3NhZ2VMYW5ndWFnZS5aSCxcbiAgICAgIH0pO1xuXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6UG9ydGZvbGlvJywge1xuICAgICAgICBEZXNjcmlwdGlvbjogJ3Rlc3QgcG9ydGZvbGlvIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgQWNjZXB0TGFuZ3VhZ2U6IHNlcnZpY2VjYXRhbG9nLk1lc3NhZ2VMYW5ndWFnZS5aSCxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIGZyb20gYXJuJywgKCkgPT4ge1xuICAgICAgY29uc3QgcG9ydGZvbGlvID0gc2VydmljZWNhdGFsb2cuUG9ydGZvbGlvLmZyb21Qb3J0Zm9saW9Bcm4oc3RhY2ssICdNeVBvcnRmb2xpbycsICdhcm46YXdzOmNhdGFsb2c6cmVnaW9uOmFjY291bnQtaWQ6cG9ydGZvbGlvL3BvcnQtZGpoODkzMndyJyk7XG5cbiAgICAgIGV4cGVjdChwb3J0Zm9saW8ucG9ydGZvbGlvSWQpLnRvRXF1YWwoJ3BvcnQtZGpoODkzMndyJyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdmYWlscyBwb3J0Zm9saW8gZnJvbSBhcm4gd2l0aG91dCByZXNvdXJjZSBuYW1lIGluIGFybicsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIHNlcnZpY2VjYXRhbG9nLlBvcnRmb2xpby5mcm9tUG9ydGZvbGlvQXJuKHN0YWNrLCAnTXlQb3J0Zm9saW8nLCAnYXJuOmF3czpjYXRhbG9nOnJlZ2lvbjphY2NvdW50LWlkOnBvcnRmb2xpbycpO1xuICAgICAgfSkudG9UaHJvd0Vycm9yKC9NaXNzaW5nIHJlcXVpcmVkIFBvcnRmb2xpbyBJRCBmcm9tIFBvcnRmb2xpbyBBUk4vKTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ3BvcnRmb2xpbyBhcm4gZm9ybWF0dGluZycsICgpID0+IHtcbiAgICAgIGNvbnN0IHBvcnRmb2xpbyA9IG5ldyBzZXJ2aWNlY2F0YWxvZy5Qb3J0Zm9saW8oc3RhY2ssICdQb3J0Zm9saW8nLCB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTXlQb3J0Zm9saW8nLFxuICAgICAgICBwcm92aWRlck5hbWU6ICd0ZXN0UHJvdmlkZXInLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocG9ydGZvbGlvLnBvcnRmb2xpb0FybikudG9FcXVhbChgYXJuOiR7c3RhY2sucGFydGl0aW9ufTpjYXRhbG9nOiR7c3RhY2sucmVnaW9ufToke3N0YWNrLmFjY291bnR9OnBvcnRmb2xpby8ke3BvcnRmb2xpby5wb3J0Zm9saW9JZH1gKTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ2ZhaWxzIHBvcnRmb2xpbyBjcmVhdGlvbiB3aXRoIHNob3J0IG5hbWUnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBuZXcgc2VydmljZWNhdGFsb2cuUG9ydGZvbGlvKHN0YWNrLCAnTXlQb3J0Zm9saW8nLCB7XG4gICAgICAgICAgZGlzcGxheU5hbWU6ICcnLFxuICAgICAgICAgIHByb3ZpZGVyTmFtZTogJ3Rlc3RQcm92aWRlcicsXG4gICAgICAgIH0pO1xuICAgICAgfSkudG9UaHJvd0Vycm9yKC9JbnZhbGlkIHBvcnRmb2xpbyBkaXNwbGF5IG5hbWUgZm9yIHJlc291cmNlIERlZmF1bHRcXC9NeVBvcnRmb2xpby8pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgnZmFpbHMgcG9ydGZvbGlvIGNyZWF0aW9uIHdpdGggbG9uZyBuYW1lJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgbmV3IHNlcnZpY2VjYXRhbG9nLlBvcnRmb2xpbyhzdGFjaywgJ015UG9ydGZvbGlvJywge1xuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnRGlzcGxheU5hbWUnLnJlcGVhdCgxMDAwKSxcbiAgICAgICAgICBwcm92aWRlck5hbWU6ICd0ZXN0UHJvdmlkZXInLFxuICAgICAgICB9KTtcbiAgICAgIH0pLnRvVGhyb3dFcnJvcigvSW52YWxpZCBwb3J0Zm9saW8gZGlzcGxheSBuYW1lIGZvciByZXNvdXJjZSBEZWZhdWx0XFwvTXlQb3J0Zm9saW8vKTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ2ZhaWxzIHBvcnRmb2xpbyBjcmVhdGlvbiB3aXRoIGludmFsaWQgcHJvdmlkZXIgbmFtZScsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG5ldyBzZXJ2aWNlY2F0YWxvZy5Qb3J0Zm9saW8oc3RhY2ssICdNeVBvcnRmb2xpbycsIHtcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ3Rlc3RQb3J0Zm9saW8nLFxuICAgICAgICAgIHByb3ZpZGVyTmFtZTogJycsXG4gICAgICAgIH0pO1xuICAgICAgfSkudG9UaHJvd0Vycm9yKC9JbnZhbGlkIHBvcnRmb2xpbyBwcm92aWRlciBuYW1lIGZvciByZXNvdXJjZSBEZWZhdWx0XFwvTXlQb3J0Zm9saW8vKTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ2ZhaWxzIHBvcnRmb2xpbyBjcmVhdGlvbiB3aXRoIGludmFsaWQgZGVzY3JpcHRpb24gbGVuZ3RoJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVlciBhZGlwaXNjaW5nIGVsaXQnLnJlcGVhdCg1MCk7XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG5ldyBzZXJ2aWNlY2F0YWxvZy5Qb3J0Zm9saW8oc3RhY2ssICdNeVBvcnRmb2xpbycsIHtcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ3Rlc3RQb3J0Zm9saW8nLFxuICAgICAgICAgIHByb3ZpZGVyTmFtZTogJ3Rlc3RQcm92aWRlcicsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB9KTtcbiAgICAgIH0pLnRvVGhyb3dFcnJvcigvSW52YWxpZCBwb3J0Zm9saW8gZGVzY3JpcHRpb24gZm9yIHJlc291cmNlIERlZmF1bHRcXC9NeVBvcnRmb2xpby8pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIGNyZWF0aW9uIHdpdGggdG9rZW4gZGVzY3JpcHRpb24gZG9lcyBub3QgdGhyb3cgdmFsaWRhdGlvbiBlcnJvciBhbmQgY3JlYXRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VuRGVzY3JpcHRpb24gPSBuZXcgY2RrLkNmblBhcmFtZXRlcihzdGFjaywgJ0Rlc2NyaXB0aW9uJyk7XG5cbiAgICAgIG5ldyBzZXJ2aWNlY2F0YWxvZy5Qb3J0Zm9saW8oc3RhY2ssICdNeVBvcnRmb2xpbycsIHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICd0ZXN0UG9ydGZvbGlvJyxcbiAgICAgICAgcHJvdmlkZXJOYW1lOiAndGVzdFByb3ZpZGVyJyxcbiAgICAgICAgZGVzY3JpcHRpb246IHRva2VuRGVzY3JpcHRpb24udmFsdWVBc1N0cmluZyxcbiAgICAgIH0pO1xuXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6UG9ydGZvbGlvJywge1xuICAgICAgICBEZXNjcmlwdGlvbjoge1xuICAgICAgICAgIFJlZjogJ0Rlc2NyaXB0aW9uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIGNyZWF0aW9uIHdpdGggdG9rZW4gZGlzcGxheSBuYW1lIGRvZXMgbm90IHRocm93IHZhbGlkYXRpb24gZXJyb3IgYW5kIGNyZWF0ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbkRpc3BsYXlOYW1lID0gbmV3IGNkay5DZm5QYXJhbWV0ZXIoc3RhY2ssICdEaXNwbGF5TmFtZScpO1xuXG4gICAgICBuZXcgc2VydmljZWNhdGFsb2cuUG9ydGZvbGlvKHN0YWNrLCAnTXlQb3J0Zm9saW8nLCB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiB0b2tlbkRpc3BsYXlOYW1lLnZhbHVlQXNTdHJpbmcsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogJ3Rlc3RQcm92aWRlcicsXG4gICAgICB9KTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpbycsIHtcbiAgICAgICAgRGlzcGxheU5hbWU6IHtcbiAgICAgICAgICBSZWY6ICdEaXNwbGF5TmFtZScsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ3BvcnRmb2xpbyBjcmVhdGlvbiB3aXRoIHRva2VuIHByb3ZpZGVyIG5hbWUgZG9lcyBub3QgdGhyb3cgdmFsaWRhdGlvbiBlcnJvciBhbmQgY3JlYXRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VuUHJvdmlkZXJOYW1lID0gbmV3IGNkay5DZm5QYXJhbWV0ZXIoc3RhY2ssICdQcm92aWRlck5hbWUnKTtcblxuICAgICAgbmV3IHNlcnZpY2VjYXRhbG9nLlBvcnRmb2xpbyhzdGFjaywgJ015UG9ydGZvbGlvJywge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ3Rlc3RQb3J0Zm9saW8nLFxuICAgICAgICBwcm92aWRlck5hbWU6IHRva2VuUHJvdmlkZXJOYW1lLnZhbHVlQXNTdHJpbmcsXG4gICAgICB9KTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpbycsIHtcbiAgICAgICAgUHJvdmlkZXJOYW1lOiB7XG4gICAgICAgICAgUmVmOiAnUHJvdmlkZXJOYW1lJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncG9ydGZvbGlvIG1ldGhvZHMgYW5kIGFzc29jaWF0aW9ucycsICgpID0+IHtcbiAgICBsZXQgcG9ydGZvbGlvOiBzZXJ2aWNlY2F0YWxvZy5Qb3J0Zm9saW87XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHBvcnRmb2xpbyA9IG5ldyBzZXJ2aWNlY2F0YWxvZy5Qb3J0Zm9saW8oc3RhY2ssICdNeVBvcnRmb2xpbycsIHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICd0ZXN0UG9ydGZvbGlvJyxcbiAgICAgICAgcHJvdmlkZXJOYW1lOiAndGVzdFByb3ZpZGVyJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncG9ydGZvbGlvIHdpdGggdGFncycsICgpID0+IHtcbiAgICAgIGNkay5UYWdzLm9mKHBvcnRmb2xpbykuYWRkKCdteVRlc3RLZXkxJywgJ215VGVzdEtleVZhbHVlMScpO1xuICAgICAgY2RrLlRhZ3Mub2YocG9ydGZvbGlvKS5hZGQoJ215VGVzdEtleTInLCAnbXlUZXN0S2V5VmFsdWUyJyk7XG5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpQb3J0Zm9saW8nLCB7XG4gICAgICAgIFRhZ3M6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBLZXk6ICdteVRlc3RLZXkxJyxcbiAgICAgICAgICAgIFZhbHVlOiAnbXlUZXN0S2V5VmFsdWUxJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIEtleTogJ215VGVzdEtleTInLFxuICAgICAgICAgICAgVmFsdWU6ICdteVRlc3RLZXlWYWx1ZTInLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ3BvcnRmb2xpbyBzaGFyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXJlQWNjb3VudElkID0gJzAxMjM0NTY3ODkwMSc7XG5cbiAgICAgIHBvcnRmb2xpby5zaGFyZVdpdGhBY2NvdW50KHNoYXJlQWNjb3VudElkKTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpb1NoYXJlJywge1xuICAgICAgICBBY2NvdW50SWQ6IHNoYXJlQWNjb3VudElkLFxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdwb3J0Zm9saW8gc2hhcmUgd2l0aCBhc3NldHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhc3NldEJ1Y2tldCA9IG5ldyBzMy5CdWNrZXQoc3RhY2ssICdNeVByb2R1Y3RTdGFja0Fzc2V0QnVja2V0Jywge1xuICAgICAgICBidWNrZXROYW1lOiAndGVzdC1hc3NldC1idWNrZXQnLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHByb2R1Y3RTdGFjayA9IG5ldyBzZXJ2aWNlY2F0YWxvZy5Qcm9kdWN0U3RhY2soc3RhY2ssICdNeVByb2R1Y3RTdGFjaycsIHtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwcm9kdWN0ID0gbmV3IHNlcnZpY2VjYXRhbG9nLkNsb3VkRm9ybWF0aW9uUHJvZHVjdChzdGFjaywgJ015UHJvZHVjdCcsIHtcbiAgICAgICAgcHJvZHVjdE5hbWU6ICd0ZXN0UHJvZHVjdCcsXG4gICAgICAgIG93bmVyOiAndGVzdE93bmVyJyxcbiAgICAgICAgcHJvZHVjdFZlcnNpb25zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcHJvZHVjdFZlcnNpb25OYW1lOiAndjEnLFxuICAgICAgICAgICAgY2xvdWRGb3JtYXRpb25UZW1wbGF0ZTogc2VydmljZWNhdGFsb2cuQ2xvdWRGb3JtYXRpb25UZW1wbGF0ZS5mcm9tUHJvZHVjdFN0YWNrKHByb2R1Y3RTdGFjayksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuXG4gICAgICBwcm9kdWN0LmFzc2V0QnVja2V0cy5wdXNoKGFzc2V0QnVja2V0KTtcblxuICAgICAgY29uc3Qgc2hhcmVBY2NvdW50SWQgPSAnMDEyMzQ1Njc4OTAxJztcblxuICAgICAgcG9ydGZvbGlvLmFkZFByb2R1Y3QocHJvZHVjdCk7XG4gICAgICBwb3J0Zm9saW8uc2hhcmVXaXRoQWNjb3VudChzaGFyZUFjY291bnRJZCk7XG5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpQb3J0Zm9saW9TaGFyZScsIHtcbiAgICAgICAgQWNjb3VudElkOiBzaGFyZUFjY291bnRJZCxcbiAgICAgIH0pO1xuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcbiAgICAgICAgQnVja2V0TmFtZTogJ3Rlc3QtYXNzZXQtYnVja2V0JyxcbiAgICAgIH0pO1xuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldFBvbGljeScsIHtcbiAgICAgICAgUG9saWN5RG9jdW1lbnQ6IHtcbiAgICAgICAgICBTdGF0ZW1lbnQ6IFt7XG4gICAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXG4gICAgICAgICAgICBBY3Rpb246IFsnczM6R2V0T2JqZWN0KicsICdzMzpHZXRCdWNrZXQqJywgJ3MzOkxpc3QqJ10sXG4gICAgICAgICAgICBQcmluY2lwYWw6IHtcbiAgICAgICAgICAgICAgQVdTOiB7XG4gICAgICAgICAgICAgICAgJ0ZuOjpKb2luJzogW1xuICAgICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICdhcm46JyxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIFJlZjogJ0FXUzo6UGFydGl0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJzppYW06OjAxMjM0NTY3ODkwMTpyb290JyxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfV0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ3BvcnRmb2xpbyBzaGFyZSB3aXRoIHNoYXJlIHRhZ09wdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzaGFyZUFjY291bnRJZCA9ICcwMTIzNDU2Nzg5MDEnO1xuXG4gICAgICBwb3J0Zm9saW8uc2hhcmVXaXRoQWNjb3VudChzaGFyZUFjY291bnRJZCwge1xuICAgICAgICBzaGFyZVRhZ09wdGlvbnM6IHRydWUsXG4gICAgICAgIG1lc3NhZ2VMYW5ndWFnZTogc2VydmljZWNhdGFsb2cuTWVzc2FnZUxhbmd1YWdlLkVOLFxuICAgICAgfSk7XG5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpQb3J0Zm9saW9TaGFyZScsIHtcbiAgICAgICAgQWNjb3VudElkOiBzaGFyZUFjY291bnRJZCxcbiAgICAgICAgU2hhcmVUYWdPcHRpb25zOiB0cnVlLFxuICAgICAgICBBY2NlcHRMYW5ndWFnZTogJ2VuJyxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIHNoYXJlIHdpdGhvdXQgc2hhcmUgdGFnT3B0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXJlQWNjb3VudElkID0gJzAxMjM0NTY3ODkwMSc7XG5cbiAgICAgIHBvcnRmb2xpby5zaGFyZVdpdGhBY2NvdW50KHNoYXJlQWNjb3VudElkLCB7IHNoYXJlVGFnT3B0aW9uczogZmFsc2UgfSk7XG5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpQb3J0Zm9saW9TaGFyZScsIHtcbiAgICAgICAgQWNjb3VudElkOiBzaGFyZUFjY291bnRJZCxcbiAgICAgICAgU2hhcmVUYWdPcHRpb25zOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIHNoYXJlIHdpdGhvdXQgZXhwbGljaXQgc2hhcmUgdGFnT3B0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXJlQWNjb3VudElkID0gJzAxMjM0NTY3ODkwMSc7XG5cbiAgICAgIHBvcnRmb2xpby5zaGFyZVdpdGhBY2NvdW50KHNoYXJlQWNjb3VudElkKTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpb1NoYXJlJywge1xuICAgICAgICBBY2NvdW50SWQ6IHNoYXJlQWNjb3VudElkLFxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdwb3J0Zm9saW8gcHJpbmNpcGFsIGFzc29jaWF0aW9uIHdpdGggcm9sZSB0eXBlJywgKCkgPT4ge1xuICAgICAgY29uc3Qgcm9sZSA9IG5ldyBpYW0uUm9sZShzdGFjaywgJ1Rlc3RSb2xlJywge1xuICAgICAgICBhc3N1bWVkQnk6IG5ldyBpYW0uQWNjb3VudFJvb3RQcmluY2lwYWwoKSxcbiAgICAgIH0pO1xuXG4gICAgICBwb3J0Zm9saW8uZ2l2ZUFjY2Vzc1RvUm9sZShyb2xlKTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpb1ByaW5jaXBhbEFzc29jaWF0aW9uJywge1xuICAgICAgICBQcmluY2lwYWxBUk46IHsgJ0ZuOjpHZXRBdHQnOiBbJ1Rlc3RSb2xlNkM5MjcyREYnLCAnQXJuJ10gfSxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIHByaW5jaXBhbCBhc3NvY2lhdGlvbiB3aXRoIHVzZXIgdHlwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgaWFtLlVzZXIoc3RhY2ssICdUZXN0VXNlcicpO1xuXG4gICAgICBwb3J0Zm9saW8uZ2l2ZUFjY2Vzc1RvVXNlcih1c2VyKTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpb1ByaW5jaXBhbEFzc29jaWF0aW9uJywge1xuICAgICAgICBQcmluY2lwYWxBUk46IHsgJ0ZuOjpHZXRBdHQnOiBbJ1Rlc3RVc2VyNkE2MTkzODEnLCAnQXJuJ10gfSxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgncG9ydGZvbGlvIHByaW5jaXBhbCBhc3NvY2lhdGlvbiB3aXRoIGdyb3VwIHR5cGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBncm91cCA9IG5ldyBpYW0uR3JvdXAoc3RhY2ssICdUZXN0R3JvdXAnKTtcblxuICAgICAgcG9ydGZvbGlvLmdpdmVBY2Nlc3NUb0dyb3VwKGdyb3VwKTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpb1ByaW5jaXBhbEFzc29jaWF0aW9uJywge1xuICAgICAgICBQcmluY2lwYWxBUk46IHsgJ0ZuOjpHZXRBdHQnOiBbJ1Rlc3RHcm91cEFGODg2NjBFJywgJ0FybiddIH0sXG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ3BvcnRmb2xpbyBkdXBsaWNhdGUgcHJpbmNpcGxlIGFzc29jaWF0aW9ucyBhcmUgaWRlbXBvdGVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJvbGUgPSBuZXcgaWFtLlJvbGUoc3RhY2ssICdUZXN0Um9sZScsIHtcbiAgICAgICAgYXNzdW1lZEJ5OiBuZXcgaWFtLkFjY291bnRSb290UHJpbmNpcGFsKCksXG4gICAgICB9KTtcblxuICAgICAgLy8gSWYgdGhpcyB3ZXJlIG5vdCBpZGVtcG90ZW50LCB0aGUgc2Vjb25kIGNhbGwgd291bGQgcHJvZHVjZSBhbiBlcnJvciBmb3IgZHVwbGljYXRlIGNvbnN0cnVjdCBJRC5cbiAgICAgIHBvcnRmb2xpby5naXZlQWNjZXNzVG9Sb2xlKHJvbGUpO1xuICAgICAgcG9ydGZvbGlvLmdpdmVBY2Nlc3NUb1JvbGUocm9sZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdwb3J0Zm9saW8gYXNzb2NpYXRpb25zIGFuZCBwcm9kdWN0IGNvbnN0cmFpbnRzJywgKCkgPT4ge1xuICBsZXQgc3RhY2s6IGNkay5TdGFjaztcbiAgbGV0IHBvcnRmb2xpbzogc2VydmljZWNhdGFsb2cuUG9ydGZvbGlvO1xuICBsZXQgcHJvZHVjdDogc2VydmljZWNhdGFsb2cuQ2xvdWRGb3JtYXRpb25Qcm9kdWN0O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgcG9ydGZvbGlvID0gbmV3IHNlcnZpY2VjYXRhbG9nLlBvcnRmb2xpbyhzdGFjaywgJ015UG9ydGZvbGlvJywge1xuICAgICAgZGlzcGxheU5hbWU6ICd0ZXN0UG9ydGZvbGlvJyxcbiAgICAgIHByb3ZpZGVyTmFtZTogJ3Rlc3RQcm92aWRlcicsXG4gICAgfSk7XG5cbiAgICBwcm9kdWN0ID0gbmV3IHNlcnZpY2VjYXRhbG9nLkNsb3VkRm9ybWF0aW9uUHJvZHVjdChzdGFjaywgJ015UHJvZHVjdCcsIHtcbiAgICAgIHByb2R1Y3ROYW1lOiAndGVzdFByb2R1Y3QnLFxuICAgICAgb3duZXI6ICd0ZXN0T3duZXInLFxuICAgICAgcHJvZHVjdFZlcnNpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBjbG91ZEZvcm1hdGlvblRlbXBsYXRlOiBzZXJ2aWNlY2F0YWxvZy5DbG91ZEZvcm1hdGlvblRlbXBsYXRlLmZyb21VcmwoJ2h0dHBzOi8vYXdzZG9jcy5zMy5hbWF6b25hd3MuY29tL3NlcnZpY2VjYXRhbG9nL2RldmVsb3BtZW50LWVudmlyb25tZW50LnRlbXBsYXRlJyksXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuICB9KSxcblxuICB0ZXN0KCdiYXNpYyBwb3J0Zm9saW8gcHJvZHVjdCBhc3NvY2lhdGlvbicsICgpID0+IHtcbiAgICBwb3J0Zm9saW8uYWRkUHJvZHVjdChwcm9kdWN0KTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpQb3J0Zm9saW9Qcm9kdWN0QXNzb2NpYXRpb24nLCAxKTtcbiAgfSk7XG5cbiAgdGVzdCgncG9ydGZvbGlvIHByb2R1Y3QgYXNzb2NpYXRpb25zIGFyZSBpZGVtcG90ZW50JywgKCkgPT4ge1xuICAgIHBvcnRmb2xpby5hZGRQcm9kdWN0KHByb2R1Y3QpO1xuICAgIHBvcnRmb2xpby5hZGRQcm9kdWN0KHByb2R1Y3QpOyAvLyBJZiBub3QgaWRlbXBvdGVudCB0aGVzZSBjYWxscyBzaG91bGQgZmFpbFxuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlBvcnRmb2xpb1Byb2R1Y3RBc3NvY2lhdGlvbicsIDEpOyAvL2NoZWNrIGFueXdheVxuICB9KSxcblxuICB0ZXN0KCdhZGQgdGFnIG9wdGlvbnMgdG8gcG9ydGZvbGlvJywgKCkgPT4ge1xuICAgIGNvbnN0IHRhZ09wdGlvbnMgPSBuZXcgc2VydmljZWNhdGFsb2cuVGFnT3B0aW9ucyhzdGFjaywgJ1RhZ09wdGlvbnMnLCB7XG4gICAgICBhbGxvd2VkVmFsdWVzRm9yVGFnczoge1xuICAgICAgICBrZXkxOiBbJ3ZhbHVlMScsICd2YWx1ZTInXSxcbiAgICAgICAga2V5MjogWyd2YWx1ZTEnXSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBwb3J0Zm9saW8uYXNzb2NpYXRlVGFnT3B0aW9ucyh0YWdPcHRpb25zKTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpUYWdPcHRpb24nLCAzKTsgLy9HZW5lcmF0ZXMgYSByZXNvdXJjZSBmb3IgZWFjaCB1bmlxdWUga2V5LXZhbHVlIHBhaXJcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6VGFnT3B0aW9uQXNzb2NpYXRpb24nLCAzKTtcbiAgfSksXG5cbiAgdGVzdCgnYWRkIHRhZyBvcHRpb25zIHRvIHBvcnRmb2xpbyBhcyBwcm9wJywgKCkgPT4ge1xuICAgIGNvbnN0IHRhZ09wdGlvbnMgPSBuZXcgc2VydmljZWNhdGFsb2cuVGFnT3B0aW9ucyhzdGFjaywgJ1RhZ09wdGlvbnMnLCB7XG4gICAgICBhbGxvd2VkVmFsdWVzRm9yVGFnczoge1xuICAgICAgICBrZXkxOiBbJ3ZhbHVlMScsICd2YWx1ZTInXSxcbiAgICAgICAga2V5MjogWyd2YWx1ZTEnXSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBwb3J0Zm9saW8gPSBuZXcgc2VydmljZWNhdGFsb2cuUG9ydGZvbGlvKHN0YWNrLCAnTXlQb3J0Zm9saW9XaXRoVGFnJywge1xuICAgICAgZGlzcGxheU5hbWU6ICd0ZXN0UG9ydGZvbGlvJyxcbiAgICAgIHByb3ZpZGVyTmFtZTogJ3Rlc3RQcm92aWRlcicsXG4gICAgICB0YWdPcHRpb25zOiB0YWdPcHRpb25zLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlRhZ09wdGlvbicsIDMpOyAvL0dlbmVyYXRlcyBhIHJlc291cmNlIGZvciBlYWNoIHVuaXF1ZSBrZXktdmFsdWUgcGFpclxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpUYWdPcHRpb25Bc3NvY2lhdGlvbicsIDMpO1xuICB9KSxcblxuICB0ZXN0KCdhZGRpbmcgdGFnIG9wdGlvbnMgdG8gcG9ydGZvbGlvIG11bHRpcGxlIHRpbWVzIGlzIGlkZW1wb3RlbnQnLCAoKSA9PiB7XG4gICAgY29uc3QgdGFnT3B0aW9ucyA9IG5ldyBzZXJ2aWNlY2F0YWxvZy5UYWdPcHRpb25zKHN0YWNrLCAnVGFnT3B0aW9ucycsIHtcbiAgICAgIGFsbG93ZWRWYWx1ZXNGb3JUYWdzOiB7XG4gICAgICAgIGtleTE6IFsndmFsdWUxJywgJ3ZhbHVlMiddLFxuICAgICAgICBrZXkyOiBbJ3ZhbHVlMSddLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHBvcnRmb2xpby5hc3NvY2lhdGVUYWdPcHRpb25zKHRhZ09wdGlvbnMpO1xuICAgIHBvcnRmb2xpby5hc3NvY2lhdGVUYWdPcHRpb25zKHRhZ09wdGlvbnMpOyAvLyBJZiBub3QgaWRlbXBvdGVudCB0aGlzIHdvdWxkIGZhaWxcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpUYWdPcHRpb24nLCAzKTsgLy9HZW5lcmF0ZXMgYSByZXNvdXJjZSBmb3IgZWFjaCB1bmlxdWUga2V5LXZhbHVlIHBhaXJcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6VGFnT3B0aW9uQXNzb2NpYXRpb24nLCAzKTtcbiAgfSksXG5cbiAgdGVzdCgnYWRkIHRhZyB1cGRhdGUgY29uc3RyYWludCcsICgpID0+IHtcbiAgICBwb3J0Zm9saW8uYWRkUHJvZHVjdChwcm9kdWN0KTtcbiAgICBwb3J0Zm9saW8uY29uc3RyYWluVGFnVXBkYXRlcyhwcm9kdWN0LCB7XG4gICAgICBhbGxvdzogdHJ1ZSxcbiAgICB9KTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpSZXNvdXJjZVVwZGF0ZUNvbnN0cmFpbnQnLCB7XG4gICAgICBUYWdVcGRhdGVPblByb3Zpc2lvbmVkUHJvZHVjdDogJ0FMTE9XRUQnLFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCd0YWcgdXBkYXRlIGNvbnN0cmFpbnQgc3RpbGwgYWRkcyB3aXRob3V0IGV4cGxpY2l0IGFzc29jaWF0aW9uJywgKCkgPT4ge1xuICAgIHBvcnRmb2xpby5jb25zdHJhaW5UYWdVcGRhdGVzKHByb2R1Y3QsIHtcbiAgICAgIG1lc3NhZ2VMYW5ndWFnZTogc2VydmljZWNhdGFsb2cuTWVzc2FnZUxhbmd1YWdlLkVOLFxuICAgICAgZGVzY3JpcHRpb246ICd0ZXN0IGNvbnN0cmFpbnQgZGVzY3JpcHRpb24nLFxuICAgICAgYWxsb3c6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlJlc291cmNlVXBkYXRlQ29uc3RyYWludCcsIHtcbiAgICAgIEFjY2VwdExhbmd1YWdlOiBzZXJ2aWNlY2F0YWxvZy5NZXNzYWdlTGFuZ3VhZ2UuRU4sXG4gICAgICBEZXNjcmlwdGlvbjogJ3Rlc3QgY29uc3RyYWludCBkZXNjcmlwdGlvbicsXG4gICAgICBUYWdVcGRhdGVPblByb3Zpc2lvbmVkUHJvZHVjdDogJ05PVF9BTExPV0VEJyxcbiAgICB9KTtcbiAgfSksXG5cbiAgdGVzdCgnZmFpbHMgdG8gYWRkIG11bHRpcGxlIHRhZyB1cGRhdGUgY29uc3RyYWludHMnLCAoKSA9PiB7XG4gICAgcG9ydGZvbGlvLmNvbnN0cmFpblRhZ1VwZGF0ZXMocHJvZHVjdCwge1xuICAgICAgZGVzY3JpcHRpb246ICd0ZXN0IGNvbnN0cmFpbnQgZGVzY3JpcHRpb24nLFxuICAgIH0pO1xuXG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5jb25zdHJhaW5UYWdVcGRhdGVzKHByb2R1Y3QsIHtcbiAgICAgICAgYWxsb3c6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ2Fub3RoZXIgdGVzdCBjb25zdHJhaW50IGRlc2NyaXB0aW9uJyxcbiAgICAgIH0pO1xuICAgIH0pLnRvVGhyb3dFcnJvcigvQ2Fubm90IGhhdmUgbXVsdGlwbGUgdGFnIHVwZGF0ZSBjb25zdHJhaW50cyBmb3IgYXNzb2NpYXRpb24vKTtcbiAgfSksXG5cbiAgdGVzdCgnYWRkIGV2ZW50IG5vdGlmaWNhdGlvbiBjb25zdHJhaW50JywgKCkgPT4ge1xuICAgIHBvcnRmb2xpby5hZGRQcm9kdWN0KHByb2R1Y3QpO1xuXG4gICAgY29uc3QgdG9waWMgPSBuZXcgc25zLlRvcGljKHN0YWNrLCAnVG9waWMnKTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9ICdldmVudCBub3RpZmljYXRpb24gY29uc3RyYWludCBkZXNjcmlwdGlvbic7XG5cbiAgICBwb3J0Zm9saW8ubm90aWZ5T25TdGFja0V2ZW50cyhwcm9kdWN0LCB0b3BpYywge1xuICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OkxhdW5jaE5vdGlmaWNhdGlvbkNvbnN0cmFpbnQnLCB7XG4gICAgICBOb3RpZmljYXRpb25Bcm5zOiBbeyBSZWY6ICdUb3BpY0JGQzdBRjZFJyB9XSxcbiAgICAgIERlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgIFBvcnRmb2xpb0lkOiB7IFJlZjogJ015UG9ydGZvbGlvNTlDQ0E5QzknIH0sXG4gICAgICBQcm9kdWN0SWQ6IHsgUmVmOiAnTXlQcm9kdWN0NDlBM0M1ODcnIH0sXG4gICAgfSk7XG4gIH0pLFxuXG4gIHRlc3QoJ2V2ZW50IG5vdGlmaWNhdGlvbiBjb25zdHJhaW50IHdpbGwgc3RpbGwgYWRkIHdpdGhvdXQgZXhwbGljaXQgYXNzb2NpYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgdG9waWMgPSBuZXcgc25zLlRvcGljKHN0YWNrLCAnVG9waWMxJyk7XG5cbiAgICBwb3J0Zm9saW8ubm90aWZ5T25TdGFja0V2ZW50cyhwcm9kdWN0LCB0b3BpYyk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6TGF1bmNoTm90aWZpY2F0aW9uQ29uc3RyYWludCcsIDEpO1xuICB9KSxcblxuICB0ZXN0KCdjYW4gYWRkIG11bHRpcGxlIG5vdGlmaWNhdGlvbnMnLCAoKSA9PiB7XG4gICAgY29uc3QgdG9waWMxID0gbmV3IHNucy5Ub3BpYyhzdGFjaywgJ1RvcGljMScpO1xuICAgIGNvbnN0IHRvcGljMiA9IG5ldyBzbnMuVG9waWMoc3RhY2ssICdUb3BpYzInKTtcbiAgICBjb25zdCB0b3BpYzMgPSBuZXcgc25zLlRvcGljKHN0YWNrLCAnVG9waWMzJyk7XG5cbiAgICBwb3J0Zm9saW8ubm90aWZ5T25TdGFja0V2ZW50cyhwcm9kdWN0LCB0b3BpYzEpO1xuICAgIHBvcnRmb2xpby5ub3RpZnlPblN0YWNrRXZlbnRzKHByb2R1Y3QsIHRvcGljMik7XG4gICAgcG9ydGZvbGlvLm5vdGlmeU9uU3RhY2tFdmVudHMocHJvZHVjdCwgdG9waWMzKTtcblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpMYXVuY2hOb3RpZmljYXRpb25Db25zdHJhaW50JywgMyk7XG4gIH0pLFxuXG4gIHRlc3QoJ2ZhaWxzIHRvIGFkZCBzYW1lIHRvcGljIG11bHRpcGxlIHRpbWVzIGluIGV2ZW50IG5vdGlmaWNhdGlvbiBjb25zdHJhaW50JywgKCkgPT4ge1xuICAgIGNvbnN0IHRvcGljID0gbmV3IHNucy5Ub3BpYyhzdGFjaywgJ1RvcGljMScpO1xuXG4gICAgcG9ydGZvbGlvLm5vdGlmeU9uU3RhY2tFdmVudHMocHJvZHVjdCwgdG9waWMpO1xuXG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5ub3RpZnlPblN0YWNrRXZlbnRzKHByb2R1Y3QsIHRvcGljKTtcbiAgICB9KS50b1Rocm93RXJyb3IoYFRvcGljICR7dG9waWN9IGlzIGFscmVhZHkgc3Vic2NyaWJlZCB0byBhc3NvY2lhdGlvbmApO1xuICB9KSxcblxuICB0ZXN0KCdjcmVhdGVzIGEgQ2xvdWRGb3JtYXRpb24gcGFyYW1ldGVycyBjb25zdHJhaW50JywgKCkgPT4ge1xuICAgIHBvcnRmb2xpby5hZGRQcm9kdWN0KHByb2R1Y3QpO1xuICAgIHBvcnRmb2xpby5jb25zdHJhaW5DbG91ZEZvcm1hdGlvblBhcmFtZXRlcnMocHJvZHVjdCwge1xuICAgICAgcnVsZToge1xuICAgICAgICBydWxlTmFtZTogJ1J1bGUnLFxuICAgICAgICBhc3NlcnRpb25zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXNzZXJ0OiBjZGsuRm4uY29uZGl0aW9uQ29udGFpbnMoWyd0Mi5taWNybycsICd0Mi5zbWFsbCddLCBjZGsuRm4ucmVmKCdJbnN0YW5jZVR5cGUnKSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ2Fzc2VydCBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6TGF1bmNoVGVtcGxhdGVDb25zdHJhaW50Jywge1xuICAgICAgUG9ydGZvbGlvSWQ6IHsgUmVmOiAnTXlQb3J0Zm9saW81OUNDQTlDOScgfSxcbiAgICAgIFByb2R1Y3RJZDogeyBSZWY6ICdNeVByb2R1Y3Q0OUEzQzU4NycgfSxcbiAgICAgIFJ1bGVzOiBKU09OLnN0cmluZ2lmeSgge1xuICAgICAgICBSdWxlOiB7XG4gICAgICAgICAgQXNzZXJ0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBBc3NlcnQ6IHsgJ0ZuOjpDb250YWlucyc6IFtbJ3QyLm1pY3JvJywgJ3QyLnNtYWxsJ10sIHsgUmVmOiAnSW5zdGFuY2VUeXBlJyB9XSB9LFxuICAgICAgICAgICAgICBBc3NlcnREZXNjcmlwdGlvbjogJ2Fzc2VydCBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfSksXG5cbiAgdGVzdCgnQ2xvdWRGb3JtYXRpb24gcGFyYW1ldGVycyBjb25zdHJhaW50IHN0aWxsIGNyZWF0ZXMgd2l0aG91dCBleHBsaWNpdCBhc3NvY2lhdGlvbicsICgpID0+IHtcbiAgICBwb3J0Zm9saW8uY29uc3RyYWluQ2xvdWRGb3JtYXRpb25QYXJhbWV0ZXJzKHByb2R1Y3QsIHtcbiAgICAgIHJ1bGU6IHtcbiAgICAgICAgcnVsZU5hbWU6ICdSdWxlJyxcbiAgICAgICAgY29uZGl0aW9uOiBjZGsuRm4uY29uZGl0aW9uQ29udGFpbnMoWydhJywgJ2InXSwgJ3RleHQnKSxcbiAgICAgICAgYXNzZXJ0aW9uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFzc2VydDogY2RrLkZuLmNvbmRpdGlvbkNvbnRhaW5zKFsndDIubWljcm8nLCAndDIuc21hbGwnXSwgY2RrLkZuLnJlZignSW5zdGFuY2VUeXBlJykpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdhc3NlcnQgZGVzY3JpcHRpb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICd0ZXN0IGRlc2NyaXB0aW9uJyxcbiAgICAgIG1lc3NhZ2VMYW5ndWFnZTogc2VydmljZWNhdGFsb2cuTWVzc2FnZUxhbmd1YWdlLkVOLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OkxhdW5jaFRlbXBsYXRlQ29uc3RyYWludCcsIDEpO1xuICB9KSxcblxuICB0ZXN0KCdzZXQgbXVsdGlwbGUgQ2xvdWRGb3JtYXRpb24gcGFyYW1ldGVycyBjb25zdHJhaW50cycsICgpID0+IHtcbiAgICBwb3J0Zm9saW8uY29uc3RyYWluQ2xvdWRGb3JtYXRpb25QYXJhbWV0ZXJzKHByb2R1Y3QsIHtcbiAgICAgIHJ1bGU6IHtcbiAgICAgICAgcnVsZU5hbWU6ICdSdWxlMDEnLFxuICAgICAgICBhc3NlcnRpb25zOiBbe1xuICAgICAgICAgIGFzc2VydDogY2RrLkZuLmNvbmRpdGlvbkNvbnRhaW5zKFsnQnVja2V0T3duZXJSZWFkJ10sIGNkay5Gbi5yZWYoJ0FjY2Vzc0NvbnRyb2wnKSksXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdhc3NlcnQgZGVzY3JpcHRpb24nLFxuICAgICAgICB9XSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBwb3J0Zm9saW8uY29uc3RyYWluQ2xvdWRGb3JtYXRpb25QYXJhbWV0ZXJzKHByb2R1Y3QsIHtcbiAgICAgIHJ1bGU6IHtcbiAgICAgICAgcnVsZU5hbWU6ICdSdWxlMDInLFxuICAgICAgICBhc3NlcnRpb25zOiBbe1xuICAgICAgICAgIGFzc2VydDogY2RrLkZuLmNvbmRpdGlvbkNvbnRhaW5zKFsnQnVja2V0T3duZXJXcml0ZSddLCBjZGsuRm4ucmVmKCdBY2Nlc3NDb250cm9sJykpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnYXNzZXJ0IGRlc2NyaXB0aW9uJyxcbiAgICAgICAgfV0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OkxhdW5jaFRlbXBsYXRlQ29uc3RyYWludCcsIDIpO1xuICB9KSxcblxuICB0ZXN0KCdmYWlscyB0byBzZXQgYSBkdXBsaWNhdGUgQ2xvdWRGb3JtYXRpb24gcGFyYW1ldGVycyBjb25zdHJhaW50JywgKCkgPT4ge1xuICAgIHBvcnRmb2xpby5jb25zdHJhaW5DbG91ZEZvcm1hdGlvblBhcmFtZXRlcnMocHJvZHVjdCwge1xuICAgICAgcnVsZToge1xuICAgICAgICBydWxlTmFtZTogJ1J1bGUwMScsXG4gICAgICAgIGFzc2VydGlvbnM6IFt7XG4gICAgICAgICAgYXNzZXJ0OiBjZGsuRm4uY29uZGl0aW9uQ29udGFpbnMoWydCdWNrZXRPd25lclJlYWQnXSwgY2RrLkZuLnJlZignQWNjZXNzQ29udHJvbCcpKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ2Fzc2VydCBkZXNjcmlwdGlvbicsXG4gICAgICAgIH1dLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBwb3J0Zm9saW8uY29uc3RyYWluQ2xvdWRGb3JtYXRpb25QYXJhbWV0ZXJzKHByb2R1Y3QsIHtcbiAgICAgICAgcnVsZToge1xuICAgICAgICAgIHJ1bGVOYW1lOiAnUnVsZTAxJyxcbiAgICAgICAgICBhc3NlcnRpb25zOiBbe1xuICAgICAgICAgICAgYXNzZXJ0OiBjZGsuRm4uY29uZGl0aW9uQ29udGFpbnMoWydCdWNrZXRPd25lcldyaXRlJ10sIGNkay5Gbi5yZWYoJ0FjY2Vzc0NvbnRyb2wnKSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ2Fzc2VydCBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KS50b1Rocm93RXJyb3IoL1Byb3Zpc2lvbmluZyBydWxlIFJ1bGUwMSBhbHJlYWR5IGNvbmZpZ3VyZWQgb24gYXNzb2NpYXRpb24vKTtcbiAgfSksXG5cbiAgZGVzY3JpYmUoJ3BvcnRmb2xpbyBjb25zdHJhaW50cyB0aGF0IGhhdmUgcm9sZXMnLCAoKSA9PiB7XG4gICAgbGV0IGxhdW5jaFJvbGU6IGlhbS5JUm9sZSwgYWRtaW5Sb2xlOiBpYW0uSVJvbGU7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBhZG1pblJvbGUgPSBuZXcgaWFtLlJvbGUoc3RhY2ssICdBZG1pblJvbGUnLCB7XG4gICAgICAgIGFzc3VtZWRCeTogbmV3IGlhbS5BY2NvdW50Um9vdFByaW5jaXBhbCgpLFxuICAgICAgfSk7XG4gICAgICBsYXVuY2hSb2xlID0gbmV3IGlhbS5Sb2xlKHN0YWNrLCAnTGF1bmNoUm9sZScsIHtcbiAgICAgICAgcm9sZU5hbWU6ICdMYXVuY2hSb2xlJyxcbiAgICAgICAgYXNzdW1lZEJ5OiBuZXcgaWFtLlNlcnZpY2VQcmluY2lwYWwoJ3NlcnZpY2VjYXRhbG9nLmFtYXpvbmF3cy5jb20nKSxcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgdGVzdCgnc2V0IGEgbGF1bmNoIHJvbGUgY29uc3RyYWludCcsICgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5hZGRQcm9kdWN0KHByb2R1Y3QpO1xuXG4gICAgICBwb3J0Zm9saW8uc2V0TGF1bmNoUm9sZShwcm9kdWN0LCBsYXVuY2hSb2xlLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnc2V0IGxhdW5jaCByb2xlIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgbWVzc2FnZUxhbmd1YWdlOiBzZXJ2aWNlY2F0YWxvZy5NZXNzYWdlTGFuZ3VhZ2UuRU4sXG4gICAgICB9KTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OkxhdW5jaFJvbGVDb25zdHJhaW50Jywge1xuICAgICAgICBQb3J0Zm9saW9JZDogeyBSZWY6ICdNeVBvcnRmb2xpbzU5Q0NBOUM5JyB9LFxuICAgICAgICBQcm9kdWN0SWQ6IHsgUmVmOiAnTXlQcm9kdWN0NDlBM0M1ODcnIH0sXG4gICAgICAgIERlc2NyaXB0aW9uOiAnc2V0IGxhdW5jaCByb2xlIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgQWNjZXB0TGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgIFJvbGVBcm46IHtcbiAgICAgICAgICAnRm46OkdldEF0dCc6IFsnTGF1bmNoUm9sZTJDRkIyRTQ0JywgJ0FybiddLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdzZXQgYSBsYXVuY2ggcm9sZSBjb25zdHJhaW50IHVzaW5nIGxvY2FsIHJvbGUgbmFtZScsICgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5hZGRQcm9kdWN0KHByb2R1Y3QpO1xuXG4gICAgICBwb3J0Zm9saW8uc2V0TG9jYWxMYXVuY2hSb2xlTmFtZShwcm9kdWN0LCAnTG9jYWxMYXVuY2hSb2xlJywge1xuICAgICAgICBkZXNjcmlwdGlvbjogJ3NldCBsYXVuY2ggcm9sZSBkZXNjcmlwdGlvbicsXG4gICAgICAgIG1lc3NhZ2VMYW5ndWFnZTogc2VydmljZWNhdGFsb2cuTWVzc2FnZUxhbmd1YWdlLkVOLFxuICAgICAgfSk7XG5cbiAgICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlNlcnZpY2VDYXRhbG9nOjpMYXVuY2hSb2xlQ29uc3RyYWludCcsIHtcbiAgICAgICAgUG9ydGZvbGlvSWQ6IHsgUmVmOiAnTXlQb3J0Zm9saW81OUNDQTlDOScgfSxcbiAgICAgICAgUHJvZHVjdElkOiB7IFJlZjogJ015UHJvZHVjdDQ5QTNDNTg3JyB9LFxuICAgICAgICBEZXNjcmlwdGlvbjogJ3NldCBsYXVuY2ggcm9sZSBkZXNjcmlwdGlvbicsXG4gICAgICAgIEFjY2VwdExhbmd1YWdlOiAnZW4nLFxuICAgICAgICBMb2NhbFJvbGVOYW1lOiB7IFJlZjogJ015UG9ydGZvbGlvTGF1bmNoUm9sZUxvY2FsTGF1bmNoUm9sZUIyRTZFMjJBJyB9LFxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdzZXQgYSBsYXVuY2ggcm9sZSBjb25zdHJhaW50IHVzaW5nIGxvY2FsIHJvbGUnLCAoKSA9PiB7XG4gICAgICBwb3J0Zm9saW8uYWRkUHJvZHVjdChwcm9kdWN0KTtcblxuICAgICAgcG9ydGZvbGlvLnNldExvY2FsTGF1bmNoUm9sZShwcm9kdWN0LCBsYXVuY2hSb2xlLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnc2V0IGxhdW5jaCByb2xlIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgbWVzc2FnZUxhbmd1YWdlOiBzZXJ2aWNlY2F0YWxvZy5NZXNzYWdlTGFuZ3VhZ2UuRU4sXG4gICAgICB9KTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OkxhdW5jaFJvbGVDb25zdHJhaW50Jywge1xuICAgICAgICBQb3J0Zm9saW9JZDogeyBSZWY6ICdNeVBvcnRmb2xpbzU5Q0NBOUM5JyB9LFxuICAgICAgICBQcm9kdWN0SWQ6IHsgUmVmOiAnTXlQcm9kdWN0NDlBM0M1ODcnIH0sXG4gICAgICAgIERlc2NyaXB0aW9uOiAnc2V0IGxhdW5jaCByb2xlIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgQWNjZXB0TGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgIExvY2FsUm9sZU5hbWU6IHsgUmVmOiAnTGF1bmNoUm9sZTJDRkIyRTQ0JyB9LFxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdzZXQgYSBsYXVuY2ggcm9sZSBjb25zdHJhaW50IHVzaW5nIGltcG9ydGVkIGxvY2FsIHJvbGUnLCAoKSA9PiB7XG4gICAgICBwb3J0Zm9saW8uYWRkUHJvZHVjdChwcm9kdWN0KTtcblxuICAgICAgY29uc3QgaW1wb3J0ZWRMYXVuY2hSb2xlID0gaWFtLlJvbGUuZnJvbVJvbGVBcm4ocG9ydGZvbGlvLnN0YWNrLCAnSW1wb3J0ZWRMYXVuY2hSb2xlJywgJ2Fybjphd3M6aWFtOjoxMjM0NTY3ODkwMTI6cm9sZS9JbXBvcnRlZExhdW5jaFJvbGUnKTtcblxuICAgICAgcG9ydGZvbGlvLnNldExvY2FsTGF1bmNoUm9sZShwcm9kdWN0LCBpbXBvcnRlZExhdW5jaFJvbGUsIHtcbiAgICAgICAgZGVzY3JpcHRpb246ICdzZXQgbGF1bmNoIHJvbGUgZGVzY3JpcHRpb24nLFxuICAgICAgICBtZXNzYWdlTGFuZ3VhZ2U6IHNlcnZpY2VjYXRhbG9nLk1lc3NhZ2VMYW5ndWFnZS5FTixcbiAgICAgIH0pO1xuXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6TGF1bmNoUm9sZUNvbnN0cmFpbnQnLCB7XG4gICAgICAgIFBvcnRmb2xpb0lkOiB7IFJlZjogJ015UG9ydGZvbGlvNTlDQ0E5QzknIH0sXG4gICAgICAgIFByb2R1Y3RJZDogeyBSZWY6ICdNeVByb2R1Y3Q0OUEzQzU4NycgfSxcbiAgICAgICAgRGVzY3JpcHRpb246ICdzZXQgbGF1bmNoIHJvbGUgZGVzY3JpcHRpb24nLFxuICAgICAgICBBY2NlcHRMYW5ndWFnZTogJ2VuJyxcbiAgICAgICAgTG9jYWxSb2xlTmFtZTogJ0ltcG9ydGVkTGF1bmNoUm9sZScsXG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ3NldCBsYXVuY2ggcm9sZSBjb25zdHJhaW50IHN0aWxsIGFkZHMgd2l0aG91dCBleHBsaWNpdCBhc3NvY2lhdGlvbicsICgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5zZXRMYXVuY2hSb2xlKHByb2R1Y3QsIGxhdW5jaFJvbGUpO1xuXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6TGF1bmNoUm9sZUNvbnN0cmFpbnQnLCAxKTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ2ZhaWxzIHRvIGFkZCBtdWx0aXBsZSBzZXQgbGF1bmNoIHJvbGVzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3RoZXJMYXVuY2hSb2xlID0gbmV3IGlhbS5Sb2xlKHN0YWNrLCAnb3RoZXJMYXVuY2hSb2xlJywge1xuICAgICAgICBhc3N1bWVkQnk6IG5ldyBpYW0uU2VydmljZVByaW5jaXBhbCgnc2VydmljZWNhdGFsb2cuYW1hem9uYXdzLmNvbScpLFxuICAgICAgfSk7XG5cbiAgICAgIHBvcnRmb2xpby5zZXRMYXVuY2hSb2xlKHByb2R1Y3QsIGxhdW5jaFJvbGUpO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBwb3J0Zm9saW8uc2V0TGF1bmNoUm9sZShwcm9kdWN0LCBvdGhlckxhdW5jaFJvbGUpO1xuICAgICAgfSkudG9UaHJvdygvQ2Fubm90IHNldCBtdWx0aXBsZSBsYXVuY2ggcm9sZXMgZm9yIGFzc29jaWF0aW9uLyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdsb2NhbCBsYXVuY2ggcm9sZSBtdXN0IGhhdmUgcm9sZU5hbWUgZXhwbGljaXRseSBzZXQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvdGhlckxhdW5jaFJvbGUgPSBuZXcgaWFtLlJvbGUoc3RhY2ssICdvdGhlckxhdW5jaFJvbGUnLCB7XG4gICAgICAgIGFzc3VtZWRCeTogbmV3IGlhbS5TZXJ2aWNlUHJpbmNpcGFsKCdzZXJ2aWNlY2F0YWxvZy5hbWF6b25hd3MuY29tJyksXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcG9ydGZvbGlvLnNldExvY2FsTGF1bmNoUm9sZShwcm9kdWN0LCBvdGhlckxhdW5jaFJvbGUpO1xuICAgICAgfSkudG9UaHJvdygvUm9sZSBvdGhlckxhdW5jaFJvbGUgdXNlZCBmb3IgTG9jYWwgTGF1bmNoIFJvbGUgbXVzdCBoYXZlIHJvbGVOYW1lIGV4cGxpY2l0bHkgc2V0Lyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdmYWlscyB0byBhZGQgbXVsdGlwbGUgc2V0IGxhdW5jaCByb2xlcyAtIGxvY2FsIGxhdW5jaCByb2xlIGZpcnN0JywgKCkgPT4ge1xuICAgICAgcG9ydGZvbGlvLnNldExvY2FsTGF1bmNoUm9sZU5hbWUocHJvZHVjdCwgJ0xhdW5jaFJvbGUnKTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcG9ydGZvbGlvLnNldExhdW5jaFJvbGUocHJvZHVjdCwgbGF1bmNoUm9sZSk7XG4gICAgICB9KS50b1Rocm93KC9DYW5ub3Qgc2V0IG11bHRpcGxlIGxhdW5jaCByb2xlcyBmb3IgYXNzb2NpYXRpb24vKTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ2ZhaWxzIHRvIGFkZCBtdWx0aXBsZSBzZXQgbG9jYWwgbGF1bmNoIHJvbGVzIC0gbG9jYWwgbGF1bmNoIHJvbGUgZmlyc3QnLCAoKSA9PiB7XG4gICAgICBwb3J0Zm9saW8uc2V0TG9jYWxMYXVuY2hSb2xlTmFtZShwcm9kdWN0LCAnTGF1bmNoUm9sZScpO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBwb3J0Zm9saW8uc2V0TG9jYWxMYXVuY2hSb2xlKHByb2R1Y3QsIGxhdW5jaFJvbGUpO1xuICAgICAgfSkudG9UaHJvdygvQ2Fubm90IHNldCBtdWx0aXBsZSBsYXVuY2ggcm9sZXMgZm9yIGFzc29jaWF0aW9uLyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdmYWlscyB0byBhZGQgbXVsdGlwbGUgc2V0IGxvY2FsIGxhdW5jaCByb2xlcyAtIGxvY2FsIGxhdW5jaCByb2xlIG5hbWUgZmlyc3QnLCAoKSA9PiB7XG4gICAgICBwb3J0Zm9saW8uc2V0TG9jYWxMYXVuY2hSb2xlKHByb2R1Y3QsIGxhdW5jaFJvbGUpO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBwb3J0Zm9saW8uc2V0TG9jYWxMYXVuY2hSb2xlTmFtZShwcm9kdWN0LCAnTGF1bmNoUm9sZScpO1xuICAgICAgfSkudG9UaHJvdygvQ2Fubm90IHNldCBtdWx0aXBsZSBsYXVuY2ggcm9sZXMgZm9yIGFzc29jaWF0aW9uLyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdmYWlscyB0byBhZGQgbXVsdGlwbGUgc2V0IGxhdW5jaCByb2xlcyAtIGxvY2FsIGxhdW5jaCByb2xlIHNlY29uZCcsICgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5zZXRMYXVuY2hSb2xlKHByb2R1Y3QsIGxhdW5jaFJvbGUpO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBwb3J0Zm9saW8uc2V0TG9jYWxMYXVuY2hSb2xlKHByb2R1Y3QsIGxhdW5jaFJvbGUpO1xuICAgICAgfSkudG9UaHJvdygvQ2Fubm90IHNldCBtdWx0aXBsZSBsYXVuY2ggcm9sZXMgZm9yIGFzc29jaWF0aW9uLyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdmYWlscyB0byBhZGQgbXVsdGlwbGUgc2V0IGxhdW5jaCByb2xlcyAtIGxvY2FsIGxhdW5jaCByb2xlIHNlY29uZCcsICgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5zZXRMYXVuY2hSb2xlKHByb2R1Y3QsIGxhdW5jaFJvbGUpO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBwb3J0Zm9saW8uc2V0TG9jYWxMYXVuY2hSb2xlTmFtZShwcm9kdWN0LCAnTGF1bmNoUm9sZScpO1xuICAgICAgfSkudG9UaHJvdygvQ2Fubm90IHNldCBtdWx0aXBsZSBsYXVuY2ggcm9sZXMgZm9yIGFzc29jaWF0aW9uLyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdmYWlscyB0byBzZXQgbGF1bmNoIHJvbGUgaWYgc3RhY2tzZXQgcnVsZSBpcyBhbHJlYWR5IGRlZmluZWQnLCAoKSA9PiB7XG4gICAgICBwb3J0Zm9saW8uZGVwbG95V2l0aFN0YWNrU2V0cyhwcm9kdWN0LCB7XG4gICAgICAgIGFjY291bnRzOiBbJzAxMjM0NTY3ODkwMScsICcwMTIzNDU2Nzg5MDEnXSxcbiAgICAgICAgcmVnaW9uczogWyd1cy1lYXN0LTEnLCAndXMtd2VzdC0yJywgJ2V1LXdlc3QtMSddLFxuICAgICAgICBhZG1pblJvbGU6IGFkbWluUm9sZSxcbiAgICAgICAgZXhlY3V0aW9uUm9sZU5hbWU6ICdTdGFja1NldEV4ZWN1dGlvblJvbGUnLFxuICAgICAgICBhbGxvd1N0YWNrU2V0SW5zdGFuY2VPcGVyYXRpb25zOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBwb3J0Zm9saW8uc2V0TGF1bmNoUm9sZShwcm9kdWN0LCBsYXVuY2hSb2xlKTtcbiAgICAgIH0pLnRvVGhyb3dFcnJvcigvQ2Fubm90IHNldCBsYXVuY2ggcm9sZSB3aGVuIGEgU3RhY2tTZXQgcnVsZSBpcyBhbHJlYWR5IGRlZmluZWQgZm9yIGFzc29jaWF0aW9uLyk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdkZXBsb3kgd2l0aCBzdGFja3NldHMgY29uc3RyYWludCcsICgpID0+IHtcbiAgICAgIHBvcnRmb2xpby5hZGRQcm9kdWN0KHByb2R1Y3QpO1xuXG4gICAgICBwb3J0Zm9saW8uZGVwbG95V2l0aFN0YWNrU2V0cyhwcm9kdWN0LCB7XG4gICAgICAgIGFjY291bnRzOiBbJzAxMjM0NTY3ODkwMScsICcwMTIzNDU2Nzg5MDEnXSxcbiAgICAgICAgcmVnaW9uczogWyd1cy1lYXN0LTEnLCAndXMtd2VzdC0yJywgJ2V1LXdlc3QtMSddLFxuICAgICAgICBhZG1pblJvbGU6IGFkbWluUm9sZSxcbiAgICAgICAgZXhlY3V0aW9uUm9sZU5hbWU6ICdTdGFja1NldEV4ZWN1dGlvblJvbGUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ3N0YWNrc2V0IGRlc2NyaXB0aW9uJyxcbiAgICAgICAgbWVzc2FnZUxhbmd1YWdlOiBzZXJ2aWNlY2F0YWxvZy5NZXNzYWdlTGFuZ3VhZ2UuSlAsXG4gICAgICB9KTtcblxuICAgICAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6U2VydmljZUNhdGFsb2c6OlN0YWNrU2V0Q29uc3RyYWludCcsIHtcbiAgICAgICAgUG9ydGZvbGlvSWQ6IHsgUmVmOiAnTXlQb3J0Zm9saW81OUNDQTlDOScgfSxcbiAgICAgICAgUHJvZHVjdElkOiB7IFJlZjogJ015UHJvZHVjdDQ5QTNDNTg3JyB9LFxuICAgICAgICBBZG1pblJvbGU6IHtcbiAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICdBZG1pblJvbGUzODU2M0M1NycsXG4gICAgICAgICAgICAnQXJuJyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBFeGVjdXRpb25Sb2xlOiAnU3RhY2tTZXRFeGVjdXRpb25Sb2xlJyxcbiAgICAgICAgRGVzY3JpcHRpb246ICdzdGFja3NldCBkZXNjcmlwdGlvbicsXG4gICAgICAgIEFjY291bnRMaXN0OiBbJzAxMjM0NTY3ODkwMScsICcwMTIzNDU2Nzg5MDEnXSxcbiAgICAgICAgUmVnaW9uTGlzdDogWyd1cy1lYXN0LTEnLCAndXMtd2VzdC0yJywgJ2V1LXdlc3QtMSddLFxuICAgICAgICBTdGFja0luc3RhbmNlQ29udHJvbDogJ05PVF9BTExPV0VEJyxcbiAgICAgICAgQWNjZXB0TGFuZ3VhZ2U6ICdqcCcsXG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ2RlcGxveW1lbnQgd2l0aCBzdGFja3NldHMgc3RpbGwgYWRkcyB3aXRob3V0IGV4cGxpY2l0IGFzc29jaWF0aW9uJywgKCkgPT4ge1xuICAgICAgcG9ydGZvbGlvLmRlcGxveVdpdGhTdGFja1NldHMocHJvZHVjdCwge1xuICAgICAgICBhY2NvdW50czogWycwMTIzNDU2Nzg5MDEnLCAnMDEyMzQ1Njc4OTAxJ10sXG4gICAgICAgIHJlZ2lvbnM6IFsndXMtZWFzdC0xJywgJ3VzLXdlc3QtMicsICdldS13ZXN0LTEnXSxcbiAgICAgICAgYWRtaW5Sb2xlOiBhZG1pblJvbGUsXG4gICAgICAgIGV4ZWN1dGlvblJvbGVOYW1lOiAnU3RhY2tTZXRFeGVjdXRpb25Sb2xlJyxcbiAgICAgICAgYWxsb3dTdGFja1NldEluc3RhbmNlT3BlcmF0aW9uczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpTZXJ2aWNlQ2F0YWxvZzo6U3RhY2tTZXRDb25zdHJhaW50JywgMSk7XG4gICAgfSksXG5cbiAgICB0ZXN0KCdmYWlscyB0byBhZGQgbXVsdGlwbGUgZGVwbG95IHdpdGggc3RhY2tzZXQgY29uc3RyYWludHMnLCAoKSA9PiB7XG4gICAgICBwb3J0Zm9saW8uZGVwbG95V2l0aFN0YWNrU2V0cyhwcm9kdWN0LCB7XG4gICAgICAgIGFjY291bnRzOiBbJzAxMjM0NTY3ODkwMScsICcwMTIzNDU2Nzg5MDEnXSxcbiAgICAgICAgcmVnaW9uczogWyd1cy1lYXN0LTEnLCAndXMtd2VzdC0yJywgJ2V1LXdlc3QtMSddLFxuICAgICAgICBhZG1pblJvbGU6IGFkbWluUm9sZSxcbiAgICAgICAgZXhlY3V0aW9uUm9sZU5hbWU6ICdTdGFja1NldHNFeGVjdXRpb25Sb2xlJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBwb3J0Zm9saW8uZGVwbG95V2l0aFN0YWNrU2V0cyhwcm9kdWN0LCB7XG4gICAgICAgICAgYWNjb3VudHM6IFsnMDEyMzQ1Njc4OTAxJywgJzAxMjM0NTY3ODkwMSddLFxuICAgICAgICAgIHJlZ2lvbnM6IFsnYXAtZWFzdC0xJywgJ2FwLW5vcnRoZWFzdC0yJywgJ2V1LXdlc3QtMSddLFxuICAgICAgICAgIGFkbWluUm9sZTogYWRtaW5Sb2xlLFxuICAgICAgICAgIGV4ZWN1dGlvblJvbGVOYW1lOiAnU3RhY2tTZXRFeGVjdXRpb25Sb2xlJyxcbiAgICAgICAgfSk7XG4gICAgICB9KS50b1Rocm93RXJyb3IoL0Nhbm5vdCBjb25maWd1cmUgbXVsdGlwbGUgU3RhY2tTZXQgZGVwbG95bWVudCBjb25zdHJhaW50cyBmb3IgYXNzb2NpYXRpb24vKTtcbiAgICB9KSxcblxuICAgIHRlc3QoJ2ZhaWxzIHRvIGNvbmZpZ3VyZSBkZXBsb3ltZW50IHdpdGggc3RhY2tzZXRzIGlmIGEgbGF1bmNoIHJvbGUgaGFzIGJlZW4gc2V0JywgKCkgPT4ge1xuICAgICAgcG9ydGZvbGlvLnNldExhdW5jaFJvbGUocHJvZHVjdCwgbGF1bmNoUm9sZSk7XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIHBvcnRmb2xpby5kZXBsb3lXaXRoU3RhY2tTZXRzKHByb2R1Y3QsIHtcbiAgICAgICAgICBhY2NvdW50czogWycwMTIzNDU2Nzg5MDEnLCAnMDEyMzQ1Njc4OTAxJ10sXG4gICAgICAgICAgcmVnaW9uczogWyd1cy1lYXN0LTEnLCAndXMtd2VzdC0yJywgJ2V1LXdlc3QtMSddLFxuICAgICAgICAgIGFkbWluUm9sZTogYWRtaW5Sb2xlLFxuICAgICAgICAgIGV4ZWN1dGlvblJvbGVOYW1lOiAnU3RhY2tTZXRFeGVjdXRpb25Sb2xlJyxcbiAgICAgICAgICBhbGxvd1N0YWNrU2V0SW5zdGFuY2VPcGVyYXRpb25zOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH0pLnRvVGhyb3dFcnJvcigvQ2Fubm90IGNvbmZpZ3VyZSBTdGFja1NldCBkZXBsb3ltZW50IHdoZW4gYSBsYXVuY2ggcm9sZSBpcyBhbHJlYWR5IGRlZmluZWQgZm9yIGFzc29jaWF0aW9uLyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=