"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ec2 = require("../../../aws-ec2");
const iam = require("../../../aws-iam");
const kms = require("../../../aws-kms");
const sfn = require("../../../aws-stepfunctions");
const cdk = require("../../../core");
const tasks = require("../../lib");
const create_transform_job_1 = require("../../lib/sagemaker/create-transform-job");
let stack;
let role;
beforeEach(() => {
    // GIVEN
    stack = new cdk.Stack();
    role = new iam.Role(stack, 'Role', {
        assumedBy: new iam.ServicePrincipal('sagemaker.amazonaws.com'),
        managedPolicies: [
            iam.ManagedPolicy.fromAwsManagedPolicyName('AmazonSageMakerFullAccess'),
        ],
    });
});
test('create basic transform job', () => {
    // WHEN
    const task = new create_transform_job_1.SageMakerCreateTransformJob(stack, 'TransformTask', {
        transformJobName: 'MyTransformJob',
        modelName: 'MyModelName',
        transformInput: {
            transformDataSource: {
                s3DataSource: {
                    s3Uri: 's3://inputbucket/prefix',
                },
            },
        },
        transformOutput: {
            s3OutputPath: 's3://outputbucket/prefix',
        },
    });
    // THEN
    expect(stack.resolve(task.toStateJson())).toEqual({
        Type: 'Task',
        Resource: {
            'Fn::Join': [
                '',
                [
                    'arn:',
                    {
                        Ref: 'AWS::Partition',
                    },
                    ':states:::sagemaker:createTransformJob',
                ],
            ],
        },
        End: true,
        Parameters: {
            TransformJobName: 'MyTransformJob',
            ModelName: 'MyModelName',
            TransformInput: {
                DataSource: {
                    S3DataSource: {
                        S3Uri: 's3://inputbucket/prefix',
                        S3DataType: 'S3Prefix',
                    },
                },
            },
            TransformOutput: {
                S3OutputPath: 's3://outputbucket/prefix',
            },
            TransformResources: {
                InstanceCount: 1,
                InstanceType: 'ml.m4.xlarge',
            },
        },
    });
});
test('Task throws if WAIT_FOR_TASK_TOKEN is supplied as service integration pattern', () => {
    expect(() => {
        new create_transform_job_1.SageMakerCreateTransformJob(stack, 'TransformTask', {
            integrationPattern: sfn.IntegrationPattern.WAIT_FOR_TASK_TOKEN,
            transformJobName: 'MyTransformJob',
            modelName: 'MyModelName',
            transformInput: {
                transformDataSource: {
                    s3DataSource: {
                        s3Uri: 's3://inputbucket/prefix',
                    },
                },
            },
            transformOutput: {
                s3OutputPath: 's3://outputbucket/prefix',
            },
        });
    }).toThrow(/Unsupported service integration pattern. Supported Patterns: REQUEST_RESPONSE,RUN_JOB. Received: WAIT_FOR_TASK_TOKEN/);
});
test('create complex transform job', () => {
    // WHEN
    const kmsKey = new kms.Key(stack, 'Key');
    const task = new create_transform_job_1.SageMakerCreateTransformJob(stack, 'TransformTask', {
        transformJobName: 'MyTransformJob',
        modelName: 'MyModelName',
        modelClientOptions: {
            invocationsMaxRetries: 1,
            invocationsTimeout: cdk.Duration.minutes(20),
        },
        integrationPattern: sfn.IntegrationPattern.RUN_JOB,
        role,
        transformInput: {
            transformDataSource: {
                s3DataSource: {
                    s3Uri: 's3://inputbucket/prefix',
                    s3DataType: tasks.S3DataType.S3_PREFIX,
                },
            },
        },
        transformOutput: {
            s3OutputPath: 's3://outputbucket/prefix',
            encryptionKey: kmsKey,
        },
        transformResources: {
            instanceCount: 1,
            instanceType: ec2.InstanceType.of(ec2.InstanceClass.P3, ec2.InstanceSize.XLARGE2),
            volumeEncryptionKey: kmsKey,
        },
        tags: {
            Project: 'MyProject',
        },
        batchStrategy: tasks.BatchStrategy.MULTI_RECORD,
        environment: {
            SOMEVAR: 'myvalue',
        },
        maxConcurrentTransforms: 3,
        maxPayload: cdk.Size.mebibytes(100),
    });
    // THEN
    expect(stack.resolve(task.toStateJson())).toEqual({
        Type: 'Task',
        Resource: {
            'Fn::Join': [
                '',
                [
                    'arn:',
                    {
                        Ref: 'AWS::Partition',
                    },
                    ':states:::sagemaker:createTransformJob.sync',
                ],
            ],
        },
        End: true,
        Parameters: {
            TransformJobName: 'MyTransformJob',
            ModelName: 'MyModelName',
            ModelClientConfig: {
                InvocationsMaxRetries: 1,
                InvocationsTimeoutInSeconds: 1200,
            },
            TransformInput: {
                DataSource: {
                    S3DataSource: {
                        S3Uri: 's3://inputbucket/prefix',
                        S3DataType: 'S3Prefix',
                    },
                },
            },
            TransformOutput: {
                S3OutputPath: 's3://outputbucket/prefix',
                KmsKeyId: { 'Fn::GetAtt': ['Key961B73FD', 'Arn'] },
            },
            TransformResources: {
                InstanceCount: 1,
                InstanceType: 'ml.p3.2xlarge',
                VolumeKmsKeyId: { 'Fn::GetAtt': ['Key961B73FD', 'Arn'] },
            },
            Tags: [
                { Key: 'Project', Value: 'MyProject' },
            ],
            MaxConcurrentTransforms: 3,
            MaxPayloadInMB: 100,
            Environment: {
                SOMEVAR: 'myvalue',
            },
            BatchStrategy: 'MultiRecord',
        },
    });
});
test('pass param to transform job', () => {
    // WHEN
    const task = new create_transform_job_1.SageMakerCreateTransformJob(stack, 'TransformTask', {
        transformJobName: sfn.JsonPath.stringAt('$.TransformJobName'),
        modelName: sfn.JsonPath.stringAt('$.ModelName'),
        role,
        transformInput: {
            transformDataSource: {
                s3DataSource: {
                    s3Uri: 's3://inputbucket/prefix',
                    s3DataType: tasks.S3DataType.S3_PREFIX,
                },
            },
        },
        transformOutput: {
            s3OutputPath: 's3://outputbucket/prefix',
        },
        transformResources: {
            instanceCount: 1,
            instanceType: ec2.InstanceType.of(ec2.InstanceClass.P3, ec2.InstanceSize.XLARGE2),
        },
    });
    // THEN
    expect(stack.resolve(task.toStateJson())).toEqual({
        Type: 'Task',
        Resource: {
            'Fn::Join': [
                '',
                [
                    'arn:',
                    {
                        Ref: 'AWS::Partition',
                    },
                    ':states:::sagemaker:createTransformJob',
                ],
            ],
        },
        End: true,
        Parameters: {
            'TransformJobName.$': '$.TransformJobName',
            'ModelName.$': '$.ModelName',
            'TransformInput': {
                DataSource: {
                    S3DataSource: {
                        S3Uri: 's3://inputbucket/prefix',
                        S3DataType: 'S3Prefix',
                    },
                },
            },
            'TransformOutput': {
                S3OutputPath: 's3://outputbucket/prefix',
            },
            'TransformResources': {
                InstanceCount: 1,
                InstanceType: 'ml.p3.2xlarge',
            },
        },
    });
});
test('create transform job with instance type supplied as JsonPath', () => {
    // WHEN
    const task = new create_transform_job_1.SageMakerCreateTransformJob(stack, 'TransformTask', {
        transformJobName: 'MyTransformJob',
        modelName: 'MyModelName',
        transformInput: {
            transformDataSource: {
                s3DataSource: {
                    s3Uri: 's3://inputbucket/prefix',
                },
            },
        },
        transformOutput: {
            s3OutputPath: 's3://outputbucket/prefix',
        },
        transformResources: {
            instanceCount: 1,
            instanceType: new ec2.InstanceType(sfn.JsonPath.stringAt('$.InstanceType')),
        },
    });
    // THEN
    expect(stack.resolve(task.toStateJson())).toEqual({
        Type: 'Task',
        Resource: {
            'Fn::Join': [
                '',
                [
                    'arn:',
                    {
                        Ref: 'AWS::Partition',
                    },
                    ':states:::sagemaker:createTransformJob',
                ],
            ],
        },
        End: true,
        Parameters: {
            TransformJobName: 'MyTransformJob',
            ModelName: 'MyModelName',
            TransformInput: {
                DataSource: {
                    S3DataSource: {
                        S3Uri: 's3://inputbucket/prefix',
                        S3DataType: 'S3Prefix',
                    },
                },
            },
            TransformOutput: {
                S3OutputPath: 's3://outputbucket/prefix',
            },
            TransformResources: {
                'InstanceCount': 1,
                'InstanceType.$': '$.InstanceType',
            },
        },
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLXRyYW5zZm9ybS1qb2IudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNyZWF0ZS10cmFuc2Zvcm0tam9iLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx3Q0FBd0M7QUFDeEMsd0NBQXdDO0FBQ3hDLHdDQUF3QztBQUN4QyxrREFBa0Q7QUFDbEQscUNBQXFDO0FBQ3JDLG1DQUFtQztBQUNuQyxtRkFBdUY7QUFFdkYsSUFBSSxLQUFnQixDQUFDO0FBQ3JCLElBQUksSUFBYyxDQUFDO0FBRW5CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7SUFDZCxRQUFRO0lBQ1IsS0FBSyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3hCLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRTtRQUNqQyxTQUFTLEVBQUUsSUFBSSxHQUFHLENBQUMsZ0JBQWdCLENBQUMseUJBQXlCLENBQUM7UUFDOUQsZUFBZSxFQUFFO1lBQ2YsR0FBRyxDQUFDLGFBQWEsQ0FBQyx3QkFBd0IsQ0FBQywyQkFBMkIsQ0FBQztTQUN4RTtLQUNGLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRTtJQUN0QyxPQUFPO0lBQ1AsTUFBTSxJQUFJLEdBQUcsSUFBSSxrREFBMkIsQ0FBQyxLQUFLLEVBQUUsZUFBZSxFQUFFO1FBQ25FLGdCQUFnQixFQUFFLGdCQUFnQjtRQUNsQyxTQUFTLEVBQUUsYUFBYTtRQUN4QixjQUFjLEVBQUU7WUFDZCxtQkFBbUIsRUFBRTtnQkFDbkIsWUFBWSxFQUFFO29CQUNaLEtBQUssRUFBRSx5QkFBeUI7aUJBQ2pDO2FBQ0Y7U0FDRjtRQUNELGVBQWUsRUFBRTtZQUNmLFlBQVksRUFBRSwwQkFBMEI7U0FDekM7S0FDRixDQUFDLENBQUM7SUFFSCxPQUFPO0lBQ1AsTUFBTSxDQUFDLEtBQUss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QyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7UUFDaEQsSUFBSSxFQUFFLE1BQU07UUFDWixRQUFRLEVBQUU7WUFDUixVQUFVLEVBQUU7Z0JBQ1YsRUFBRTtnQkFDRjtvQkFDRSxNQUFNO29CQUNOO3dCQUNFLEdBQUcsRUFBRSxnQkFBZ0I7cUJBQ3RCO29CQUNELHdDQUF3QztpQkFDekM7YUFDRjtTQUNGO1FBQ0QsR0FBRyxFQUFFLElBQUk7UUFDVCxVQUFVLEVBQUU7WUFDVixnQkFBZ0IsRUFBRSxnQkFBZ0I7WUFDbEMsU0FBUyxFQUFFLGFBQWE7WUFDeEIsY0FBYyxFQUFFO2dCQUNkLFVBQVUsRUFBRTtvQkFDVixZQUFZLEVBQUU7d0JBQ1osS0FBSyxFQUFFLHlCQUF5Qjt3QkFDaEMsVUFBVSxFQUFFLFVBQVU7cUJBQ3ZCO2lCQUNGO2FBQ0Y7WUFDRCxlQUFlLEVBQUU7Z0JBQ2YsWUFBWSxFQUFFLDBCQUEwQjthQUN6QztZQUNELGtCQUFrQixFQUFFO2dCQUNsQixlQUFlLEVBQUUsQ0FBQztnQkFDbEIsZ0JBQWdCLEVBQUUsZ0JBQWdCO2FBQ25DO1NBQ0Y7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGVjMiBmcm9tICcuLi8uLi8uLi9hd3MtZWMyJztcbmltcG9ydCAqIGFzIGlhbSBmcm9tICcuLi8uLi8uLi9hd3MtaWFtJztcbmltcG9ydCAqIGFzIGttcyBmcm9tICcuLi8uLi8uLi9hd3Mta21zJztcbmltcG9ydCAqIGFzIHNmbiBmcm9tICcuLi8uLi8uLi9hd3Mtc3RlcGZ1bmN0aW9ucyc7XG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnLi4vLi4vLi4vY29yZSc7XG5pbXBvcnQgKiBhcyB0YXNrcyBmcm9tICcuLi8uLi9saWInO1xuaW1wb3J0IHsgU2FnZU1ha2VyQ3JlYXRlVHJhbnNmb3JtSm9iIH0gZnJvbSAnLi4vLi4vbGliL3NhZ2VtYWtlci9jcmVhdGUtdHJhbnNmb3JtLWpvYic7XG5cbmxldCBzdGFjazogY2RrLlN0YWNrO1xubGV0IHJvbGU6IGlhbS5Sb2xlO1xuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgLy8gR0lWRU5cbiAgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG4gIHJvbGUgPSBuZXcgaWFtLlJvbGUoc3RhY2ssICdSb2xlJywge1xuICAgIGFzc3VtZWRCeTogbmV3IGlhbS5TZXJ2aWNlUHJpbmNpcGFsKCdzYWdlbWFrZXIuYW1hem9uYXdzLmNvbScpLFxuICAgIG1hbmFnZWRQb2xpY2llczogW1xuICAgICAgaWFtLk1hbmFnZWRQb2xpY3kuZnJvbUF3c01hbmFnZWRQb2xpY3lOYW1lKCdBbWF6b25TYWdlTWFrZXJGdWxsQWNjZXNzJyksXG4gICAgXSxcbiAgfSk7XG59KTtcblxudGVzdCgnY3JlYXRlIGJhc2ljIHRyYW5zZm9ybSBqb2InLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgY29uc3QgdGFzayA9IG5ldyBTYWdlTWFrZXJDcmVhdGVUcmFuc2Zvcm1Kb2Ioc3RhY2ssICdUcmFuc2Zvcm1UYXNrJywge1xuICAgIHRyYW5zZm9ybUpvYk5hbWU6ICdNeVRyYW5zZm9ybUpvYicsXG4gICAgbW9kZWxOYW1lOiAnTXlNb2RlbE5hbWUnLFxuICAgIHRyYW5zZm9ybUlucHV0OiB7XG4gICAgICB0cmFuc2Zvcm1EYXRhU291cmNlOiB7XG4gICAgICAgIHMzRGF0YVNvdXJjZToge1xuICAgICAgICAgIHMzVXJpOiAnczM6Ly9pbnB1dGJ1Y2tldC9wcmVmaXgnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRyYW5zZm9ybU91dHB1dDoge1xuICAgICAgczNPdXRwdXRQYXRoOiAnczM6Ly9vdXRwdXRidWNrZXQvcHJlZml4JyxcbiAgICB9LFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChzdGFjay5yZXNvbHZlKHRhc2sudG9TdGF0ZUpzb24oKSkpLnRvRXF1YWwoe1xuICAgIFR5cGU6ICdUYXNrJyxcbiAgICBSZXNvdXJjZToge1xuICAgICAgJ0ZuOjpKb2luJzogW1xuICAgICAgICAnJyxcbiAgICAgICAgW1xuICAgICAgICAgICdhcm46JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBSZWY6ICdBV1M6OlBhcnRpdGlvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnOnN0YXRlczo6OnNhZ2VtYWtlcjpjcmVhdGVUcmFuc2Zvcm1Kb2InLFxuICAgICAgICBdLFxuICAgICAgXSxcbiAgICB9LFxuICAgIEVuZDogdHJ1ZSxcbiAgICBQYXJhbWV0ZXJzOiB7XG4gICAgICBUcmFuc2Zvcm1Kb2JOYW1lOiAnTXlUcmFuc2Zvcm1Kb2InLFxuICAgICAgTW9kZWxOYW1lOiAnTXlNb2RlbE5hbWUnLFxuICAgICAgVHJhbnNmb3JtSW5wdXQ6IHtcbiAgICAgICAgRGF0YVNvdXJjZToge1xuICAgICAgICAgIFMzRGF0YVNvdXJjZToge1xuICAgICAgICAgICAgUzNVcmk6ICdzMzovL2lucHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICAgICAgICBTM0RhdGFUeXBlOiAnUzNQcmVmaXgnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgVHJhbnNmb3JtT3V0cHV0OiB7XG4gICAgICAgIFMzT3V0cHV0UGF0aDogJ3MzOi8vb3V0cHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICB9LFxuICAgICAgVHJhbnNmb3JtUmVzb3VyY2VzOiB7XG4gICAgICAgIEluc3RhbmNlQ291bnQ6IDEsXG4gICAgICAgIEluc3RhbmNlVHlwZTogJ21sLm00LnhsYXJnZScsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbnRlc3QoJ1Rhc2sgdGhyb3dzIGlmIFdBSVRfRk9SX1RBU0tfVE9LRU4gaXMgc3VwcGxpZWQgYXMgc2VydmljZSBpbnRlZ3JhdGlvbiBwYXR0ZXJuJywgKCkgPT4ge1xuICBleHBlY3QoKCkgPT4ge1xuICAgIG5ldyBTYWdlTWFrZXJDcmVhdGVUcmFuc2Zvcm1Kb2Ioc3RhY2ssICdUcmFuc2Zvcm1UYXNrJywge1xuICAgICAgaW50ZWdyYXRpb25QYXR0ZXJuOiBzZm4uSW50ZWdyYXRpb25QYXR0ZXJuLldBSVRfRk9SX1RBU0tfVE9LRU4sXG4gICAgICB0cmFuc2Zvcm1Kb2JOYW1lOiAnTXlUcmFuc2Zvcm1Kb2InLFxuICAgICAgbW9kZWxOYW1lOiAnTXlNb2RlbE5hbWUnLFxuICAgICAgdHJhbnNmb3JtSW5wdXQ6IHtcbiAgICAgICAgdHJhbnNmb3JtRGF0YVNvdXJjZToge1xuICAgICAgICAgIHMzRGF0YVNvdXJjZToge1xuICAgICAgICAgICAgczNVcmk6ICdzMzovL2lucHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB0cmFuc2Zvcm1PdXRwdXQ6IHtcbiAgICAgICAgczNPdXRwdXRQYXRoOiAnczM6Ly9vdXRwdXRidWNrZXQvcHJlZml4JyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pLnRvVGhyb3coL1Vuc3VwcG9ydGVkIHNlcnZpY2UgaW50ZWdyYXRpb24gcGF0dGVybi4gU3VwcG9ydGVkIFBhdHRlcm5zOiBSRVFVRVNUX1JFU1BPTlNFLFJVTl9KT0IuIFJlY2VpdmVkOiBXQUlUX0ZPUl9UQVNLX1RPS0VOLyk7XG59KTtcblxudGVzdCgnY3JlYXRlIGNvbXBsZXggdHJhbnNmb3JtIGpvYicsICgpID0+IHtcbiAgLy8gV0hFTlxuICBjb25zdCBrbXNLZXkgPSBuZXcga21zLktleShzdGFjaywgJ0tleScpO1xuICBjb25zdCB0YXNrID0gbmV3IFNhZ2VNYWtlckNyZWF0ZVRyYW5zZm9ybUpvYihzdGFjaywgJ1RyYW5zZm9ybVRhc2snLCB7XG4gICAgdHJhbnNmb3JtSm9iTmFtZTogJ015VHJhbnNmb3JtSm9iJyxcbiAgICBtb2RlbE5hbWU6ICdNeU1vZGVsTmFtZScsXG4gICAgbW9kZWxDbGllbnRPcHRpb25zOiB7XG4gICAgICBpbnZvY2F0aW9uc01heFJldHJpZXM6IDEsXG4gICAgICBpbnZvY2F0aW9uc1RpbWVvdXQ6IGNkay5EdXJhdGlvbi5taW51dGVzKDIwKSxcbiAgICB9LFxuICAgIGludGVncmF0aW9uUGF0dGVybjogc2ZuLkludGVncmF0aW9uUGF0dGVybi5SVU5fSk9CLFxuICAgIHJvbGUsXG4gICAgdHJhbnNmb3JtSW5wdXQ6IHtcbiAgICAgIHRyYW5zZm9ybURhdGFTb3VyY2U6IHtcbiAgICAgICAgczNEYXRhU291cmNlOiB7XG4gICAgICAgICAgczNVcmk6ICdzMzovL2lucHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICAgICAgczNEYXRhVHlwZTogdGFza3MuUzNEYXRhVHlwZS5TM19QUkVGSVgsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgdHJhbnNmb3JtT3V0cHV0OiB7XG4gICAgICBzM091dHB1dFBhdGg6ICdzMzovL291dHB1dGJ1Y2tldC9wcmVmaXgnLFxuICAgICAgZW5jcnlwdGlvbktleToga21zS2V5LFxuICAgIH0sXG4gICAgdHJhbnNmb3JtUmVzb3VyY2VzOiB7XG4gICAgICBpbnN0YW5jZUNvdW50OiAxLFxuICAgICAgaW5zdGFuY2VUeXBlOiBlYzIuSW5zdGFuY2VUeXBlLm9mKGVjMi5JbnN0YW5jZUNsYXNzLlAzLCBlYzIuSW5zdGFuY2VTaXplLlhMQVJHRTIpLFxuICAgICAgdm9sdW1lRW5jcnlwdGlvbktleToga21zS2V5LFxuICAgIH0sXG4gICAgdGFnczoge1xuICAgICAgUHJvamVjdDogJ015UHJvamVjdCcsXG4gICAgfSxcbiAgICBiYXRjaFN0cmF0ZWd5OiB0YXNrcy5CYXRjaFN0cmF0ZWd5Lk1VTFRJX1JFQ09SRCxcbiAgICBlbnZpcm9ubWVudDoge1xuICAgICAgU09NRVZBUjogJ215dmFsdWUnLFxuICAgIH0sXG4gICAgbWF4Q29uY3VycmVudFRyYW5zZm9ybXM6IDMsXG4gICAgbWF4UGF5bG9hZDogY2RrLlNpemUubWViaWJ5dGVzKDEwMCksXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KHN0YWNrLnJlc29sdmUodGFzay50b1N0YXRlSnNvbigpKSkudG9FcXVhbCh7XG4gICAgVHlwZTogJ1Rhc2snLFxuICAgIFJlc291cmNlOiB7XG4gICAgICAnRm46OkpvaW4nOiBbXG4gICAgICAgICcnLFxuICAgICAgICBbXG4gICAgICAgICAgJ2FybjonLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFJlZjogJ0FXUzo6UGFydGl0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgICc6c3RhdGVzOjo6c2FnZW1ha2VyOmNyZWF0ZVRyYW5zZm9ybUpvYi5zeW5jJyxcbiAgICAgICAgXSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICBFbmQ6IHRydWUsXG4gICAgUGFyYW1ldGVyczoge1xuICAgICAgVHJhbnNmb3JtSm9iTmFtZTogJ015VHJhbnNmb3JtSm9iJyxcbiAgICAgIE1vZGVsTmFtZTogJ015TW9kZWxOYW1lJyxcbiAgICAgIE1vZGVsQ2xpZW50Q29uZmlnOiB7XG4gICAgICAgIEludm9jYXRpb25zTWF4UmV0cmllczogMSxcbiAgICAgICAgSW52b2NhdGlvbnNUaW1lb3V0SW5TZWNvbmRzOiAxMjAwLFxuICAgICAgfSxcbiAgICAgIFRyYW5zZm9ybUlucHV0OiB7XG4gICAgICAgIERhdGFTb3VyY2U6IHtcbiAgICAgICAgICBTM0RhdGFTb3VyY2U6IHtcbiAgICAgICAgICAgIFMzVXJpOiAnczM6Ly9pbnB1dGJ1Y2tldC9wcmVmaXgnLFxuICAgICAgICAgICAgUzNEYXRhVHlwZTogJ1MzUHJlZml4JyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFRyYW5zZm9ybU91dHB1dDoge1xuICAgICAgICBTM091dHB1dFBhdGg6ICdzMzovL291dHB1dGJ1Y2tldC9wcmVmaXgnLFxuICAgICAgICBLbXNLZXlJZDogeyAnRm46OkdldEF0dCc6IFsnS2V5OTYxQjczRkQnLCAnQXJuJ10gfSxcbiAgICAgIH0sXG4gICAgICBUcmFuc2Zvcm1SZXNvdXJjZXM6IHtcbiAgICAgICAgSW5zdGFuY2VDb3VudDogMSxcbiAgICAgICAgSW5zdGFuY2VUeXBlOiAnbWwucDMuMnhsYXJnZScsXG4gICAgICAgIFZvbHVtZUttc0tleUlkOiB7ICdGbjo6R2V0QXR0JzogWydLZXk5NjFCNzNGRCcsICdBcm4nXSB9LFxuICAgICAgfSxcbiAgICAgIFRhZ3M6IFtcbiAgICAgICAgeyBLZXk6ICdQcm9qZWN0JywgVmFsdWU6ICdNeVByb2plY3QnIH0sXG4gICAgICBdLFxuICAgICAgTWF4Q29uY3VycmVudFRyYW5zZm9ybXM6IDMsXG4gICAgICBNYXhQYXlsb2FkSW5NQjogMTAwLFxuICAgICAgRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgU09NRVZBUjogJ215dmFsdWUnLFxuICAgICAgfSxcbiAgICAgIEJhdGNoU3RyYXRlZ3k6ICdNdWx0aVJlY29yZCcsXG4gICAgfSxcbiAgfSk7XG59KTtcblxudGVzdCgncGFzcyBwYXJhbSB0byB0cmFuc2Zvcm0gam9iJywgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGNvbnN0IHRhc2sgPSBuZXcgU2FnZU1ha2VyQ3JlYXRlVHJhbnNmb3JtSm9iKHN0YWNrLCAnVHJhbnNmb3JtVGFzaycsIHtcbiAgICB0cmFuc2Zvcm1Kb2JOYW1lOiBzZm4uSnNvblBhdGguc3RyaW5nQXQoJyQuVHJhbnNmb3JtSm9iTmFtZScpLFxuICAgIG1vZGVsTmFtZTogc2ZuLkpzb25QYXRoLnN0cmluZ0F0KCckLk1vZGVsTmFtZScpLFxuICAgIHJvbGUsXG4gICAgdHJhbnNmb3JtSW5wdXQ6IHtcbiAgICAgIHRyYW5zZm9ybURhdGFTb3VyY2U6IHtcbiAgICAgICAgczNEYXRhU291cmNlOiB7XG4gICAgICAgICAgczNVcmk6ICdzMzovL2lucHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICAgICAgczNEYXRhVHlwZTogdGFza3MuUzNEYXRhVHlwZS5TM19QUkVGSVgsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgdHJhbnNmb3JtT3V0cHV0OiB7XG4gICAgICBzM091dHB1dFBhdGg6ICdzMzovL291dHB1dGJ1Y2tldC9wcmVmaXgnLFxuICAgIH0sXG4gICAgdHJhbnNmb3JtUmVzb3VyY2VzOiB7XG4gICAgICBpbnN0YW5jZUNvdW50OiAxLFxuICAgICAgaW5zdGFuY2VUeXBlOiBlYzIuSW5zdGFuY2VUeXBlLm9mKGVjMi5JbnN0YW5jZUNsYXNzLlAzLCBlYzIuSW5zdGFuY2VTaXplLlhMQVJHRTIpLFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KHN0YWNrLnJlc29sdmUodGFzay50b1N0YXRlSnNvbigpKSkudG9FcXVhbCh7XG4gICAgVHlwZTogJ1Rhc2snLFxuICAgIFJlc291cmNlOiB7XG4gICAgICAnRm46OkpvaW4nOiBbXG4gICAgICAgICcnLFxuICAgICAgICBbXG4gICAgICAgICAgJ2FybjonLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFJlZjogJ0FXUzo6UGFydGl0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgICc6c3RhdGVzOjo6c2FnZW1ha2VyOmNyZWF0ZVRyYW5zZm9ybUpvYicsXG4gICAgICAgIF0sXG4gICAgICBdLFxuICAgIH0sXG4gICAgRW5kOiB0cnVlLFxuICAgIFBhcmFtZXRlcnM6IHtcbiAgICAgICdUcmFuc2Zvcm1Kb2JOYW1lLiQnOiAnJC5UcmFuc2Zvcm1Kb2JOYW1lJyxcbiAgICAgICdNb2RlbE5hbWUuJCc6ICckLk1vZGVsTmFtZScsXG4gICAgICAnVHJhbnNmb3JtSW5wdXQnOiB7XG4gICAgICAgIERhdGFTb3VyY2U6IHtcbiAgICAgICAgICBTM0RhdGFTb3VyY2U6IHtcbiAgICAgICAgICAgIFMzVXJpOiAnczM6Ly9pbnB1dGJ1Y2tldC9wcmVmaXgnLFxuICAgICAgICAgICAgUzNEYXRhVHlwZTogJ1MzUHJlZml4JyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICdUcmFuc2Zvcm1PdXRwdXQnOiB7XG4gICAgICAgIFMzT3V0cHV0UGF0aDogJ3MzOi8vb3V0cHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICB9LFxuICAgICAgJ1RyYW5zZm9ybVJlc291cmNlcyc6IHtcbiAgICAgICAgSW5zdGFuY2VDb3VudDogMSxcbiAgICAgICAgSW5zdGFuY2VUeXBlOiAnbWwucDMuMnhsYXJnZScsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xufSk7XG50ZXN0KCdjcmVhdGUgdHJhbnNmb3JtIGpvYiB3aXRoIGluc3RhbmNlIHR5cGUgc3VwcGxpZWQgYXMgSnNvblBhdGgnLCAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgY29uc3QgdGFzayA9IG5ldyBTYWdlTWFrZXJDcmVhdGVUcmFuc2Zvcm1Kb2Ioc3RhY2ssICdUcmFuc2Zvcm1UYXNrJywge1xuICAgIHRyYW5zZm9ybUpvYk5hbWU6ICdNeVRyYW5zZm9ybUpvYicsXG4gICAgbW9kZWxOYW1lOiAnTXlNb2RlbE5hbWUnLFxuICAgIHRyYW5zZm9ybUlucHV0OiB7XG4gICAgICB0cmFuc2Zvcm1EYXRhU291cmNlOiB7XG4gICAgICAgIHMzRGF0YVNvdXJjZToge1xuICAgICAgICAgIHMzVXJpOiAnczM6Ly9pbnB1dGJ1Y2tldC9wcmVmaXgnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRyYW5zZm9ybU91dHB1dDoge1xuICAgICAgczNPdXRwdXRQYXRoOiAnczM6Ly9vdXRwdXRidWNrZXQvcHJlZml4JyxcbiAgICB9LFxuICAgIHRyYW5zZm9ybVJlc291cmNlczoge1xuICAgICAgaW5zdGFuY2VDb3VudDogMSxcbiAgICAgIGluc3RhbmNlVHlwZTogbmV3IGVjMi5JbnN0YW5jZVR5cGUoc2ZuLkpzb25QYXRoLnN0cmluZ0F0KCckLkluc3RhbmNlVHlwZScpKSxcbiAgICB9LFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChzdGFjay5yZXNvbHZlKHRhc2sudG9TdGF0ZUpzb24oKSkpLnRvRXF1YWwoe1xuICAgIFR5cGU6ICdUYXNrJyxcbiAgICBSZXNvdXJjZToge1xuICAgICAgJ0ZuOjpKb2luJzogW1xuICAgICAgICAnJyxcbiAgICAgICAgW1xuICAgICAgICAgICdhcm46JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBSZWY6ICdBV1M6OlBhcnRpdGlvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnOnN0YXRlczo6OnNhZ2VtYWtlcjpjcmVhdGVUcmFuc2Zvcm1Kb2InLFxuICAgICAgICBdLFxuICAgICAgXSxcbiAgICB9LFxuICAgIEVuZDogdHJ1ZSxcbiAgICBQYXJhbWV0ZXJzOiB7XG4gICAgICBUcmFuc2Zvcm1Kb2JOYW1lOiAnTXlUcmFuc2Zvcm1Kb2InLFxuICAgICAgTW9kZWxOYW1lOiAnTXlNb2RlbE5hbWUnLFxuICAgICAgVHJhbnNmb3JtSW5wdXQ6IHtcbiAgICAgICAgRGF0YVNvdXJjZToge1xuICAgICAgICAgIFMzRGF0YVNvdXJjZToge1xuICAgICAgICAgICAgUzNVcmk6ICdzMzovL2lucHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICAgICAgICBTM0RhdGFUeXBlOiAnUzNQcmVmaXgnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgVHJhbnNmb3JtT3V0cHV0OiB7XG4gICAgICAgIFMzT3V0cHV0UGF0aDogJ3MzOi8vb3V0cHV0YnVja2V0L3ByZWZpeCcsXG4gICAgICB9LFxuICAgICAgVHJhbnNmb3JtUmVzb3VyY2VzOiB7XG4gICAgICAgICdJbnN0YW5jZUNvdW50JzogMSxcbiAgICAgICAgJ0luc3RhbmNlVHlwZS4kJzogJyQuSW5zdGFuY2VUeXBlJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG59KTtcbiJdfQ==