"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lib_1 = require("../lib");
describe('size', () => {
    test('negative amount', () => {
        expect(() => lib_1.Size.kibibytes(-1)).toThrow(/negative/);
    });
    test('unresolved amount', () => {
        const stack = new lib_1.Stack();
        const lazySize = lib_1.Size.kibibytes(lib_1.Token.asNumber({ resolve: () => 1337 }));
        expect(stack.resolve(lazySize.toKibibytes())).toEqual(1337);
        expect(() => stack.resolve(lazySize.toMebibytes())).toThrow(/Size must be specified as 'Size.mebibytes\(\)' here/);
    });
    test('Size in bytes', () => {
        const size = lib_1.Size.bytes(1099511627776);
        expect(size.toBytes()).toEqual(1099511627776);
        expect(size.toKibibytes()).toEqual(1073741824);
        expect(size.toMebibytes()).toEqual(1048576);
        expect(size.toGibibytes()).toEqual(1024);
        expect(size.toTebibytes()).toEqual(1);
        expect(() => size.toPebibytes()).toThrow(/'1099511627776 bytes' cannot be converted into a whole number/);
        floatEqual(size.toPebibytes({ rounding: lib_1.SizeRoundingBehavior.NONE }), 1099511627776 / (1024 * 1024 * 1024 * 1024 * 1024));
        expect(lib_1.Size.bytes(4 * 1024 * 1024 * 1024).toGibibytes()).toEqual(4);
    });
    test('Size in kibibytes', () => {
        const size = lib_1.Size.kibibytes(4294967296);
        expect(size.toKibibytes()).toEqual(4294967296);
        expect(size.toMebibytes()).toEqual(4194304);
        expect(size.toGibibytes()).toEqual(4096);
        expect(size.toTebibytes()).toEqual(4);
        expect(() => size.toPebibytes()).toThrow(/'4294967296 kibibytes' cannot be converted into a whole number/);
        floatEqual(size.toPebibytes({ rounding: lib_1.SizeRoundingBehavior.NONE }), 4294967296 / (1024 * 1024 * 1024 * 1024));
        expect(lib_1.Size.kibibytes(4 * 1024 * 1024).toGibibytes()).toEqual(4);
    });
    test('Size in mebibytes', () => {
        const size = lib_1.Size.mebibytes(4194304);
        expect(size.toKibibytes()).toEqual(4294967296);
        expect(size.toMebibytes()).toEqual(4194304);
        expect(size.toGibibytes()).toEqual(4096);
        expect(size.toTebibytes()).toEqual(4);
        expect(() => size.toPebibytes()).toThrow(/'4194304 mebibytes' cannot be converted into a whole number/);
        floatEqual(size.toPebibytes({ rounding: lib_1.SizeRoundingBehavior.NONE }), 4194304 / (1024 * 1024 * 1024));
        expect(lib_1.Size.mebibytes(4 * 1024).toGibibytes()).toEqual(4);
    });
    test('Size in gibibyte', () => {
        const size = lib_1.Size.gibibytes(5);
        expect(size.toKibibytes()).toEqual(5242880);
        expect(size.toMebibytes()).toEqual(5120);
        expect(size.toGibibytes()).toEqual(5);
        expect(() => size.toTebibytes()).toThrow(/'5 gibibytes' cannot be converted into a whole number/);
        floatEqual(size.toTebibytes({ rounding: lib_1.SizeRoundingBehavior.NONE }), 5 / 1024);
        expect(() => size.toPebibytes()).toThrow(/'5 gibibytes' cannot be converted into a whole number/);
        floatEqual(size.toPebibytes({ rounding: lib_1.SizeRoundingBehavior.NONE }), 5 / (1024 * 1024));
        expect(lib_1.Size.gibibytes(4096).toTebibytes()).toEqual(4);
    });
    test('Size in tebibyte', () => {
        const size = lib_1.Size.tebibytes(5);
        expect(size.toKibibytes()).toEqual(5368709120);
        expect(size.toMebibytes()).toEqual(5242880);
        expect(size.toGibibytes()).toEqual(5120);
        expect(size.toTebibytes()).toEqual(5);
        expect(() => size.toPebibytes()).toThrow(/'5 tebibytes' cannot be converted into a whole number/);
        floatEqual(size.toPebibytes({ rounding: lib_1.SizeRoundingBehavior.NONE }), 5 / 1024);
        expect(lib_1.Size.tebibytes(4096).toPebibytes()).toEqual(4);
    });
    test('Size in pebibytes', () => {
        const size = lib_1.Size.pebibytes(5);
        expect(size.toKibibytes()).toEqual(5497558138880);
        expect(size.toMebibytes()).toEqual(5368709120);
        expect(size.toGibibytes()).toEqual(5242880);
        expect(size.toTebibytes()).toEqual(5120);
        expect(size.toPebibytes()).toEqual(5);
    });
    test('rounding behavior', () => {
        const size = lib_1.Size.mebibytes(5200);
        expect(() => size.toGibibytes()).toThrow(/cannot be converted into a whole number/);
        expect(() => size.toGibibytes({ rounding: lib_1.SizeRoundingBehavior.FAIL })).toThrow(/cannot be converted into a whole number/);
        expect(size.toGibibytes({ rounding: lib_1.SizeRoundingBehavior.FLOOR })).toEqual(5);
        expect(size.toTebibytes({ rounding: lib_1.SizeRoundingBehavior.FLOOR })).toEqual(0);
        floatEqual(size.toKibibytes({ rounding: lib_1.SizeRoundingBehavior.FLOOR }), 5324800);
        expect(size.toGibibytes({ rounding: lib_1.SizeRoundingBehavior.NONE })).toEqual(5.078125);
        expect(size.toTebibytes({ rounding: lib_1.SizeRoundingBehavior.NONE })).toEqual(5200 / (1024 * 1024));
        expect(size.toKibibytes({ rounding: lib_1.SizeRoundingBehavior.NONE })).toEqual(5324800);
    });
    test('size is unresolved', () => {
        const lazySize = lib_1.Size.pebibytes(lib_1.Lazy.number({ produce: () => 10 }));
        expect(lazySize.isUnresolved()).toEqual(true);
        expect(lib_1.Size.mebibytes(10).isUnresolved()).toEqual(false);
    });
});
function floatEqual(actual, expected) {
    expect(
    // Floats are subject to rounding errors up to Number.ESPILON
    actual >= expected - Number.EPSILON && actual <= expected + Number.EPSILON).toEqual(true);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2l6ZS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2l6ZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsZ0NBQXdFO0FBRXhFLFFBQVEsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO0lBQ3BCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7UUFDM0IsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLFVBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN2RCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDN0IsTUFBTSxLQUFLLEdBQUcsSUFBSSxXQUFLLEVBQUUsQ0FBQztRQUMxQixNQUFNLFFBQVEsR0FBRyxVQUFJLENBQUMsU0FBUyxDQUFDLFdBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3pFLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVELE1BQU0sQ0FDSixHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUNwRCxxREFBcUQsQ0FDdEQsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7UUFDekIsTUFBTSxJQUFJLEdBQUcsVUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFpQixDQUFDLENBQUM7UUFFM0MsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFpQixDQUFDLENBQUM7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QztRQUM5QyxNQUFNLENBQUMsVUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsU0FBUyxVQUFVLENBQUMsTUFBYyxFQUFFLFFBQWdCO0lBQ2xELE1BQU07SUFDSiw2REFBNkQ7SUFDN0QsTUFBTSxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsT0FBTyxJQUFJLE1BQU0sSUFBSSxRQUFRLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FDM0UsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpemUsIFNpemVSb3VuZGluZ0JlaGF2aW9yLCBTdGFjaywgVG9rZW4sIExhenkgfSBmcm9tICcuLi9saWInO1xuXG5kZXNjcmliZSgnc2l6ZScsICgpID0+IHtcbiAgdGVzdCgnbmVnYXRpdmUgYW1vdW50JywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiBTaXplLmtpYmlieXRlcygtMSkpLnRvVGhyb3coL25lZ2F0aXZlLyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3VucmVzb2x2ZWQgYW1vdW50JywgKCkgPT4ge1xuICAgIGNvbnN0IHN0YWNrID0gbmV3IFN0YWNrKCk7XG4gICAgY29uc3QgbGF6eVNpemUgPSBTaXplLmtpYmlieXRlcyhUb2tlbi5hc051bWJlcih7IHJlc29sdmU6ICgpID0+IDEzMzcgfSkpO1xuICAgIGV4cGVjdChzdGFjay5yZXNvbHZlKGxhenlTaXplLnRvS2liaWJ5dGVzKCkpKS50b0VxdWFsKDEzMzcpO1xuICAgIGV4cGVjdChcbiAgICAgICgpID0+IHN0YWNrLnJlc29sdmUobGF6eVNpemUudG9NZWJpYnl0ZXMoKSkpLnRvVGhyb3coXG4gICAgICAvU2l6ZSBtdXN0IGJlIHNwZWNpZmllZCBhcyAnU2l6ZS5tZWJpYnl0ZXNcXChcXCknIGhlcmUvLFxuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoJ1NpemUgaW4gYnl0ZXMnLCAoKSA9PiB7XG4gICAgY29uc3Qgc2l6ZSA9IFNpemUuYnl0ZXMoMV8wOTlfNTExXzYyN183NzYpO1xuXG4gICAgZXhwZWN0KHNpemUudG9CeXRlcygpKS50b0VxdWFsKDFfMDk5XzUxMV82MjdfNzc2KTtcbiAgICBleHBlY3Qoc2l6ZS50b0tpYmlieXRlcygpKS50b0VxdWFsKDFfMDczXzc0MV84MjQpO1xuICAgIGV4cGVjdChzaXplLnRvTWViaWJ5dGVzKCkpLnRvRXF1YWwoMV8wNDhfNTc2KTtcbiAgICBleHBlY3Qoc2l6ZS50b0dpYmlieXRlcygpKS50b0VxdWFsKDEwMjQpO1xuICAgIGV4cGVjdChzaXplLnRvVGViaWJ5dGVzKCkpLnRvRXF1YWwoMSk7XG4gICAgZXhwZWN0KCgpID0+IHNpemUudG9QZWJpYnl0ZXMoKSkudG9UaHJvdygvJzEwOTk1MTE2Mjc3NzYgYnl0ZXMnIGNhbm5vdCBiZSBjb252ZXJ0ZWQgaW50byBhIHdob2xlIG51bWJlci8pO1xuICAgIGZsb2F0RXF1YWwoc2l6ZS50b1BlYmlieXRlcyh7IHJvdW5kaW5nOiBTaXplUm91bmRpbmdCZWhhdmlvci5OT05FIH0pLCAxXzA5OV81MTFfNjI3Xzc3NiAvICgxMDI0ICogMTAyNCAqIDEwMjQgKiAxMDI0ICogMTAyNCkpO1xuXG4gICAgZXhwZWN0KFNpemUuYnl0ZXMoNCAqIDEwMjQgKiAxMDI0ICogMTAyNCkudG9HaWJpYnl0ZXMoKSkudG9FcXVhbCg0KTtcbiAgfSk7XG5cbiAgdGVzdCgnU2l6ZSBpbiBraWJpYnl0ZXMnLCAoKSA9PiB7XG4gICAgY29uc3Qgc2l6ZSA9IFNpemUua2liaWJ5dGVzKDRfMjk0Xzk2N18yOTYpO1xuXG4gICAgZXhwZWN0KHNpemUudG9LaWJpYnl0ZXMoKSkudG9FcXVhbCg0XzI5NF85NjdfMjk2KTtcbiAgICBleHBlY3Qoc2l6ZS50b01lYmlieXRlcygpKS50b0VxdWFsKDRfMTk0XzMwNCk7XG4gICAgZXhwZWN0KHNpemUudG9HaWJpYnl0ZXMoKSkudG9FcXVhbCg0XzA5Nik7XG4gICAgZXhwZWN0KHNpemUudG9UZWJpYnl0ZXMoKSkudG9FcXVhbCg0KTtcbiAgICBleHBlY3QoKCkgPT4gc2l6ZS50b1BlYmlieXRlcygpKS50b1Rocm93KC8nNDI5NDk2NzI5NiBraWJpYnl0ZXMnIGNhbm5vdCBiZSBjb252ZXJ0ZWQgaW50byBhIHdob2xlIG51bWJlci8pO1xuICAgIGZsb2F0RXF1YWwoc2l6ZS50b1BlYmlieXRlcyh7IHJvdW5kaW5nOiBTaXplUm91bmRpbmdCZWhhdmlvci5OT05FIH0pLCA0XzI5NF85NjdfMjk2IC8gKDEwMjQgKiAxMDI0ICogMTAyNCAqIDEwMjQpKTtcblxuICAgIGV4cGVjdChTaXplLmtpYmlieXRlcyg0ICogMTAyNCAqIDEwMjQpLnRvR2liaWJ5dGVzKCkpLnRvRXF1YWwoNCk7XG4gIH0pO1xuXG4gIHRlc3QoJ1NpemUgaW4gbWViaWJ5dGVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHNpemUgPSBTaXplLm1lYmlieXRlcyg0XzE5NF8zMDQpO1xuXG4gICAgZXhwZWN0KHNpemUudG9LaWJpYnl0ZXMoKSkudG9FcXVhbCg0XzI5NF85NjdfMjk2KTtcbiAgICBleHBlY3Qoc2l6ZS50b01lYmlieXRlcygpKS50b0VxdWFsKDRfMTk0XzMwNCk7XG4gICAgZXhwZWN0KHNpemUudG9HaWJpYnl0ZXMoKSkudG9FcXVhbCg0XzA5Nik7XG4gICAgZXhwZWN0KHNpemUudG9UZWJpYnl0ZXMoKSkudG9FcXVhbCg0KTtcbiAgICBleHBlY3QoKCkgPT4gc2l6ZS50b1BlYmlieXRlcygpKS50b1Rocm93KC8nNDE5NDMwNCBtZWJpYnl0ZXMnIGNhbm5vdCBiZSBjb252ZXJ0ZWQgaW50byBhIHdob2xlIG51bWJlci8pO1xuICAgIGZsb2F0RXF1YWwoc2l6ZS50b1BlYmlieXRlcyh7IHJvdW5kaW5nOiBTaXplUm91bmRpbmdCZWhhdmlvci5OT05FIH0pLCA0XzE5NF8zMDQgLyAoMTAyNCAqIDEwMjQgKiAxMDI0KSk7XG5cbiAgICBleHBlY3QoU2l6ZS5tZWJpYnl0ZXMoNCAqIDEwMjQpLnRvR2liaWJ5dGVzKCkpLnRvRXF1YWwoNCk7XG4gIH0pO1xuXG4gIHRlc3QoJ1NpemUgaW4gZ2liaWJ5dGUnLCAoKSA9PiB7XG4gICAgY29uc3Qgc2l6ZSA9IFNpemUuZ2liaWJ5dGVzKDUpO1xuXG4gICAgZXhwZWN0KHNpemUudG9LaWJpYnl0ZXMoKSkudG9FcXVhbCg1XzI0Ml84ODApO1xuICAgIGV4cGVjdChzaXplLnRvTWViaWJ5dGVzKCkpLnRvRXF1YWwoNV8xMjApO1xuICAgIGV4cGVjdChzaXplLnRvR2liaWJ5dGVzKCkpLnRvRXF1YWwoNSk7XG4gICAgZXhwZWN0KCgpID0+IHNpemUudG9UZWJpYnl0ZXMoKSkudG9UaHJvdygvJzUgZ2liaWJ5dGVzJyBjYW5ub3QgYmUgY29udmVydGVkIGludG8gYSB3aG9sZSBudW1iZXIvKTtcbiAgICBmbG9hdEVxdWFsKHNpemUudG9UZWJpYnl0ZXMoeyByb3VuZGluZzogU2l6ZVJvdW5kaW5nQmVoYXZpb3IuTk9ORSB9KSwgNSAvIDEwMjQpO1xuICAgIGV4cGVjdCgoKSA9PiBzaXplLnRvUGViaWJ5dGVzKCkpLnRvVGhyb3coLyc1IGdpYmlieXRlcycgY2Fubm90IGJlIGNvbnZlcnRlZCBpbnRvIGEgd2hvbGUgbnVtYmVyLyk7XG4gICAgZmxvYXRFcXVhbChzaXplLnRvUGViaWJ5dGVzKHsgcm91bmRpbmc6IFNpemVSb3VuZGluZ0JlaGF2aW9yLk5PTkUgfSksIDUgLyAoMTAyNCAqIDEwMjQpKTtcblxuICAgIGV4cGVjdChTaXplLmdpYmlieXRlcyg0MDk2KS50b1RlYmlieXRlcygpKS50b0VxdWFsKDQpO1xuICB9KTtcblxuICB0ZXN0KCdTaXplIGluIHRlYmlieXRlJywgKCkgPT4ge1xuICAgIGNvbnN0IHNpemUgPSBTaXplLnRlYmlieXRlcyg1KTtcblxuICAgIGV4cGVjdChzaXplLnRvS2liaWJ5dGVzKCkpLnRvRXF1YWwoNV8zNjhfNzA5XzEyMCk7XG4gICAgZXhwZWN0KHNpemUudG9NZWJpYnl0ZXMoKSkudG9FcXVhbCg1XzI0Ml84ODApO1xuICAgIGV4cGVjdChzaXplLnRvR2liaWJ5dGVzKCkpLnRvRXF1YWwoNV8xMjApO1xuICAgIGV4cGVjdChzaXplLnRvVGViaWJ5dGVzKCkpLnRvRXF1YWwoNSk7XG4gICAgZXhwZWN0KCgpID0+IHNpemUudG9QZWJpYnl0ZXMoKSkudG9UaHJvdygvJzUgdGViaWJ5dGVzJyBjYW5ub3QgYmUgY29udmVydGVkIGludG8gYSB3aG9sZSBudW1iZXIvKTtcbiAgICBmbG9hdEVxdWFsKHNpemUudG9QZWJpYnl0ZXMoeyByb3VuZGluZzogU2l6ZVJvdW5kaW5nQmVoYXZpb3IuTk9ORSB9KSwgNSAvIDEwMjQpO1xuXG4gICAgZXhwZWN0KFNpemUudGViaWJ5dGVzKDQwOTYpLnRvUGViaWJ5dGVzKCkpLnRvRXF1YWwoNCk7XG4gIH0pO1xuXG4gIHRlc3QoJ1NpemUgaW4gcGViaWJ5dGVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHNpemUgPSBTaXplLnBlYmlieXRlcyg1KTtcblxuICAgIGV4cGVjdChzaXplLnRvS2liaWJ5dGVzKCkpLnRvRXF1YWwoNV80OTdfNTU4XzEzOF84ODApO1xuICAgIGV4cGVjdChzaXplLnRvTWViaWJ5dGVzKCkpLnRvRXF1YWwoNV8zNjhfNzA5XzEyMCk7XG4gICAgZXhwZWN0KHNpemUudG9HaWJpYnl0ZXMoKSkudG9FcXVhbCg1XzI0Ml84ODApO1xuICAgIGV4cGVjdChzaXplLnRvVGViaWJ5dGVzKCkpLnRvRXF1YWwoNV8xMjApO1xuICAgIGV4cGVjdChzaXplLnRvUGViaWJ5dGVzKCkpLnRvRXF1YWwoNSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3JvdW5kaW5nIGJlaGF2aW9yJywgKCkgPT4ge1xuICAgIGNvbnN0IHNpemUgPSBTaXplLm1lYmlieXRlcyg1XzIwMCk7XG5cbiAgICBleHBlY3QoKCkgPT4gc2l6ZS50b0dpYmlieXRlcygpKS50b1Rocm93KC9jYW5ub3QgYmUgY29udmVydGVkIGludG8gYSB3aG9sZSBudW1iZXIvKTtcbiAgICBleHBlY3QoKCkgPT4gc2l6ZS50b0dpYmlieXRlcyh7IHJvdW5kaW5nOiBTaXplUm91bmRpbmdCZWhhdmlvci5GQUlMIH0pKS50b1Rocm93KC9jYW5ub3QgYmUgY29udmVydGVkIGludG8gYSB3aG9sZSBudW1iZXIvKTtcblxuICAgIGV4cGVjdChzaXplLnRvR2liaWJ5dGVzKHsgcm91bmRpbmc6IFNpemVSb3VuZGluZ0JlaGF2aW9yLkZMT09SIH0pKS50b0VxdWFsKDUpO1xuICAgIGV4cGVjdChzaXplLnRvVGViaWJ5dGVzKHsgcm91bmRpbmc6IFNpemVSb3VuZGluZ0JlaGF2aW9yLkZMT09SIH0pKS50b0VxdWFsKDApO1xuICAgIGZsb2F0RXF1YWwoc2l6ZS50b0tpYmlieXRlcyh7IHJvdW5kaW5nOiBTaXplUm91bmRpbmdCZWhhdmlvci5GTE9PUiB9KSwgNV8zMjRfODAwKTtcblxuICAgIGV4cGVjdChzaXplLnRvR2liaWJ5dGVzKHsgcm91bmRpbmc6IFNpemVSb3VuZGluZ0JlaGF2aW9yLk5PTkUgfSkpLnRvRXF1YWwoNS4wNzgxMjUpO1xuICAgIGV4cGVjdChzaXplLnRvVGViaWJ5dGVzKHsgcm91bmRpbmc6IFNpemVSb3VuZGluZ0JlaGF2aW9yLk5PTkUgfSkpLnRvRXF1YWwoNTIwMCAvICgxMDI0ICogMTAyNCkpO1xuICAgIGV4cGVjdChzaXplLnRvS2liaWJ5dGVzKHsgcm91bmRpbmc6IFNpemVSb3VuZGluZ0JlaGF2aW9yLk5PTkUgfSkpLnRvRXF1YWwoNV8zMjRfODAwKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2l6ZSBpcyB1bnJlc29sdmVkJywgKCkgPT4ge1xuICAgIGNvbnN0IGxhenlTaXplID0gU2l6ZS5wZWJpYnl0ZXMoTGF6eS5udW1iZXIoeyBwcm9kdWNlOiAoKSA9PiAxMCB9KSk7XG4gICAgZXhwZWN0KGxhenlTaXplLmlzVW5yZXNvbHZlZCgpKS50b0VxdWFsKHRydWUpO1xuICAgIGV4cGVjdChTaXplLm1lYmlieXRlcygxMCkuaXNVbnJlc29sdmVkKCkpLnRvRXF1YWwoZmFsc2UpO1xuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiBmbG9hdEVxdWFsKGFjdHVhbDogbnVtYmVyLCBleHBlY3RlZDogbnVtYmVyKSB7XG4gIGV4cGVjdChcbiAgICAvLyBGbG9hdHMgYXJlIHN1YmplY3QgdG8gcm91bmRpbmcgZXJyb3JzIHVwIHRvIE51bWJlci5FU1BJTE9OXG4gICAgYWN0dWFsID49IGV4cGVjdGVkIC0gTnVtYmVyLkVQU0lMT04gJiYgYWN0dWFsIDw9IGV4cGVjdGVkICsgTnVtYmVyLkVQU0lMT04sXG4gICkudG9FcXVhbCh0cnVlKTtcbn1cbiJdfQ==