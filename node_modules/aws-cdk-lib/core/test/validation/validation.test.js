"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/* eslint-disable quote-props */
const fs = require("fs");
const path = require("path");
const constructs_1 = require("constructs");
const table_1 = require("table");
const core = require("../../lib");
let consoleErrorMock;
let consoleLogMock;
beforeEach(() => {
    consoleErrorMock = jest.spyOn(console, 'error').mockImplementation(() => { return true; });
    consoleLogMock = jest.spyOn(console, 'log').mockImplementation(() => { return true; });
    process.exitCode = undefined;
});
afterEach(() => {
    consoleErrorMock.mockRestore();
    consoleLogMock.mockRestore();
});
describe('validations', () => {
    test('validation failure', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('test-plugin', [{
                        description: 'test recommendation',
                        ruleName: 'test-rule',
                        severity: 'medium',
                        ruleMetadata: {
                            id: 'abcdefg',
                        },
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'Fake',
                                templatePath: '/path/to/Default.template.json',
                            }],
                    }]),
            ],
        });
        const stack = new core.Stack(app);
        new core.CfnResource(stack, 'Fake', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        expect(process.exitCode).toEqual(1);
        expect(consoleErrorMock.mock.calls[0][0].split('\n')).toEqual(expect.arrayContaining(validationReport([{
                templatePath: '/path/to/Default.template.json',
                constructPath: 'Default/Fake',
                title: 'test-rule',
                pluginName: 'test-plugin',
                status: 'failure',
                ruleMetadata: {
                    id: 'abcdefg',
                },
                severity: 'medium',
                creationStack: [
                    expect.stringMatching(/Default \(Default\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.Stack/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                    expect.stringMatching(/└──  Fake \(Default\/Fake\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.CfnResource/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                ],
                resourceLogicalId: 'Fake',
            }])));
    });
    test('validation success', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('test-plugin', []),
                new FakePlugin('test-plugin2', []),
                new FakePlugin('test-plugin3', []),
            ],
        });
        const stack = new core.Stack(app);
        new core.CfnResource(stack, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'success',
            },
        });
        app.synth();
        expect(process.exitCode).toBeUndefined();
        expect(consoleLogMock.mock.calls).toEqual([
            [
                expect.stringMatching(/Performing Policy Validations/),
            ],
            [
                expect.stringMatching(/Policy Validation Successful!/),
            ],
        ]);
        expect(consoleErrorMock.mock.calls[0][0]).toEqual(`Validation Report
-----------------

Policy Validation Report Summary

╔══════════════╤═════════╗
║ Plugin       │ Status  ║
╟──────────────┼─────────╢
║ test-plugin  │ success ║
╟──────────────┼─────────╢
║ test-plugin2 │ success ║
╟──────────────┼─────────╢
║ test-plugin3 │ success ║
╚══════════════╧═════════╝
`);
    });
    test('multiple stacks', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('test-plugin', [{
                        description: 'test recommendation',
                        ruleName: 'test-rule',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'DefaultResource',
                                templatePath: '/path/to/stack1.template.json',
                            }],
                    }]),
            ],
        });
        const stack1 = new core.Stack(app, 'stack1');
        new core.CfnResource(stack1, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        const stack2 = new core.Stack(app, 'stack2');
        new core.CfnResource(stack2, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        expect(process.exitCode).toEqual(1);
        const report = consoleErrorMock.mock.calls[0][0];
        // Assuming the rest of the report's content is checked by another test
        expect(report).toContain('- Template Path: /path/to/stack1.template.json');
        expect(report).not.toContain('- Template Path: /path/to/stack2.template.json');
    });
    test('multiple stages', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('test-plugin1', [{
                        description: 'do something',
                        ruleName: 'test-rule1',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'DefaultResource',
                                templatePath: '/path/to/Stage1stack1DDED8B6C.template.json',
                            }],
                    }], '1.2.3'),
            ],
        });
        const stage1 = new core.Stage(app, 'Stage1', {
            policyValidationBeta1: [
                new FakePlugin('test-plugin2', [{
                        description: 'do something',
                        ruleName: 'test-rule2',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'DefaultResource',
                                templatePath: '/path/to/Stage1stack1DDED8B6C.template.json',
                            }],
                    }]),
            ],
        });
        const stage2 = new core.Stage(app, 'Stage2', {
            policyValidationBeta1: [
                new FakePlugin('test-plugin3', [{
                        description: 'do something',
                        ruleName: 'test-rule3',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'DefaultResource',
                                templatePath: '/path/to/Stage2stack259BA718E.template.json',
                            }],
                    }]),
            ],
        });
        const stage3 = new core.Stage(stage2, 'Stage3', {
            policyValidationBeta1: [
                new FakePlugin('test-plugin4', [{
                        description: 'do something',
                        ruleName: 'test-rule4',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'DefaultResource',
                                templatePath: '/path/to/Stage2Stage3stack10CD36915.template.json',
                            }],
                    }]),
            ],
        });
        const stack3 = new core.Stack(stage3, 'stack1');
        new core.CfnResource(stack3, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        const stack1 = new core.Stack(stage1, 'stack1');
        new core.CfnResource(stack1, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        const stack2 = new core.Stack(stage2, 'stack2');
        new core.CfnResource(stack2, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        expect(process.exitCode).toEqual(1);
        const report = consoleErrorMock.mock.calls[0][0].split('\n');
        // Assuming the rest of the report's content is checked by another test
        expect(report).toEqual(expect.arrayContaining(validationReport([
            {
                pluginName: 'test-plugin2',
                status: 'failure',
                templatePath: '/path/to/Stage1stack1DDED8B6C.template.json',
                constructPath: 'Stage1/stack1/DefaultResource',
                title: 'test-rule2',
                creationStack: [
                    expect.stringMatching(/Stage1 \(Stage1\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.Stage/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                    expect.stringMatching(/└──  stack1 \(Stage1\/stack1\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.Stack/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                    expect.stringMatching(/└──  DefaultResource \(Stage1\/stack1\/DefaultResource\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.CfnResource/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                ],
                resourceLogicalId: 'DefaultResource',
                description: 'do something',
            },
            {
                pluginName: 'test-plugin4',
                status: 'failure',
                templatePath: '/path/to/Stage2Stage3stack10CD36915.template.json',
                constructPath: 'Stage2/Stage3/stack1/DefaultResource',
                description: 'do something',
                title: 'test-rule4',
                resourceLogicalId: 'DefaultResource',
            },
            {
                pluginName: 'test-plugin3',
                status: 'failure',
                templatePath: '/path/to/Stage2stack259BA718E.template.json',
                constructPath: 'Stage2/stack2/DefaultResource',
                title: 'test-rule3',
                resourceLogicalId: 'DefaultResource',
                description: 'do something',
            },
            {
                pluginName: 'test-plugin1',
                status: 'failure',
                templatePath: '/path/to/Stage1stack1DDED8B6C.template.json',
                constructPath: 'Stage1/stack1/DefaultResource',
                title: 'test-rule1',
                resourceLogicalId: 'DefaultResource',
                description: 'do something',
            },
        ])));
    });
    test('multiple stages, multiple plugins', () => {
        const mockValidate = jest.fn().mockImplementation(() => {
            return {
                success: true,
                violations: [],
            };
        });
        const app = new core.App({
            policyValidationBeta1: [
                {
                    name: 'test-plugin',
                    validate: mockValidate,
                },
            ],
        });
        const stage1 = new core.Stage(app, 'Stage1', {});
        const stage2 = new core.Stage(app, 'Stage2', {
            policyValidationBeta1: [
                {
                    name: 'test-plugin2',
                    validate: mockValidate,
                },
            ],
        });
        const stage3 = new core.Stage(stage2, 'Stage3', {});
        const stack3 = new core.Stack(stage3, 'stack1');
        new core.CfnResource(stack3, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        const stack1 = new core.Stack(stage1, 'stack1');
        new core.CfnResource(stack1, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        const stack2 = new core.Stack(stage2, 'stack2');
        new core.CfnResource(stack2, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        expect(mockValidate).toHaveBeenCalledTimes(2);
        expect(mockValidate).toHaveBeenNthCalledWith(2, {
            templatePaths: [
                expect.stringMatching(/assembly-Stage1\/Stage1stack1DDED8B6C.template.json/),
                expect.stringMatching(/assembly-Stage2\/Stage2stack259BA718E.template.json/),
                expect.stringMatching(/assembly-Stage2\/assembly-Stage2-Stage3\/Stage2Stage3stack10CD36915.template.json/),
            ],
        });
        expect(mockValidate).toHaveBeenNthCalledWith(1, {
            templatePaths: [
                expect.stringMatching(/assembly-Stage2\/Stage2stack259BA718E.template.json/),
                expect.stringMatching(/assembly-Stage2\/assembly-Stage2-Stage3\/Stage2Stage3stack10CD36915.template.json/),
            ],
        });
    });
    test('multiple stages, single plugin', () => {
        const mockValidate = jest.fn().mockImplementation(() => {
            return {
                success: true,
                violations: [],
            };
        });
        const app = new core.App({
            policyValidationBeta1: [
                {
                    name: 'test-plugin',
                    validate: mockValidate,
                },
            ],
        });
        const stage1 = new core.Stage(app, 'Stage1', {});
        const stage2 = new core.Stage(app, 'Stage2', {});
        const stage3 = new core.Stage(stage2, 'Stage3', {});
        const stack3 = new core.Stack(stage3, 'stack1');
        new core.CfnResource(stack3, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        const stack1 = new core.Stack(stage1, 'stack1');
        new core.CfnResource(stack1, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        const stack2 = new core.Stack(stage2, 'stack2');
        new core.CfnResource(stack2, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        expect(mockValidate).toHaveBeenCalledTimes(1);
        expect(mockValidate).toHaveBeenCalledWith({
            templatePaths: [
                expect.stringMatching(/assembly-Stage1\/Stage1stack1DDED8B6C.template.json/),
                expect.stringMatching(/assembly-Stage2\/Stage2stack259BA718E.template.json/),
                expect.stringMatching(/assembly-Stage2\/assembly-Stage2-Stage3\/Stage2Stage3stack10CD36915.template.json/),
            ],
        });
    });
    test('multiple constructs', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('test-plugin', [{
                        description: 'test recommendation',
                        ruleName: 'test-rule',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'SomeResource317FDD71',
                                templatePath: '/path/to/Default.template.json',
                            }],
                    }]),
            ],
        });
        const stack = new core.Stack(app);
        new LevelTwoConstruct(stack, 'SomeResource');
        new LevelTwoConstruct(stack, 'AnotherResource');
        app.synth();
        expect(process.exitCode).toEqual(1);
        const report = consoleErrorMock.mock.calls[0][0];
        // Assuming the rest of the report's content is checked by another test
        expect(report).toContain('- Construct Path: Default/SomeResource');
        expect(report).not.toContain('- Construct Path: Default/AnotherResource');
    });
    test('multiple plugins', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('plugin1', [{
                        description: 'do something',
                        ruleName: 'rule-1',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'Fake',
                                templatePath: '/path/to/Default.template.json',
                            }],
                    }]),
                new FakePlugin('plugin2', [{
                        description: 'do another thing',
                        ruleName: 'rule-2',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'Fake',
                                templatePath: '/path/to/Default.template.json',
                            }],
                    }]),
            ],
        });
        const stack = new core.Stack(app);
        new core.CfnResource(stack, 'Fake', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        expect(process.exitCode).toEqual(1);
        const report = consoleErrorMock.mock.calls[0][0].split('\n');
        expect(report).toEqual(expect.arrayContaining(validationReport([
            {
                pluginName: 'plugin1',
                status: 'failure',
                templatePath: '/path/to/Default.template.json',
                constructPath: 'Default/Fake',
                title: 'rule-1',
                creationStack: [
                    expect.stringMatching(/Default \(Default\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.Stack/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                    expect.stringMatching(/└──  Fake \(Default\/Fake\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.CfnResource/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                ],
                description: 'do something',
                resourceLogicalId: 'Fake',
            },
            {
                pluginName: 'plugin2',
                status: 'failure',
                templatePath: '/path/to/Default.template.json',
                constructPath: 'Default/Fake',
                title: 'rule-2',
                description: 'do another thing',
                resourceLogicalId: 'Fake',
            },
        ])));
    });
    test('multiple plugins with mixed results', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('plugin1', []),
                new FakePlugin('plugin2', [{
                        description: 'do another thing',
                        ruleName: 'rule-2',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'Fake',
                                templatePath: '/path/to/Default.template.json',
                            }],
                    }]),
            ],
        });
        const stack = new core.Stack(app);
        new core.CfnResource(stack, 'Fake', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        const report = consoleErrorMock.mock.calls[0][0].split('\n');
        expect(report).toEqual(expect.arrayContaining(validationReport([
            {
                pluginName: 'plugin1',
                status: 'success',
                constructPath: '',
                resourceLogicalId: '',
                templatePath: '',
                title: '',
            },
            {
                pluginName: 'plugin2',
                status: 'failure',
                templatePath: '/path/to/Default.template.json',
                constructPath: 'Default/Fake',
                title: 'rule-2',
                creationStack: [
                    expect.stringMatching(/Default \(Default\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.Stack/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                    expect.stringMatching(/└──  Fake \(Default\/Fake\)/),
                    expect.stringMatching(/│ Construct: aws-cdk-lib.CfnResource/),
                    expect.stringMatching(/│ Library Version: .*/),
                    expect.stringMatching(/│ Location: Run with '--debug' to include location info/),
                ],
                description: 'do another thing',
                resourceLogicalId: 'Fake',
            },
        ])));
    });
    test('plugin throws an error', () => {
        const app = new core.App({
            policyValidationBeta1: [
                // This plugin will throw an error
                new BrokenPlugin(),
                // But this one should still run
                new FakePlugin('test-plugin', [{
                        description: 'test recommendation',
                        ruleName: 'test-rule',
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'Fake',
                                templatePath: '/path/to/Default.template.json',
                            }],
                    }]),
            ],
        });
        const stack = new core.Stack(app);
        new core.CfnResource(stack, 'Fake', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'success',
            },
        });
        app.synth();
        expect(process.exitCode).toEqual(1);
        const report = consoleErrorMock.mock.calls[0][0];
        expect(report).toContain('error: Validation plugin \'broken-plugin\' failed: Something went wrong');
        expect(report).toContain(generateTable('test-plugin', 'failure', 'N/A'));
    });
    test('plugin tries to modify a template', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new RoguePlugin(),
            ],
        });
        const stack = new core.Stack(app);
        new core.CfnResource(stack, 'DefaultResource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'success',
            },
        });
        expect(() => {
            app.synth();
        }).toThrow(/Illegal operation: validation plugin 'rogue-plugin' modified the cloud assembly/);
    });
    test('JSON format', () => {
        const app = new core.App({
            policyValidationBeta1: [
                new FakePlugin('test-plugin', [{
                        description: 'test recommendation',
                        ruleName: 'test-rule',
                        ruleMetadata: {
                            id: 'abcdefg',
                        },
                        violatingResources: [{
                                locations: ['test-location'],
                                resourceLogicalId: 'Fake',
                                templatePath: '/path/to/Default.template.json',
                            }],
                    }]),
            ],
            context: { '@aws-cdk/core:validationReportJson': true },
        });
        const stack = new core.Stack(app);
        new core.CfnResource(stack, 'Fake', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'failure',
            },
        });
        app.synth();
        expect(process.exitCode).toEqual(1);
        const report = fs.readFileSync(path.join(app.outdir, 'policy-validation-report.json')).toString('utf-8');
        expect(JSON.parse(report)).toEqual(expect.objectContaining({
            title: 'Validation Report',
            pluginReports: [
                {
                    summary: {
                        pluginName: 'test-plugin',
                        status: 'failure',
                    },
                    violations: [
                        {
                            ruleName: 'test-rule',
                            description: 'test recommendation',
                            ruleMetadata: { id: 'abcdefg' },
                            violatingResources: [{
                                    'locations': [
                                        'test-location',
                                    ],
                                    'resourceLogicalId': 'Fake',
                                    'templatePath': '/path/to/Default.template.json',
                                }],
                            violatingConstructs: [
                                {
                                    constructStack: {
                                        'id': 'Default',
                                        'construct': 'aws-cdk-lib.Stack',
                                        'libraryVersion': expect.any(String),
                                        'location': "Run with '--debug' to include location info",
                                        'path': 'Default',
                                        'child': {
                                            'id': 'Fake',
                                            'construct': 'aws-cdk-lib.CfnResource',
                                            'libraryVersion': expect.any(String),
                                            'location': "Run with '--debug' to include location info",
                                            'path': 'Default/Fake',
                                        },
                                    },
                                    constructPath: 'Default/Fake',
                                    locations: ['test-location'],
                                    resourceLogicalId: 'Fake',
                                    templatePath: '/path/to/Default.template.json',
                                },
                            ],
                        },
                    ],
                },
            ],
        }));
    });
});
class FakePlugin {
    constructor(name, violations, version) {
        this.name = name;
        this.violations = violations;
        this.version = version;
        this._version = version;
    }
    validate(_context) {
        return {
            success: this.violations.length === 0,
            violations: this.violations,
            pluginVersion: this._version,
        };
    }
}
class RoguePlugin {
    constructor() {
        this.name = 'rogue-plugin';
    }
    validate(context) {
        const templatePath = context.templatePaths[0];
        fs.writeFileSync(templatePath, 'malicious data');
        return {
            success: true,
            violations: [],
        };
    }
}
class BrokenPlugin {
    constructor() {
        this.name = 'broken-plugin';
    }
    validate(_context) {
        throw new Error('Something went wrong');
    }
}
function generateTable(pluginName, status, pluginVersion) {
    return (0, table_1.table)([
        [`Plugin: ${pluginName}`],
        [`Version: ${pluginVersion}`],
        [`Status: ${status}`],
    ], {
        header: { content: 'Plugin Report' },
        singleLine: true,
        columns: [{
                paddingLeft: 3,
                paddingRight: 3,
            }],
    });
}
const validationReport = (data) => {
    const result = data.flatMap(d => {
        if (d.status === 'failure') {
            const title = reset(red(bright(`${d.title} (1 occurrences)`)));
            return [
                expect.stringMatching(new RegExp('Validation Report')),
                expect.stringMatching(new RegExp('-----------------')),
                expect.stringMatching(new RegExp(`Plugin: ${d.pluginName}`)),
                expect.stringMatching(new RegExp(`Status: ${d.status}`)),
                expect.stringMatching(new RegExp('\(Violations\)')),
                title,
                ...d.severity ? [expect.stringMatching(new RegExp(`Severity: ${d.severity}`))] : [],
                expect.stringMatching(new RegExp('  Occurrences:')),
                expect.stringMatching(new RegExp(`    - Construct Path: ${d.constructPath}`)),
                expect.stringMatching(new RegExp(`    - Template Path: ${d.templatePath}`)),
                expect.stringMatching(new RegExp('    - Creation Stack:')),
                ...d.creationStack ?? [],
                expect.stringMatching(new RegExp(`    - Resource ID: ${d.resourceLogicalId}`)),
                expect.stringMatching(new RegExp('    - Template Locations:')),
                expect.stringMatching(new RegExp('      > test-location')),
                expect.stringMatching(new RegExp(`  Description: ${d.description ?? 'test recommendation'}`)),
                ...d.ruleMetadata ? [expect.stringMatching('  Rule Metadata:'), ...Object.entries(d.ruleMetadata).flatMap(([key, value]) => expect.stringMatching(`${key}: ${value}`))] : [],
            ];
        }
        return [];
    });
    result.push(expect.stringMatching(new RegExp('Policy Validation Report Summary')), ...data.map(d => expect.stringMatching(new RegExp(`.*${d.pluginName}.*${d.status}.*`))));
    return result;
};
function reset(s) {
    return `${s}\x1b[0m`;
}
function red(s) {
    return `\x1b[31m${s}`;
}
function bright(s) {
    return `\x1b[1m${s}`;
}
class LevelTwoConstruct extends constructs_1.Construct {
    constructor(scope, id) {
        super(scope, id);
        new core.CfnResource(this, 'Resource', {
            type: 'Test::Resource::Fake',
            properties: {
                result: 'success',
            },
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGlvbi50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidmFsaWRhdGlvbi50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsZ0NBQWdDO0FBQ2hDLHlCQUF5QjtBQUN6Qiw2QkFBNkI7QUFDN0IsMkNBQXVDO0FBQ3ZDLGlDQUE4QjtBQUM5QixrQ0FBa0M7QUFJbEMsSUFBSSxnQkFBa0MsQ0FBQztBQUN2QyxJQUFJLGNBQWdDLENBQUM7QUFDckMsVUFBVSxDQUFDLEdBQUcsRUFBRTtJQUNkLGdCQUFnQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxHQUFHLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0YsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxHQUFHLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkYsT0FBTyxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7QUFDL0IsQ0FBQyxDQUFDLENBQUM7QUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO0lBQ2IsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDL0IsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQy9CLENBQUMsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7SUFDM0IsSUFBSSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtRQUM5QixNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUM7WUFDdkIscUJBQXFCLEVBQUU7Z0JBQ3JCLElBQUksVUFBVSxDQUFDLGFBQWEsRUFBRSxDQUFDO3dCQUM3QixXQUFXLEVBQUUscUJBQXFCO3dCQUNsQyxRQUFRLEVBQUUsV0FBVzt3QkFD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QUNULE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxNQUFNLENBQUMsa0NBQWtDLENBQUMsQ0FBQyxFQUNyRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLFVBQVUsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQ3hGLENBQUM7SUFDRixPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDLENBQUM7QUFFRixTQUFTLEtBQUssQ0FBQyxDQUFTO0lBQ3RCLE9BQU8sR0FBRyxDQUFDLFNBQVMsQ0FBQztBQUN2QixDQUFDO0FBRUQsU0FBUyxHQUFHLENBQUMsQ0FBUztJQUNwQixPQUFPLFdBQVcsQ0FBQyxFQUFFLENBQUM7QUFDeEIsQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLENBQVM7SUFDdkIsT0FBTyxVQUFVLENBQUMsRUFBRSxDQUFDO0FBQ3ZCLENBQUM7QUFFRCxNQUFNLGlCQUFrQixTQUFRLHNCQUFTO0lBQ3ZDLFlBQVksS0FBZ0IsRUFBRSxFQUFVO1FBQ3RDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDakIsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUU7WUFDckMsSUFBSSxFQUFFLHNCQUFzQjtZQUM1QixVQUFVLEVBQUU7Z0JBQ1YsTUFBTSxFQUFFLFNBQVM7YUFDbEI7U0FDRixDQUFDLENBQUM7S0FDSjtDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcXVvdGUtcHJvcHMgKi9cbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IHRhYmxlIH0gZnJvbSAndGFibGUnO1xuaW1wb3J0ICogYXMgY29yZSBmcm9tICcuLi8uLi9saWInO1xuaW1wb3J0IHsgUG9saWN5VmFsaWRhdGlvblBsdWdpblJlcG9ydEJldGExLCBQb2xpY3lWaW9sYXRpb25CZXRhMSB9IGZyb20gJy4uLy4uL2xpYic7XG5cblxubGV0IGNvbnNvbGVFcnJvck1vY2s6IGplc3QuU3B5SW5zdGFuY2U7XG5sZXQgY29uc29sZUxvZ01vY2s6IGplc3QuU3B5SW5zdGFuY2U7XG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgY29uc29sZUVycm9yTW9jayA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHsgcmV0dXJuIHRydWU7IH0pO1xuICBjb25zb2xlTG9nTW9jayA9IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7IHJldHVybiB0cnVlOyB9KTtcbiAgcHJvY2Vzcy5leGl0Q29kZSA9IHVuZGVmaW5lZDtcbn0pO1xuXG5hZnRlckVhY2goKCkgPT4ge1xuICBjb25zb2xlRXJyb3JNb2NrLm1vY2tSZXN0b3JlKCk7XG4gIGNvbnNvbGVMb2dNb2NrLm1vY2tSZXN0b3JlKCk7XG59KTtcblxuZGVzY3JpYmUoJ3ZhbGlkYXRpb25zJywgKCkgPT4ge1xuICB0ZXN0KCd2YWxpZGF0aW9uIGZhaWx1cmUnLCAoKSA9PiB7XG4gICAgY29uc3QgYXBwID0gbmV3IGNvcmUuQXBwKHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICBuZXcgRmFrZVBsdWdpbigndGVzdC1wbHVnaW4nLCBbe1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAndGVzdCByZWNvbW1lbmRhdGlvbicsXG4gICAgICAgICAgcnVsZU5hbWU6ICd0ZXN0LXJ1bGUnLFxuICAgICAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgICBydWxlTWV0YWRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAnYWJjZGVmZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aW9sYXRpbmdSZXNvdXJjZXM6IFt7XG4gICAgICAgICAgICBsb2NhdGlvbnM6IFsndGVzdC1sb2NhdGlvbiddLFxuICAgICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdGYWtlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlUGF0aDogJy9wYXRoL3RvL0RlZmF1bHQudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH1dKSxcbiAgICAgIF0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY29yZS5TdGFjayhhcHApO1xuICAgIG5ldyBjb3JlLkNmblJlc291cmNlKHN0YWNrLCAnRmFrZScsIHtcbiAgICAgIHR5cGU6ICdUZXN0OjpSZXNvdXJjZTo6RmFrZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHJlc3VsdDogJ2ZhaWx1cmUnLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGFwcC5zeW50aCgpO1xuICAgIGV4cGVjdChwcm9jZXNzLmV4aXRDb2RlKS50b0VxdWFsKDEpO1xuXG4gICAgZXhwZWN0KGNvbnNvbGVFcnJvck1vY2subW9jay5jYWxsc1swXVswXS5zcGxpdCgnXFxuJykpLnRvRXF1YWwoZXhwZWN0LmFycmF5Q29udGFpbmluZyh2YWxpZGF0aW9uUmVwb3J0KFt7XG4gICAgICB0ZW1wbGF0ZVBhdGg6ICcvcGF0aC90by9EZWZhdWx0LnRlbXBsYXRlLmpzb24nLFxuICAgICAgY29uc3RydWN0UGF0aDogJ0RlZmF1bHQvRmFrZScsXG4gICAgICB0aXRsZTogJ3Rlc3QtcnVsZScsXG4gICAgICBwbHVnaW5OYW1lOiAndGVzdC1wbHVnaW4nLFxuICAgICAgc3RhdHVzOiAnZmFpbHVyZScsXG4gICAgICBydWxlTWV0YWRhdGE6IHtcbiAgICAgICAgaWQ6ICdhYmNkZWZnJyxcbiAgICAgIH0sXG4gICAgICBzZXZlcml0eTogJ21lZGl1bScsXG4gICAgICBjcmVhdGlvblN0YWNrOiBbXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvRGVmYXVsdCBcXChEZWZhdWx0XFwpLyksXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIENvbnN0cnVjdDogYXdzLWNkay1saWIuU3RhY2svKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgTGlicmFyeSBWZXJzaW9uOiAuKi8pLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBMb2NhdGlvbjogUnVuIHdpdGggJy0tZGVidWcnIHRvIGluY2x1ZGUgbG9jYXRpb24gaW5mby8pLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUlOKUgOKUgCAgRmFrZSBcXChEZWZhdWx0XFwvRmFrZVxcKS8pLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBDb25zdHJ1Y3Q6IGF3cy1jZGstbGliLkNmblJlc291cmNlLyksXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIExpYnJhcnkgVmVyc2lvbjogLiovKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgTG9jYXRpb246IFJ1biB3aXRoICctLWRlYnVnJyB0byBpbmNsdWRlIGxvY2F0aW9uIGluZm8vKSxcbiAgICAgIF0sXG4gICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJ0Zha2UnLFxuICAgIH1dKSkpO1xuICB9KTtcblxuICB0ZXN0KCd2YWxpZGF0aW9uIHN1Y2Nlc3MnLCAoKSA9PiB7XG4gICAgY29uc3QgYXBwID0gbmV3IGNvcmUuQXBwKHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICBuZXcgRmFrZVBsdWdpbigndGVzdC1wbHVnaW4nLCBbXSksXG4gICAgICAgIG5ldyBGYWtlUGx1Z2luKCd0ZXN0LXBsdWdpbjInLCBbXSksXG4gICAgICAgIG5ldyBGYWtlUGx1Z2luKCd0ZXN0LXBsdWdpbjMnLCBbXSksXG4gICAgICBdLFxuICAgIH0pO1xuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNvcmUuU3RhY2soYXBwKTtcbiAgICBuZXcgY29yZS5DZm5SZXNvdXJjZShzdGFjaywgJ0RlZmF1bHRSZXNvdXJjZScsIHtcbiAgICAgIHR5cGU6ICdUZXN0OjpSZXNvdXJjZTo6RmFrZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHJlc3VsdDogJ3N1Y2Nlc3MnLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGFwcC5zeW50aCgpO1xuICAgIGV4cGVjdChwcm9jZXNzLmV4aXRDb2RlKS50b0JlVW5kZWZpbmVkKCk7XG5cbiAgICBleHBlY3QoY29uc29sZUxvZ01vY2subW9jay5jYWxscykudG9FcXVhbChbXG4gICAgICBbXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvUGVyZm9ybWluZyBQb2xpY3kgVmFsaWRhdGlvbnMvKSxcbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvUG9saWN5IFZhbGlkYXRpb24gU3VjY2Vzc2Z1bCEvKSxcbiAgICAgIF0sXG4gICAgXSk7XG4gICAgZXhwZWN0KGNvbnNvbGVFcnJvck1vY2subW9jay5jYWxsc1swXVswXSkudG9FcXVhbChgVmFsaWRhdGlvbiBSZXBvcnRcbi0tLS0tLS0tLS0tLS0tLS0tXG5cblBvbGljeSBWYWxpZGF0aW9uIFJlcG9ydCBTdW1tYXJ5XG5cbuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVpOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl1xu4pWRIFBsdWdpbiAgICAgICDilIIgU3RhdHVzICDilZFcbuKVn+KUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUvOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVolxu4pWRIHRlc3QtcGx1Z2luICDilIIgc3VjY2VzcyDilZFcbuKVn+KUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUvOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVolxu4pWRIHRlc3QtcGx1Z2luMiDilIIgc3VjY2VzcyDilZFcbuKVn+KUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUvOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVolxu4pWRIHRlc3QtcGx1Z2luMyDilIIgc3VjY2VzcyDilZFcbuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVp+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuYCk7XG4gIH0pO1xuXG4gIHRlc3QoJ211bHRpcGxlIHN0YWNrcycsICgpID0+IHtcbiAgICBjb25zdCBhcHAgPSBuZXcgY29yZS5BcHAoe1xuICAgICAgcG9saWN5VmFsaWRhdGlvbkJldGExOiBbXG4gICAgICAgIG5ldyBGYWtlUGx1Z2luKCd0ZXN0LXBsdWdpbicsIFt7XG4gICAgICAgICAgZGVzY3JpcHRpb246ICd0ZXN0IHJlY29tbWVuZGF0aW9uJyxcbiAgICAgICAgICBydWxlTmFtZTogJ3Rlc3QtcnVsZScsXG4gICAgICAgICAgdmlvbGF0aW5nUmVzb3VyY2VzOiBbe1xuICAgICAgICAgICAgbG9jYXRpb25zOiBbJ3Rlc3QtbG9jYXRpb24nXSxcbiAgICAgICAgICAgIHJlc291cmNlTG9naWNhbElkOiAnRGVmYXVsdFJlc291cmNlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlUGF0aDogJy9wYXRoL3RvL3N0YWNrMS50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0pLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFjazEgPSBuZXcgY29yZS5TdGFjayhhcHAsICdzdGFjazEnKTtcbiAgICBuZXcgY29yZS5DZm5SZXNvdXJjZShzdGFjazEsICdEZWZhdWx0UmVzb3VyY2UnLCB7XG4gICAgICB0eXBlOiAnVGVzdDo6UmVzb3VyY2U6OkZha2UnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICByZXN1bHQ6ICdmYWlsdXJlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhY2syID0gbmV3IGNvcmUuU3RhY2soYXBwLCAnc3RhY2syJyk7XG4gICAgbmV3IGNvcmUuQ2ZuUmVzb3VyY2Uoc3RhY2syLCAnRGVmYXVsdFJlc291cmNlJywge1xuICAgICAgdHlwZTogJ1Rlc3Q6OlJlc291cmNlOjpGYWtlJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmVzdWx0OiAnZmFpbHVyZScsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYXBwLnN5bnRoKCk7XG4gICAgZXhwZWN0KHByb2Nlc3MuZXhpdENvZGUpLnRvRXF1YWwoMSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBjb25zb2xlRXJyb3JNb2NrLm1vY2suY2FsbHNbMF1bMF07XG4gICAgLy8gQXNzdW1pbmcgdGhlIHJlc3Qgb2YgdGhlIHJlcG9ydCdzIGNvbnRlbnQgaXMgY2hlY2tlZCBieSBhbm90aGVyIHRlc3RcbiAgICBleHBlY3QocmVwb3J0KS50b0NvbnRhaW4oJy0gVGVtcGxhdGUgUGF0aDogL3BhdGgvdG8vc3RhY2sxLnRlbXBsYXRlLmpzb24nKTtcbiAgICBleHBlY3QocmVwb3J0KS5ub3QudG9Db250YWluKCctIFRlbXBsYXRlIFBhdGg6IC9wYXRoL3RvL3N0YWNrMi50ZW1wbGF0ZS5qc29uJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ211bHRpcGxlIHN0YWdlcycsICgpID0+IHtcbiAgICBjb25zdCBhcHAgPSBuZXcgY29yZS5BcHAoe1xuICAgICAgcG9saWN5VmFsaWRhdGlvbkJldGExOiBbXG4gICAgICAgIG5ldyBGYWtlUGx1Z2luKCd0ZXN0LXBsdWdpbjEnLCBbe1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnZG8gc29tZXRoaW5nJyxcbiAgICAgICAgICBydWxlTmFtZTogJ3Rlc3QtcnVsZTEnLFxuICAgICAgICAgIHZpb2xhdGluZ1Jlc291cmNlczogW3tcbiAgICAgICAgICAgIGxvY2F0aW9uczogWyd0ZXN0LWxvY2F0aW9uJ10sXG4gICAgICAgICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJ0RlZmF1bHRSZXNvdXJjZScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhdGg6ICcvcGF0aC90by9TdGFnZTFzdGFjazFEREVEOEI2Qy50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0sICcxLjIuMycpLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFnZTEgPSBuZXcgY29yZS5TdGFnZShhcHAsICdTdGFnZTEnLCB7XG4gICAgICBwb2xpY3lWYWxpZGF0aW9uQmV0YTE6IFtcbiAgICAgICAgbmV3IEZha2VQbHVnaW4oJ3Rlc3QtcGx1Z2luMicsIFt7XG4gICAgICAgICAgZGVzY3JpcHRpb246ICdkbyBzb21ldGhpbmcnLFxuICAgICAgICAgIHJ1bGVOYW1lOiAndGVzdC1ydWxlMicsXG4gICAgICAgICAgdmlvbGF0aW5nUmVzb3VyY2VzOiBbe1xuICAgICAgICAgICAgbG9jYXRpb25zOiBbJ3Rlc3QtbG9jYXRpb24nXSxcbiAgICAgICAgICAgIHJlc291cmNlTG9naWNhbElkOiAnRGVmYXVsdFJlc291cmNlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlUGF0aDogJy9wYXRoL3RvL1N0YWdlMXN0YWNrMURERUQ4QjZDLnRlbXBsYXRlLmpzb24nLFxuICAgICAgICAgIH1dLFxuICAgICAgICB9XSksXG4gICAgICBdLFxuICAgIH0pO1xuICAgIGNvbnN0IHN0YWdlMiA9IG5ldyBjb3JlLlN0YWdlKGFwcCwgJ1N0YWdlMicsIHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICBuZXcgRmFrZVBsdWdpbigndGVzdC1wbHVnaW4zJywgW3tcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ2RvIHNvbWV0aGluZycsXG4gICAgICAgICAgcnVsZU5hbWU6ICd0ZXN0LXJ1bGUzJyxcbiAgICAgICAgICB2aW9sYXRpbmdSZXNvdXJjZXM6IFt7XG4gICAgICAgICAgICBsb2NhdGlvbnM6IFsndGVzdC1sb2NhdGlvbiddLFxuICAgICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdEZWZhdWx0UmVzb3VyY2UnLFxuICAgICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vU3RhZ2Uyc3RhY2syNTlCQTcxOEUudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH1dKSxcbiAgICAgIF0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhZ2UzID0gbmV3IGNvcmUuU3RhZ2Uoc3RhZ2UyLCAnU3RhZ2UzJywge1xuICAgICAgcG9saWN5VmFsaWRhdGlvbkJldGExOiBbXG4gICAgICAgIG5ldyBGYWtlUGx1Z2luKCd0ZXN0LXBsdWdpbjQnLCBbe1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnZG8gc29tZXRoaW5nJyxcbiAgICAgICAgICBydWxlTmFtZTogJ3Rlc3QtcnVsZTQnLFxuICAgICAgICAgIHZpb2xhdGluZ1Jlc291cmNlczogW3tcbiAgICAgICAgICAgIGxvY2F0aW9uczogWyd0ZXN0LWxvY2F0aW9uJ10sXG4gICAgICAgICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJ0RlZmF1bHRSZXNvdXJjZScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhdGg6ICcvcGF0aC90by9TdGFnZTJTdGFnZTNzdGFjazEwQ0QzNjkxNS50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0pLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFjazMgPSBuZXcgY29yZS5TdGFjayhzdGFnZTMsICdzdGFjazEnKTtcbiAgICBuZXcgY29yZS5DZm5SZXNvdXJjZShzdGFjazMsICdEZWZhdWx0UmVzb3VyY2UnLCB7XG4gICAgICB0eXBlOiAnVGVzdDo6UmVzb3VyY2U6OkZha2UnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICByZXN1bHQ6ICdmYWlsdXJlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhY2sxID0gbmV3IGNvcmUuU3RhY2soc3RhZ2UxLCAnc3RhY2sxJyk7XG4gICAgbmV3IGNvcmUuQ2ZuUmVzb3VyY2Uoc3RhY2sxLCAnRGVmYXVsdFJlc291cmNlJywge1xuICAgICAgdHlwZTogJ1Rlc3Q6OlJlc291cmNlOjpGYWtlJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmVzdWx0OiAnZmFpbHVyZScsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHN0YWNrMiA9IG5ldyBjb3JlLlN0YWNrKHN0YWdlMiwgJ3N0YWNrMicpO1xuICAgIG5ldyBjb3JlLkNmblJlc291cmNlKHN0YWNrMiwgJ0RlZmF1bHRSZXNvdXJjZScsIHtcbiAgICAgIHR5cGU6ICdUZXN0OjpSZXNvdXJjZTo6RmFrZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHJlc3VsdDogJ2ZhaWx1cmUnLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGFwcC5zeW50aCgpO1xuICAgIGV4cGVjdChwcm9jZXNzLmV4aXRDb2RlKS50b0VxdWFsKDEpO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gY29uc29sZUVycm9yTW9jay5tb2NrLmNhbGxzWzBdWzBdLnNwbGl0KCdcXG4nKTtcbiAgICAvLyBBc3N1bWluZyB0aGUgcmVzdCBvZiB0aGUgcmVwb3J0J3MgY29udGVudCBpcyBjaGVja2VkIGJ5IGFub3RoZXIgdGVzdFxuICAgIGV4cGVjdChyZXBvcnQpLnRvRXF1YWwoZXhwZWN0LmFycmF5Q29udGFpbmluZyhcbiAgICAgIHZhbGlkYXRpb25SZXBvcnQoW1xuICAgICAgICB7XG4gICAgICAgICAgcGx1Z2luTmFtZTogJ3Rlc3QtcGx1Z2luMicsXG4gICAgICAgICAgc3RhdHVzOiAnZmFpbHVyZScsXG4gICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vU3RhZ2Uxc3RhY2sxRERFRDhCNkMudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgY29uc3RydWN0UGF0aDogJ1N0YWdlMS9zdGFjazEvRGVmYXVsdFJlc291cmNlJyxcbiAgICAgICAgICB0aXRsZTogJ3Rlc3QtcnVsZTInLFxuICAgICAgICAgIGNyZWF0aW9uU3RhY2s6IFtcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvU3RhZ2UxIFxcKFN0YWdlMVxcKS8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgQ29uc3RydWN0OiBhd3MtY2RrLWxpYi5TdGFnZS8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgTGlicmFyeSBWZXJzaW9uOiAuKi8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgTG9jYXRpb246IFJ1biB3aXRoICctLWRlYnVnJyB0byBpbmNsdWRlIGxvY2F0aW9uIGluZm8vKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSU4pSA4pSAICBzdGFjazEgXFwoU3RhZ2UxXFwvc3RhY2sxXFwpLyksXG4gICAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBDb25zdHJ1Y3Q6IGF3cy1jZGstbGliLlN0YWNrLyksXG4gICAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBMaWJyYXJ5IFZlcnNpb246IC4qLyksXG4gICAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBMb2NhdGlvbjogUnVuIHdpdGggJy0tZGVidWcnIHRvIGluY2x1ZGUgbG9jYXRpb24gaW5mby8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilJTilIDilIAgIERlZmF1bHRSZXNvdXJjZSBcXChTdGFnZTFcXC9zdGFjazFcXC9EZWZhdWx0UmVzb3VyY2VcXCkvKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIENvbnN0cnVjdDogYXdzLWNkay1saWIuQ2ZuUmVzb3VyY2UvKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIExpYnJhcnkgVmVyc2lvbjogLiovKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIExvY2F0aW9uOiBSdW4gd2l0aCAnLS1kZWJ1ZycgdG8gaW5jbHVkZSBsb2NhdGlvbiBpbmZvLyksXG4gICAgICAgICAgXSxcbiAgICAgICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJ0RlZmF1bHRSZXNvdXJjZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdkbyBzb21ldGhpbmcnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGx1Z2luTmFtZTogJ3Rlc3QtcGx1Z2luNCcsXG4gICAgICAgICAgc3RhdHVzOiAnZmFpbHVyZScsXG4gICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vU3RhZ2UyU3RhZ2Uzc3RhY2sxMENEMzY5MTUudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgY29uc3RydWN0UGF0aDogJ1N0YWdlMi9TdGFnZTMvc3RhY2sxL0RlZmF1bHRSZXNvdXJjZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdkbyBzb21ldGhpbmcnLFxuICAgICAgICAgIHRpdGxlOiAndGVzdC1ydWxlNCcsXG4gICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdEZWZhdWx0UmVzb3VyY2UnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGx1Z2luTmFtZTogJ3Rlc3QtcGx1Z2luMycsXG4gICAgICAgICAgc3RhdHVzOiAnZmFpbHVyZScsXG4gICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vU3RhZ2Uyc3RhY2syNTlCQTcxOEUudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgY29uc3RydWN0UGF0aDogJ1N0YWdlMi9zdGFjazIvRGVmYXVsdFJlc291cmNlJyxcbiAgICAgICAgICB0aXRsZTogJ3Rlc3QtcnVsZTMnLFxuICAgICAgICAgIHJlc291cmNlTG9naWNhbElkOiAnRGVmYXVsdFJlc291cmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ2RvIHNvbWV0aGluZycsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwbHVnaW5OYW1lOiAndGVzdC1wbHVnaW4xJyxcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsdXJlJyxcbiAgICAgICAgICB0ZW1wbGF0ZVBhdGg6ICcvcGF0aC90by9TdGFnZTFzdGFjazFEREVEOEI2Qy50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICBjb25zdHJ1Y3RQYXRoOiAnU3RhZ2UxL3N0YWNrMS9EZWZhdWx0UmVzb3VyY2UnLFxuICAgICAgICAgIHRpdGxlOiAndGVzdC1ydWxlMScsXG4gICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdEZWZhdWx0UmVzb3VyY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnZG8gc29tZXRoaW5nJyxcbiAgICAgICAgfSxcbiAgICAgIF0pLFxuICAgICkpO1xuICB9KTtcblxuICB0ZXN0KCdtdWx0aXBsZSBzdGFnZXMsIG11bHRpcGxlIHBsdWdpbnMnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1ZhbGlkYXRlID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB2aW9sYXRpb25zOiBbXSxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3QgYXBwID0gbmV3IGNvcmUuQXBwKHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Rlc3QtcGx1Z2luJyxcbiAgICAgICAgICB2YWxpZGF0ZTogbW9ja1ZhbGlkYXRlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFnZTEgPSBuZXcgY29yZS5TdGFnZShhcHAsICdTdGFnZTEnLCB7IH0pO1xuICAgIGNvbnN0IHN0YWdlMiA9IG5ldyBjb3JlLlN0YWdlKGFwcCwgJ1N0YWdlMicsIHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Rlc3QtcGx1Z2luMicsXG4gICAgICAgICAgdmFsaWRhdGU6IG1vY2tWYWxpZGF0ZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhZ2UzID0gbmV3IGNvcmUuU3RhZ2Uoc3RhZ2UyLCAnU3RhZ2UzJywgeyB9KTtcbiAgICBjb25zdCBzdGFjazMgPSBuZXcgY29yZS5TdGFjayhzdGFnZTMsICdzdGFjazEnKTtcbiAgICBuZXcgY29yZS5DZm5SZXNvdXJjZShzdGFjazMsICdEZWZhdWx0UmVzb3VyY2UnLCB7XG4gICAgICB0eXBlOiAnVGVzdDo6UmVzb3VyY2U6OkZha2UnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICByZXN1bHQ6ICdmYWlsdXJlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhY2sxID0gbmV3IGNvcmUuU3RhY2soc3RhZ2UxLCAnc3RhY2sxJyk7XG4gICAgbmV3IGNvcmUuQ2ZuUmVzb3VyY2Uoc3RhY2sxLCAnRGVmYXVsdFJlc291cmNlJywge1xuICAgICAgdHlwZTogJ1Rlc3Q6OlJlc291cmNlOjpGYWtlJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmVzdWx0OiAnZmFpbHVyZScsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHN0YWNrMiA9IG5ldyBjb3JlLlN0YWNrKHN0YWdlMiwgJ3N0YWNrMicpO1xuICAgIG5ldyBjb3JlLkNmblJlc291cmNlKHN0YWNrMiwgJ0RlZmF1bHRSZXNvdXJjZScsIHtcbiAgICAgIHR5cGU6ICdUZXN0OjpSZXNvdXJjZTo6RmFrZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHJlc3VsdDogJ2ZhaWx1cmUnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBhcHAuc3ludGgoKTtcblxuICAgIGV4cGVjdChtb2NrVmFsaWRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICBleHBlY3QobW9ja1ZhbGlkYXRlKS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgyLCB7XG4gICAgICB0ZW1wbGF0ZVBhdGhzOiBbXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvYXNzZW1ibHktU3RhZ2UxXFwvU3RhZ2Uxc3RhY2sxRERFRDhCNkMudGVtcGxhdGUuanNvbi8pLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2Fzc2VtYmx5LVN0YWdlMlxcL1N0YWdlMnN0YWNrMjU5QkE3MThFLnRlbXBsYXRlLmpzb24vKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9hc3NlbWJseS1TdGFnZTJcXC9hc3NlbWJseS1TdGFnZTItU3RhZ2UzXFwvU3RhZ2UyU3RhZ2Uzc3RhY2sxMENEMzY5MTUudGVtcGxhdGUuanNvbi8pLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBleHBlY3QobW9ja1ZhbGlkYXRlKS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgxLCB7XG4gICAgICB0ZW1wbGF0ZVBhdGhzOiBbXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvYXNzZW1ibHktU3RhZ2UyXFwvU3RhZ2Uyc3RhY2syNTlCQTcxOEUudGVtcGxhdGUuanNvbi8pLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2Fzc2VtYmx5LVN0YWdlMlxcL2Fzc2VtYmx5LVN0YWdlMi1TdGFnZTNcXC9TdGFnZTJTdGFnZTNzdGFjazEwQ0QzNjkxNS50ZW1wbGF0ZS5qc29uLyksXG4gICAgICBdLFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdtdWx0aXBsZSBzdGFnZXMsIHNpbmdsZSBwbHVnaW4nLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1ZhbGlkYXRlID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB2aW9sYXRpb25zOiBbXSxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3QgYXBwID0gbmV3IGNvcmUuQXBwKHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Rlc3QtcGx1Z2luJyxcbiAgICAgICAgICB2YWxpZGF0ZTogbW9ja1ZhbGlkYXRlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFnZTEgPSBuZXcgY29yZS5TdGFnZShhcHAsICdTdGFnZTEnLCB7IH0pO1xuICAgIGNvbnN0IHN0YWdlMiA9IG5ldyBjb3JlLlN0YWdlKGFwcCwgJ1N0YWdlMicsIHsgfSk7XG4gICAgY29uc3Qgc3RhZ2UzID0gbmV3IGNvcmUuU3RhZ2Uoc3RhZ2UyLCAnU3RhZ2UzJywgeyB9KTtcbiAgICBjb25zdCBzdGFjazMgPSBuZXcgY29yZS5TdGFjayhzdGFnZTMsICdzdGFjazEnKTtcbiAgICBuZXcgY29yZS5DZm5SZXNvdXJjZShzdGFjazMsICdEZWZhdWx0UmVzb3VyY2UnLCB7XG4gICAgICB0eXBlOiAnVGVzdDo6UmVzb3VyY2U6OkZha2UnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICByZXN1bHQ6ICdmYWlsdXJlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhY2sxID0gbmV3IGNvcmUuU3RhY2soc3RhZ2UxLCAnc3RhY2sxJyk7XG4gICAgbmV3IGNvcmUuQ2ZuUmVzb3VyY2Uoc3RhY2sxLCAnRGVmYXVsdFJlc291cmNlJywge1xuICAgICAgdHlwZTogJ1Rlc3Q6OlJlc291cmNlOjpGYWtlJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmVzdWx0OiAnZmFpbHVyZScsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHN0YWNrMiA9IG5ldyBjb3JlLlN0YWNrKHN0YWdlMiwgJ3N0YWNrMicpO1xuICAgIG5ldyBjb3JlLkNmblJlc291cmNlKHN0YWNrMiwgJ0RlZmF1bHRSZXNvdXJjZScsIHtcbiAgICAgIHR5cGU6ICdUZXN0OjpSZXNvdXJjZTo6RmFrZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHJlc3VsdDogJ2ZhaWx1cmUnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBhcHAuc3ludGgoKTtcblxuICAgIGV4cGVjdChtb2NrVmFsaWRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICBleHBlY3QobW9ja1ZhbGlkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICB0ZW1wbGF0ZVBhdGhzOiBbXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvYXNzZW1ibHktU3RhZ2UxXFwvU3RhZ2Uxc3RhY2sxRERFRDhCNkMudGVtcGxhdGUuanNvbi8pLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2Fzc2VtYmx5LVN0YWdlMlxcL1N0YWdlMnN0YWNrMjU5QkE3MThFLnRlbXBsYXRlLmpzb24vKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9hc3NlbWJseS1TdGFnZTJcXC9hc3NlbWJseS1TdGFnZTItU3RhZ2UzXFwvU3RhZ2UyU3RhZ2Uzc3RhY2sxMENEMzY5MTUudGVtcGxhdGUuanNvbi8pLFxuICAgICAgXSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnbXVsdGlwbGUgY29uc3RydWN0cycsICgpID0+IHtcbiAgICBjb25zdCBhcHAgPSBuZXcgY29yZS5BcHAoe1xuICAgICAgcG9saWN5VmFsaWRhdGlvbkJldGExOiBbXG4gICAgICAgIG5ldyBGYWtlUGx1Z2luKCd0ZXN0LXBsdWdpbicsIFt7XG4gICAgICAgICAgZGVzY3JpcHRpb246ICd0ZXN0IHJlY29tbWVuZGF0aW9uJyxcbiAgICAgICAgICBydWxlTmFtZTogJ3Rlc3QtcnVsZScsXG4gICAgICAgICAgdmlvbGF0aW5nUmVzb3VyY2VzOiBbe1xuICAgICAgICAgICAgbG9jYXRpb25zOiBbJ3Rlc3QtbG9jYXRpb24nXSxcbiAgICAgICAgICAgIHJlc291cmNlTG9naWNhbElkOiAnU29tZVJlc291cmNlMzE3RkRENzEnLFxuICAgICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vRGVmYXVsdC50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0pLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFjayA9IG5ldyBjb3JlLlN0YWNrKGFwcCk7XG4gICAgbmV3IExldmVsVHdvQ29uc3RydWN0KHN0YWNrLCAnU29tZVJlc291cmNlJyk7XG4gICAgbmV3IExldmVsVHdvQ29uc3RydWN0KHN0YWNrLCAnQW5vdGhlclJlc291cmNlJyk7XG4gICAgYXBwLnN5bnRoKCk7XG4gICAgZXhwZWN0KHByb2Nlc3MuZXhpdENvZGUpLnRvRXF1YWwoMSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBjb25zb2xlRXJyb3JNb2NrLm1vY2suY2FsbHNbMF1bMF07XG4gICAgLy8gQXNzdW1pbmcgdGhlIHJlc3Qgb2YgdGhlIHJlcG9ydCdzIGNvbnRlbnQgaXMgY2hlY2tlZCBieSBhbm90aGVyIHRlc3RcbiAgICBleHBlY3QocmVwb3J0KS50b0NvbnRhaW4oJy0gQ29uc3RydWN0IFBhdGg6IERlZmF1bHQvU29tZVJlc291cmNlJyk7XG4gICAgZXhwZWN0KHJlcG9ydCkubm90LnRvQ29udGFpbignLSBDb25zdHJ1Y3QgUGF0aDogRGVmYXVsdC9Bbm90aGVyUmVzb3VyY2UnKTtcbiAgfSk7XG5cbiAgdGVzdCgnbXVsdGlwbGUgcGx1Z2lucycsICgpID0+IHtcbiAgICBjb25zdCBhcHAgPSBuZXcgY29yZS5BcHAoe1xuICAgICAgcG9saWN5VmFsaWRhdGlvbkJldGExOiBbXG4gICAgICAgIG5ldyBGYWtlUGx1Z2luKCdwbHVnaW4xJywgW3tcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ2RvIHNvbWV0aGluZycsXG4gICAgICAgICAgcnVsZU5hbWU6ICdydWxlLTEnLFxuICAgICAgICAgIHZpb2xhdGluZ1Jlc291cmNlczogW3tcbiAgICAgICAgICAgIGxvY2F0aW9uczogWyd0ZXN0LWxvY2F0aW9uJ10sXG4gICAgICAgICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJ0Zha2UnLFxuICAgICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vRGVmYXVsdC50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0pLFxuICAgICAgICBuZXcgRmFrZVBsdWdpbigncGx1Z2luMicsIFt7XG4gICAgICAgICAgZGVzY3JpcHRpb246ICdkbyBhbm90aGVyIHRoaW5nJyxcbiAgICAgICAgICBydWxlTmFtZTogJ3J1bGUtMicsXG4gICAgICAgICAgdmlvbGF0aW5nUmVzb3VyY2VzOiBbe1xuICAgICAgICAgICAgbG9jYXRpb25zOiBbJ3Rlc3QtbG9jYXRpb24nXSxcbiAgICAgICAgICAgIHJlc291cmNlTG9naWNhbElkOiAnRmFrZScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhdGg6ICcvcGF0aC90by9EZWZhdWx0LnRlbXBsYXRlLmpzb24nLFxuICAgICAgICAgIH1dLFxuICAgICAgICB9XSksXG4gICAgICBdLFxuICAgIH0pO1xuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNvcmUuU3RhY2soYXBwKTtcbiAgICBuZXcgY29yZS5DZm5SZXNvdXJjZShzdGFjaywgJ0Zha2UnLCB7XG4gICAgICB0eXBlOiAnVGVzdDo6UmVzb3VyY2U6OkZha2UnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICByZXN1bHQ6ICdmYWlsdXJlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgYXBwLnN5bnRoKCk7XG4gICAgZXhwZWN0KHByb2Nlc3MuZXhpdENvZGUpLnRvRXF1YWwoMSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBjb25zb2xlRXJyb3JNb2NrLm1vY2suY2FsbHNbMF1bMF0uc3BsaXQoJ1xcbicpO1xuICAgIGV4cGVjdChyZXBvcnQpLnRvRXF1YWwoZXhwZWN0LmFycmF5Q29udGFpbmluZyhcbiAgICAgIHZhbGlkYXRpb25SZXBvcnQoW1xuICAgICAgICB7XG4gICAgICAgICAgcGx1Z2luTmFtZTogJ3BsdWdpbjEnLFxuICAgICAgICAgIHN0YXR1czogJ2ZhaWx1cmUnLFxuICAgICAgICAgIHRlbXBsYXRlUGF0aDogJy9wYXRoL3RvL0RlZmF1bHQudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgY29uc3RydWN0UGF0aDogJ0RlZmF1bHQvRmFrZScsXG4gICAgICAgICAgdGl0bGU6ICdydWxlLTEnLFxuICAgICAgICAgIGNyZWF0aW9uU3RhY2s6IFtcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvRGVmYXVsdCBcXChEZWZhdWx0XFwpLyksXG4gICAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBDb25zdHJ1Y3Q6IGF3cy1jZGstbGliLlN0YWNrLyksXG4gICAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBMaWJyYXJ5IFZlcnNpb246IC4qLyksXG4gICAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUgiBMb2NhdGlvbjogUnVuIHdpdGggJy0tZGVidWcnIHRvIGluY2x1ZGUgbG9jYXRpb24gaW5mby8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilJTilIDilIAgIEZha2UgXFwoRGVmYXVsdFxcL0Zha2VcXCkvKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIENvbnN0cnVjdDogYXdzLWNkay1saWIuQ2ZuUmVzb3VyY2UvKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIExpYnJhcnkgVmVyc2lvbjogLiovKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIExvY2F0aW9uOiBSdW4gd2l0aCAnLS1kZWJ1ZycgdG8gaW5jbHVkZSBsb2NhdGlvbiBpbmZvLyksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ2RvIHNvbWV0aGluZycsXG4gICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdGYWtlJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHBsdWdpbk5hbWU6ICdwbHVnaW4yJyxcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsdXJlJyxcbiAgICAgICAgICB0ZW1wbGF0ZVBhdGg6ICcvcGF0aC90by9EZWZhdWx0LnRlbXBsYXRlLmpzb24nLFxuICAgICAgICAgIGNvbnN0cnVjdFBhdGg6ICdEZWZhdWx0L0Zha2UnLFxuICAgICAgICAgIHRpdGxlOiAncnVsZS0yJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ2RvIGFub3RoZXIgdGhpbmcnLFxuICAgICAgICAgIHJlc291cmNlTG9naWNhbElkOiAnRmFrZScsXG4gICAgICAgIH0sXG4gICAgICBdKSxcbiAgICApKTtcbiAgfSk7XG5cbiAgdGVzdCgnbXVsdGlwbGUgcGx1Z2lucyB3aXRoIG1peGVkIHJlc3VsdHMnLCAoKSA9PiB7XG4gICAgY29uc3QgYXBwID0gbmV3IGNvcmUuQXBwKHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICBuZXcgRmFrZVBsdWdpbigncGx1Z2luMScsIFtdKSxcbiAgICAgICAgbmV3IEZha2VQbHVnaW4oJ3BsdWdpbjInLCBbe1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnZG8gYW5vdGhlciB0aGluZycsXG4gICAgICAgICAgcnVsZU5hbWU6ICdydWxlLTInLFxuICAgICAgICAgIHZpb2xhdGluZ1Jlc291cmNlczogW3tcbiAgICAgICAgICAgIGxvY2F0aW9uczogWyd0ZXN0LWxvY2F0aW9uJ10sXG4gICAgICAgICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJ0Zha2UnLFxuICAgICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vRGVmYXVsdC50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgfV0pLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFjayA9IG5ldyBjb3JlLlN0YWNrKGFwcCk7XG4gICAgbmV3IGNvcmUuQ2ZuUmVzb3VyY2Uoc3RhY2ssICdGYWtlJywge1xuICAgICAgdHlwZTogJ1Rlc3Q6OlJlc291cmNlOjpGYWtlJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmVzdWx0OiAnZmFpbHVyZScsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGFwcC5zeW50aCgpO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gY29uc29sZUVycm9yTW9jay5tb2NrLmNhbGxzWzBdWzBdLnNwbGl0KCdcXG4nKTtcbiAgICBleHBlY3QocmVwb3J0KS50b0VxdWFsKGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoXG4gICAgICB2YWxpZGF0aW9uUmVwb3J0KFtcbiAgICAgICAge1xuICAgICAgICAgIHBsdWdpbk5hbWU6ICdwbHVnaW4xJyxcbiAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICBjb25zdHJ1Y3RQYXRoOiAnJyxcbiAgICAgICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJycsXG4gICAgICAgICAgdGVtcGxhdGVQYXRoOiAnJyxcbiAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwbHVnaW5OYW1lOiAncGx1Z2luMicsXG4gICAgICAgICAgc3RhdHVzOiAnZmFpbHVyZScsXG4gICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vRGVmYXVsdC50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICBjb25zdHJ1Y3RQYXRoOiAnRGVmYXVsdC9GYWtlJyxcbiAgICAgICAgICB0aXRsZTogJ3J1bGUtMicsXG4gICAgICAgICAgY3JlYXRpb25TdGFjazogW1xuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9EZWZhdWx0IFxcKERlZmF1bHRcXCkvKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIENvbnN0cnVjdDogYXdzLWNkay1saWIuU3RhY2svKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIExpYnJhcnkgVmVyc2lvbjogLiovKSxcbiAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygv4pSCIExvY2F0aW9uOiBSdW4gd2l0aCAnLS1kZWJ1ZycgdG8gaW5jbHVkZSBsb2NhdGlvbiBpbmZvLyksXG4gICAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL+KUlOKUgOKUgCAgRmFrZSBcXChEZWZhdWx0XFwvRmFrZVxcKS8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgQ29uc3RydWN0OiBhd3MtY2RrLWxpYi5DZm5SZXNvdXJjZS8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgTGlicmFyeSBWZXJzaW9uOiAuKi8pLFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC/ilIIgTG9jYXRpb246IFJ1biB3aXRoICctLWRlYnVnJyB0byBpbmNsdWRlIGxvY2F0aW9uIGluZm8vKSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnZG8gYW5vdGhlciB0aGluZycsXG4gICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdGYWtlJyxcbiAgICAgICAgfSxcbiAgICAgIF0pLFxuICAgICkpO1xuICB9KTtcblxuICB0ZXN0KCdwbHVnaW4gdGhyb3dzIGFuIGVycm9yJywgKCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBjb3JlLkFwcCh7XG4gICAgICBwb2xpY3lWYWxpZGF0aW9uQmV0YTE6IFtcbiAgICAgICAgLy8gVGhpcyBwbHVnaW4gd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgICAgICBuZXcgQnJva2VuUGx1Z2luKCksXG5cbiAgICAgICAgLy8gQnV0IHRoaXMgb25lIHNob3VsZCBzdGlsbCBydW5cbiAgICAgICAgbmV3IEZha2VQbHVnaW4oJ3Rlc3QtcGx1Z2luJywgW3tcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ3Rlc3QgcmVjb21tZW5kYXRpb24nLFxuICAgICAgICAgIHJ1bGVOYW1lOiAndGVzdC1ydWxlJyxcbiAgICAgICAgICB2aW9sYXRpbmdSZXNvdXJjZXM6IFt7XG4gICAgICAgICAgICBsb2NhdGlvbnM6IFsndGVzdC1sb2NhdGlvbiddLFxuICAgICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdGYWtlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlUGF0aDogJy9wYXRoL3RvL0RlZmF1bHQudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH1dKSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjb3JlLlN0YWNrKGFwcCk7XG4gICAgbmV3IGNvcmUuQ2ZuUmVzb3VyY2Uoc3RhY2ssICdGYWtlJywge1xuICAgICAgdHlwZTogJ1Rlc3Q6OlJlc291cmNlOjpGYWtlJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmVzdWx0OiAnc3VjY2VzcycsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYXBwLnN5bnRoKCk7XG4gICAgZXhwZWN0KHByb2Nlc3MuZXhpdENvZGUpLnRvRXF1YWwoMSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBjb25zb2xlRXJyb3JNb2NrLm1vY2suY2FsbHNbMF1bMF07XG4gICAgZXhwZWN0KHJlcG9ydCkudG9Db250YWluKCdlcnJvcjogVmFsaWRhdGlvbiBwbHVnaW4gXFwnYnJva2VuLXBsdWdpblxcJyBmYWlsZWQ6IFNvbWV0aGluZyB3ZW50IHdyb25nJyk7XG4gICAgZXhwZWN0KHJlcG9ydCkudG9Db250YWluKGdlbmVyYXRlVGFibGUoJ3Rlc3QtcGx1Z2luJywgJ2ZhaWx1cmUnLCAnTi9BJykpO1xuICB9KTtcblxuICB0ZXN0KCdwbHVnaW4gdHJpZXMgdG8gbW9kaWZ5IGEgdGVtcGxhdGUnLCAoKSA9PiB7XG4gICAgY29uc3QgYXBwID0gbmV3IGNvcmUuQXBwKHtcbiAgICAgIHBvbGljeVZhbGlkYXRpb25CZXRhMTogW1xuICAgICAgICBuZXcgUm9ndWVQbHVnaW4oKSxcbiAgICAgIF0sXG4gICAgfSk7XG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY29yZS5TdGFjayhhcHApO1xuICAgIG5ldyBjb3JlLkNmblJlc291cmNlKHN0YWNrLCAnRGVmYXVsdFJlc291cmNlJywge1xuICAgICAgdHlwZTogJ1Rlc3Q6OlJlc291cmNlOjpGYWtlJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmVzdWx0OiAnc3VjY2VzcycsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBhcHAuc3ludGgoKTtcbiAgICB9KS50b1Rocm93KC9JbGxlZ2FsIG9wZXJhdGlvbjogdmFsaWRhdGlvbiBwbHVnaW4gJ3JvZ3VlLXBsdWdpbicgbW9kaWZpZWQgdGhlIGNsb3VkIGFzc2VtYmx5Lyk7XG4gIH0pO1xuXG4gIHRlc3QoJ0pTT04gZm9ybWF0JywgKCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBjb3JlLkFwcCh7XG4gICAgICBwb2xpY3lWYWxpZGF0aW9uQmV0YTE6IFtcbiAgICAgICAgbmV3IEZha2VQbHVnaW4oJ3Rlc3QtcGx1Z2luJywgW3tcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ3Rlc3QgcmVjb21tZW5kYXRpb24nLFxuICAgICAgICAgIHJ1bGVOYW1lOiAndGVzdC1ydWxlJyxcbiAgICAgICAgICBydWxlTWV0YWRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAnYWJjZGVmZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aW9sYXRpbmdSZXNvdXJjZXM6IFt7XG4gICAgICAgICAgICBsb2NhdGlvbnM6IFsndGVzdC1sb2NhdGlvbiddLFxuICAgICAgICAgICAgcmVzb3VyY2VMb2dpY2FsSWQ6ICdGYWtlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlUGF0aDogJy9wYXRoL3RvL0RlZmF1bHQudGVtcGxhdGUuanNvbicsXG4gICAgICAgICAgfV0sXG4gICAgICAgIH1dKSxcbiAgICAgIF0sXG4gICAgICBjb250ZXh0OiB7ICdAYXdzLWNkay9jb3JlOnZhbGlkYXRpb25SZXBvcnRKc29uJzogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNvcmUuU3RhY2soYXBwKTtcbiAgICBuZXcgY29yZS5DZm5SZXNvdXJjZShzdGFjaywgJ0Zha2UnLCB7XG4gICAgICB0eXBlOiAnVGVzdDo6UmVzb3VyY2U6OkZha2UnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICByZXN1bHQ6ICdmYWlsdXJlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgYXBwLnN5bnRoKCk7XG4gICAgZXhwZWN0KHByb2Nlc3MuZXhpdENvZGUpLnRvRXF1YWwoMSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBmcy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKGFwcC5vdXRkaXIsICdwb2xpY3ktdmFsaWRhdGlvbi1yZXBvcnQuanNvbicpKS50b1N0cmluZygndXRmLTgnKTtcbiAgICBleHBlY3QoSlNPTi5wYXJzZShyZXBvcnQpKS50b0VxdWFsKGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgIHRpdGxlOiAnVmFsaWRhdGlvbiBSZXBvcnQnLFxuICAgICAgcGx1Z2luUmVwb3J0czogW1xuICAgICAgICB7XG4gICAgICAgICAgc3VtbWFyeToge1xuICAgICAgICAgICAgcGx1Z2luTmFtZTogJ3Rlc3QtcGx1Z2luJyxcbiAgICAgICAgICAgIHN0YXR1czogJ2ZhaWx1cmUnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmlvbGF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBydWxlTmFtZTogJ3Rlc3QtcnVsZScsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAndGVzdCByZWNvbW1lbmRhdGlvbicsXG4gICAgICAgICAgICAgIHJ1bGVNZXRhZGF0YTogeyBpZDogJ2FiY2RlZmcnIH0sXG4gICAgICAgICAgICAgIHZpb2xhdGluZ1Jlc291cmNlczogW3tcbiAgICAgICAgICAgICAgICAnbG9jYXRpb25zJzogW1xuICAgICAgICAgICAgICAgICAgJ3Rlc3QtbG9jYXRpb24nLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ3Jlc291cmNlTG9naWNhbElkJzogJ0Zha2UnLFxuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVBhdGgnOiAnL3BhdGgvdG8vRGVmYXVsdC50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgIHZpb2xhdGluZ0NvbnN0cnVjdHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjb25zdHJ1Y3RTdGFjazoge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiAnRGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgICdjb25zdHJ1Y3QnOiAnYXdzLWNkay1saWIuU3RhY2snLFxuICAgICAgICAgICAgICAgICAgICAnbGlicmFyeVZlcnNpb24nOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgICAgICAgICAgICdsb2NhdGlvbic6IFwiUnVuIHdpdGggJy0tZGVidWcnIHRvIGluY2x1ZGUgbG9jYXRpb24gaW5mb1wiLFxuICAgICAgICAgICAgICAgICAgICAncGF0aCc6ICdEZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgJ2NoaWxkJzoge1xuICAgICAgICAgICAgICAgICAgICAgICdpZCc6ICdGYWtlJyxcbiAgICAgICAgICAgICAgICAgICAgICAnY29uc3RydWN0JzogJ2F3cy1jZGstbGliLkNmblJlc291cmNlJyxcbiAgICAgICAgICAgICAgICAgICAgICAnbGlicmFyeVZlcnNpb24nOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgICAgICAgICAgICAgJ2xvY2F0aW9uJzogXCJSdW4gd2l0aCAnLS1kZWJ1ZycgdG8gaW5jbHVkZSBsb2NhdGlvbiBpbmZvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgJ3BhdGgnOiAnRGVmYXVsdC9GYWtlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBjb25zdHJ1Y3RQYXRoOiAnRGVmYXVsdC9GYWtlJyxcbiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uczogWyd0ZXN0LWxvY2F0aW9uJ10sXG4gICAgICAgICAgICAgICAgICByZXNvdXJjZUxvZ2ljYWxJZDogJ0Zha2UnLFxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQYXRoOiAnL3BhdGgvdG8vRGVmYXVsdC50ZW1wbGF0ZS5qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KSk7XG4gIH0pO1xufSk7XG5cbmNsYXNzIEZha2VQbHVnaW4gaW1wbGVtZW50cyBjb3JlLklQb2xpY3lWYWxpZGF0aW9uUGx1Z2luQmV0YTEge1xuICBwcml2YXRlIF92ZXJzaW9uPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBuYW1lOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSByZWFkb25seSB2aW9sYXRpb25zOiBQb2xpY3lWaW9sYXRpb25CZXRhMVtdLFxuICAgIHJlYWRvbmx5IHZlcnNpb24/OiBzdHJpbmcpIHtcbiAgICB0aGlzLl92ZXJzaW9uID0gdmVyc2lvbjtcbiAgfVxuXG4gIHZhbGlkYXRlKF9jb250ZXh0OiBjb3JlLklQb2xpY3lWYWxpZGF0aW9uQ29udGV4dEJldGExKTogUG9saWN5VmFsaWRhdGlvblBsdWdpblJlcG9ydEJldGExIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdGhpcy52aW9sYXRpb25zLmxlbmd0aCA9PT0gMCxcbiAgICAgIHZpb2xhdGlvbnM6IHRoaXMudmlvbGF0aW9ucyxcbiAgICAgIHBsdWdpblZlcnNpb246IHRoaXMuX3ZlcnNpb24sXG4gICAgfTtcbiAgfVxufVxuXG5jbGFzcyBSb2d1ZVBsdWdpbiBpbXBsZW1lbnRzIGNvcmUuSVBvbGljeVZhbGlkYXRpb25QbHVnaW5CZXRhMSB7XG4gIHB1YmxpYyByZWFkb25seSBuYW1lID0gJ3JvZ3VlLXBsdWdpbic7XG5cbiAgdmFsaWRhdGUoY29udGV4dDogY29yZS5JUG9saWN5VmFsaWRhdGlvbkNvbnRleHRCZXRhMSk6IFBvbGljeVZhbGlkYXRpb25QbHVnaW5SZXBvcnRCZXRhMSB7XG4gICAgY29uc3QgdGVtcGxhdGVQYXRoID0gY29udGV4dC50ZW1wbGF0ZVBhdGhzWzBdO1xuICAgIGZzLndyaXRlRmlsZVN5bmModGVtcGxhdGVQYXRoLCAnbWFsaWNpb3VzIGRhdGEnKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHZpb2xhdGlvbnM6IFtdLFxuICAgIH07XG4gIH1cbn1cblxuY2xhc3MgQnJva2VuUGx1Z2luIGltcGxlbWVudHMgY29yZS5JUG9saWN5VmFsaWRhdGlvblBsdWdpbkJldGExIHtcbiAgcHVibGljIHJlYWRvbmx5IG5hbWUgPSAnYnJva2VuLXBsdWdpbic7XG5cbiAgdmFsaWRhdGUoX2NvbnRleHQ6IGNvcmUuSVBvbGljeVZhbGlkYXRpb25Db250ZXh0QmV0YTEpOiBQb2xpY3lWYWxpZGF0aW9uUGx1Z2luUmVwb3J0QmV0YTEge1xuICAgIHRocm93IG5ldyBFcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcnKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgVmFsaWRhdGlvblJlcG9ydERhdGEge1xuICB0ZW1wbGF0ZVBhdGg6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIHBsdWdpbk5hbWU6IHN0cmluZztcbiAgY29uc3RydWN0UGF0aDogc3RyaW5nO1xuICBjcmVhdGlvblN0YWNrPzogc3RyaW5nW107XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICByZXNvdXJjZUxvZ2ljYWxJZDogc3RyaW5nO1xuICBzZXZlcml0eT86IHN0cmluZztcbiAgcnVsZU1ldGFkYXRhPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVUYWJsZShwbHVnaW5OYW1lOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nLCBwbHVnaW5WZXJzaW9uOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gdGFibGUoW1xuICAgIFtgUGx1Z2luOiAke3BsdWdpbk5hbWV9YF0sXG4gICAgW2BWZXJzaW9uOiAke3BsdWdpblZlcnNpb259YF0sXG4gICAgW2BTdGF0dXM6ICR7c3RhdHVzfWBdLFxuICBdLCB7XG4gICAgaGVhZGVyOiB7IGNvbnRlbnQ6ICdQbHVnaW4gUmVwb3J0JyB9LFxuICAgIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgY29sdW1uczogW3tcbiAgICAgIHBhZGRpbmdMZWZ0OiAzLFxuICAgICAgcGFkZGluZ1JpZ2h0OiAzLFxuICAgIH1dLFxuICB9KTtcbn1cblxuY29uc3QgdmFsaWRhdGlvblJlcG9ydCA9IChkYXRhOiBWYWxpZGF0aW9uUmVwb3J0RGF0YVtdKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGRhdGEuZmxhdE1hcChkID0+IHtcbiAgICBpZiAoZC5zdGF0dXMgPT09ICdmYWlsdXJlJykge1xuICAgICAgY29uc3QgdGl0bGUgPSByZXNldChyZWQoYnJpZ2h0KGAke2QudGl0bGV9ICgxIG9jY3VycmVuY2VzKWApKSk7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcobmV3IFJlZ0V4cCgnVmFsaWRhdGlvbiBSZXBvcnQnKSksXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZyhuZXcgUmVnRXhwKCctLS0tLS0tLS0tLS0tLS0tLScpKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKG5ldyBSZWdFeHAoYFBsdWdpbjogJHtkLnBsdWdpbk5hbWV9YCkpLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcobmV3IFJlZ0V4cChgU3RhdHVzOiAke2Quc3RhdHVzfWApKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKG5ldyBSZWdFeHAoJ1xcKFZpb2xhdGlvbnNcXCknKSksXG4gICAgICAgIHRpdGxlLFxuICAgICAgICAuLi5kLnNldmVyaXR5ID8gW2V4cGVjdC5zdHJpbmdNYXRjaGluZyhuZXcgUmVnRXhwKGBTZXZlcml0eTogJHtkLnNldmVyaXR5fWApKV0gOiBbXSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKG5ldyBSZWdFeHAoJyAgT2NjdXJyZW5jZXM6JykpLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcobmV3IFJlZ0V4cChgICAgIC0gQ29uc3RydWN0IFBhdGg6ICR7ZC5jb25zdHJ1Y3RQYXRofWApKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKG5ldyBSZWdFeHAoYCAgICAtIFRlbXBsYXRlIFBhdGg6ICR7ZC50ZW1wbGF0ZVBhdGh9YCkpLFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcobmV3IFJlZ0V4cCgnICAgIC0gQ3JlYXRpb24gU3RhY2s6JykpLFxuICAgICAgICAuLi5kLmNyZWF0aW9uU3RhY2sgPz8gW10sXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZyhuZXcgUmVnRXhwKGAgICAgLSBSZXNvdXJjZSBJRDogJHtkLnJlc291cmNlTG9naWNhbElkfWApKSxcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKG5ldyBSZWdFeHAoJyAgICAtIFRlbXBsYXRlIExvY2F0aW9uczonKSksXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZyhuZXcgUmVnRXhwKCcgICAgICA+IHRlc3QtbG9jYXRpb24nKSksXG4gICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZyhuZXcgUmVnRXhwKGAgIERlc2NyaXB0aW9uOiAke2QuZGVzY3JpcHRpb24gPz8gJ3Rlc3QgcmVjb21tZW5kYXRpb24nfWApKSxcbiAgICAgICAgLi4uZC5ydWxlTWV0YWRhdGEgPyBbZXhwZWN0LnN0cmluZ01hdGNoaW5nKCcgIFJ1bGUgTWV0YWRhdGE6JyksIC4uLk9iamVjdC5lbnRyaWVzKGQucnVsZU1ldGFkYXRhKS5mbGF0TWFwKChba2V5LCB2YWx1ZV0pID0+IGV4cGVjdC5zdHJpbmdNYXRjaGluZyhgJHtrZXl9OiAke3ZhbHVlfWApKV0gOiBbXSxcbiAgICAgIF07XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfSk7XG4gIHJlc3VsdC5wdXNoKFxuICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZyhuZXcgUmVnRXhwKCdQb2xpY3kgVmFsaWRhdGlvbiBSZXBvcnQgU3VtbWFyeScpKSxcbiAgICAuLi5kYXRhLm1hcChkID0+IGV4cGVjdC5zdHJpbmdNYXRjaGluZyhuZXcgUmVnRXhwKGAuKiR7ZC5wbHVnaW5OYW1lfS4qJHtkLnN0YXR1c30uKmApKSksXG4gICk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiByZXNldChzOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGAke3N9XFx4MWJbMG1gO1xufVxuXG5mdW5jdGlvbiByZWQoczogc3RyaW5nKSB7XG4gIHJldHVybiBgXFx4MWJbMzFtJHtzfWA7XG59XG5cbmZ1bmN0aW9uIGJyaWdodChzOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGBcXHgxYlsxbSR7c31gO1xufVxuXG5jbGFzcyBMZXZlbFR3b0NvbnN0cnVjdCBleHRlbmRzIENvbnN0cnVjdCB7XG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuICAgIG5ldyBjb3JlLkNmblJlc291cmNlKHRoaXMsICdSZXNvdXJjZScsIHtcbiAgICAgIHR5cGU6ICdUZXN0OjpSZXNvdXJjZTo6RmFrZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHJlc3VsdDogJ3N1Y2Nlc3MnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuIl19