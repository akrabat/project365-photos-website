"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("../../lib/provider-framework/runtime/util");
test('withRetries() will invoke a throwing function multiple times', async () => {
    let invocations = 0;
    const retryOptions = {
        attempts: 3,
        sleep: 0,
    };
    await expect(() => (0, util_1.withRetries)(retryOptions, async () => {
        invocations += 1;
        throw new Error('Oh no');
    })()).rejects.toThrow(/Oh no/);
    expect(invocations).toBeGreaterThan(1);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidXRpbC50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsb0VBQXdFO0FBRXhFLElBQUksQ0FBQyw4REFBOEQsRUFBRSxLQUFLLElBQUksRUFBRTtJQUM5RSxJQUFJLFdBQVcsR0FBRyxDQUFDLENBQUM7SUFDcEIsTUFBTSxZQUFZLEdBQUc7UUFDbkIsUUFBUSxFQUFFLENBQUM7UUFDWCxLQUFLLEVBQUUsQ0FBQztLQUNULENBQUM7SUFFRixNQUFNLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFBLGtCQUFXLEVBQUMsWUFBWSxFQUFFLEtBQUssSUFBSSxFQUFFO1FBQ3RELFdBQVcsSUFBSSxDQUFDLENBQUM7UUFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMzQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUUvQixNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2l0aFJldHJpZXMgfSBmcm9tICcuLi8uLi9saWIvcHJvdmlkZXItZnJhbWV3b3JrL3J1bnRpbWUvdXRpbCc7XG5cbnRlc3QoJ3dpdGhSZXRyaWVzKCkgd2lsbCBpbnZva2UgYSB0aHJvd2luZyBmdW5jdGlvbiBtdWx0aXBsZSB0aW1lcycsIGFzeW5jICgpID0+IHtcbiAgbGV0IGludm9jYXRpb25zID0gMDtcbiAgY29uc3QgcmV0cnlPcHRpb25zID0ge1xuICAgIGF0dGVtcHRzOiAzLFxuICAgIHNsZWVwOiAwLFxuICB9O1xuXG4gIGF3YWl0IGV4cGVjdCgoKSA9PiB3aXRoUmV0cmllcyhyZXRyeU9wdGlvbnMsIGFzeW5jICgpID0+IHtcbiAgICBpbnZvY2F0aW9ucyArPSAxO1xuICAgIHRocm93IG5ldyBFcnJvcignT2ggbm8nKTtcbiAgfSkoKSkucmVqZWN0cy50b1Rocm93KC9PaCBuby8pO1xuXG4gIGV4cGVjdChpbnZvY2F0aW9ucykudG9CZUdyZWF0ZXJUaGFuKDEpO1xufSk7Il19