"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../../assertions");
const aws_sns_1 = require("../../../aws-sns");
const core_1 = require("../../../core");
const cdkp = require("../../lib");
const default_codebuild_image_1 = require("../../lib/private/default-codebuild-image");
const testhelpers_1 = require("../testhelpers");
const compliance_1 = require("../testhelpers/compliance");
let app;
let pipelineStack;
beforeEach(() => {
    app = new testhelpers_1.TestApp();
    pipelineStack = new core_1.Stack(app, 'PipelineSecurityStack', { env: testhelpers_1.PIPELINE_ENV });
});
afterEach(() => {
    app.cleanup();
});
(0, compliance_1.behavior)('security check option generates lambda/codebuild at pipeline scope', (suite) => {
    suite.legacy(() => {
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        pipeline.addApplicationStage(new testhelpers_1.OneStackApp(app, 'App'), { confirmBroadeningPermissions: true });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        const pipeline = new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const stage = new testhelpers_1.OneStackApp(app, 'App');
        pipeline.addStage(stage, {
            pre: [
                new cdkp.ConfirmPermissionsBroadening('Check', {
                    stage,
                }),
            ],
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        const template = assertions_1.Template.fromStack(pipelineStack);
        template.resourceCountIs('AWS::Lambda::Function', 1);
        template.hasResourceProperties('AWS::Lambda::Function', {
            Role: {
                'Fn::GetAtt': [
                    (0, testhelpers_1.stringLike)('CdkPipeline*SecurityCheckCDKPipelinesAutoApproveServiceRole*'),
                    'Arn',
                ],
            },
        });
        // 1 for github build, 1 for synth stage, and 1 for the application security check
        template.resourceCountIs('AWS::CodeBuild::Project', 3);
        // No CodeBuild project has a build image that is not the standard iamge
        const projects = template.findResources('AWS::CodeBuild::Project', {
            Properties: {
                Environment: {
                    Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
                },
            },
        });
        expect(Object.keys(projects).length).toEqual(3);
    }
});
(0, compliance_1.behavior)('security check option passes correct environment variables to check project', (suite) => {
    suite.legacy(() => {
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        pipeline.addApplicationStage(new testhelpers_1.OneStackApp(pipelineStack, 'App'), { confirmBroadeningPermissions: true });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        const pipeline = new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const stage = new testhelpers_1.OneStackApp(pipelineStack, 'App');
        pipeline.addStage(stage, {
            pre: [
                new cdkp.ConfirmPermissionsBroadening('Check', {
                    stage,
                }),
            ],
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Stages: assertions_1.Match.arrayWith([
                {
                    Name: 'App',
                    Actions: assertions_1.Match.arrayWith([
                        assertions_1.Match.objectLike({
                            Name: (0, testhelpers_1.stringLike)('*Check'),
                            Configuration: assertions_1.Match.objectLike({
                                EnvironmentVariables: assertions_1.Match.serializedJson([
                                    { name: 'STAGE_PATH', type: 'PLAINTEXT', value: 'PipelineSecurityStack/App' },
                                    { name: 'STAGE_NAME', type: 'PLAINTEXT', value: 'App' },
                                    { name: 'ACTION_NAME', type: 'PLAINTEXT', value: assertions_1.Match.anyValue() },
                                ]),
                            }),
                        }),
                    ]),
                },
            ]),
        });
    }
});
(0, compliance_1.behavior)('pipeline created with auto approve tags and lambda/codebuild w/ valid permissions', (suite) => {
    suite.legacy(() => {
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        pipeline.addApplicationStage(new testhelpers_1.OneStackApp(app, 'App'), { confirmBroadeningPermissions: true });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        const pipeline = new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const stage = new testhelpers_1.OneStackApp(app, 'App');
        pipeline.addStage(stage, {
            pre: [
                new cdkp.ConfirmPermissionsBroadening('Check', {
                    stage,
                }),
            ],
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        // CodePipeline must be tagged as SECURITY_CHECK=ALLOW_APPROVE
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Tags: [
                {
                    Key: 'SECURITY_CHECK',
                    Value: 'ALLOW_APPROVE',
                },
            ],
        });
        // Lambda Function only has access to pipelines tagged SECURITY_CHECK=ALLOW_APPROVE
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Statement: [
                    {
                        Action: ['codepipeline:GetPipelineState', 'codepipeline:PutApprovalResult'],
                        Condition: {
                            StringEquals: { 'aws:ResourceTag/SECURITY_CHECK': 'ALLOW_APPROVE' },
                        },
                        Effect: 'Allow',
                        Resource: '*',
                    },
                ],
            },
        });
        // CodeBuild must have access to the stacks and invoking the lambda function
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Statement: assertions_1.Match.arrayWith([
                    {
                        Action: 'sts:AssumeRole',
                        Condition: {
                            'ForAnyValue:StringEquals': {
                                'iam:ResourceTag/aws-cdk:bootstrap-role': [
                                    'deploy',
                                ],
                            },
                        },
                        Effect: 'Allow',
                        Resource: '*',
                    },
                    {
                        Action: 'lambda:InvokeFunction',
                        Effect: 'Allow',
                        Resource: [
                            {
                                'Fn::GetAtt': [
                                    (0, testhelpers_1.stringLike)('*AutoApprove*'),
                                    'Arn',
                                ],
                            },
                            {
                                'Fn::Join': [
                                    '',
                                    [
                                        {
                                            'Fn::GetAtt': [
                                                (0, testhelpers_1.stringLike)('*AutoApprove*'),
                                                'Arn',
                                            ],
                                        },
                                        ':*',
                                    ],
                                ],
                            },
                        ],
                    },
                ]),
            },
        });
    }
});
(0, compliance_1.behavior)('confirmBroadeningPermissions option at addApplicationStage runs security check on all apps unless overriden', (suite) => {
    suite.legacy(() => {
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const securityStage = pipeline.addApplicationStage(new testhelpers_1.OneStackApp(app, 'StageSecurityCheckStack'), { confirmBroadeningPermissions: true });
        securityStage.addApplication(new testhelpers_1.OneStackApp(app, 'AnotherStack'));
        securityStage.addApplication(new testhelpers_1.OneStackApp(app, 'SkipCheckStack'), { confirmBroadeningPermissions: false });
        THEN_codePipelineExpectation();
    });
    // For the modern API, there is no inheritance
    suite.doesNotApply.modern();
    function THEN_codePipelineExpectation() {
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Stages: [
                {
                    Actions: [assertions_1.Match.objectLike({ Name: 'GitHub', RunOrder: 1 })],
                    Name: 'Source',
                },
                {
                    Actions: [assertions_1.Match.objectLike({ Name: 'Synth', RunOrder: 1 })],
                    Name: 'Build',
                },
                {
                    Actions: [assertions_1.Match.objectLike({ Name: 'SelfMutate', RunOrder: 1 })],
                    Name: 'UpdatePipeline',
                },
                {
                    Actions: [
                        assertions_1.Match.objectLike({ Name: 'StageSecurityCheckStackSecurityCheck', RunOrder: 1 }),
                        assertions_1.Match.objectLike({ Name: 'StageSecurityCheckStackManualApproval', RunOrder: 2 }),
                        assertions_1.Match.objectLike({ Name: 'AnotherStackSecurityCheck', RunOrder: 5 }),
                        assertions_1.Match.objectLike({ Name: 'AnotherStackManualApproval', RunOrder: 6 }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Prepare', RunOrder: 3 }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Deploy', RunOrder: 4 }),
                        assertions_1.Match.objectLike({ Name: 'AnotherStack-Stack.Prepare', RunOrder: 7 }),
                        assertions_1.Match.objectLike({ Name: 'AnotherStack-Stack.Deploy', RunOrder: 8 }),
                        assertions_1.Match.objectLike({ Name: 'SkipCheckStack-Stack.Prepare', RunOrder: 9 }),
                        assertions_1.Match.objectLike({ Name: 'SkipCheckStack-Stack.Deploy', RunOrder: 10 }),
                    ],
                    Name: 'StageSecurityCheckStack',
                },
            ],
        });
    }
});
(0, compliance_1.behavior)('confirmBroadeningPermissions option at addApplication runs security check only on selected application', (suite) => {
    suite.legacy(() => {
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const noSecurityStage = pipeline.addApplicationStage(new testhelpers_1.OneStackApp(app, 'NoSecurityCheckStack'));
        noSecurityStage.addApplication(new testhelpers_1.OneStackApp(app, 'EnableCheckStack'), { confirmBroadeningPermissions: true });
        THEN_codePipelineExpectation();
    });
    // For the modern API, there is no inheritance
    suite.doesNotApply.modern();
    function THEN_codePipelineExpectation() {
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Stages: [
                {
                    Actions: [assertions_1.Match.objectLike({ Name: 'GitHub', RunOrder: 1 })],
                    Name: 'Source',
                },
                {
                    Actions: [assertions_1.Match.objectLike({ Name: 'Synth', RunOrder: 1 })],
                    Name: 'Build',
                },
                {
                    Actions: [assertions_1.Match.objectLike({ Name: 'SelfMutate', RunOrder: 1 })],
                    Name: 'UpdatePipeline',
                },
                {
                    Actions: [
                        assertions_1.Match.objectLike({ Name: 'EnableCheckStackSecurityCheck', RunOrder: 3 }),
                        assertions_1.Match.objectLike({ Name: 'EnableCheckStackManualApproval', RunOrder: 4 }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Prepare', RunOrder: 1 }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Deploy', RunOrder: 2 }),
                        assertions_1.Match.objectLike({ Name: 'EnableCheckStack-Stack.Prepare', RunOrder: 5 }),
                        assertions_1.Match.objectLike({ Name: 'EnableCheckStack-Stack.Deploy', RunOrder: 6 }),
                    ],
                    Name: 'NoSecurityCheckStack',
                },
            ],
        });
    }
});
(0, compliance_1.behavior)('confirmBroadeningPermissions and notification topic options generates the right resources', (suite) => {
    suite.legacy(() => {
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const topic = new aws_sns_1.Topic(pipelineStack, 'NotificationTopic');
        pipeline.addApplicationStage(new testhelpers_1.OneStackApp(app, 'MyStack'), {
            confirmBroadeningPermissions: true,
            securityNotificationTopic: topic,
        });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        const pipeline = new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const topic = new aws_sns_1.Topic(pipelineStack, 'NotificationTopic');
        const stage = new testhelpers_1.OneStackApp(app, 'MyStack');
        pipeline.addStage(stage, {
            pre: [
                new cdkp.ConfirmPermissionsBroadening('Approve', {
                    stage,
                    notificationTopic: topic,
                }),
            ],
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        assertions_1.Template.fromStack(pipelineStack).resourceCountIs('AWS::SNS::Topic', 1);
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Stages: assertions_1.Match.arrayWith([
                {
                    Name: 'MyStack',
                    Actions: [
                        assertions_1.Match.objectLike({
                            Configuration: {
                                ProjectName: { Ref: (0, testhelpers_1.stringLike)('*SecurityCheck*') },
                                EnvironmentVariables: {
                                    'Fn::Join': ['', [
                                            (0, testhelpers_1.stringLike)('*'),
                                            { Ref: 'NotificationTopicEB7A0DF1' },
                                            (0, testhelpers_1.stringLike)('*'),
                                        ]],
                                },
                            },
                            Name: (0, testhelpers_1.stringLike)('*Check'),
                            Namespace: (0, testhelpers_1.stringLike)('*'),
                            RunOrder: 1,
                        }),
                        assertions_1.Match.objectLike({
                            Configuration: {
                                CustomData: (0, testhelpers_1.stringLike)('#{*.MESSAGE}'),
                                ExternalEntityLink: (0, testhelpers_1.stringLike)('#{*.LINK}'),
                            },
                            Name: (0, testhelpers_1.stringLike)('*Approv*'),
                            RunOrder: 2,
                        }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Prepare', RunOrder: 3 }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Deploy', RunOrder: 4 }),
                    ],
                },
            ]),
        });
    }
});
(0, compliance_1.behavior)('Stages declared outside the pipeline create their own ApplicationSecurityCheck', (suite) => {
    suite.legacy(() => {
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        const pipelineStage = pipeline.codePipeline.addStage({
            stageName: 'UnattachedStage',
        });
        const unattachedStage = new cdkp.CdkStage(pipelineStack, 'UnattachedStage', {
            stageName: 'UnattachedStage',
            pipelineStage,
            cloudAssemblyArtifact: pipeline.cloudAssemblyArtifact,
            host: {
                publishAsset: () => undefined,
                stackOutputArtifact: () => undefined,
            },
        });
        unattachedStage.addApplication(new testhelpers_1.OneStackApp(app, 'UnattachedStage'), {
            confirmBroadeningPermissions: true,
        });
        THEN_codePipelineExpectation();
    });
    // Not a valid use of the modern API
    suite.doesNotApply.modern();
    function THEN_codePipelineExpectation() {
        assertions_1.Template.fromStack(pipelineStack).resourceCountIs('AWS::Lambda::Function', 1);
        // 1 for github build, 1 for synth stage, and 1 for the application security check
        assertions_1.Template.fromStack(pipelineStack).resourceCountIs('AWS::CodeBuild::Project', 3);
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Tags: [
                {
                    Key: 'SECURITY_CHECK',
                    Value: 'ALLOW_APPROVE',
                },
            ],
            Stages: [
                assertions_1.Match.objectLike({ Name: 'Source' }),
                assertions_1.Match.objectLike({ Name: 'Build' }),
                assertions_1.Match.objectLike({ Name: 'UpdatePipeline' }),
                {
                    Actions: [
                        assertions_1.Match.objectLike({
                            Configuration: {
                                ProjectName: { Ref: 'UnattachedStageStageApplicationSecurityCheckCDKSecurityCheckADCE795B' },
                            },
                            Name: 'UnattachedStageSecurityCheck',
                            RunOrder: 1,
                        }),
                        assertions_1.Match.objectLike({
                            Configuration: {
                                CustomData: '#{UnattachedStageSecurityCheck.MESSAGE}',
                                ExternalEntityLink: '#{UnattachedStageSecurityCheck.LINK}',
                            },
                            Name: 'UnattachedStageManualApproval',
                            RunOrder: 2,
                        }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Prepare', RunOrder: 3 }),
                        assertions_1.Match.objectLike({ Name: 'Stack.Deploy', RunOrder: 4 }),
                    ],
                    Name: 'UnattachedStage',
                },
            ],
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjdXJpdHktY2hlY2sudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlY3VyaXR5LWNoZWNrLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxvREFBc0Q7QUFDdEQsOENBQXlDO0FBQ3pDLHdDQUFzQztBQUN0QyxrQ0FBa0M7QUFDbEMsdUZBQXlGO0FBQ3pGLGdEQUEwSTtBQUMxSSwwREFBcUQ7QUFFckQsSUFBSSxHQUFZLENBQUM7QUFDakIsSUFBSSxhQUFvQixDQUFDO0FBRXpCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7SUFDZCxHQUFHLEdBQUcsSUFBSSxxQkFBTyxFQUFFLENBQUM7SUFDcEIsYUFBYSxHQUFHLElBQUksWUFBSyxDQUFDLEdBQUcsRUFBRSx1QkFBdUIsRUFBRSxFQUFFLEdBQUcsRUFBRSwwQkFBWSxFQUFFLENBQUMsQ0FBQztBQUNqRixDQUFDLENBQUMsQ0FBQztBQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7SUFDYixHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDaEIsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFBLHFCQUFRLEVBQUMsb0VBQW9FLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtJQUN2RixLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRTtRQUNoQixNQUFNLFFBQVEsR0FBRyxJQUFJLHlDQUEyQixDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN2RSxRQUFRLENBQUMsbUJBQW1CLENBQUMsSUFBSSx5QkFBVyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLDRCQUE0QixFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFFbEcsNEJBQTRCLEVBQUUsQ0FBQztJQUNqQyxDQUFDLENBQUMsQ0FBQztJQUVILEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFO1FBQ2hCLE1BQU0sUUFBUSxHQUFHLElBQUkseUNBQTJCLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxD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a0JBQWtCLEVBQUUsc0NBQXNDOzZCQUMzRDs0QkFDRCxJQUFJLEVBQUUsK0JBQStCOzRCQUNyQyxRQUFRLEVBQUUsQ0FBQzt5QkFDWixDQUFDO3dCQUNGLGtCQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUM7d0JBQ3hELGtCQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUM7cUJBQ3hEO29CQUNELElBQUksRUFBRSxpQkFBaUI7aUJBQ3hCO2FBQ0Y7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0FBQ0gsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXRjaCwgVGVtcGxhdGUgfSBmcm9tICcuLi8uLi8uLi9hc3NlcnRpb25zJztcbmltcG9ydCB7IFRvcGljIH0gZnJvbSAnLi4vLi4vLi4vYXdzLXNucyc7XG5pbXBvcnQgeyBTdGFjayB9IGZyb20gJy4uLy4uLy4uL2NvcmUnO1xuaW1wb3J0ICogYXMgY2RrcCBmcm9tICcuLi8uLi9saWInO1xuaW1wb3J0IHsgQ0RLUF9ERUZBVUxUX0NPREVCVUlMRF9JTUFHRSB9IGZyb20gJy4uLy4uL2xpYi9wcml2YXRlL2RlZmF1bHQtY29kZWJ1aWxkLWltYWdlJztcbmltcG9ydCB7IExlZ2FjeVRlc3RHaXRIdWJOcG1QaXBlbGluZSwgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lLCBPbmVTdGFja0FwcCwgUElQRUxJTkVfRU5WLCBUZXN0QXBwLCBzdHJpbmdMaWtlIH0gZnJvbSAnLi4vdGVzdGhlbHBlcnMnO1xuaW1wb3J0IHsgYmVoYXZpb3IgfSBmcm9tICcuLi90ZXN0aGVscGVycy9jb21wbGlhbmNlJztcblxubGV0IGFwcDogVGVzdEFwcDtcbmxldCBwaXBlbGluZVN0YWNrOiBTdGFjaztcblxuYmVmb3JlRWFjaCgoKSA9PiB7XG4gIGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gIHBpcGVsaW5lU3RhY2sgPSBuZXcgU3RhY2soYXBwLCAnUGlwZWxpbmVTZWN1cml0eVN0YWNrJywgeyBlbnY6IFBJUEVMSU5FX0VOViB9KTtcbn0pO1xuXG5hZnRlckVhY2goKCkgPT4ge1xuICBhcHAuY2xlYW51cCgpO1xufSk7XG5cbmJlaGF2aW9yKCdzZWN1cml0eSBjaGVjayBvcHRpb24gZ2VuZXJhdGVzIGxhbWJkYS9jb2RlYnVpbGQgYXQgcGlwZWxpbmUgc2NvcGUnLCAoc3VpdGUpID0+IHtcbiAgc3VpdGUubGVnYWN5KCgpID0+IHtcbiAgICBjb25zdCBwaXBlbGluZSA9IG5ldyBMZWdhY3lUZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycpO1xuICAgIHBpcGVsaW5lLmFkZEFwcGxpY2F0aW9uU3RhZ2UobmV3IE9uZVN0YWNrQXBwKGFwcCwgJ0FwcCcpLCB7IGNvbmZpcm1Ccm9hZGVuaW5nUGVybWlzc2lvbnM6IHRydWUgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnKTtcbiAgICBjb25zdCBzdGFnZSA9IG5ldyBPbmVTdGFja0FwcChhcHAsICdBcHAnKTtcbiAgICBwaXBlbGluZS5hZGRTdGFnZShzdGFnZSwge1xuICAgICAgcHJlOiBbXG4gICAgICAgIG5ldyBjZGtwLkNvbmZpcm1QZXJtaXNzaW9uc0Jyb2FkZW5pbmcoJ0NoZWNrJywge1xuICAgICAgICAgIHN0YWdlLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjayk7XG4gICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCAxKTtcbiAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIHtcbiAgICAgIFJvbGU6IHtcbiAgICAgICAgJ0ZuOjpHZXRBdHQnOiBbXG4gICAgICAgICAgc3RyaW5nTGlrZSgnQ2RrUGlwZWxpbmUqU2VjdXJpdHlDaGVja0NES1BpcGVsaW5lc0F1dG9BcHByb3ZlU2VydmljZVJvbGUqJyksXG4gICAgICAgICAgJ0FybicsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIC8vIDEgZm9yIGdpdGh1YiBidWlsZCwgMSBmb3Igc3ludGggc3RhZ2UsIGFuZCAxIGZvciB0aGUgYXBwbGljYXRpb24gc2VjdXJpdHkgY2hlY2tcbiAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q29kZUJ1aWxkOjpQcm9qZWN0JywgMyk7XG5cbiAgICAvLyBObyBDb2RlQnVpbGQgcHJvamVjdCBoYXMgYSBidWlsZCBpbWFnZSB0aGF0IGlzIG5vdCB0aGUgc3RhbmRhcmQgaWFtZ2VcbiAgICBjb25zdCBwcm9qZWN0cyA9IHRlbXBsYXRlLmZpbmRSZXNvdXJjZXMoJ0FXUzo6Q29kZUJ1aWxkOjpQcm9qZWN0Jywge1xuICAgICAgUHJvcGVydGllczoge1xuICAgICAgICBFbnZpcm9ubWVudDoge1xuICAgICAgICAgIEltYWdlOiBDREtQX0RFRkFVTFRfQ09ERUJVSUxEX0lNQUdFLmltYWdlSWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGV4cGVjdChPYmplY3Qua2V5cyhwcm9qZWN0cykubGVuZ3RoKS50b0VxdWFsKDMpO1xuICB9XG59KTtcblxuYmVoYXZpb3IoJ3NlY3VyaXR5IGNoZWNrIG9wdGlvbiBwYXNzZXMgY29ycmVjdCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdG8gY2hlY2sgcHJvamVjdCcsIChzdWl0ZSkgPT4ge1xuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIGNvbnN0IHBpcGVsaW5lID0gbmV3IExlZ2FjeVRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJyk7XG4gICAgcGlwZWxpbmUuYWRkQXBwbGljYXRpb25TdGFnZShuZXcgT25lU3RhY2tBcHAocGlwZWxpbmVTdGFjaywgJ0FwcCcpLCB7IGNvbmZpcm1Ccm9hZGVuaW5nUGVybWlzc2lvbnM6IHRydWUgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnKTtcbiAgICBjb25zdCBzdGFnZSA9IG5ldyBPbmVTdGFja0FwcChwaXBlbGluZVN0YWNrLCAnQXBwJyk7XG4gICAgcGlwZWxpbmUuYWRkU3RhZ2Uoc3RhZ2UsIHtcbiAgICAgIHByZTogW1xuICAgICAgICBuZXcgY2RrcC5Db25maXJtUGVybWlzc2lvbnNCcm9hZGVuaW5nKCdDaGVjaycsIHtcbiAgICAgICAgICBzdGFnZSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICBmdW5jdGlvbiBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCkge1xuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZVBpcGVsaW5lOjpQaXBlbGluZScsIHtcbiAgICAgIFN0YWdlczogTWF0Y2guYXJyYXlXaXRoKFtcbiAgICAgICAge1xuICAgICAgICAgIE5hbWU6ICdBcHAnLFxuICAgICAgICAgIEFjdGlvbnM6IE1hdGNoLmFycmF5V2l0aChbXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgTmFtZTogc3RyaW5nTGlrZSgnKkNoZWNrJyksXG4gICAgICAgICAgICAgIENvbmZpZ3VyYXRpb246IE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgICAgICAgIEVudmlyb25tZW50VmFyaWFibGVzOiBNYXRjaC5zZXJpYWxpemVkSnNvbihbXG4gICAgICAgICAgICAgICAgICB7IG5hbWU6ICdTVEFHRV9QQVRIJywgdHlwZTogJ1BMQUlOVEVYVCcsIHZhbHVlOiAnUGlwZWxpbmVTZWN1cml0eVN0YWNrL0FwcCcgfSxcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1NUQUdFX05BTUUnLCB0eXBlOiAnUExBSU5URVhUJywgdmFsdWU6ICdBcHAnIH0sXG4gICAgICAgICAgICAgICAgICB7IG5hbWU6ICdBQ1RJT05fTkFNRScsIHR5cGU6ICdQTEFJTlRFWFQnLCB2YWx1ZTogTWF0Y2guYW55VmFsdWUoKSB9LFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0pLFxuICAgICAgICB9LFxuICAgICAgXSksXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5iZWhhdmlvcigncGlwZWxpbmUgY3JlYXRlZCB3aXRoIGF1dG8gYXBwcm92ZSB0YWdzIGFuZCBsYW1iZGEvY29kZWJ1aWxkIHcvIHZhbGlkIHBlcm1pc3Npb25zJywgKHN1aXRlKSA9PiB7XG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnKTtcbiAgICBwaXBlbGluZS5hZGRBcHBsaWNhdGlvblN0YWdlKG5ldyBPbmVTdGFja0FwcChhcHAsICdBcHAnKSwgeyBjb25maXJtQnJvYWRlbmluZ1Blcm1pc3Npb25zOiB0cnVlIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICBzdWl0ZS5tb2Rlcm4oKCkgPT4ge1xuICAgIGNvbnN0IHBpcGVsaW5lID0gbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJyk7XG4gICAgY29uc3Qgc3RhZ2UgPSBuZXcgT25lU3RhY2tBcHAoYXBwLCAnQXBwJyk7XG4gICAgcGlwZWxpbmUuYWRkU3RhZ2Uoc3RhZ2UsIHtcbiAgICAgIHByZTogW1xuICAgICAgICBuZXcgY2RrcC5Db25maXJtUGVybWlzc2lvbnNCcm9hZGVuaW5nKCdDaGVjaycsIHtcbiAgICAgICAgICBzdGFnZSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICBmdW5jdGlvbiBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCkge1xuICAgIC8vIENvZGVQaXBlbGluZSBtdXN0IGJlIHRhZ2dlZCBhcyBTRUNVUklUWV9DSEVDSz1BTExPV19BUFBST1ZFXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDb2RlUGlwZWxpbmU6OlBpcGVsaW5lJywge1xuICAgICAgVGFnczogW1xuICAgICAgICB7XG4gICAgICAgICAgS2V5OiAnU0VDVVJJVFlfQ0hFQ0snLFxuICAgICAgICAgIFZhbHVlOiAnQUxMT1dfQVBQUk9WRScsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuICAgIC8vIExhbWJkYSBGdW5jdGlvbiBvbmx5IGhhcyBhY2Nlc3MgdG8gcGlwZWxpbmVzIHRhZ2dlZCBTRUNVUklUWV9DSEVDSz1BTExPV19BUFBST1ZFXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlBvbGljeScsIHtcbiAgICAgIFBvbGljeURvY3VtZW50OiB7XG4gICAgICAgIFN0YXRlbWVudDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIEFjdGlvbjogWydjb2RlcGlwZWxpbmU6R2V0UGlwZWxpbmVTdGF0ZScsICdjb2RlcGlwZWxpbmU6UHV0QXBwcm92YWxSZXN1bHQnXSxcbiAgICAgICAgICAgIENvbmRpdGlvbjoge1xuICAgICAgICAgICAgICBTdHJpbmdFcXVhbHM6IHsgJ2F3czpSZXNvdXJjZVRhZy9TRUNVUklUWV9DSEVDSyc6ICdBTExPV19BUFBST1ZFJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICAgIFJlc291cmNlOiAnKicsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQ29kZUJ1aWxkIG11c3QgaGF2ZSBhY2Nlc3MgdG8gdGhlIHN0YWNrcyBhbmQgaW52b2tpbmcgdGhlIGxhbWJkYSBmdW5jdGlvblxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6SUFNOjpQb2xpY3knLCB7XG4gICAgICBQb2xpY3lEb2N1bWVudDoge1xuICAgICAgICBTdGF0ZW1lbnQ6IE1hdGNoLmFycmF5V2l0aChbXG4gICAgICAgICAge1xuICAgICAgICAgICAgQWN0aW9uOiAnc3RzOkFzc3VtZVJvbGUnLFxuICAgICAgICAgICAgQ29uZGl0aW9uOiB7XG4gICAgICAgICAgICAgICdGb3JBbnlWYWx1ZTpTdHJpbmdFcXVhbHMnOiB7XG4gICAgICAgICAgICAgICAgJ2lhbTpSZXNvdXJjZVRhZy9hd3MtY2RrOmJvb3RzdHJhcC1yb2xlJzogW1xuICAgICAgICAgICAgICAgICAgJ2RlcGxveScsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXG4gICAgICAgICAgICBSZXNvdXJjZTogJyonLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgQWN0aW9uOiAnbGFtYmRhOkludm9rZUZ1bmN0aW9uJyxcbiAgICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICAgIFJlc291cmNlOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAnRm46OkdldEF0dCc6IFtcbiAgICAgICAgICAgICAgICAgIHN0cmluZ0xpa2UoJypBdXRvQXBwcm92ZSonKSxcbiAgICAgICAgICAgICAgICAgICdBcm4nLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAnRm46OkpvaW4nOiBbXG4gICAgICAgICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICdGbjo6R2V0QXR0JzogW1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nTGlrZSgnKkF1dG9BcHByb3ZlKicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0FybicsXG4gICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJzoqJyxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSksXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59KTtcblxuYmVoYXZpb3IoJ2NvbmZpcm1Ccm9hZGVuaW5nUGVybWlzc2lvbnMgb3B0aW9uIGF0IGFkZEFwcGxpY2F0aW9uU3RhZ2UgcnVucyBzZWN1cml0eSBjaGVjayBvbiBhbGwgYXBwcyB1bmxlc3Mgb3ZlcnJpZGVuJywgKHN1aXRlKSA9PiB7XG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnKTtcbiAgICBjb25zdCBzZWN1cml0eVN0YWdlID0gcGlwZWxpbmUuYWRkQXBwbGljYXRpb25TdGFnZShuZXcgT25lU3RhY2tBcHAoYXBwLCAnU3RhZ2VTZWN1cml0eUNoZWNrU3RhY2snKSwgeyBjb25maXJtQnJvYWRlbmluZ1Blcm1pc3Npb25zOiB0cnVlIH0pO1xuICAgIHNlY3VyaXR5U3RhZ2UuYWRkQXBwbGljYXRpb24obmV3IE9uZVN0YWNrQXBwKGFwcCwgJ0Fub3RoZXJTdGFjaycpKTtcbiAgICBzZWN1cml0eVN0YWdlLmFkZEFwcGxpY2F0aW9uKG5ldyBPbmVTdGFja0FwcChhcHAsICdTa2lwQ2hlY2tTdGFjaycpLCB7IGNvbmZpcm1Ccm9hZGVuaW5nUGVybWlzc2lvbnM6IGZhbHNlIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICAvLyBGb3IgdGhlIG1vZGVybiBBUEksIHRoZXJlIGlzIG5vIGluaGVyaXRhbmNlXG4gIHN1aXRlLmRvZXNOb3RBcHBseS5tb2Rlcm4oKTtcblxuICBmdW5jdGlvbiBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCkge1xuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZVBpcGVsaW5lOjpQaXBlbGluZScsIHtcbiAgICAgIFN0YWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgQWN0aW9uczogW01hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnR2l0SHViJywgUnVuT3JkZXI6IDEgfSldLFxuICAgICAgICAgIE5hbWU6ICdTb3VyY2UnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgQWN0aW9uczogW01hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnU3ludGgnLCBSdW5PcmRlcjogMSB9KV0sXG4gICAgICAgICAgTmFtZTogJ0J1aWxkJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIEFjdGlvbnM6IFtNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1NlbGZNdXRhdGUnLCBSdW5PcmRlcjogMSB9KV0sXG4gICAgICAgICAgTmFtZTogJ1VwZGF0ZVBpcGVsaW5lJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIEFjdGlvbnM6IFtcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnU3RhZ2VTZWN1cml0eUNoZWNrU3RhY2tTZWN1cml0eUNoZWNrJywgUnVuT3JkZXI6IDEgfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1N0YWdlU2VjdXJpdHlDaGVja1N0YWNrTWFudWFsQXBwcm92YWwnLCBSdW5PcmRlcjogMiB9KSxcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnQW5vdGhlclN0YWNrU2VjdXJpdHlDaGVjaycsIFJ1bk9yZGVyOiA1IH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdBbm90aGVyU3RhY2tNYW51YWxBcHByb3ZhbCcsIFJ1bk9yZGVyOiA2IH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdTdGFjay5QcmVwYXJlJywgUnVuT3JkZXI6IDMgfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1N0YWNrLkRlcGxveScsIFJ1bk9yZGVyOiA0IH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdBbm90aGVyU3RhY2stU3RhY2suUHJlcGFyZScsIFJ1bk9yZGVyOiA3IH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdBbm90aGVyU3RhY2stU3RhY2suRGVwbG95JywgUnVuT3JkZXI6IDggfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1NraXBDaGVja1N0YWNrLVN0YWNrLlByZXBhcmUnLCBSdW5PcmRlcjogOSB9KSxcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnU2tpcENoZWNrU3RhY2stU3RhY2suRGVwbG95JywgUnVuT3JkZXI6IDEwIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgTmFtZTogJ1N0YWdlU2VjdXJpdHlDaGVja1N0YWNrJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5iZWhhdmlvcignY29uZmlybUJyb2FkZW5pbmdQZXJtaXNzaW9ucyBvcHRpb24gYXQgYWRkQXBwbGljYXRpb24gcnVucyBzZWN1cml0eSBjaGVjayBvbmx5IG9uIHNlbGVjdGVkIGFwcGxpY2F0aW9uJywgKHN1aXRlKSA9PiB7XG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnKTtcbiAgICBjb25zdCBub1NlY3VyaXR5U3RhZ2UgPSBwaXBlbGluZS5hZGRBcHBsaWNhdGlvblN0YWdlKG5ldyBPbmVTdGFja0FwcChhcHAsICdOb1NlY3VyaXR5Q2hlY2tTdGFjaycpKTtcbiAgICBub1NlY3VyaXR5U3RhZ2UuYWRkQXBwbGljYXRpb24obmV3IE9uZVN0YWNrQXBwKGFwcCwgJ0VuYWJsZUNoZWNrU3RhY2snKSwgeyBjb25maXJtQnJvYWRlbmluZ1Blcm1pc3Npb25zOiB0cnVlIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICAvLyBGb3IgdGhlIG1vZGVybiBBUEksIHRoZXJlIGlzIG5vIGluaGVyaXRhbmNlXG4gIHN1aXRlLmRvZXNOb3RBcHBseS5tb2Rlcm4oKTtcblxuICBmdW5jdGlvbiBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCkge1xuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZVBpcGVsaW5lOjpQaXBlbGluZScsIHtcbiAgICAgIFN0YWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgQWN0aW9uczogW01hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnR2l0SHViJywgUnVuT3JkZXI6IDEgfSldLFxuICAgICAgICAgIE5hbWU6ICdTb3VyY2UnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgQWN0aW9uczogW01hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnU3ludGgnLCBSdW5PcmRlcjogMSB9KV0sXG4gICAgICAgICAgTmFtZTogJ0J1aWxkJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIEFjdGlvbnM6IFtNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1NlbGZNdXRhdGUnLCBSdW5PcmRlcjogMSB9KV0sXG4gICAgICAgICAgTmFtZTogJ1VwZGF0ZVBpcGVsaW5lJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIEFjdGlvbnM6IFtcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnRW5hYmxlQ2hlY2tTdGFja1NlY3VyaXR5Q2hlY2snLCBSdW5PcmRlcjogMyB9KSxcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnRW5hYmxlQ2hlY2tTdGFja01hbnVhbEFwcHJvdmFsJywgUnVuT3JkZXI6IDQgfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1N0YWNrLlByZXBhcmUnLCBSdW5PcmRlcjogMSB9KSxcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnU3RhY2suRGVwbG95JywgUnVuT3JkZXI6IDIgfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ0VuYWJsZUNoZWNrU3RhY2stU3RhY2suUHJlcGFyZScsIFJ1bk9yZGVyOiA1IH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdFbmFibGVDaGVja1N0YWNrLVN0YWNrLkRlcGxveScsIFJ1bk9yZGVyOiA2IH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgTmFtZTogJ05vU2VjdXJpdHlDaGVja1N0YWNrJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5iZWhhdmlvcignY29uZmlybUJyb2FkZW5pbmdQZXJtaXNzaW9ucyBhbmQgbm90aWZpY2F0aW9uIHRvcGljIG9wdGlvbnMgZ2VuZXJhdGVzIHRoZSByaWdodCByZXNvdXJjZXMnLCAoc3VpdGUpID0+IHtcbiAgc3VpdGUubGVnYWN5KCgpID0+IHtcbiAgICBjb25zdCBwaXBlbGluZSA9IG5ldyBMZWdhY3lUZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycpO1xuICAgIGNvbnN0IHRvcGljID0gbmV3IFRvcGljKHBpcGVsaW5lU3RhY2ssICdOb3RpZmljYXRpb25Ub3BpYycpO1xuICAgIHBpcGVsaW5lLmFkZEFwcGxpY2F0aW9uU3RhZ2UobmV3IE9uZVN0YWNrQXBwKGFwcCwgJ015U3RhY2snKSwge1xuICAgICAgY29uZmlybUJyb2FkZW5pbmdQZXJtaXNzaW9uczogdHJ1ZSxcbiAgICAgIHNlY3VyaXR5Tm90aWZpY2F0aW9uVG9waWM6IHRvcGljLFxuICAgIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICBzdWl0ZS5tb2Rlcm4oKCkgPT4ge1xuICAgIGNvbnN0IHBpcGVsaW5lID0gbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJyk7XG4gICAgY29uc3QgdG9waWMgPSBuZXcgVG9waWMocGlwZWxpbmVTdGFjaywgJ05vdGlmaWNhdGlvblRvcGljJyk7XG4gICAgY29uc3Qgc3RhZ2UgPSBuZXcgT25lU3RhY2tBcHAoYXBwLCAnTXlTdGFjaycpO1xuICAgIHBpcGVsaW5lLmFkZFN0YWdlKHN0YWdlLCB7XG4gICAgICBwcmU6IFtcbiAgICAgICAgbmV3IGNka3AuQ29uZmlybVBlcm1pc3Npb25zQnJvYWRlbmluZygnQXBwcm92ZScsIHtcbiAgICAgICAgICBzdGFnZSxcbiAgICAgICAgICBub3RpZmljYXRpb25Ub3BpYzogdG9waWMsXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpIHtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OlNOUzo6VG9waWMnLCAxKTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVQaXBlbGluZTo6UGlwZWxpbmUnLCB7XG4gICAgICBTdGFnZXM6IE1hdGNoLmFycmF5V2l0aChbXG4gICAgICAgIHtcbiAgICAgICAgICBOYW1lOiAnTXlTdGFjaycsXG4gICAgICAgICAgQWN0aW9uczogW1xuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgICAgIENvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgICAgICBQcm9qZWN0TmFtZTogeyBSZWY6IHN0cmluZ0xpa2UoJypTZWN1cml0eUNoZWNrKicpIH0sXG4gICAgICAgICAgICAgICAgRW52aXJvbm1lbnRWYXJpYWJsZXM6IHtcbiAgICAgICAgICAgICAgICAgICdGbjo6Sm9pbic6IFsnJywgW1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdMaWtlKCcqJyksXG4gICAgICAgICAgICAgICAgICAgIHsgUmVmOiAnTm90aWZpY2F0aW9uVG9waWNFQjdBMERGMScgfSxcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nTGlrZSgnKicpLFxuICAgICAgICAgICAgICAgICAgXV0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgTmFtZTogc3RyaW5nTGlrZSgnKkNoZWNrJyksXG4gICAgICAgICAgICAgIE5hbWVzcGFjZTogc3RyaW5nTGlrZSgnKicpLFxuICAgICAgICAgICAgICBSdW5PcmRlcjogMSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgICAgIENvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgICAgICBDdXN0b21EYXRhOiBzdHJpbmdMaWtlKCcjeyouTUVTU0FHRX0nKSxcbiAgICAgICAgICAgICAgICBFeHRlcm5hbEVudGl0eUxpbms6IHN0cmluZ0xpa2UoJyN7Ki5MSU5LfScpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBOYW1lOiBzdHJpbmdMaWtlKCcqQXBwcm92KicpLFxuICAgICAgICAgICAgICBSdW5PcmRlcjogMixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdTdGFjay5QcmVwYXJlJywgUnVuT3JkZXI6IDMgfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1N0YWNrLkRlcGxveScsIFJ1bk9yZGVyOiA0IH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdKSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdTdGFnZXMgZGVjbGFyZWQgb3V0c2lkZSB0aGUgcGlwZWxpbmUgY3JlYXRlIHRoZWlyIG93biBBcHBsaWNhdGlvblNlY3VyaXR5Q2hlY2snLCAoc3VpdGUpID0+IHtcbiAgc3VpdGUubGVnYWN5KCgpID0+IHtcbiAgICBjb25zdCBwaXBlbGluZSA9IG5ldyBMZWdhY3lUZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycpO1xuICAgIGNvbnN0IHBpcGVsaW5lU3RhZ2UgPSBwaXBlbGluZS5jb2RlUGlwZWxpbmUuYWRkU3RhZ2Uoe1xuICAgICAgc3RhZ2VOYW1lOiAnVW5hdHRhY2hlZFN0YWdlJyxcbiAgICB9KTtcblxuICAgIGNvbnN0IHVuYXR0YWNoZWRTdGFnZSA9IG5ldyBjZGtwLkNka1N0YWdlKHBpcGVsaW5lU3RhY2ssICdVbmF0dGFjaGVkU3RhZ2UnLCB7XG4gICAgICBzdGFnZU5hbWU6ICdVbmF0dGFjaGVkU3RhZ2UnLFxuICAgICAgcGlwZWxpbmVTdGFnZSxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdDogcGlwZWxpbmUuY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgaG9zdDoge1xuICAgICAgICBwdWJsaXNoQXNzZXQ6ICgpID0+IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhY2tPdXRwdXRBcnRpZmFjdDogKCkgPT4gdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHVuYXR0YWNoZWRTdGFnZS5hZGRBcHBsaWNhdGlvbihuZXcgT25lU3RhY2tBcHAoYXBwLCAnVW5hdHRhY2hlZFN0YWdlJyksIHtcbiAgICAgIGNvbmZpcm1Ccm9hZGVuaW5nUGVybWlzc2lvbnM6IHRydWUsXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIC8vIE5vdCBhIHZhbGlkIHVzZSBvZiB0aGUgbW9kZXJuIEFQSVxuICBzdWl0ZS5kb2VzTm90QXBwbHkubW9kZXJuKCk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpIHtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykucmVzb3VyY2VDb3VudElzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCAxKTtcbiAgICAvLyAxIGZvciBnaXRodWIgYnVpbGQsIDEgZm9yIHN5bnRoIHN0YWdlLCBhbmQgMSBmb3IgdGhlIGFwcGxpY2F0aW9uIHNlY3VyaXR5IGNoZWNrXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLnJlc291cmNlQ291bnRJcygnQVdTOjpDb2RlQnVpbGQ6OlByb2plY3QnLCAzKTtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVQaXBlbGluZTo6UGlwZWxpbmUnLCB7XG4gICAgICBUYWdzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBLZXk6ICdTRUNVUklUWV9DSEVDSycsXG4gICAgICAgICAgVmFsdWU6ICdBTExPV19BUFBST1ZFJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBTdGFnZXM6IFtcbiAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdTb3VyY2UnIH0pLFxuICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ0J1aWxkJyB9KSxcbiAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdVcGRhdGVQaXBlbGluZScgfSksXG4gICAgICAgIHtcbiAgICAgICAgICBBY3Rpb25zOiBbXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgQ29uZmlndXJhdGlvbjoge1xuICAgICAgICAgICAgICAgIFByb2plY3ROYW1lOiB7IFJlZjogJ1VuYXR0YWNoZWRTdGFnZVN0YWdlQXBwbGljYXRpb25TZWN1cml0eUNoZWNrQ0RLU2VjdXJpdHlDaGVja0FEQ0U3OTVCJyB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBOYW1lOiAnVW5hdHRhY2hlZFN0YWdlU2VjdXJpdHlDaGVjaycsXG4gICAgICAgICAgICAgIFJ1bk9yZGVyOiAxLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgQ29uZmlndXJhdGlvbjoge1xuICAgICAgICAgICAgICAgIEN1c3RvbURhdGE6ICcje1VuYXR0YWNoZWRTdGFnZVNlY3VyaXR5Q2hlY2suTUVTU0FHRX0nLFxuICAgICAgICAgICAgICAgIEV4dGVybmFsRW50aXR5TGluazogJyN7VW5hdHRhY2hlZFN0YWdlU2VjdXJpdHlDaGVjay5MSU5LfScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIE5hbWU6ICdVbmF0dGFjaGVkU3RhZ2VNYW51YWxBcHByb3ZhbCcsXG4gICAgICAgICAgICAgIFJ1bk9yZGVyOiAyLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgTmFtZTogJ1N0YWNrLlByZXBhcmUnLCBSdW5PcmRlcjogMyB9KSxcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2UoeyBOYW1lOiAnU3RhY2suRGVwbG95JywgUnVuT3JkZXI6IDQgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBOYW1lOiAnVW5hdHRhY2hlZFN0YWdlJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cbn0pOyJdfQ==