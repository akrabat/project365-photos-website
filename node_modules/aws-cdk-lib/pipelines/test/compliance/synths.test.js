"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("../../../assertions");
const cbuild = require("../../../aws-codebuild");
const codepipeline = require("../../../aws-codepipeline");
const ec2 = require("../../../aws-ec2");
const ecr = require("../../../aws-ecr");
const iam = require("../../../aws-iam");
const s3 = require("../../../aws-s3");
const core_1 = require("../../../core");
const cdkp = require("../../lib");
const lib_1 = require("../../lib");
const default_codebuild_image_1 = require("../../lib/private/default-codebuild-image");
const testhelpers_1 = require("../testhelpers");
let app;
let pipelineStack;
let sourceArtifact;
let cloudAssemblyArtifact;
// Must be unique across all test files, but preferably also consistent
const OUTDIR = 'testcdk0.out';
// What phase install commands get rendered to
const LEGACY_INSTALLS = 'pre_build';
const MODERN_INSTALLS = 'install';
beforeEach(() => {
    app = new testhelpers_1.TestApp({ outdir: OUTDIR });
    pipelineStack = new core_1.Stack(app, 'PipelineStack', { env: testhelpers_1.PIPELINE_ENV });
    sourceArtifact = new codepipeline.Artifact();
    cloudAssemblyArtifact = new codepipeline.Artifact('CloudAsm');
});
afterEach(() => {
    app.cleanup();
});
(0, testhelpers_1.behavior)('synth takes arrays of commands', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: new cdkp.SimpleSynthAction({
                sourceArtifact,
                cloudAssemblyArtifact,
                installCommands: ['install1', 'install2'],
                buildCommands: ['build1', 'build2'],
                testCommands: ['test1', 'test2'],
                synthCommand: 'cdk synth',
            }),
        });
        THEN_codePipelineExpectation(LEGACY_INSTALLS);
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            installCommands: ['install1', 'install2'],
            commands: ['build1', 'build2', 'test1', 'test2', 'cdk synth'],
        });
        THEN_codePipelineExpectation(MODERN_INSTALLS);
    });
    function THEN_codePipelineExpectation(installPhase) {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
            },
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        [installPhase]: {
                            commands: [
                                'install1',
                                'install2',
                            ],
                        },
                        build: {
                            commands: [
                                'build1',
                                'build2',
                                'test1',
                                'test2',
                                'cdk synth',
                            ],
                        },
                    },
                })),
            },
        });
    }
});
(0, testhelpers_1.behavior)('synth sets artifact base-directory to cdk.out', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({ sourceArtifact, cloudAssemblyArtifact }),
        });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
            },
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    artifacts: {
                        'base-directory': 'cdk.out',
                    },
                })),
            },
        });
    }
});
(0, testhelpers_1.behavior)('synth supports setting subdirectory', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                sourceArtifact,
                cloudAssemblyArtifact,
                subdirectory: 'subdir',
            }),
        });
        THEN_codePipelineExpectation(LEGACY_INSTALLS);
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            installCommands: ['cd subdir'],
            commands: ['true'],
            primaryOutputDirectory: 'subdir/cdk.out',
        });
        THEN_codePipelineExpectation(MODERN_INSTALLS);
    });
    function THEN_codePipelineExpectation(installPhase) {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
            },
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        [installPhase]: {
                            commands: assertions_1.Match.arrayWith(['cd subdir']),
                        },
                    },
                    artifacts: {
                        'base-directory': 'subdir/cdk.out',
                    },
                })),
            },
        });
    }
});
(0, testhelpers_1.behavior)('npm synth sets, or allows setting, UNSAFE_PERM=true', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                sourceArtifact,
                cloudAssemblyArtifact,
            }),
        });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            env: {
                NPM_CONFIG_UNSAFE_PERM: 'true',
            },
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                EnvironmentVariables: [
                    {
                        Name: 'NPM_CONFIG_UNSAFE_PERM',
                        Type: 'PLAINTEXT',
                        Value: 'true',
                    },
                ],
            },
        });
    }
});
(0, testhelpers_1.behavior)('synth assumes a JavaScript project by default (no build, yes synth)', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({ sourceArtifact, cloudAssemblyArtifact }),
        });
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
            },
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        pre_build: {
                            commands: ['npm ci'],
                        },
                        build: {
                            commands: ['npx cdk synth'],
                        },
                    },
                })),
            },
        });
    });
    // Modern pipeline does not assume anything anymore
    suite.doesNotApply.modern();
});
(0, testhelpers_1.behavior)('Magic CodePipeline variables passed to synth envvars must be rendered in the action', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: new cdkp.SimpleSynthAction({
                sourceArtifact,
                cloudAssemblyArtifact,
                environmentVariables: {
                    VERSION: { value: codepipeline.GlobalVariables.executionId },
                },
                synthCommand: 'synth',
            }),
        });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            env: {
                VERSION: codepipeline.GlobalVariables.executionId,
            },
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Stages: assertions_1.Match.arrayWith([{
                    Name: 'Build',
                    Actions: [
                        assertions_1.Match.objectLike({
                            Name: 'Synth',
                            Configuration: assertions_1.Match.objectLike({
                                EnvironmentVariables: assertions_1.Match.serializedJson(assertions_1.Match.arrayWith([
                                    {
                                        name: 'VERSION',
                                        type: 'PLAINTEXT',
                                        value: '#{codepipeline.PipelineExecutionId}',
                                    },
                                ])),
                            }),
                        }),
                    ],
                }]),
        });
    }
});
(0, testhelpers_1.behavior)('CodeBuild: environment variables specified in multiple places are correctly merged', (suite) => {
    // We don't support merging environment variables in this way in the legacy API
    suite.doesNotApply.legacy();
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: new lib_1.CodeBuildStep('Synth', {
                env: {
                    SOME_ENV_VAR: 'SomeValue',
                },
                installCommands: [
                    'install1',
                    'install2',
                ],
                commands: ['synth'],
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                primaryOutputDirectory: 'cdk.out',
                buildEnvironment: {
                    environmentVariables: {
                        INNER_VAR: { value: 'InnerValue' },
                    },
                    privileged: true,
                },
            }),
        });
        THEN_codePipelineExpectation(MODERN_INSTALLS);
    });
    suite.additional('modern2, using the specific CodeBuild action', () => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: new cdkp.CodeBuildStep('Synth', {
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                primaryOutputDirectory: '.',
                env: {
                    SOME_ENV_VAR: 'SomeValue',
                },
                installCommands: [
                    'install1',
                    'install2',
                ],
                commands: ['synth'],
                buildEnvironment: {
                    environmentVariables: {
                        INNER_VAR: { value: 'InnerValue' },
                    },
                    privileged: true,
                },
            }),
        });
        THEN_codePipelineExpectation(MODERN_INSTALLS);
    });
    function THEN_codePipelineExpectation(installPhase) {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: assertions_1.Match.objectLike({
                PrivilegedMode: true,
                EnvironmentVariables: assertions_1.Match.arrayWith([
                    {
                        Name: 'INNER_VAR',
                        Type: 'PLAINTEXT',
                        Value: 'InnerValue',
                    },
                    {
                        Name: 'SOME_ENV_VAR',
                        Type: 'PLAINTEXT',
                        Value: 'SomeValue',
                    },
                ]),
            }),
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        [installPhase]: {
                            commands: ['install1', 'install2'],
                        },
                        build: {
                            commands: ['synth'],
                        },
                    },
                })),
            },
        });
    }
});
(0, testhelpers_1.behavior)('install command can be overridden/specified', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                sourceArtifact,
                cloudAssemblyArtifact,
                installCommand: '/bin/true',
            }),
        });
        THEN_codePipelineExpectation(LEGACY_INSTALLS);
    });
    suite.modern(() => {
        // WHEN
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            installCommands: ['/bin/true'],
        });
        THEN_codePipelineExpectation(MODERN_INSTALLS);
    });
    function THEN_codePipelineExpectation(installPhase) {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
            },
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        [installPhase]: {
                            commands: ['/bin/true'],
                        },
                    },
                })),
            },
        });
    }
});
(0, testhelpers_1.behavior)('synth can have its test commands set', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                sourceArtifact,
                cloudAssemblyArtifact,
                installCommand: '/bin/true',
                testCommands: ['echo "Running tests"'],
            }),
        });
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
            },
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        pre_build: {
                            commands: ['/bin/true'],
                        },
                        build: {
                            commands: ['echo "Running tests"', 'npx cdk synth'],
                        },
                    },
                })),
            },
        });
    });
    // There are no implicit commands in modern synth
    suite.doesNotApply.modern();
});
(0, testhelpers_1.behavior)('Synth can output additional artifacts', (suite) => {
    suite.legacy(() => {
        // WHEN
        const addlArtifact = new codepipeline.Artifact('IntegTest');
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                sourceArtifact,
                cloudAssemblyArtifact,
                additionalArtifacts: [
                    {
                        artifact: addlArtifact,
                        directory: 'test',
                    },
                ],
            }),
        });
        THEN_codePipelineExpectation('CloudAsm', 'IntegTest');
    });
    suite.modern(() => {
        // WHEN
        const synth = new cdkp.ShellStep('Synth', {
            input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
            commands: ['cdk synth'],
        });
        synth.addOutputDirectory('test');
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: synth,
        });
        THEN_codePipelineExpectation('Synth_Output', 'Synth_test');
    });
    function THEN_codePipelineExpectation(asmArtifact, testArtifact) {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: {
                Image: default_codebuild_image_1.CDKP_DEFAULT_CODEBUILD_IMAGE.imageId,
            },
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    artifacts: {
                        'secondary-artifacts': {
                            [asmArtifact]: {
                                'base-directory': 'cdk.out',
                                'files': '**/*',
                            },
                            [testArtifact]: {
                                'base-directory': 'test',
                                'files': '**/*',
                            },
                        },
                    },
                })),
            },
        });
    }
});
(0, testhelpers_1.behavior)('Synth can be made to run in a VPC', (suite) => {
    let vpc;
    beforeEach(() => {
        vpc = new ec2.Vpc(pipelineStack, 'NpmSynthTestVpc');
    });
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                vpc,
                sourceArtifact,
                cloudAssemblyArtifact,
            }),
        });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            codeBuildDefaults: { vpc },
        });
        THEN_codePipelineExpectation();
    });
    suite.additional('Modern, using the synthCodeBuildDefaults', () => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synthCodeBuildDefaults: { vpc },
        });
        THEN_codePipelineExpectation();
    });
    suite.additional('Modern, using CodeBuildStep', () => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: new lib_1.CodeBuildStep('Synth', {
                commands: ['asdf'],
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                primaryOutputDirectory: 'cdk.out',
                buildEnvironment: {
                    computeType: cbuild.ComputeType.LARGE,
                },
            }),
            codeBuildDefaults: { vpc },
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            VpcConfig: {
                SecurityGroupIds: [
                    { 'Fn::GetAtt': ['CdkPipelineBuildSynthCdkBuildProjectSecurityGroupEA44D7C2', 'GroupId'] },
                ],
                Subnets: [
                    { Ref: 'NpmSynthTestVpcPrivateSubnet1Subnet81E3AA56' },
                    { Ref: 'NpmSynthTestVpcPrivateSubnet2SubnetC1CA3EF0' },
                    { Ref: 'NpmSynthTestVpcPrivateSubnet3SubnetA04163EE' },
                ],
                VpcId: { Ref: 'NpmSynthTestVpc5E703F25' },
            },
        });
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::IAM::Policy', {
            Roles: [
                { Ref: 'CdkPipelineBuildSynthCdkBuildProjectRole5E173C62' },
            ],
            PolicyDocument: {
                Statement: assertions_1.Match.arrayWith([{
                        Action: assertions_1.Match.arrayWith(['ec2:DescribeSecurityGroups']),
                        Effect: 'Allow',
                        Resource: '*',
                    }]),
            },
        });
    }
});
(0, testhelpers_1.behavior)('Pipeline action contains a hash that changes as the buildspec changes', (suite) => {
    suite.legacy(() => {
        const hash1 = legacySynthWithAction((sa, cxa) => cdkp.SimpleSynthAction.standardNpmSynth({
            sourceArtifact: sa,
            cloudAssemblyArtifact: cxa,
        }));
        // To make sure the hash is not just random :)
        const hash1prime = legacySynthWithAction((sa, cxa) => cdkp.SimpleSynthAction.standardNpmSynth({
            sourceArtifact: sa,
            cloudAssemblyArtifact: cxa,
        }));
        const hash2 = legacySynthWithAction((sa, cxa) => cdkp.SimpleSynthAction.standardNpmSynth({
            sourceArtifact: sa,
            cloudAssemblyArtifact: cxa,
            installCommand: 'do install',
        }));
        const hash3 = legacySynthWithAction((sa, cxa) => cdkp.SimpleSynthAction.standardNpmSynth({
            sourceArtifact: sa,
            cloudAssemblyArtifact: cxa,
            environment: {
                computeType: cbuild.ComputeType.LARGE,
            },
        }));
        const hash4 = legacySynthWithAction((sa, cxa) => cdkp.SimpleSynthAction.standardNpmSynth({
            sourceArtifact: sa,
            cloudAssemblyArtifact: cxa,
            environment: {
                environmentVariables: {
                    xyz: { value: 'SOME-VALUE' },
                },
            },
        }));
        expect(hash1).toEqual(hash1prime);
        expect(hash1).not.toEqual(hash2);
        expect(hash1).not.toEqual(hash3);
        expect(hash1).not.toEqual(hash4);
        expect(hash2).not.toEqual(hash3);
        expect(hash2).not.toEqual(hash4);
        expect(hash3).not.toEqual(hash4);
    });
    suite.modern(() => {
        const hash1 = modernSynthWithAction(() => ({ commands: ['asdf'] }));
        // To make sure the hash is not just random :)
        const hash1prime = modernSynthWithAction(() => ({ commands: ['asdf'] }));
        const hash2 = modernSynthWithAction(() => ({
            installCommands: ['do install'],
        }));
        const hash3 = modernSynthWithAction(() => ({
            synth: new lib_1.CodeBuildStep('Synth', {
                commands: ['asdf'],
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                primaryOutputDirectory: 'cdk.out',
                buildEnvironment: {
                    computeType: cbuild.ComputeType.LARGE,
                },
            }),
        }));
        const hash4 = modernSynthWithAction(() => ({
            env: {
                xyz: 'SOME-VALUE',
            },
        }));
        expect(hash1).toEqual(hash1prime);
        expect(hash1).not.toEqual(hash2);
        expect(hash1).not.toEqual(hash3);
        expect(hash1).not.toEqual(hash4);
        expect(hash2).not.toEqual(hash3);
        expect(hash2).not.toEqual(hash4);
        expect(hash3).not.toEqual(hash4);
    });
    // eslint-disable-next-line max-len
    function legacySynthWithAction(cb) {
        const _app = new testhelpers_1.TestApp({ outdir: OUTDIR });
        const _pipelineStack = new core_1.Stack(_app, 'PipelineStack', { env: testhelpers_1.PIPELINE_ENV });
        const _sourceArtifact = new codepipeline.Artifact();
        const _cloudAssemblyArtifact = new codepipeline.Artifact('CloudAsm');
        new testhelpers_1.LegacyTestGitHubNpmPipeline(_pipelineStack, 'Cdk', {
            sourceArtifact: _sourceArtifact,
            cloudAssemblyArtifact: _cloudAssemblyArtifact,
            synthAction: cb(_sourceArtifact, _cloudAssemblyArtifact),
        });
        return captureProjectConfigHash(_pipelineStack);
    }
    function modernSynthWithAction(cb) {
        const _app = new testhelpers_1.TestApp({ outdir: OUTDIR });
        const _pipelineStack = new core_1.Stack(_app, 'PipelineStack', { env: testhelpers_1.PIPELINE_ENV });
        new testhelpers_1.ModernTestGitHubNpmPipeline(_pipelineStack, 'Cdk', cb());
        return captureProjectConfigHash(_pipelineStack);
    }
    function captureProjectConfigHash(_pipelineStack) {
        const theHash = new assertions_1.Capture();
        assertions_1.Template.fromStack(_pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Stages: assertions_1.Match.arrayWith([{
                    Name: 'Build',
                    Actions: [
                        assertions_1.Match.objectLike({
                            Name: 'Synth',
                            Configuration: assertions_1.Match.objectLike({
                                EnvironmentVariables: assertions_1.Match.serializedJson([
                                    {
                                        name: '_PROJECT_CONFIG_HASH',
                                        type: 'PLAINTEXT',
                                        value: theHash,
                                    },
                                ]),
                            }),
                        }),
                    ],
                }]),
        });
        return theHash.asString();
    }
});
(0, testhelpers_1.behavior)('Synth CodeBuild project role can be granted permissions', (suite) => {
    let bucket;
    beforeEach(() => {
        bucket = s3.Bucket.fromBucketArn(pipelineStack, 'Bucket', 'arn:aws:s3:::this-particular-bucket');
    });
    suite.legacy(() => {
        // GIVEN
        const synthAction = cdkp.SimpleSynthAction.standardNpmSynth({
            sourceArtifact,
            cloudAssemblyArtifact,
        });
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction,
        });
        // WHEN
        bucket.grantRead(synthAction);
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        // GIVEN
        const pipe = new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk');
        pipe.buildPipeline();
        // WHEN
        bucket.grantRead(pipe.synthProject);
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Statement: assertions_1.Match.arrayWith([assertions_1.Match.objectLike({
                        Action: ['s3:GetObject*', 's3:GetBucket*', 's3:List*'],
                        Resource: ['arn:aws:s3:::this-particular-bucket', 'arn:aws:s3:::this-particular-bucket/*'],
                    })]),
            },
        });
    }
});
(0, testhelpers_1.behavior)('Synth can reference an imported ECR repo', (suite) => {
    // Repro from https://github.com/aws/aws-cdk/issues/10535
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                sourceArtifact,
                cloudAssemblyArtifact,
                environment: {
                    buildImage: cbuild.LinuxBuildImage.fromEcrRepository(ecr.Repository.fromRepositoryName(pipelineStack, 'ECRImage', 'my-repo-name')),
                },
            }),
        });
        // THEN -- no exception (necessary for linter)
        expect(true).toBeTruthy();
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: new cdkp.CodeBuildStep('Synth', {
                commands: ['build'],
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                primaryOutputDirectory: 'cdk.out',
                buildEnvironment: {
                    buildImage: cbuild.LinuxBuildImage.fromEcrRepository(ecr.Repository.fromRepositoryName(pipelineStack, 'ECRImage', 'my-repo-name')),
                },
            }),
        });
        // THEN -- no exception (necessary for linter)
        expect(true).toBeTruthy();
    });
});
(0, testhelpers_1.behavior)('CodeBuild: Can specify additional policy statements', (suite) => {
    suite.legacy(() => {
        // WHEN
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: cdkp.SimpleSynthAction.standardNpmSynth({
                sourceArtifact,
                cloudAssemblyArtifact,
                rolePolicyStatements: [
                    new iam.PolicyStatement({
                        actions: ['codeartifact:*', 'sts:GetServiceBearerToken'],
                        resources: ['arn:my:arn'],
                    }),
                ],
            }),
        });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        // WHEN
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: new cdkp.CodeBuildStep('Synth', {
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                primaryOutputDirectory: '.',
                commands: ['synth'],
                rolePolicyStatements: [
                    new iam.PolicyStatement({
                        actions: ['codeartifact:*', 'sts:GetServiceBearerToken'],
                        resources: ['arn:my:arn'],
                    }),
                ],
            }),
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Statement: assertions_1.Match.arrayWith([assertions_1.Match.objectLike({
                        Action: [
                            'codeartifact:*',
                            'sts:GetServiceBearerToken',
                        ],
                        Resource: 'arn:my:arn',
                    })]),
            },
        });
    }
});
(0, testhelpers_1.behavior)('Multiple input sources in side-by-side directories', (suite) => {
    // Legacy API does not support this
    suite.doesNotApply.legacy();
    suite.modern(() => {
        // WHEN
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: new cdkp.ShellStep('Synth', {
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                commands: ['false'],
                additionalInputs: {
                    '../sibling': cdkp.CodePipelineSource.gitHub('foo/bar', 'main'),
                    'sub': new cdkp.ShellStep('Prebuild', {
                        input: cdkp.CodePipelineSource.gitHub('pre/build', 'main'),
                        commands: ['true'],
                        primaryOutputDirectory: 'built',
                    }),
                },
            }),
        });
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodePipeline::Pipeline', {
            Stages: assertions_1.Match.arrayWith([
                {
                    Name: 'Source',
                    Actions: [
                        assertions_1.Match.objectLike({ Configuration: assertions_1.Match.objectLike({ Repo: 'bar' }) }),
                        assertions_1.Match.objectLike({ Configuration: assertions_1.Match.objectLike({ Repo: 'build' }) }),
                        assertions_1.Match.objectLike({ Configuration: assertions_1.Match.objectLike({ Repo: 'test' }) }),
                    ],
                },
                {
                    Name: 'Build',
                    Actions: [
                        assertions_1.Match.objectLike({ Name: 'Prebuild', RunOrder: 1 }),
                        assertions_1.Match.objectLike({
                            Name: 'Synth',
                            RunOrder: 2,
                            InputArtifacts: [
                                // 3 input artifacts
                                assertions_1.Match.anyValue(),
                                assertions_1.Match.anyValue(),
                                assertions_1.Match.anyValue(),
                            ],
                        }),
                    ],
                },
            ]),
        });
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        install: {
                            commands: [
                                '[ ! -d "../sibling" ] || { echo \'additionalInputs: "../sibling" must not exist yet. If you want to merge multiple artifacts, use a "cp" command.\'; exit 1; } && ln -s -- "$CODEBUILD_SRC_DIR_foo_bar_Source" "../sibling"',
                                '[ ! -d "sub" ] || { echo \'additionalInputs: "sub" must not exist yet. If you want to merge multiple artifacts, use a "cp" command.\'; exit 1; } && ln -s -- "$CODEBUILD_SRC_DIR_Prebuild_Output" "sub"',
                            ],
                        },
                        build: {
                            commands: [
                                'false',
                            ],
                        },
                    },
                })),
            },
        });
    });
});
(0, testhelpers_1.behavior)('Can easily switch on privileged mode for synth', (suite) => {
    // Legacy API does not support this
    suite.doesNotApply.legacy();
    suite.modern(() => {
        // WHEN
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            dockerEnabledForSynth: true,
            commands: ['LookAtMe'],
        });
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: assertions_1.Match.objectLike({
                PrivilegedMode: true,
            }),
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    phases: {
                        build: {
                            commands: [
                                'LookAtMe',
                            ],
                        },
                    },
                })),
            },
        });
    });
});
(0, testhelpers_1.behavior)('can provide custom BuildSpec that is merged with generated one', (suite) => {
    suite.legacy(() => {
        new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: new cdkp.SimpleSynthAction({
                sourceArtifact,
                cloudAssemblyArtifact,
                environmentVariables: {
                    SOME_ENV_VAR: { value: 'SomeValue' },
                },
                environment: {
                    environmentVariables: {
                        INNER_VAR: { value: 'InnerValue' },
                    },
                    privileged: true,
                },
                installCommands: [
                    'install1',
                    'install2',
                ],
                synthCommand: 'synth',
                buildSpec: cbuild.BuildSpec.fromObject({
                    env: {
                        variables: {
                            FOO: 'bar',
                        },
                    },
                    phases: {
                        pre_build: {
                            commands: 'installCustom',
                        },
                    },
                    cache: {
                        paths: ['node_modules'],
                    },
                }),
            }),
        });
        THEN_codePipelineExpectation();
    });
    suite.modern(() => {
        new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            synth: new cdkp.CodeBuildStep('Synth', {
                input: cdkp.CodePipelineSource.gitHub('test/test', 'main'),
                env: {
                    SOME_ENV_VAR: 'SomeValue',
                },
                buildEnvironment: {
                    environmentVariables: {
                        INNER_VAR: { value: 'InnerValue' },
                    },
                    privileged: true,
                },
                installCommands: [
                    'install1',
                    'install2',
                ],
                commands: ['synth'],
                partialBuildSpec: cbuild.BuildSpec.fromObject({
                    env: {
                        variables: {
                            FOO: 'bar',
                        },
                    },
                    phases: {
                        pre_build: {
                            commands: ['installCustom'],
                        },
                    },
                    cache: {
                        paths: ['node_modules'],
                    },
                }),
            }),
        });
        THEN_codePipelineExpectation();
    });
    function THEN_codePipelineExpectation() {
        // THEN
        assertions_1.Template.fromStack(pipelineStack).hasResourceProperties('AWS::CodeBuild::Project', {
            Environment: assertions_1.Match.objectLike({
                PrivilegedMode: true,
                EnvironmentVariables: assertions_1.Match.arrayWith([
                    {
                        Name: 'INNER_VAR',
                        Type: 'PLAINTEXT',
                        Value: 'InnerValue',
                    },
                ]),
            }),
            Source: {
                BuildSpec: assertions_1.Match.serializedJson(assertions_1.Match.objectLike({
                    env: {
                        variables: {
                            FOO: 'bar',
                        },
                    },
                    phases: {
                        pre_build: {
                            commands: assertions_1.Match.arrayWith(['installCustom']),
                        },
                        build: {
                            commands: ['synth'],
                        },
                    },
                    cache: {
                        paths: ['node_modules'],
                    },
                })),
            },
        });
    }
});
(0, testhelpers_1.behavior)('stacks synthesized for pipeline will be checked during synth', (suite) => {
    let stage;
    beforeEach(() => {
        stage = new testhelpers_1.OneStackApp(pipelineStack, 'MyApp');
    });
    suite.legacy(() => {
        // WHEN
        const pipeline = new testhelpers_1.LegacyTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            sourceArtifact,
            cloudAssemblyArtifact,
            synthAction: new cdkp.SimpleSynthAction({
                sourceArtifact,
                cloudAssemblyArtifact,
                installCommands: ['install1', 'install2'],
                buildCommands: ['build1', 'build2'],
                testCommands: ['test1', 'test2'],
                synthCommand: 'cdk synth',
            }),
        });
        pipeline.addApplicationStage(stage);
        THEN();
    });
    suite.modern(() => {
        const pipeline = new testhelpers_1.ModernTestGitHubNpmPipeline(pipelineStack, 'Cdk', {
            installCommands: ['install1', 'install2'],
            commands: ['build1', 'build2', 'test1', 'test2', 'cdk synth'],
        });
        pipeline.addStage(stage);
        THEN();
    });
    function THEN() {
        // All stacks in the ASM have been synthesized with 'validateOnSynth: true'
        const asm = stage.synth();
        for (const stack of asm.stacks) {
            expect(stack.validateOnSynth).toEqual(true);
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ludGhzLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzeW50aHMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG9EQUErRDtBQUMvRCxpREFBaUQ7QUFDakQsMERBQTBEO0FBQzFELHdDQUF3QztBQUN4Qyx3Q0FBd0M7QUFDeEMsd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUN0Qyx3Q0FBc0M7QUFDdEMsa0NBQWtDO0FBQ2xDLG1DQUEwQztBQUMxQyx1RkFBeUY7QUFDekYsZ0RBQTBLO0FBRTFLLElBQUksR0FBWSxDQUFDO0FBQ2pCLElBQUksYUFBb0IsQ0FBQztBQUN6QixJQUFJLGNBQXFDLENBQUM7QUFDMUMsSUFBSSxxQkFBNEMsQ0FBQztBQUVqRCx1RUFBdUU7QUFDdkUsTUFBTSxNQUFNLEdBQUcsY0FBYyxDQUFDO0FBRTlCLDhDQUE4QztBQUM5QyxNQUFNLGVBQWUsR0FBRyxXQUFXLENBQUM7QUFDcEMsTUFBTSxlQUFlLEdBQUcsU0FBUyxDQUFDO0FBRWxDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7SUFDZCxHQUFHLEdBQUcsSUFBSSxxQkFBTyxDQUFDLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDdEMsYUFBYSxHQUFHLElBQUksWUFBSyxDQUFDLEdBQUcsRUFBRSxlQUFlLEVBQUUsRUFBRSxHQUFHLEVBQUUsMEJBQVksRUFBRSxDQUFDLENBQUM7SUFDdkUsY0FBYyxHQUFHLElBQUksWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzdDLHFCQUFxQixHQUFHLElBQUksWUFBWSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNoRSxDQUFDLENBQUMsQ0FBQztBQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7SUFDYixHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDaEIsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFBLHNCQUFRLEVBQUMsZ0NBQWdDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFB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RSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUM7Z0JBQ25DLFlBQVksRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7Z0JBQ2hDLFlBQVksRUFBRSxXQUFXO2FBQzFCLENBQUM7U0FDSCxDQUFDLENBQUM7UUFDSCxRQUFRLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFcEMsSUFBSSxFQUFFLENBQUM7SUFDVCxDQUFDLENBQUMsQ0FBQztJQUVILEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFO1FBQ2hCLE1BQU0sUUFBUSxHQUFHLElBQUkseUNBQTJCLENBQUMsYUFBYSxFQUFFLEtBQUssRUFBRTtZQUNyRSxlQUFlLEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDO1lBQ3pDLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxXQUFXLENBQUM7U0FDOUQsQ0FBQyxDQUFDO1FBQ0gsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUV6QixJQUFJLEVBQUUsQ0FBQztJQUNULENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxJQUFJO1FBQ1gsMkVBQTJFO1FBQzNFLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMxQixLQUFLLE1BQU0sS0FBSyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDOUIsTUFBTSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDN0M7SUFDSCxDQUFDO0FBQ0gsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYXB0dXJlLCBNYXRjaCwgVGVtcGxhdGUgfSBmcm9tICcuLi8uLi8uLi9hc3NlcnRpb25zJztcbmltcG9ydCAqIGFzIGNidWlsZCBmcm9tICcuLi8uLi8uLi9hd3MtY29kZWJ1aWxkJztcbmltcG9ydCAqIGFzIGNvZGVwaXBlbGluZSBmcm9tICcuLi8uLi8uLi9hd3MtY29kZXBpcGVsaW5lJztcbmltcG9ydCAqIGFzIGVjMiBmcm9tICcuLi8uLi8uLi9hd3MtZWMyJztcbmltcG9ydCAqIGFzIGVjciBmcm9tICcuLi8uLi8uLi9hd3MtZWNyJztcbmltcG9ydCAqIGFzIGlhbSBmcm9tICcuLi8uLi8uLi9hd3MtaWFtJztcbmltcG9ydCAqIGFzIHMzIGZyb20gJy4uLy4uLy4uL2F3cy1zMyc7XG5pbXBvcnQgeyBTdGFjayB9IGZyb20gJy4uLy4uLy4uL2NvcmUnO1xuaW1wb3J0ICogYXMgY2RrcCBmcm9tICcuLi8uLi9saWInO1xuaW1wb3J0IHsgQ29kZUJ1aWxkU3RlcCB9IGZyb20gJy4uLy4uL2xpYic7XG5pbXBvcnQgeyBDREtQX0RFRkFVTFRfQ09ERUJVSUxEX0lNQUdFIH0gZnJvbSAnLi4vLi4vbGliL3ByaXZhdGUvZGVmYXVsdC1jb2RlYnVpbGQtaW1hZ2UnO1xuaW1wb3J0IHsgYmVoYXZpb3IsIFBJUEVMSU5FX0VOViwgVGVzdEFwcCwgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lLCBNb2Rlcm5UZXN0R2l0SHViTnBtUGlwZWxpbmUsIE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZVByb3BzLCBPbmVTdGFja0FwcCB9IGZyb20gJy4uL3Rlc3RoZWxwZXJzJztcblxubGV0IGFwcDogVGVzdEFwcDtcbmxldCBwaXBlbGluZVN0YWNrOiBTdGFjaztcbmxldCBzb3VyY2VBcnRpZmFjdDogY29kZXBpcGVsaW5lLkFydGlmYWN0O1xubGV0IGNsb3VkQXNzZW1ibHlBcnRpZmFjdDogY29kZXBpcGVsaW5lLkFydGlmYWN0O1xuXG4vLyBNdXN0IGJlIHVuaXF1ZSBhY3Jvc3MgYWxsIHRlc3QgZmlsZXMsIGJ1dCBwcmVmZXJhYmx5IGFsc28gY29uc2lzdGVudFxuY29uc3QgT1VURElSID0gJ3Rlc3RjZGswLm91dCc7XG5cbi8vIFdoYXQgcGhhc2UgaW5zdGFsbCBjb21tYW5kcyBnZXQgcmVuZGVyZWQgdG9cbmNvbnN0IExFR0FDWV9JTlNUQUxMUyA9ICdwcmVfYnVpbGQnO1xuY29uc3QgTU9ERVJOX0lOU1RBTExTID0gJ2luc3RhbGwnO1xuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgYXBwID0gbmV3IFRlc3RBcHAoeyBvdXRkaXI6IE9VVERJUiB9KTtcbiAgcGlwZWxpbmVTdGFjayA9IG5ldyBTdGFjayhhcHAsICdQaXBlbGluZVN0YWNrJywgeyBlbnY6IFBJUEVMSU5FX0VOViB9KTtcbiAgc291cmNlQXJ0aWZhY3QgPSBuZXcgY29kZXBpcGVsaW5lLkFydGlmYWN0KCk7XG4gIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCA9IG5ldyBjb2RlcGlwZWxpbmUuQXJ0aWZhY3QoJ0Nsb3VkQXNtJyk7XG59KTtcblxuYWZ0ZXJFYWNoKCgpID0+IHtcbiAgYXBwLmNsZWFudXAoKTtcbn0pO1xuXG5iZWhhdmlvcignc3ludGggdGFrZXMgYXJyYXlzIG9mIGNvbW1hbmRzJywgKHN1aXRlKSA9PiB7XG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgLy8gV0hFTlxuICAgIG5ldyBMZWdhY3lUZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycsIHtcbiAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgc3ludGhBY3Rpb246IG5ldyBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uKHtcbiAgICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgICAgaW5zdGFsbENvbW1hbmRzOiBbJ2luc3RhbGwxJywgJ2luc3RhbGwyJ10sXG4gICAgICAgIGJ1aWxkQ29tbWFuZHM6IFsnYnVpbGQxJywgJ2J1aWxkMiddLFxuICAgICAgICB0ZXN0Q29tbWFuZHM6IFsndGVzdDEnLCAndGVzdDInXSxcbiAgICAgICAgc3ludGhDb21tYW5kOiAnY2RrIHN5bnRoJyxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbihMRUdBQ1lfSU5TVEFMTFMpO1xuICB9KTtcblxuICBzdWl0ZS5tb2Rlcm4oKCkgPT4ge1xuICAgIG5ldyBNb2Rlcm5UZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycsIHtcbiAgICAgIGluc3RhbGxDb21tYW5kczogWydpbnN0YWxsMScsICdpbnN0YWxsMiddLFxuICAgICAgY29tbWFuZHM6IFsnYnVpbGQxJywgJ2J1aWxkMicsICd0ZXN0MScsICd0ZXN0MicsICdjZGsgc3ludGgnXSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oTU9ERVJOX0lOU1RBTExTKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbihpbnN0YWxsUGhhc2U6IHN0cmluZykge1xuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVCdWlsZDo6UHJvamVjdCcsIHtcbiAgICAgIEVudmlyb25tZW50OiB7XG4gICAgICAgIEltYWdlOiBDREtQX0RFRkFVTFRfQ09ERUJVSUxEX0lNQUdFLmltYWdlSWQsXG4gICAgICB9LFxuICAgICAgU291cmNlOiB7XG4gICAgICAgIEJ1aWxkU3BlYzogTWF0Y2guc2VyaWFsaXplZEpzb24oTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgcGhhc2VzOiB7XG4gICAgICAgICAgICBbaW5zdGFsbFBoYXNlXToge1xuICAgICAgICAgICAgICBjb21tYW5kczogW1xuICAgICAgICAgICAgICAgICdpbnN0YWxsMScsXG4gICAgICAgICAgICAgICAgJ2luc3RhbGwyJyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWlsZDoge1xuICAgICAgICAgICAgICBjb21tYW5kczogW1xuICAgICAgICAgICAgICAgICdidWlsZDEnLFxuICAgICAgICAgICAgICAgICdidWlsZDInLFxuICAgICAgICAgICAgICAgICd0ZXN0MScsXG4gICAgICAgICAgICAgICAgJ3Rlc3QyJyxcbiAgICAgICAgICAgICAgICAnY2RrIHN5bnRoJyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdzeW50aCBzZXRzIGFydGlmYWN0IGJhc2UtZGlyZWN0b3J5IHRvIGNkay5vdXQnLCAoc3VpdGUpID0+IHtcbiAgc3VpdGUubGVnYWN5KCgpID0+IHtcbiAgICAvLyBXSEVOXG4gICAgbmV3IExlZ2FjeVRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICBzeW50aEFjdGlvbjogY2RrcC5TaW1wbGVTeW50aEFjdGlvbi5zdGFuZGFyZE5wbVN5bnRoKHsgc291cmNlQXJ0aWZhY3QsIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCB9KSxcbiAgICB9KTtcbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJyk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKSB7XG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZUJ1aWxkOjpQcm9qZWN0Jywge1xuICAgICAgRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgSW1hZ2U6IENES1BfREVGQVVMVF9DT0RFQlVJTERfSU1BR0UuaW1hZ2VJZCxcbiAgICAgIH0sXG4gICAgICBTb3VyY2U6IHtcbiAgICAgICAgQnVpbGRTcGVjOiBNYXRjaC5zZXJpYWxpemVkSnNvbihNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICBhcnRpZmFjdHM6IHtcbiAgICAgICAgICAgICdiYXNlLWRpcmVjdG9yeSc6ICdjZGsub3V0JyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSksXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59KTtcblxuYmVoYXZpb3IoJ3N5bnRoIHN1cHBvcnRzIHNldHRpbmcgc3ViZGlyZWN0b3J5JywgKHN1aXRlKSA9PiB7XG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgLy8gV0hFTlxuICAgIG5ldyBMZWdhY3lUZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycsIHtcbiAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgc3ludGhBY3Rpb246IGNka3AuU2ltcGxlU3ludGhBY3Rpb24uc3RhbmRhcmROcG1TeW50aCh7XG4gICAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICAgIHN1YmRpcmVjdG9yeTogJ3N1YmRpcicsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oTEVHQUNZX0lOU1RBTExTKTtcbiAgfSk7XG5cbiAgc3VpdGUubW9kZXJuKCgpID0+IHtcbiAgICBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBpbnN0YWxsQ29tbWFuZHM6IFsnY2Qgc3ViZGlyJ10sXG4gICAgICBjb21tYW5kczogWyd0cnVlJ10sXG4gICAgICBwcmltYXJ5T3V0cHV0RGlyZWN0b3J5OiAnc3ViZGlyL2Nkay5vdXQnLFxuICAgIH0pO1xuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oTU9ERVJOX0lOU1RBTExTKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbihpbnN0YWxsUGhhc2U6IHN0cmluZykge1xuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVCdWlsZDo6UHJvamVjdCcsIHtcbiAgICAgIEVudmlyb25tZW50OiB7XG4gICAgICAgIEltYWdlOiBDREtQX0RFRkFVTFRfQ09ERUJVSUxEX0lNQUdFLmltYWdlSWQsXG4gICAgICB9LFxuICAgICAgU291cmNlOiB7XG4gICAgICAgIEJ1aWxkU3BlYzogTWF0Y2guc2VyaWFsaXplZEpzb24oTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgcGhhc2VzOiB7XG4gICAgICAgICAgICBbaW5zdGFsbFBoYXNlXToge1xuICAgICAgICAgICAgICBjb21tYW5kczogTWF0Y2guYXJyYXlXaXRoKFsnY2Qgc3ViZGlyJ10pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFydGlmYWN0czoge1xuICAgICAgICAgICAgJ2Jhc2UtZGlyZWN0b3J5JzogJ3N1YmRpci9jZGsub3V0JyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSksXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59KTtcblxuYmVoYXZpb3IoJ25wbSBzeW50aCBzZXRzLCBvciBhbGxvd3Mgc2V0dGluZywgVU5TQUZFX1BFUk09dHJ1ZScsIChzdWl0ZSkgPT4ge1xuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgIHN5bnRoQWN0aW9uOiBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uLnN0YW5kYXJkTnBtU3ludGgoe1xuICAgICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgZW52OiB7XG4gICAgICAgIE5QTV9DT05GSUdfVU5TQUZFX1BFUk06ICd0cnVlJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKSB7XG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZUJ1aWxkOjpQcm9qZWN0Jywge1xuICAgICAgRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgRW52aXJvbm1lbnRWYXJpYWJsZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBOYW1lOiAnTlBNX0NPTkZJR19VTlNBRkVfUEVSTScsXG4gICAgICAgICAgICBUeXBlOiAnUExBSU5URVhUJyxcbiAgICAgICAgICAgIFZhbHVlOiAndHJ1ZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5iZWhhdmlvcignc3ludGggYXNzdW1lcyBhIEphdmFTY3JpcHQgcHJvamVjdCBieSBkZWZhdWx0IChubyBidWlsZCwgeWVzIHN5bnRoKScsIChzdWl0ZSkgPT4ge1xuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgIHN5bnRoQWN0aW9uOiBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uLnN0YW5kYXJkTnBtU3ludGgoeyBzb3VyY2VBcnRpZmFjdCwgY2xvdWRBc3NlbWJseUFydGlmYWN0IH0pLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZUJ1aWxkOjpQcm9qZWN0Jywge1xuICAgICAgRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgSW1hZ2U6IENES1BfREVGQVVMVF9DT0RFQlVJTERfSU1BR0UuaW1hZ2VJZCxcbiAgICAgIH0sXG4gICAgICBTb3VyY2U6IHtcbiAgICAgICAgQnVpbGRTcGVjOiBNYXRjaC5zZXJpYWxpemVkSnNvbihNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICBwaGFzZXM6IHtcbiAgICAgICAgICAgIHByZV9idWlsZDoge1xuICAgICAgICAgICAgICBjb21tYW5kczogWyducG0gY2knXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWlsZDoge1xuICAgICAgICAgICAgICBjb21tYW5kczogWyducHggY2RrIHN5bnRoJ10sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pKSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIE1vZGVybiBwaXBlbGluZSBkb2VzIG5vdCBhc3N1bWUgYW55dGhpbmcgYW55bW9yZVxuICBzdWl0ZS5kb2VzTm90QXBwbHkubW9kZXJuKCk7XG59KTtcblxuYmVoYXZpb3IoJ01hZ2ljIENvZGVQaXBlbGluZSB2YXJpYWJsZXMgcGFzc2VkIHRvIHN5bnRoIGVudnZhcnMgbXVzdCBiZSByZW5kZXJlZCBpbiB0aGUgYWN0aW9uJywgKHN1aXRlKSA9PiB7XG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgLy8gV0hFTlxuICAgIG5ldyBMZWdhY3lUZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycsIHtcbiAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgc3ludGhBY3Rpb246IG5ldyBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uKHtcbiAgICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZXM6IHtcbiAgICAgICAgICBWRVJTSU9OOiB7IHZhbHVlOiBjb2RlcGlwZWxpbmUuR2xvYmFsVmFyaWFibGVzLmV4ZWN1dGlvbklkIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHN5bnRoQ29tbWFuZDogJ3N5bnRoJyxcbiAgICAgIH0pLFxuICAgIH0pO1xuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgc3VpdGUubW9kZXJuKCgpID0+IHtcbiAgICBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBlbnY6IHtcbiAgICAgICAgVkVSU0lPTjogY29kZXBpcGVsaW5lLkdsb2JhbFZhcmlhYmxlcy5leGVjdXRpb25JZCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKSB7XG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZVBpcGVsaW5lOjpQaXBlbGluZScsIHtcbiAgICAgIFN0YWdlczogTWF0Y2guYXJyYXlXaXRoKFt7XG4gICAgICAgIE5hbWU6ICdCdWlsZCcsXG4gICAgICAgIEFjdGlvbnM6IFtcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgIE5hbWU6ICdTeW50aCcsXG4gICAgICAgICAgICBDb25maWd1cmF0aW9uOiBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgRW52aXJvbm1lbnRWYXJpYWJsZXM6IE1hdGNoLnNlcmlhbGl6ZWRKc29uKE1hdGNoLmFycmF5V2l0aChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbmFtZTogJ1ZFUlNJT04nLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ1BMQUlOVEVYVCcsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogJyN7Y29kZXBpcGVsaW5lLlBpcGVsaW5lRXhlY3V0aW9uSWR9JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdKSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXSxcbiAgICAgIH1dKSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdDb2RlQnVpbGQ6IGVudmlyb25tZW50IHZhcmlhYmxlcyBzcGVjaWZpZWQgaW4gbXVsdGlwbGUgcGxhY2VzIGFyZSBjb3JyZWN0bHkgbWVyZ2VkJywgKHN1aXRlKSA9PiB7XG4gIC8vIFdlIGRvbid0IHN1cHBvcnQgbWVyZ2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaW4gdGhpcyB3YXkgaW4gdGhlIGxlZ2FjeSBBUElcbiAgc3VpdGUuZG9lc05vdEFwcGx5LmxlZ2FjeSgpO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc3ludGg6IG5ldyBDb2RlQnVpbGRTdGVwKCdTeW50aCcsIHtcbiAgICAgICAgZW52OiB7XG4gICAgICAgICAgU09NRV9FTlZfVkFSOiAnU29tZVZhbHVlJyxcbiAgICAgICAgfSxcbiAgICAgICAgaW5zdGFsbENvbW1hbmRzOiBbXG4gICAgICAgICAgJ2luc3RhbGwxJyxcbiAgICAgICAgICAnaW5zdGFsbDInLFxuICAgICAgICBdLFxuICAgICAgICBjb21tYW5kczogWydzeW50aCddLFxuICAgICAgICBpbnB1dDogY2RrcC5Db2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCd0ZXN0L3Rlc3QnLCAnbWFpbicpLFxuICAgICAgICBwcmltYXJ5T3V0cHV0RGlyZWN0b3J5OiAnY2RrLm91dCcsXG4gICAgICAgIGJ1aWxkRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICBlbnZpcm9ubWVudFZhcmlhYmxlczoge1xuICAgICAgICAgICAgSU5ORVJfVkFSOiB7IHZhbHVlOiAnSW5uZXJWYWx1ZScgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByaXZpbGVnZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICB9KTtcbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKE1PREVSTl9JTlNUQUxMUyk7XG4gIH0pO1xuXG4gIHN1aXRlLmFkZGl0aW9uYWwoJ21vZGVybjIsIHVzaW5nIHRoZSBzcGVjaWZpYyBDb2RlQnVpbGQgYWN0aW9uJywgKCkgPT4ge1xuICAgIG5ldyBNb2Rlcm5UZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycsIHtcbiAgICAgIHN5bnRoOiBuZXcgY2RrcC5Db2RlQnVpbGRTdGVwKCdTeW50aCcsIHtcbiAgICAgICAgaW5wdXQ6IGNka3AuQ29kZVBpcGVsaW5lU291cmNlLmdpdEh1YigndGVzdC90ZXN0JywgJ21haW4nKSxcbiAgICAgICAgcHJpbWFyeU91dHB1dERpcmVjdG9yeTogJy4nLFxuICAgICAgICBlbnY6IHtcbiAgICAgICAgICBTT01FX0VOVl9WQVI6ICdTb21lVmFsdWUnLFxuICAgICAgICB9LFxuICAgICAgICBpbnN0YWxsQ29tbWFuZHM6IFtcbiAgICAgICAgICAnaW5zdGFsbDEnLFxuICAgICAgICAgICdpbnN0YWxsMicsXG4gICAgICAgIF0sXG4gICAgICAgIGNvbW1hbmRzOiBbJ3N5bnRoJ10sXG4gICAgICAgIGJ1aWxkRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICBlbnZpcm9ubWVudFZhcmlhYmxlczoge1xuICAgICAgICAgICAgSU5ORVJfVkFSOiB7IHZhbHVlOiAnSW5uZXJWYWx1ZScgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByaXZpbGVnZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICB9KTtcbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKE1PREVSTl9JTlNUQUxMUyk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oaW5zdGFsbFBoYXNlOiBzdHJpbmcpIHtcbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDb2RlQnVpbGQ6OlByb2plY3QnLCB7XG4gICAgICBFbnZpcm9ubWVudDogTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgIFByaXZpbGVnZWRNb2RlOiB0cnVlLFxuICAgICAgICBFbnZpcm9ubWVudFZhcmlhYmxlczogTWF0Y2guYXJyYXlXaXRoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBOYW1lOiAnSU5ORVJfVkFSJyxcbiAgICAgICAgICAgIFR5cGU6ICdQTEFJTlRFWFQnLFxuICAgICAgICAgICAgVmFsdWU6ICdJbm5lclZhbHVlJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIE5hbWU6ICdTT01FX0VOVl9WQVInLFxuICAgICAgICAgICAgVHlwZTogJ1BMQUlOVEVYVCcsXG4gICAgICAgICAgICBWYWx1ZTogJ1NvbWVWYWx1ZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSksXG4gICAgICB9KSxcbiAgICAgIFNvdXJjZToge1xuICAgICAgICBCdWlsZFNwZWM6IE1hdGNoLnNlcmlhbGl6ZWRKc29uKE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgIHBoYXNlczoge1xuICAgICAgICAgICAgW2luc3RhbGxQaGFzZV06IHtcbiAgICAgICAgICAgICAgY29tbWFuZHM6IFsnaW5zdGFsbDEnLCAnaW5zdGFsbDInXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWlsZDoge1xuICAgICAgICAgICAgICBjb21tYW5kczogWydzeW50aCddLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSksXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59KTtcblxuYmVoYXZpb3IoJ2luc3RhbGwgY29tbWFuZCBjYW4gYmUgb3ZlcnJpZGRlbi9zcGVjaWZpZWQnLCAoc3VpdGUpID0+IHtcbiAgc3VpdGUubGVnYWN5KCgpID0+IHtcbiAgICAvLyBXSEVOXG4gICAgbmV3IExlZ2FjeVRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICBzeW50aEFjdGlvbjogY2RrcC5TaW1wbGVTeW50aEFjdGlvbi5zdGFuZGFyZE5wbVN5bnRoKHtcbiAgICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgICAgaW5zdGFsbENvbW1hbmQ6ICcvYmluL3RydWUnLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKExFR0FDWV9JTlNUQUxMUyk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgLy8gV0hFTlxuICAgIG5ldyBNb2Rlcm5UZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycsIHtcbiAgICAgIGluc3RhbGxDb21tYW5kczogWycvYmluL3RydWUnXSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oTU9ERVJOX0lOU1RBTExTKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbihpbnN0YWxsUGhhc2U6IHN0cmluZykge1xuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVCdWlsZDo6UHJvamVjdCcsIHtcbiAgICAgIEVudmlyb25tZW50OiB7XG4gICAgICAgIEltYWdlOiBDREtQX0RFRkFVTFRfQ09ERUJVSUxEX0lNQUdFLmltYWdlSWQsXG4gICAgICB9LFxuICAgICAgU291cmNlOiB7XG4gICAgICAgIEJ1aWxkU3BlYzogTWF0Y2guc2VyaWFsaXplZEpzb24oTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgcGhhc2VzOiB7XG4gICAgICAgICAgICBbaW5zdGFsbFBoYXNlXToge1xuICAgICAgICAgICAgICBjb21tYW5kczogWycvYmluL3RydWUnXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdzeW50aCBjYW4gaGF2ZSBpdHMgdGVzdCBjb21tYW5kcyBzZXQnLCAoc3VpdGUpID0+IHtcbiAgc3VpdGUubGVnYWN5KCgpID0+IHtcbiAgICAvLyBXSEVOXG4gICAgbmV3IExlZ2FjeVRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICBzeW50aEFjdGlvbjogY2RrcC5TaW1wbGVTeW50aEFjdGlvbi5zdGFuZGFyZE5wbVN5bnRoKHtcbiAgICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgICAgaW5zdGFsbENvbW1hbmQ6ICcvYmluL3RydWUnLFxuICAgICAgICB0ZXN0Q29tbWFuZHM6IFsnZWNobyBcIlJ1bm5pbmcgdGVzdHNcIiddLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDb2RlQnVpbGQ6OlByb2plY3QnLCB7XG4gICAgICBFbnZpcm9ubWVudDoge1xuICAgICAgICBJbWFnZTogQ0RLUF9ERUZBVUxUX0NPREVCVUlMRF9JTUFHRS5pbWFnZUlkLFxuICAgICAgfSxcbiAgICAgIFNvdXJjZToge1xuICAgICAgICBCdWlsZFNwZWM6IE1hdGNoLnNlcmlhbGl6ZWRKc29uKE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgIHBoYXNlczoge1xuICAgICAgICAgICAgcHJlX2J1aWxkOiB7XG4gICAgICAgICAgICAgIGNvbW1hbmRzOiBbJy9iaW4vdHJ1ZSddLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICAgIGNvbW1hbmRzOiBbJ2VjaG8gXCJSdW5uaW5nIHRlc3RzXCInLCAnbnB4IGNkayBzeW50aCddLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSksXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICAvLyBUaGVyZSBhcmUgbm8gaW1wbGljaXQgY29tbWFuZHMgaW4gbW9kZXJuIHN5bnRoXG4gIHN1aXRlLmRvZXNOb3RBcHBseS5tb2Rlcm4oKTtcbn0pO1xuXG5iZWhhdmlvcignU3ludGggY2FuIG91dHB1dCBhZGRpdGlvbmFsIGFydGlmYWN0cycsIChzdWl0ZSkgPT4ge1xuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBjb25zdCBhZGRsQXJ0aWZhY3QgPSBuZXcgY29kZXBpcGVsaW5lLkFydGlmYWN0KCdJbnRlZ1Rlc3QnKTtcbiAgICBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgIHN5bnRoQWN0aW9uOiBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uLnN0YW5kYXJkTnBtU3ludGgoe1xuICAgICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgICBhZGRpdGlvbmFsQXJ0aWZhY3RzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXJ0aWZhY3Q6IGFkZGxBcnRpZmFjdCxcbiAgICAgICAgICAgIGRpcmVjdG9yeTogJ3Rlc3QnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oJ0Nsb3VkQXNtJywgJ0ludGVnVGVzdCcpO1xuICB9KTtcblxuICBzdWl0ZS5tb2Rlcm4oKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBjb25zdCBzeW50aCA9IG5ldyBjZGtwLlNoZWxsU3RlcCgnU3ludGgnLCB7XG4gICAgICBpbnB1dDogY2RrcC5Db2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCd0ZXN0L3Rlc3QnLCAnbWFpbicpLFxuICAgICAgY29tbWFuZHM6IFsnY2RrIHN5bnRoJ10sXG4gICAgfSk7XG4gICAgc3ludGguYWRkT3V0cHV0RGlyZWN0b3J5KCd0ZXN0Jyk7XG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc3ludGg6IHN5bnRoLFxuICAgIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbignU3ludGhfT3V0cHV0JywgJ1N5bnRoX3Rlc3QnKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbihhc21BcnRpZmFjdDogc3RyaW5nLCB0ZXN0QXJ0aWZhY3Q6IHN0cmluZykge1xuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVCdWlsZDo6UHJvamVjdCcsIHtcbiAgICAgIEVudmlyb25tZW50OiB7XG4gICAgICAgIEltYWdlOiBDREtQX0RFRkFVTFRfQ09ERUJVSUxEX0lNQUdFLmltYWdlSWQsXG4gICAgICB9LFxuICAgICAgU291cmNlOiB7XG4gICAgICAgIEJ1aWxkU3BlYzogTWF0Y2guc2VyaWFsaXplZEpzb24oTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgYXJ0aWZhY3RzOiB7XG4gICAgICAgICAgICAnc2Vjb25kYXJ5LWFydGlmYWN0cyc6IHtcbiAgICAgICAgICAgICAgW2FzbUFydGlmYWN0XToge1xuICAgICAgICAgICAgICAgICdiYXNlLWRpcmVjdG9yeSc6ICdjZGsub3V0JyxcbiAgICAgICAgICAgICAgICAnZmlsZXMnOiAnKiovKicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFt0ZXN0QXJ0aWZhY3RdOiB7XG4gICAgICAgICAgICAgICAgJ2Jhc2UtZGlyZWN0b3J5JzogJ3Rlc3QnLFxuICAgICAgICAgICAgICAgICdmaWxlcyc6ICcqKi8qJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdTeW50aCBjYW4gYmUgbWFkZSB0byBydW4gaW4gYSBWUEMnLCAoc3VpdGUpID0+IHtcbiAgbGV0IHZwYzogZWMyLlZwYztcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgdnBjID0gbmV3IGVjMi5WcGMocGlwZWxpbmVTdGFjaywgJ05wbVN5bnRoVGVzdFZwYycpO1xuICB9KTtcblxuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgIHN5bnRoQWN0aW9uOiBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uLnN0YW5kYXJkTnBtU3ludGgoe1xuICAgICAgICB2cGMsXG4gICAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgc3VpdGUubW9kZXJuKCgpID0+IHtcbiAgICBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBjb2RlQnVpbGREZWZhdWx0czogeyB2cGMgfSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgc3VpdGUuYWRkaXRpb25hbCgnTW9kZXJuLCB1c2luZyB0aGUgc3ludGhDb2RlQnVpbGREZWZhdWx0cycsICgpID0+IHtcbiAgICBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzeW50aENvZGVCdWlsZERlZmF1bHRzOiB7IHZwYyB9LFxuICAgIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICBzdWl0ZS5hZGRpdGlvbmFsKCdNb2Rlcm4sIHVzaW5nIENvZGVCdWlsZFN0ZXAnLCAoKSA9PiB7XG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc3ludGg6IG5ldyBDb2RlQnVpbGRTdGVwKCdTeW50aCcsIHtcbiAgICAgICAgY29tbWFuZHM6IFsnYXNkZiddLFxuICAgICAgICBpbnB1dDogY2RrcC5Db2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCd0ZXN0L3Rlc3QnLCAnbWFpbicpLFxuICAgICAgICBwcmltYXJ5T3V0cHV0RGlyZWN0b3J5OiAnY2RrLm91dCcsXG4gICAgICAgIGJ1aWxkRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICBjb21wdXRlVHlwZTogY2J1aWxkLkNvbXB1dGVUeXBlLkxBUkdFLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgICBjb2RlQnVpbGREZWZhdWx0czogeyB2cGMgfSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpIHtcbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDb2RlQnVpbGQ6OlByb2plY3QnLCB7XG4gICAgICBWcGNDb25maWc6IHtcbiAgICAgICAgU2VjdXJpdHlHcm91cElkczogW1xuICAgICAgICAgIHsgJ0ZuOjpHZXRBdHQnOiBbJ0Nka1BpcGVsaW5lQnVpbGRTeW50aENka0J1aWxkUHJvamVjdFNlY3VyaXR5R3JvdXBFQTQ0RDdDMicsICdHcm91cElkJ10gfSxcbiAgICAgICAgXSxcbiAgICAgICAgU3VibmV0czogW1xuICAgICAgICAgIHsgUmVmOiAnTnBtU3ludGhUZXN0VnBjUHJpdmF0ZVN1Ym5ldDFTdWJuZXQ4MUUzQUE1NicgfSxcbiAgICAgICAgICB7IFJlZjogJ05wbVN5bnRoVGVzdFZwY1ByaXZhdGVTdWJuZXQyU3VibmV0QzFDQTNFRjAnIH0sXG4gICAgICAgICAgeyBSZWY6ICdOcG1TeW50aFRlc3RWcGNQcml2YXRlU3VibmV0M1N1Ym5ldEEwNDE2M0VFJyB9LFxuICAgICAgICBdLFxuICAgICAgICBWcGNJZDogeyBSZWY6ICdOcG1TeW50aFRlc3RWcGM1RTcwM0YyNScgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OklBTTo6UG9saWN5Jywge1xuICAgICAgUm9sZXM6IFtcbiAgICAgICAgeyBSZWY6ICdDZGtQaXBlbGluZUJ1aWxkU3ludGhDZGtCdWlsZFByb2plY3RSb2xlNUUxNzNDNjInIH0sXG4gICAgICBdLFxuICAgICAgUG9saWN5RG9jdW1lbnQ6IHtcbiAgICAgICAgU3RhdGVtZW50OiBNYXRjaC5hcnJheVdpdGgoW3tcbiAgICAgICAgICBBY3Rpb246IE1hdGNoLmFycmF5V2l0aChbJ2VjMjpEZXNjcmliZVNlY3VyaXR5R3JvdXBzJ10pLFxuICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICBSZXNvdXJjZTogJyonLFxuICAgICAgICB9XSksXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59KTtcblxuYmVoYXZpb3IoJ1BpcGVsaW5lIGFjdGlvbiBjb250YWlucyBhIGhhc2ggdGhhdCBjaGFuZ2VzIGFzIHRoZSBidWlsZHNwZWMgY2hhbmdlcycsIChzdWl0ZSkgPT4ge1xuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIGNvbnN0IGhhc2gxID0gbGVnYWN5U3ludGhXaXRoQWN0aW9uKChzYSwgY3hhKSA9PiBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uLnN0YW5kYXJkTnBtU3ludGgoe1xuICAgICAgc291cmNlQXJ0aWZhY3Q6IHNhLFxuICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0OiBjeGEsXG4gICAgfSkpO1xuXG4gICAgLy8gVG8gbWFrZSBzdXJlIHRoZSBoYXNoIGlzIG5vdCBqdXN0IHJhbmRvbSA6KVxuICAgIGNvbnN0IGhhc2gxcHJpbWUgPSBsZWdhY3lTeW50aFdpdGhBY3Rpb24oKHNhLCBjeGEpID0+IGNka3AuU2ltcGxlU3ludGhBY3Rpb24uc3RhbmRhcmROcG1TeW50aCh7XG4gICAgICBzb3VyY2VBcnRpZmFjdDogc2EsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3Q6IGN4YSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCBoYXNoMiA9IGxlZ2FjeVN5bnRoV2l0aEFjdGlvbigoc2EsIGN4YSkgPT4gY2RrcC5TaW1wbGVTeW50aEFjdGlvbi5zdGFuZGFyZE5wbVN5bnRoKHtcbiAgICAgIHNvdXJjZUFydGlmYWN0OiBzYSxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdDogY3hhLFxuICAgICAgaW5zdGFsbENvbW1hbmQ6ICdkbyBpbnN0YWxsJyxcbiAgICB9KSk7XG4gICAgY29uc3QgaGFzaDMgPSBsZWdhY3lTeW50aFdpdGhBY3Rpb24oKHNhLCBjeGEpID0+IGNka3AuU2ltcGxlU3ludGhBY3Rpb24uc3RhbmRhcmROcG1TeW50aCh7XG4gICAgICBzb3VyY2VBcnRpZmFjdDogc2EsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3Q6IGN4YSxcbiAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgIGNvbXB1dGVUeXBlOiBjYnVpbGQuQ29tcHV0ZVR5cGUuTEFSR0UsXG4gICAgICB9LFxuICAgIH0pKTtcbiAgICBjb25zdCBoYXNoNCA9IGxlZ2FjeVN5bnRoV2l0aEFjdGlvbigoc2EsIGN4YSkgPT4gY2RrcC5TaW1wbGVTeW50aEFjdGlvbi5zdGFuZGFyZE5wbVN5bnRoKHtcbiAgICAgIHNvdXJjZUFydGlmYWN0OiBzYSxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdDogY3hhLFxuICAgICAgZW52aXJvbm1lbnQ6IHtcbiAgICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZXM6IHtcbiAgICAgICAgICB4eXo6IHsgdmFsdWU6ICdTT01FLVZBTFVFJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KSk7XG5cbiAgICBleHBlY3QoaGFzaDEpLnRvRXF1YWwoaGFzaDFwcmltZSk7XG5cbiAgICBleHBlY3QoaGFzaDEpLm5vdC50b0VxdWFsKGhhc2gyKTtcbiAgICBleHBlY3QoaGFzaDEpLm5vdC50b0VxdWFsKGhhc2gzKTtcbiAgICBleHBlY3QoaGFzaDEpLm5vdC50b0VxdWFsKGhhc2g0KTtcbiAgICBleHBlY3QoaGFzaDIpLm5vdC50b0VxdWFsKGhhc2gzKTtcbiAgICBleHBlY3QoaGFzaDIpLm5vdC50b0VxdWFsKGhhc2g0KTtcbiAgICBleHBlY3QoaGFzaDMpLm5vdC50b0VxdWFsKGhhc2g0KTtcbiAgfSk7XG5cbiAgc3VpdGUubW9kZXJuKCgpID0+IHtcbiAgICBjb25zdCBoYXNoMSA9IG1vZGVyblN5bnRoV2l0aEFjdGlvbigoKSA9PiAoeyBjb21tYW5kczogWydhc2RmJ10gfSkpO1xuXG4gICAgLy8gVG8gbWFrZSBzdXJlIHRoZSBoYXNoIGlzIG5vdCBqdXN0IHJhbmRvbSA6KVxuICAgIGNvbnN0IGhhc2gxcHJpbWUgPSBtb2Rlcm5TeW50aFdpdGhBY3Rpb24oKCkgPT4gKHsgY29tbWFuZHM6IFsnYXNkZiddIH0pKTtcblxuICAgIGNvbnN0IGhhc2gyID0gbW9kZXJuU3ludGhXaXRoQWN0aW9uKCgpID0+ICh7XG4gICAgICBpbnN0YWxsQ29tbWFuZHM6IFsnZG8gaW5zdGFsbCddLFxuICAgIH0pKTtcbiAgICBjb25zdCBoYXNoMyA9IG1vZGVyblN5bnRoV2l0aEFjdGlvbigoKSA9PiAoe1xuICAgICAgc3ludGg6IG5ldyBDb2RlQnVpbGRTdGVwKCdTeW50aCcsIHtcbiAgICAgICAgY29tbWFuZHM6IFsnYXNkZiddLFxuICAgICAgICBpbnB1dDogY2RrcC5Db2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCd0ZXN0L3Rlc3QnLCAnbWFpbicpLFxuICAgICAgICBwcmltYXJ5T3V0cHV0RGlyZWN0b3J5OiAnY2RrLm91dCcsXG4gICAgICAgIGJ1aWxkRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICBjb21wdXRlVHlwZTogY2J1aWxkLkNvbXB1dGVUeXBlLkxBUkdFLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgfSkpO1xuXG4gICAgY29uc3QgaGFzaDQgPSBtb2Rlcm5TeW50aFdpdGhBY3Rpb24oKCkgPT4gKHtcbiAgICAgIGVudjoge1xuICAgICAgICB4eXo6ICdTT01FLVZBTFVFJyxcbiAgICAgIH0sXG4gICAgfSkpO1xuXG4gICAgZXhwZWN0KGhhc2gxKS50b0VxdWFsKGhhc2gxcHJpbWUpO1xuXG4gICAgZXhwZWN0KGhhc2gxKS5ub3QudG9FcXVhbChoYXNoMik7XG4gICAgZXhwZWN0KGhhc2gxKS5ub3QudG9FcXVhbChoYXNoMyk7XG4gICAgZXhwZWN0KGhhc2gxKS5ub3QudG9FcXVhbChoYXNoNCk7XG4gICAgZXhwZWN0KGhhc2gyKS5ub3QudG9FcXVhbChoYXNoMyk7XG4gICAgZXhwZWN0KGhhc2gyKS5ub3QudG9FcXVhbChoYXNoNCk7XG4gICAgZXhwZWN0KGhhc2gzKS5ub3QudG9FcXVhbChoYXNoNCk7XG4gIH0pO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gIGZ1bmN0aW9uIGxlZ2FjeVN5bnRoV2l0aEFjdGlvbihjYjogKHNvdXJjZUFydGlmYWN0OiBjb2RlcGlwZWxpbmUuQXJ0aWZhY3QsIGNsb3VkQXNzZW1ibHlBcnRpZmFjdDogY29kZXBpcGVsaW5lLkFydGlmYWN0KSA9PiBjb2RlcGlwZWxpbmUuSUFjdGlvbikge1xuICAgIGNvbnN0IF9hcHAgPSBuZXcgVGVzdEFwcCh7IG91dGRpcjogT1VURElSIH0pO1xuICAgIGNvbnN0IF9waXBlbGluZVN0YWNrID0gbmV3IFN0YWNrKF9hcHAsICdQaXBlbGluZVN0YWNrJywgeyBlbnY6IFBJUEVMSU5FX0VOViB9KTtcbiAgICBjb25zdCBfc291cmNlQXJ0aWZhY3QgPSBuZXcgY29kZXBpcGVsaW5lLkFydGlmYWN0KCk7XG4gICAgY29uc3QgX2Nsb3VkQXNzZW1ibHlBcnRpZmFjdCA9IG5ldyBjb2RlcGlwZWxpbmUuQXJ0aWZhY3QoJ0Nsb3VkQXNtJyk7XG5cbiAgICBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKF9waXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc291cmNlQXJ0aWZhY3Q6IF9zb3VyY2VBcnRpZmFjdCxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdDogX2Nsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgIHN5bnRoQWN0aW9uOiBjYihfc291cmNlQXJ0aWZhY3QsIF9jbG91ZEFzc2VtYmx5QXJ0aWZhY3QpLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNhcHR1cmVQcm9qZWN0Q29uZmlnSGFzaChfcGlwZWxpbmVTdGFjayk7XG4gIH1cblxuICBmdW5jdGlvbiBtb2Rlcm5TeW50aFdpdGhBY3Rpb24oY2I6ICgpID0+IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZVByb3BzKSB7XG4gICAgY29uc3QgX2FwcCA9IG5ldyBUZXN0QXBwKHsgb3V0ZGlyOiBPVVRESVIgfSk7XG4gICAgY29uc3QgX3BpcGVsaW5lU3RhY2sgPSBuZXcgU3RhY2soX2FwcCwgJ1BpcGVsaW5lU3RhY2snLCB7IGVudjogUElQRUxJTkVfRU5WIH0pO1xuXG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShfcGlwZWxpbmVTdGFjaywgJ0NkaycsIGNiKCkpO1xuXG4gICAgcmV0dXJuIGNhcHR1cmVQcm9qZWN0Q29uZmlnSGFzaChfcGlwZWxpbmVTdGFjayk7XG4gIH1cblxuICBmdW5jdGlvbiBjYXB0dXJlUHJvamVjdENvbmZpZ0hhc2goX3BpcGVsaW5lU3RhY2s6IFN0YWNrKSB7XG4gICAgY29uc3QgdGhlSGFzaCA9IG5ldyBDYXB0dXJlKCk7XG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKF9waXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZVBpcGVsaW5lOjpQaXBlbGluZScsIHtcbiAgICAgIFN0YWdlczogTWF0Y2guYXJyYXlXaXRoKFt7XG4gICAgICAgIE5hbWU6ICdCdWlsZCcsXG4gICAgICAgIEFjdGlvbnM6IFtcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgIE5hbWU6ICdTeW50aCcsXG4gICAgICAgICAgICBDb25maWd1cmF0aW9uOiBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICAgICAgRW52aXJvbm1lbnRWYXJpYWJsZXM6IE1hdGNoLnNlcmlhbGl6ZWRKc29uKFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiAnX1BST0pFQ1RfQ09ORklHX0hBU0gnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ1BMQUlOVEVYVCcsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogdGhlSGFzaCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICBdLFxuICAgICAgfV0pLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoZUhhc2guYXNTdHJpbmcoKTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdTeW50aCBDb2RlQnVpbGQgcHJvamVjdCByb2xlIGNhbiBiZSBncmFudGVkIHBlcm1pc3Npb25zJywgKHN1aXRlKSA9PiB7XG4gIGxldCBidWNrZXQ6IHMzLklCdWNrZXQ7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGJ1Y2tldCA9IHMzLkJ1Y2tldC5mcm9tQnVja2V0QXJuKHBpcGVsaW5lU3RhY2ssICdCdWNrZXQnLCAnYXJuOmF3czpzMzo6OnRoaXMtcGFydGljdWxhci1idWNrZXQnKTtcbiAgfSk7XG5cblxuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3Qgc3ludGhBY3Rpb24gPSBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uLnN0YW5kYXJkTnBtU3ludGgoe1xuICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgfSk7XG4gICAgbmV3IExlZ2FjeVRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICBzeW50aEFjdGlvbixcbiAgICB9KTtcblxuICAgIC8vIFdIRU5cbiAgICBidWNrZXQuZ3JhbnRSZWFkKHN5bnRoQWN0aW9uKTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgc3VpdGUubW9kZXJuKCgpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IHBpcGUgPSBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnKTtcbiAgICBwaXBlLmJ1aWxkUGlwZWxpbmUoKTtcblxuICAgIC8vIFdIRU5cbiAgICBidWNrZXQuZ3JhbnRSZWFkKHBpcGUuc3ludGhQcm9qZWN0KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpIHtcbiAgICAvLyBUSEVOXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlBvbGljeScsIHtcbiAgICAgIFBvbGljeURvY3VtZW50OiB7XG4gICAgICAgIFN0YXRlbWVudDogTWF0Y2guYXJyYXlXaXRoKFtNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICBBY3Rpb246IFsnczM6R2V0T2JqZWN0KicsICdzMzpHZXRCdWNrZXQqJywgJ3MzOkxpc3QqJ10sXG4gICAgICAgICAgUmVzb3VyY2U6IFsnYXJuOmF3czpzMzo6OnRoaXMtcGFydGljdWxhci1idWNrZXQnLCAnYXJuOmF3czpzMzo6OnRoaXMtcGFydGljdWxhci1idWNrZXQvKiddLFxuICAgICAgICB9KV0pLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdTeW50aCBjYW4gcmVmZXJlbmNlIGFuIGltcG9ydGVkIEVDUiByZXBvJywgKHN1aXRlKSA9PiB7XG4gIC8vIFJlcHJvIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2F3cy9hd3MtY2RrL2lzc3Vlcy8xMDUzNVxuXG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgLy8gV0hFTlxuICAgIG5ldyBMZWdhY3lUZXN0R2l0SHViTnBtUGlwZWxpbmUocGlwZWxpbmVTdGFjaywgJ0NkaycsIHtcbiAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgc3ludGhBY3Rpb246IGNka3AuU2ltcGxlU3ludGhBY3Rpb24uc3RhbmRhcmROcG1TeW50aCh7XG4gICAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgICAgYnVpbGRJbWFnZTogY2J1aWxkLkxpbnV4QnVpbGRJbWFnZS5mcm9tRWNyUmVwb3NpdG9yeShcbiAgICAgICAgICAgIGVjci5SZXBvc2l0b3J5LmZyb21SZXBvc2l0b3J5TmFtZShwaXBlbGluZVN0YWNrLCAnRUNSSW1hZ2UnLCAnbXktcmVwby1uYW1lJyksXG4gICAgICAgICAgKSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTiAtLSBubyBleGNlcHRpb24gKG5lY2Vzc2FyeSBmb3IgbGludGVyKVxuICAgIGV4cGVjdCh0cnVlKS50b0JlVHJ1dGh5KCk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc3ludGg6IG5ldyBjZGtwLkNvZGVCdWlsZFN0ZXAoJ1N5bnRoJywge1xuICAgICAgICBjb21tYW5kczogWydidWlsZCddLFxuICAgICAgICBpbnB1dDogY2RrcC5Db2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCd0ZXN0L3Rlc3QnLCAnbWFpbicpLFxuICAgICAgICBwcmltYXJ5T3V0cHV0RGlyZWN0b3J5OiAnY2RrLm91dCcsXG4gICAgICAgIGJ1aWxkRW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICBidWlsZEltYWdlOiBjYnVpbGQuTGludXhCdWlsZEltYWdlLmZyb21FY3JSZXBvc2l0b3J5KFxuICAgICAgICAgICAgZWNyLlJlcG9zaXRvcnkuZnJvbVJlcG9zaXRvcnlOYW1lKHBpcGVsaW5lU3RhY2ssICdFQ1JJbWFnZScsICdteS1yZXBvLW5hbWUnKSxcbiAgICAgICAgICApLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICAvLyBUSEVOIC0tIG5vIGV4Y2VwdGlvbiAobmVjZXNzYXJ5IGZvciBsaW50ZXIpXG4gICAgZXhwZWN0KHRydWUpLnRvQmVUcnV0aHkoKTtcbiAgfSk7XG59KTtcblxuYmVoYXZpb3IoJ0NvZGVCdWlsZDogQ2FuIHNwZWNpZnkgYWRkaXRpb25hbCBwb2xpY3kgc3RhdGVtZW50cycsIChzdWl0ZSkgPT4ge1xuICBzdWl0ZS5sZWdhY3koKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgIHN5bnRoQWN0aW9uOiBjZGtwLlNpbXBsZVN5bnRoQWN0aW9uLnN0YW5kYXJkTnBtU3ludGgoe1xuICAgICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgICByb2xlUG9saWN5U3RhdGVtZW50czogW1xuICAgICAgICAgIG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHtcbiAgICAgICAgICAgIGFjdGlvbnM6IFsnY29kZWFydGlmYWN0OionLCAnc3RzOkdldFNlcnZpY2VCZWFyZXJUb2tlbiddLFxuICAgICAgICAgICAgcmVzb3VyY2VzOiBbJ2FybjpteTphcm4nXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXSxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpO1xuICB9KTtcblxuICBzdWl0ZS5tb2Rlcm4oKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzeW50aDogbmV3IGNka3AuQ29kZUJ1aWxkU3RlcCgnU3ludGgnLCB7XG4gICAgICAgIGlucHV0OiBjZGtwLkNvZGVQaXBlbGluZVNvdXJjZS5naXRIdWIoJ3Rlc3QvdGVzdCcsICdtYWluJyksXG4gICAgICAgIHByaW1hcnlPdXRwdXREaXJlY3Rvcnk6ICcuJyxcbiAgICAgICAgY29tbWFuZHM6IFsnc3ludGgnXSxcbiAgICAgICAgcm9sZVBvbGljeVN0YXRlbWVudHM6IFtcbiAgICAgICAgICBuZXcgaWFtLlBvbGljeVN0YXRlbWVudCh7XG4gICAgICAgICAgICBhY3Rpb25zOiBbJ2NvZGVhcnRpZmFjdDoqJywgJ3N0czpHZXRTZXJ2aWNlQmVhcmVyVG9rZW4nXSxcbiAgICAgICAgICAgIHJlc291cmNlczogWydhcm46bXk6YXJuJ10sXG4gICAgICAgICAgfSksXG4gICAgICAgIF0sXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gVEhFTl9jb2RlUGlwZWxpbmVFeHBlY3RhdGlvbigpIHtcbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OklBTTo6UG9saWN5Jywge1xuICAgICAgUG9saWN5RG9jdW1lbnQ6IHtcbiAgICAgICAgU3RhdGVtZW50OiBNYXRjaC5hcnJheVdpdGgoW01hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgIEFjdGlvbjogW1xuICAgICAgICAgICAgJ2NvZGVhcnRpZmFjdDoqJyxcbiAgICAgICAgICAgICdzdHM6R2V0U2VydmljZUJlYXJlclRva2VuJyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIFJlc291cmNlOiAnYXJuOm15OmFybicsXG4gICAgICAgIH0pXSksXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59KTtcblxuYmVoYXZpb3IoJ011bHRpcGxlIGlucHV0IHNvdXJjZXMgaW4gc2lkZS1ieS1zaWRlIGRpcmVjdG9yaWVzJywgKHN1aXRlKSA9PiB7XG4gIC8vIExlZ2FjeSBBUEkgZG9lcyBub3Qgc3VwcG9ydCB0aGlzXG4gIHN1aXRlLmRvZXNOb3RBcHBseS5sZWdhY3koKTtcblxuICBzdWl0ZS5tb2Rlcm4oKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzeW50aDogbmV3IGNka3AuU2hlbGxTdGVwKCdTeW50aCcsIHtcbiAgICAgICAgaW5wdXQ6IGNka3AuQ29kZVBpcGVsaW5lU291cmNlLmdpdEh1YigndGVzdC90ZXN0JywgJ21haW4nKSxcbiAgICAgICAgY29tbWFuZHM6IFsnZmFsc2UnXSxcbiAgICAgICAgYWRkaXRpb25hbElucHV0czoge1xuICAgICAgICAgICcuLi9zaWJsaW5nJzogY2RrcC5Db2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCdmb28vYmFyJywgJ21haW4nKSxcbiAgICAgICAgICAnc3ViJzogbmV3IGNka3AuU2hlbGxTdGVwKCdQcmVidWlsZCcsIHtcbiAgICAgICAgICAgIGlucHV0OiBjZGtwLkNvZGVQaXBlbGluZVNvdXJjZS5naXRIdWIoJ3ByZS9idWlsZCcsICdtYWluJyksXG4gICAgICAgICAgICBjb21tYW5kczogWyd0cnVlJ10sXG4gICAgICAgICAgICBwcmltYXJ5T3V0cHV0RGlyZWN0b3J5OiAnYnVpbHQnLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVQaXBlbGluZTo6UGlwZWxpbmUnLCB7XG4gICAgICBTdGFnZXM6IE1hdGNoLmFycmF5V2l0aChbXG4gICAgICAgIHtcbiAgICAgICAgICBOYW1lOiAnU291cmNlJyxcbiAgICAgICAgICBBY3Rpb25zOiBbXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgQ29uZmlndXJhdGlvbjogTWF0Y2gub2JqZWN0TGlrZSh7IFJlcG86ICdiYXInIH0pIH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IENvbmZpZ3VyYXRpb246IE1hdGNoLm9iamVjdExpa2UoeyBSZXBvOiAnYnVpbGQnIH0pIH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IENvbmZpZ3VyYXRpb246IE1hdGNoLm9iamVjdExpa2UoeyBSZXBvOiAndGVzdCcgfSkgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIE5hbWU6ICdCdWlsZCcsXG4gICAgICAgICAgQWN0aW9uczogW1xuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IE5hbWU6ICdQcmVidWlsZCcsIFJ1bk9yZGVyOiAxIH0pLFxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgICAgICAgIE5hbWU6ICdTeW50aCcsXG4gICAgICAgICAgICAgIFJ1bk9yZGVyOiAyLFxuICAgICAgICAgICAgICBJbnB1dEFydGlmYWN0czogW1xuICAgICAgICAgICAgICAgIC8vIDMgaW5wdXQgYXJ0aWZhY3RzXG4gICAgICAgICAgICAgICAgTWF0Y2guYW55VmFsdWUoKSxcbiAgICAgICAgICAgICAgICBNYXRjaC5hbnlWYWx1ZSgpLFxuICAgICAgICAgICAgICAgIE1hdGNoLmFueVZhbHVlKCksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSksXG4gICAgfSk7XG5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2socGlwZWxpbmVTdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNvZGVCdWlsZDo6UHJvamVjdCcsIHtcbiAgICAgIFNvdXJjZToge1xuICAgICAgICBCdWlsZFNwZWM6IE1hdGNoLnNlcmlhbGl6ZWRKc29uKE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgIHBoYXNlczoge1xuICAgICAgICAgICAgaW5zdGFsbDoge1xuICAgICAgICAgICAgICBjb21tYW5kczogW1xuICAgICAgICAgICAgICAgICdbICEgLWQgXCIuLi9zaWJsaW5nXCIgXSB8fCB7IGVjaG8gXFwnYWRkaXRpb25hbElucHV0czogXCIuLi9zaWJsaW5nXCIgbXVzdCBub3QgZXhpc3QgeWV0LiBJZiB5b3Ugd2FudCB0byBtZXJnZSBtdWx0aXBsZSBhcnRpZmFjdHMsIHVzZSBhIFwiY3BcIiBjb21tYW5kLlxcJzsgZXhpdCAxOyB9ICYmIGxuIC1zIC0tIFwiJENPREVCVUlMRF9TUkNfRElSX2Zvb19iYXJfU291cmNlXCIgXCIuLi9zaWJsaW5nXCInLFxuICAgICAgICAgICAgICAgICdbICEgLWQgXCJzdWJcIiBdIHx8IHsgZWNobyBcXCdhZGRpdGlvbmFsSW5wdXRzOiBcInN1YlwiIG11c3Qgbm90IGV4aXN0IHlldC4gSWYgeW91IHdhbnQgdG8gbWVyZ2UgbXVsdGlwbGUgYXJ0aWZhY3RzLCB1c2UgYSBcImNwXCIgY29tbWFuZC5cXCc7IGV4aXQgMTsgfSAmJiBsbiAtcyAtLSBcIiRDT0RFQlVJTERfU1JDX0RJUl9QcmVidWlsZF9PdXRwdXRcIiBcInN1YlwiJyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWlsZDoge1xuICAgICAgICAgICAgICBjb21tYW5kczogW1xuICAgICAgICAgICAgICAgICdmYWxzZScsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pKSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmJlaGF2aW9yKCdDYW4gZWFzaWx5IHN3aXRjaCBvbiBwcml2aWxlZ2VkIG1vZGUgZm9yIHN5bnRoJywgKHN1aXRlKSA9PiB7XG4gIC8vIExlZ2FjeSBBUEkgZG9lcyBub3Qgc3VwcG9ydCB0aGlzXG4gIHN1aXRlLmRvZXNOb3RBcHBseS5sZWdhY3koKTtcblxuICBzdWl0ZS5tb2Rlcm4oKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBkb2NrZXJFbmFibGVkRm9yU3ludGg6IHRydWUsXG4gICAgICBjb21tYW5kczogWydMb29rQXRNZSddLFxuICAgIH0pO1xuXG4gICAgVGVtcGxhdGUuZnJvbVN0YWNrKHBpcGVsaW5lU3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDb2RlQnVpbGQ6OlByb2plY3QnLCB7XG4gICAgICBFbnZpcm9ubWVudDogTWF0Y2gub2JqZWN0TGlrZSh7XG4gICAgICAgIFByaXZpbGVnZWRNb2RlOiB0cnVlLFxuICAgICAgfSksXG4gICAgICBTb3VyY2U6IHtcbiAgICAgICAgQnVpbGRTcGVjOiBNYXRjaC5zZXJpYWxpemVkSnNvbihNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgICBwaGFzZXM6IHtcbiAgICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICAgICAgICAgJ0xvb2tBdE1lJyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuXG5iZWhhdmlvcignY2FuIHByb3ZpZGUgY3VzdG9tIEJ1aWxkU3BlYyB0aGF0IGlzIG1lcmdlZCB3aXRoIGdlbmVyYXRlZCBvbmUnLCAoc3VpdGUpID0+IHtcbiAgc3VpdGUubGVnYWN5KCgpID0+IHtcbiAgICBuZXcgTGVnYWN5VGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgIGNsb3VkQXNzZW1ibHlBcnRpZmFjdCxcbiAgICAgIHN5bnRoQWN0aW9uOiBuZXcgY2RrcC5TaW1wbGVTeW50aEFjdGlvbih7XG4gICAgICAgIHNvdXJjZUFydGlmYWN0LFxuICAgICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICAgIGVudmlyb25tZW50VmFyaWFibGVzOiB7XG4gICAgICAgICAgU09NRV9FTlZfVkFSOiB7IHZhbHVlOiAnU29tZVZhbHVlJyB9LFxuICAgICAgICB9LFxuICAgICAgICBlbnZpcm9ubWVudDoge1xuICAgICAgICAgIGVudmlyb25tZW50VmFyaWFibGVzOiB7XG4gICAgICAgICAgICBJTk5FUl9WQVI6IHsgdmFsdWU6ICdJbm5lclZhbHVlJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJpdmlsZWdlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5zdGFsbENvbW1hbmRzOiBbXG4gICAgICAgICAgJ2luc3RhbGwxJyxcbiAgICAgICAgICAnaW5zdGFsbDInLFxuICAgICAgICBdLFxuICAgICAgICBzeW50aENvbW1hbmQ6ICdzeW50aCcsXG4gICAgICAgIGJ1aWxkU3BlYzogY2J1aWxkLkJ1aWxkU3BlYy5mcm9tT2JqZWN0KHtcbiAgICAgICAgICBlbnY6IHtcbiAgICAgICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgICAgICBGT086ICdiYXInLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBoYXNlczoge1xuICAgICAgICAgICAgcHJlX2J1aWxkOiB7XG4gICAgICAgICAgICAgIGNvbW1hbmRzOiAnaW5zdGFsbEN1c3RvbScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2FjaGU6IHtcbiAgICAgICAgICAgIHBhdGhzOiBbJ25vZGVfbW9kdWxlcyddLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgbmV3IE1vZGVyblRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc3ludGg6IG5ldyBjZGtwLkNvZGVCdWlsZFN0ZXAoJ1N5bnRoJywge1xuICAgICAgICBpbnB1dDogY2RrcC5Db2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCd0ZXN0L3Rlc3QnLCAnbWFpbicpLFxuICAgICAgICBlbnY6IHtcbiAgICAgICAgICBTT01FX0VOVl9WQVI6ICdTb21lVmFsdWUnLFxuICAgICAgICB9LFxuICAgICAgICBidWlsZEVudmlyb25tZW50OiB7XG4gICAgICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZXM6IHtcbiAgICAgICAgICAgIElOTkVSX1ZBUjogeyB2YWx1ZTogJ0lubmVyVmFsdWUnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcml2aWxlZ2VkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBpbnN0YWxsQ29tbWFuZHM6IFtcbiAgICAgICAgICAnaW5zdGFsbDEnLFxuICAgICAgICAgICdpbnN0YWxsMicsXG4gICAgICAgIF0sXG4gICAgICAgIGNvbW1hbmRzOiBbJ3N5bnRoJ10sXG4gICAgICAgIHBhcnRpYWxCdWlsZFNwZWM6IGNidWlsZC5CdWlsZFNwZWMuZnJvbU9iamVjdCh7XG4gICAgICAgICAgZW52OiB7XG4gICAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgICAgRk9POiAnYmFyJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwaGFzZXM6IHtcbiAgICAgICAgICAgIHByZV9idWlsZDoge1xuICAgICAgICAgICAgICBjb21tYW5kczogWydpbnN0YWxsQ3VzdG9tJ10sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2FjaGU6IHtcbiAgICAgICAgICAgIHBhdGhzOiBbJ25vZGVfbW9kdWxlcyddLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBUSEVOX2NvZGVQaXBlbGluZUV4cGVjdGF0aW9uKCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIFRIRU5fY29kZVBpcGVsaW5lRXhwZWN0YXRpb24oKSB7XG4gICAgLy8gVEhFTlxuICAgIFRlbXBsYXRlLmZyb21TdGFjayhwaXBlbGluZVN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q29kZUJ1aWxkOjpQcm9qZWN0Jywge1xuICAgICAgRW52aXJvbm1lbnQ6IE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICBQcml2aWxlZ2VkTW9kZTogdHJ1ZSxcbiAgICAgICAgRW52aXJvbm1lbnRWYXJpYWJsZXM6IE1hdGNoLmFycmF5V2l0aChbXG4gICAgICAgICAge1xuICAgICAgICAgICAgTmFtZTogJ0lOTkVSX1ZBUicsXG4gICAgICAgICAgICBUeXBlOiAnUExBSU5URVhUJyxcbiAgICAgICAgICAgIFZhbHVlOiAnSW5uZXJWYWx1ZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSksXG4gICAgICB9KSxcbiAgICAgIFNvdXJjZToge1xuICAgICAgICBCdWlsZFNwZWM6IE1hdGNoLnNlcmlhbGl6ZWRKc29uKE1hdGNoLm9iamVjdExpa2Uoe1xuICAgICAgICAgIGVudjoge1xuICAgICAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgICAgIEZPTzogJ2JhcicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGhhc2VzOiB7XG4gICAgICAgICAgICBwcmVfYnVpbGQ6IHtcbiAgICAgICAgICAgICAgY29tbWFuZHM6IE1hdGNoLmFycmF5V2l0aChbJ2luc3RhbGxDdXN0b20nXSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnVpbGQ6IHtcbiAgICAgICAgICAgICAgY29tbWFuZHM6IFsnc3ludGgnXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjYWNoZToge1xuICAgICAgICAgICAgcGF0aHM6IFsnbm9kZV9tb2R1bGVzJ10sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmJlaGF2aW9yKCdzdGFja3Mgc3ludGhlc2l6ZWQgZm9yIHBpcGVsaW5lIHdpbGwgYmUgY2hlY2tlZCBkdXJpbmcgc3ludGgnLCAoc3VpdGUpID0+IHtcbiAgbGV0IHN0YWdlOiBPbmVTdGFja0FwcDtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgc3RhZ2UgPSBuZXcgT25lU3RhY2tBcHAocGlwZWxpbmVTdGFjaywgJ015QXBwJyk7XG4gIH0pO1xuXG4gIHN1aXRlLmxlZ2FjeSgoKSA9PiB7XG4gICAgLy8gV0hFTlxuICAgIGNvbnN0IHBpcGVsaW5lID0gbmV3IExlZ2FjeVRlc3RHaXRIdWJOcG1QaXBlbGluZShwaXBlbGluZVN0YWNrLCAnQ2RrJywge1xuICAgICAgc291cmNlQXJ0aWZhY3QsXG4gICAgICBjbG91ZEFzc2VtYmx5QXJ0aWZhY3QsXG4gICAgICBzeW50aEFjdGlvbjogbmV3IGNka3AuU2ltcGxlU3ludGhBY3Rpb24oe1xuICAgICAgICBzb3VyY2VBcnRpZmFjdCxcbiAgICAgICAgY2xvdWRBc3NlbWJseUFydGlmYWN0LFxuICAgICAgICBpbnN0YWxsQ29tbWFuZHM6IFsnaW5zdGFsbDEnLCAnaW5zdGFsbDInXSxcbiAgICAgICAgYnVpbGRDb21tYW5kczogWydidWlsZDEnLCAnYnVpbGQyJ10sXG4gICAgICAgIHRlc3RDb21tYW5kczogWyd0ZXN0MScsICd0ZXN0MiddLFxuICAgICAgICBzeW50aENvbW1hbmQ6ICdjZGsgc3ludGgnLFxuICAgICAgfSksXG4gICAgfSk7XG4gICAgcGlwZWxpbmUuYWRkQXBwbGljYXRpb25TdGFnZShzdGFnZSk7XG5cbiAgICBUSEVOKCk7XG4gIH0pO1xuXG4gIHN1aXRlLm1vZGVybigoKSA9PiB7XG4gICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgTW9kZXJuVGVzdEdpdEh1Yk5wbVBpcGVsaW5lKHBpcGVsaW5lU3RhY2ssICdDZGsnLCB7XG4gICAgICBpbnN0YWxsQ29tbWFuZHM6IFsnaW5zdGFsbDEnLCAnaW5zdGFsbDInXSxcbiAgICAgIGNvbW1hbmRzOiBbJ2J1aWxkMScsICdidWlsZDInLCAndGVzdDEnLCAndGVzdDInLCAnY2RrIHN5bnRoJ10sXG4gICAgfSk7XG4gICAgcGlwZWxpbmUuYWRkU3RhZ2Uoc3RhZ2UpO1xuXG4gICAgVEhFTigpO1xuICB9KTtcblxuICBmdW5jdGlvbiBUSEVOKCkge1xuICAgIC8vIEFsbCBzdGFja3MgaW4gdGhlIEFTTSBoYXZlIGJlZW4gc3ludGhlc2l6ZWQgd2l0aCAndmFsaWRhdGVPblN5bnRoOiB0cnVlJ1xuICAgIGNvbnN0IGFzbSA9IHN0YWdlLnN5bnRoKCk7XG4gICAgZm9yIChjb25zdCBzdGFjayBvZiBhc20uc3RhY2tzKSB7XG4gICAgICBleHBlY3Qoc3RhY2sudmFsaWRhdGVPblN5bnRoKS50b0VxdWFsKHRydWUpO1xuICAgIH1cbiAgfVxufSk7Il19