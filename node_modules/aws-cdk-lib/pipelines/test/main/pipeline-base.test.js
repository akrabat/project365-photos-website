"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("../../../core");
const constructs_1 = require("constructs");
const lib_1 = require("../../../core/lib");
const lib_2 = require("../../lib");
const testhelpers_1 = require("../testhelpers");
describe('pipeline base', () => {
    test('PipelineBase.isPipeline indicates that a construct extends PipelineBase', () => {
        const app = new lib_1.App();
        const pipelineStack = new cdk.Stack(app, 'PipelineStack', { env: testhelpers_1.PIPELINE_ENV });
        const construct = new constructs_1.Construct(pipelineStack, 'Construct');
        const pipeline = new class extends lib_2.PipelineBase {
            constructor() {
                super(pipelineStack, 'Pipeline', {
                    synth: new class {
                        constructor() {
                            this.primaryOutput = new lib_2.FileSet('PrimaryOutput');
                        }
                    }(),
                });
            }
            doBuildPipeline() { }
        }();
        expect(lib_2.PipelineBase.isPipeline(pipelineStack)).toStrictEqual(false);
        expect(lib_2.PipelineBase.isPipeline(construct)).toStrictEqual(false);
        expect(lib_2.PipelineBase.isPipeline(pipeline)).toStrictEqual(true);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGlwZWxpbmUtYmFzZS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicGlwZWxpbmUtYmFzZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXFDO0FBQ3JDLDJDQUF1QztBQUN2QywyQ0FBd0M7QUFDeEMsbUNBQW9FO0FBQ3BFLGdEQUE4QztBQUU5QyxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtJQUU3QixJQUFJLENBQUMseUVBQXlFLEVBQUUsR0FBRyxFQUFFO1FBQ25GLE1BQU0sR0FBRyxHQUFHLElBQUksU0FBRyxFQUFFLENBQUM7UUFDdEIsTUFBTSxhQUFhLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxlQUFlLEVBQUUsRUFBRSxHQUFHLEVBQUUsMEJBQVksRUFBRSxDQUFDLENBQUM7UUFDakYsTUFBTSxTQUFTLEdBQUcsSUFBSSxzQkFBUyxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUM1RCxNQUFNLFFBQVEsR0FBRyxJQUFJLEtBQU0sU0FBUSxrQkFBWTtZQUM3QztnQkFDRSxLQUFLLENBQUMsYUFBYSxFQUFFLFVBQVUsRUFBRTtvQkFDL0IsS0FBSyxFQUFFLElBQUk7d0JBQUE7NEJBQ08sa0JBQWEsR0FBRyxJQUFJLGFBQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQzt3QkFDL0QsQ0FBQztxQkFBQSxFQUFFO2lCQUNKLENBQUMsQ0FBQzthQUNKO1lBQ1MsZUFBZSxNQUFZO1NBQ3RDLEVBQUUsQ0FBQztRQUVKLE1BQU0sQ0FBQyxrQkFBWSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwRSxNQUFNLENBQUMsa0JBQVksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEUsTUFBTSxDQUFDLGtCQUFZLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hFLENBQUMsQ0FBQyxDQUFDO0FBRUwsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSAnLi4vLi4vLi4vY29yZSc7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbGliJztcbmltcG9ydCB7IFBpcGVsaW5lQmFzZSwgSUZpbGVTZXRQcm9kdWNlciwgRmlsZVNldCB9IGZyb20gJy4uLy4uL2xpYic7XG5pbXBvcnQgeyBQSVBFTElORV9FTlYgfSBmcm9tICcuLi90ZXN0aGVscGVycyc7XG5cbmRlc2NyaWJlKCdwaXBlbGluZSBiYXNlJywgKCkgPT4ge1xuXG4gIHRlc3QoJ1BpcGVsaW5lQmFzZS5pc1BpcGVsaW5lIGluZGljYXRlcyB0aGF0IGEgY29uc3RydWN0IGV4dGVuZHMgUGlwZWxpbmVCYXNlJywgKCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbiAgICBjb25zdCBwaXBlbGluZVN0YWNrID0gbmV3IGNkay5TdGFjayhhcHAsICdQaXBlbGluZVN0YWNrJywgeyBlbnY6IFBJUEVMSU5FX0VOViB9KTtcbiAgICBjb25zdCBjb25zdHJ1Y3QgPSBuZXcgQ29uc3RydWN0KHBpcGVsaW5lU3RhY2ssICdDb25zdHJ1Y3QnKTtcbiAgICBjb25zdCBwaXBlbGluZSA9IG5ldyBjbGFzcyBleHRlbmRzIFBpcGVsaW5lQmFzZSB7XG4gICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIocGlwZWxpbmVTdGFjaywgJ1BpcGVsaW5lJywge1xuICAgICAgICAgIHN5bnRoOiBuZXcgY2xhc3MgaW1wbGVtZW50cyBJRmlsZVNldFByb2R1Y2VyIHtcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBwcmltYXJ5T3V0cHV0ID0gbmV3IEZpbGVTZXQoJ1ByaW1hcnlPdXRwdXQnKTtcbiAgICAgICAgICB9KCksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcHJvdGVjdGVkIGRvQnVpbGRQaXBlbGluZSgpOiB2b2lkIHsgfVxuICAgIH0oKTtcblxuICAgIGV4cGVjdChQaXBlbGluZUJhc2UuaXNQaXBlbGluZShwaXBlbGluZVN0YWNrKSkudG9TdHJpY3RFcXVhbChmYWxzZSk7XG4gICAgZXhwZWN0KFBpcGVsaW5lQmFzZS5pc1BpcGVsaW5lKGNvbnN0cnVjdCkpLnRvU3RyaWN0RXF1YWwoZmFsc2UpO1xuICAgIGV4cGVjdChQaXBlbGluZUJhc2UuaXNQaXBlbGluZShwaXBlbGluZSkpLnRvU3RyaWN0RXF1YWwodHJ1ZSk7XG4gIH0pO1xuXG59KTsiXX0=