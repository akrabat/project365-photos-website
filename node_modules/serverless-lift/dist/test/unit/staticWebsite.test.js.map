{
  "version": 3,
  "sources": ["../../../test/unit/staticWebsite.test.ts"],
  "sourcesContent": ["import * as sinon from \"sinon\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\nimport { get } from \"lodash\";\nimport { baseConfig, pluginConfigExt, runServerless } from \"../utils/runServerless\";\nimport * as CloudFormationHelpers from \"../../src/CloudFormation\";\nimport { computeS3ETag } from \"../../src/utils/s3-sync\";\nimport { mockAws } from \"../utils/mockAws\";\n\ndescribe(\"static websites\", () => {\n    afterEach(() => {\n        sinon.restore();\n    });\n\n    it(\"should create all required resources\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    landing: {\n                        type: \"static-website\",\n                        path: \".\",\n                    },\n                },\n            }),\n        });\n        const bucketLogicalId = computeLogicalId(\"landing\", \"Bucket\");\n        const bucketPolicyLogicalId = computeLogicalId(\"landing\", \"Bucket\", \"Policy\");\n        const responseFunction = computeLogicalId(\"landing\", \"ResponseFunction\");\n        const cfDistributionLogicalId = computeLogicalId(\"landing\", \"CDN\");\n        const cfOriginId = computeLogicalId(\"landing\", \"CDN\", \"Origin1\");\n        expect(Object.keys(cfTemplate.Resources)).toStrictEqual([\n            \"ServerlessDeploymentBucket\",\n            \"ServerlessDeploymentBucketPolicy\",\n            bucketLogicalId,\n            bucketPolicyLogicalId,\n            responseFunction,\n            cfDistributionLogicalId,\n        ]);\n        expect(cfTemplate.Resources[bucketLogicalId]).toStrictEqual({\n            Type: \"AWS::S3::Bucket\",\n            UpdateReplacePolicy: \"Delete\",\n            DeletionPolicy: \"Delete\",\n            Properties: {\n                WebsiteConfiguration: {\n                    IndexDocument: \"index.html\",\n                },\n            },\n        });\n        expect(cfTemplate.Resources[bucketPolicyLogicalId]).toStrictEqual({\n            Type: \"AWS::S3::BucketPolicy\",\n            Properties: {\n                Bucket: {\n                    Ref: bucketLogicalId,\n                },\n                PolicyDocument: {\n                    Statement: [\n                        {\n                            Action: \"s3:GetObject\",\n                            Effect: \"Allow\",\n                            Principal: {\n                                AWS: \"*\",\n                            },\n                            Resource: { \"Fn::Join\": [\"\", [{ \"Fn::GetAtt\": [bucketLogicalId, \"Arn\"] }, \"/*\"]] },\n                        },\n                    ],\n                    Version: \"2012-10-17\",\n                },\n            },\n        });\n        expect(cfTemplate.Resources[cfDistributionLogicalId]).toStrictEqual({\n            Type: \"AWS::CloudFront::Distribution\",\n            Properties: {\n                DistributionConfig: {\n                    Comment: \"app-dev landing website CDN\",\n                    CustomErrorResponses: [\n                        {\n                            // The response code is forced to 200 and changed to /index.html\n                            ErrorCachingMinTTL: 0,\n                            ErrorCode: 404,\n                            ResponseCode: 200,\n                            ResponsePagePath: \"/index.html\",\n                        },\n                    ],\n                    DefaultCacheBehavior: {\n                        AllowedMethods: [\"GET\", \"HEAD\", \"OPTIONS\"],\n                        CachePolicyId: \"658327ea-f89d-4fab-a63d-7e88639e58f6\",\n                        Compress: true,\n                        TargetOriginId: cfOriginId,\n                        ViewerProtocolPolicy: \"redirect-to-https\",\n                        FunctionAssociations: [\n                            {\n                                EventType: \"viewer-response\",\n                                FunctionARN: {\n                                    \"Fn::GetAtt\": [responseFunction, \"FunctionARN\"],\n                                },\n                            },\n                        ],\n                    },\n                    DefaultRootObject: \"index.html\",\n                    Enabled: true,\n                    HttpVersion: \"http2\",\n                    IPV6Enabled: true,\n                    Origins: [\n                        {\n                            CustomOriginConfig: {\n                                OriginProtocolPolicy: \"http-only\",\n                                OriginSSLProtocols: [\"TLSv1.2\"],\n                            },\n                            DomainName: {\n                                \"Fn::Select\": [\n                                    2,\n                                    {\n                                        \"Fn::Split\": [\n                                            \"/\",\n                                            {\n                                                \"Fn::GetAtt\": [bucketLogicalId, \"WebsiteURL\"],\n                                            },\n                                        ],\n                                    },\n                                ],\n                            },\n                            Id: cfOriginId,\n                        },\n                    ],\n                },\n            },\n        });\n        expect(cfTemplate.Outputs).toMatchObject({\n            [computeLogicalId(\"landing\", \"BucketName\")]: {\n                Description: \"Name of the bucket that stores the static website.\",\n                Value: {\n                    Ref: bucketLogicalId,\n                },\n            },\n            [computeLogicalId(\"landing\", \"Domain\")]: {\n                Description: \"Website domain name.\",\n                Value: {\n                    \"Fn::GetAtt\": [cfDistributionLogicalId, \"DomainName\"],\n                },\n            },\n            [computeLogicalId(\"landing\", \"CloudFrontCName\")]: {\n                Description: \"CloudFront CNAME.\",\n                Value: {\n                    \"Fn::GetAtt\": [cfDistributionLogicalId, \"DomainName\"],\n                },\n            },\n            [computeLogicalId(\"landing\", \"DistributionId\")]: {\n                Description: \"ID of the CloudFront distribution.\",\n                Value: {\n                    Ref: cfDistributionLogicalId,\n                },\n            },\n        });\n        expect(cfTemplate.Resources[responseFunction]).toStrictEqual({\n            Type: \"AWS::CloudFront::Function\",\n            Properties: {\n                AutoPublish: true,\n                FunctionConfig: {\n                    Comment: \"app-dev-us-east-1-landing-response\",\n                    Runtime: \"cloudfront-js-1.0\",\n                },\n                FunctionCode: `function handler(event) {\n    var response = event.response;\n    response.headers = Object.assign({}, {\n    \"x-frame-options\": {\n        \"value\": \"SAMEORIGIN\"\n    },\n    \"x-content-type-options\": {\n        \"value\": \"nosniff\"\n    },\n    \"x-xss-protection\": {\n        \"value\": \"1; mode=block\"\n    },\n    \"strict-transport-security\": {\n        \"value\": \"max-age=63072000\"\n    }\n}, response.headers);\n    return response;\n}`,\n                Name: \"app-dev-us-east-1-landing-response\",\n            },\n        });\n    });\n\n    it(\"should support a custom domain\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    landing: {\n                        type: \"static-website\",\n                        path: \".\",\n                        domain: \"example.com\",\n                        certificate:\n                            \"arn:aws:acm:us-east-1:123456615250:certificate/0a28e63d-d3a9-4578-9f8b-14347bfe8123\",\n                    },\n                },\n            }),\n        });\n        const cfDistributionLogicalId = computeLogicalId(\"landing\", \"CDN\");\n        // Check that CloudFront uses the custom ACM certificate and custom domain\n        expect(cfTemplate.Resources[cfDistributionLogicalId]).toMatchObject({\n            Type: \"AWS::CloudFront::Distribution\",\n            Properties: {\n                DistributionConfig: {\n                    Aliases: [\"example.com\"],\n                    ViewerCertificate: {\n                        AcmCertificateArn:\n                            \"arn:aws:acm:us-east-1:123456615250:certificate/0a28e63d-d3a9-4578-9f8b-14347bfe8123\",\n                        MinimumProtocolVersion: \"TLSv1.2_2021\",\n                        SslSupportMethod: \"sni-only\",\n                    },\n                },\n            },\n        });\n        // The domain should be the custom domain, not the CloudFront one\n        expect(cfTemplate.Outputs).toMatchObject({\n            [computeLogicalId(\"landing\", \"Domain\")]: {\n                Description: \"Website domain name.\",\n                Value: \"example.com\",\n            },\n            [computeLogicalId(\"landing\", \"CloudFrontCName\")]: {\n                Description: \"CloudFront CNAME.\",\n                Value: {\n                    \"Fn::GetAtt\": [cfDistributionLogicalId, \"DomainName\"],\n                },\n            },\n        });\n    });\n\n    it(\"should support multiple custom domains\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    landing: {\n                        type: \"static-website\",\n                        path: \".\",\n                        domain: [\"example.com\", \"www.example.com\"],\n                        certificate:\n                            \"arn:aws:acm:us-east-1:123456615250:certificate/0a28e63d-d3a9-4578-9f8b-14347bfe8123\",\n                    },\n                },\n            }),\n        });\n        const cfDistributionLogicalId = computeLogicalId(\"landing\", \"CDN\");\n        // Check that CloudFront uses all the custom domains\n        expect(cfTemplate.Resources[cfDistributionLogicalId]).toMatchObject({\n            Type: \"AWS::CloudFront::Distribution\",\n            Properties: {\n                DistributionConfig: {\n                    Aliases: [\"example.com\", \"www.example.com\"],\n                },\n            },\n        });\n        // This should contain the first domain of the list\n        expect(cfTemplate.Outputs).toMatchObject({\n            [computeLogicalId(\"landing\", \"Domain\")]: {\n                Description: \"Website domain name.\",\n                Value: \"example.com\",\n            },\n            [computeLogicalId(\"landing\", \"CloudFrontCName\")]: {\n                Description: \"CloudFront CNAME.\",\n                Value: {\n                    \"Fn::GetAtt\": [cfDistributionLogicalId, \"DomainName\"],\n                },\n            },\n        });\n    });\n\n    it(\"should allow to customize security HTTP headers\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    landing: {\n                        type: \"static-website\",\n                        path: \".\",\n                        security: {\n                            allowIframe: true,\n                        },\n                    },\n                },\n            }),\n        });\n        const edgeFunction = computeLogicalId(\"landing\", \"ResponseFunction\");\n        expect(cfTemplate.Resources[edgeFunction]).toStrictEqual({\n            Type: \"AWS::CloudFront::Function\",\n            Properties: {\n                AutoPublish: true,\n                // Check that the `x-frame-options` header is not set\n                FunctionCode: `function handler(event) {\n    var response = event.response;\n    response.headers = Object.assign({}, {\n    \"x-content-type-options\": {\n        \"value\": \"nosniff\"\n    },\n    \"x-xss-protection\": {\n        \"value\": \"1; mode=block\"\n    },\n    \"strict-transport-security\": {\n        \"value\": \"max-age=63072000\"\n    }\n}, response.headers);\n    return response;\n}`,\n                FunctionConfig: {\n                    Comment: \"app-dev-us-east-1-landing-response\",\n                    Runtime: \"cloudfront-js-1.0\",\n                },\n                Name: \"app-dev-us-east-1-landing-response\",\n            },\n        });\n    });\n\n    it(\"should allow to redirect to the main domain\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    landing: {\n                        type: \"static-website\",\n                        path: \".\",\n                        domain: [\"www.example.com\", \"example.com\"],\n                        certificate:\n                            \"arn:aws:acm:us-east-1:123456615250:certificate/0a28e63d-d3a9-4578-9f8b-14347bfe8123\",\n                        redirectToMainDomain: true,\n                    },\n                },\n            }),\n        });\n        const cfDistributionLogicalId = computeLogicalId(\"landing\", \"CDN\");\n        const requestFunction = computeLogicalId(\"landing\", \"RequestFunction\");\n        const responseFunction = computeLogicalId(\"landing\", \"ResponseFunction\");\n        expect(cfTemplate.Resources[requestFunction]).toMatchInlineSnapshot(`\n            Object {\n              \"Properties\": Object {\n                \"AutoPublish\": true,\n                \"FunctionCode\": \"function handler(event) {\n                var request = event.request;\n                if (request.headers[\\\\\"host\\\\\"].value !== \\\\\"www.example.com\\\\\") {\n                    return {\n                        statusCode: 301,\n                        statusDescription: \\\\\"Moved Permanently\\\\\",\n                        headers: {\n                            location: {\n                                value: \\\\\"https://www.example.com\\\\\" + request.uri\n                            }\n                        }\n                    };\n                }\n                return request;\n            }\",\n                \"FunctionConfig\": Object {\n                  \"Comment\": \"app-dev-us-east-1-landing-request\",\n                  \"Runtime\": \"cloudfront-js-1.0\",\n                },\n                \"Name\": \"app-dev-us-east-1-landing-request\",\n              },\n              \"Type\": \"AWS::CloudFront::Function\",\n            }\n        `);\n\n        expect(\n            get(\n                cfTemplate.Resources[cfDistributionLogicalId],\n                \"Properties.DistributionConfig.DefaultCacheBehavior.FunctionAssociations\"\n            )\n        ).toMatchInlineSnapshot(`\n        Array [\n          Object {\n            \"EventType\": \"viewer-response\",\n            \"FunctionARN\": Object {\n              \"Fn::GetAtt\": Array [\n                \"${responseFunction}\",\n                \"FunctionARN\",\n              ],\n            },\n          },\n          Object {\n            \"EventType\": \"viewer-request\",\n            \"FunctionARN\": Object {\n              \"Fn::GetAtt\": Array [\n                \"${requestFunction}\",\n                \"FunctionARN\",\n              ],\n            },\n          },\n        ]\n    `);\n    });\n\n    it(\"should allow to customize the error page\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    landing: {\n                        type: \"static-website\",\n                        path: \".\",\n                        // We do not set a leading `/` on purpose: we want to check\n                        // that Lift will add it\n                        errorPage: \"my/custom/error.html\",\n                    },\n                },\n            }),\n        });\n\n        const cfDistributionLogicalId = computeLogicalId(\"landing\", \"CDN\");\n        const bucketLogicalId = computeLogicalId(\"landing\", \"Bucket\");\n        const responseFunction = computeLogicalId(\"landing\", \"ResponseFunction\");\n        const cfOriginId = computeLogicalId(\"landing\", \"CDN\", \"Origin1\");\n        expect(cfTemplate.Resources[cfDistributionLogicalId]).toStrictEqual({\n            Type: \"AWS::CloudFront::Distribution\",\n            Properties: {\n                DistributionConfig: {\n                    Comment: \"app-dev landing website CDN\",\n                    CustomErrorResponses: [\n                        {\n                            // The response code is forced to 404 and changed to /error.html\n                            ErrorCachingMinTTL: 0,\n                            ErrorCode: 404,\n                            ResponseCode: 404,\n                            ResponsePagePath: \"/my/custom/error.html\",\n                        },\n                    ],\n                    DefaultCacheBehavior: {\n                        AllowedMethods: [\"GET\", \"HEAD\", \"OPTIONS\"],\n                        CachePolicyId: \"658327ea-f89d-4fab-a63d-7e88639e58f6\",\n                        Compress: true,\n                        TargetOriginId: cfOriginId,\n                        ViewerProtocolPolicy: \"redirect-to-https\",\n                        FunctionAssociations: [\n                            {\n                                EventType: \"viewer-response\",\n                                FunctionARN: {\n                                    \"Fn::GetAtt\": [responseFunction, \"FunctionARN\"],\n                                },\n                            },\n                        ],\n                    },\n                    DefaultRootObject: \"index.html\",\n                    Enabled: true,\n                    HttpVersion: \"http2\",\n                    IPV6Enabled: true,\n                    Origins: [\n                        {\n                            CustomOriginConfig: {\n                                OriginProtocolPolicy: \"http-only\",\n                                OriginSSLProtocols: [\"TLSv1.2\"],\n                            },\n                            DomainName: {\n                                \"Fn::Select\": [\n                                    2,\n                                    {\n                                        \"Fn::Split\": [\n                                            \"/\",\n                                            {\n                                                \"Fn::GetAtt\": [bucketLogicalId, \"WebsiteURL\"],\n                                            },\n                                        ],\n                                    },\n                                ],\n                            },\n                            Id: cfOriginId,\n                        },\n                    ],\n                },\n            },\n        });\n    });\n\n    it(\"should validate the error page path\", async () => {\n        await expect(() => {\n            return runServerless({\n                command: \"package\",\n                config: Object.assign(baseConfig, {\n                    constructs: {\n                        landing: {\n                            type: \"static-website\",\n                            path: \".\",\n                            errorPage: \"./error.html\",\n                        },\n                    },\n                }),\n            });\n        }).rejects.toThrowError(\n            \"The 'errorPage' option of the 'landing' static website cannot start with './' or '../'. (it cannot be a relative path).\"\n        );\n        await expect(() => {\n            return runServerless({\n                command: \"package\",\n                config: Object.assign(baseConfig, {\n                    constructs: {\n                        landing: {\n                            type: \"static-website\",\n                            path: \".\",\n                            errorPage: \"../error.html\",\n                        },\n                    },\n                }),\n            });\n        }).rejects.toThrowError(\n            \"The 'errorPage' option of the 'landing' static website cannot start with './' or '../'. (it cannot be a relative path).\"\n        );\n    });\n\n    it(\"should synchronize files to S3\", async () => {\n        const awsMock = mockAws();\n        sinon.stub(CloudFormationHelpers, \"getStackOutput\").resolves(\"bucket-name\");\n        /*\n         * This scenario simulates the following:\n         * - index.html is up to date, it should be ignored\n         * - styles.css has changes, it should be updated to S3\n         * - scripts.js is new, it should be created in S3\n         * - image.jpg doesn't exist on disk, it should be removed from S3\n         */\n        awsMock.mockService(\"S3\", \"listObjectsV2\").resolves({\n            IsTruncated: false,\n            Contents: [\n                {\n                    Key: \"index.html\",\n                    ETag: computeS3ETag(\n                        fs.readFileSync(path.join(__dirname, \"../fixtures/staticWebsites/public/index.html\"))\n                    ),\n                },\n                { Key: \"styles.css\" },\n                { Key: \"image.jpg\" },\n            ],\n        });\n        const putObjectSpy = awsMock.mockService(\"S3\", \"putObject\");\n        const deleteObjectsSpy = awsMock.mockService(\"S3\", \"deleteObjects\").resolves({\n            Deleted: [\n                {\n                    Key: \"image.jpg\",\n                },\n            ],\n        });\n        const cloudfrontInvalidationSpy = awsMock.mockService(\"CloudFront\", \"createInvalidation\");\n\n        await runServerless({\n            fixture: \"staticWebsites\",\n            configExt: pluginConfigExt,\n            command: \"landing:upload\",\n        });\n\n        // scripts.js and styles.css were updated\n        sinon.assert.callCount(putObjectSpy, 2);\n        expect(putObjectSpy.firstCall.firstArg).toEqual({\n            Bucket: \"bucket-name\",\n            Key: \"scripts.js\",\n            Body: fs.readFileSync(path.join(__dirname, \"../fixtures/staticWebsites/public/scripts.js\")),\n            ContentType: \"application/javascript\",\n        });\n        expect(putObjectSpy.secondCall.firstArg).toEqual({\n            Bucket: \"bucket-name\",\n            Key: \"styles.css\",\n            Body: fs.readFileSync(path.join(__dirname, \"../fixtures/staticWebsites/public/styles.css\")),\n            ContentType: \"text/css\",\n        });\n        // image.jpg was deleted\n        sinon.assert.calledOnce(deleteObjectsSpy);\n        expect(deleteObjectsSpy.firstCall.firstArg).toEqual({\n            Bucket: \"bucket-name\",\n            Delete: {\n                Objects: [\n                    {\n                        Key: \"image.jpg\",\n                    },\n                ],\n            },\n        });\n        // A CloudFront invalidation was triggered\n        sinon.assert.calledOnce(cloudfrontInvalidationSpy);\n    });\n\n    it(\"allows overriding static website properties\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    landing: {\n                        type: \"static-website\",\n                        path: \".\",\n                        extensions: {\n                            distribution: {\n                                Properties: {\n                                    DistributionConfig: {\n                                        Comment: \"This is my comment\",\n                                    },\n                                },\n                            },\n                            bucket: {\n                                Properties: {\n                                    ObjectLockEnabled: true,\n                                },\n                            },\n                        },\n                    },\n                },\n            }),\n        });\n        expect(cfTemplate.Resources[computeLogicalId(\"landing\", \"CDN\")].Properties).toMatchObject({\n            DistributionConfig: {\n                Comment: \"This is my comment\",\n            },\n        });\n        expect(cfTemplate.Resources[computeLogicalId(\"landing\", \"Bucket\")].Properties).toMatchObject({\n            ObjectLockEnabled: true,\n        });\n    });\n\n    it(\"trims CloudFront function names to stay under the limit\", async () => {\n        const { cfTemplate, computeLogicalId } = await runServerless({\n            command: \"package\",\n            options: {\n                stage: \"super-long-stage-name\",\n            },\n            config: Object.assign(baseConfig, {\n                constructs: {\n                    \"suuuper-long-construct-name\": {\n                        type: \"static-website\",\n                        path: \".\",\n                        domain: [\"foo.com\", \"bar.com\"],\n                        certificate: \"arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234\",\n                        redirectToMainDomain: true,\n                    },\n                },\n            }),\n        });\n        expect(cfTemplate.Resources[computeLogicalId(\"suuuper-long-construct-name\", \"RequestFunction\")]).toMatchObject({\n            Type: \"AWS::CloudFront::Function\",\n            Properties: {\n                Name: \"app-super-long-stage-name-us-east-1-suuuper-long-construc-f3b7e1\",\n            },\n        });\n        expect(cfTemplate.Resources[computeLogicalId(\"suuuper-long-construct-name\", \"ResponseFunction\")]).toMatchObject(\n            {\n                Type: \"AWS::CloudFront::Function\",\n                Properties: {\n                    Name: \"app-super-long-stage-name-us-east-1-suuuper-long-construc-8c1f76\",\n                },\n            }\n        );\n    });\n});\n"],
  "mappings": "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",
  "names": []
}
